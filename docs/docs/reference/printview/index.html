<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.143.1">
<link rel="canonical" type="text/html" href="https://butler-sos.ptarmiganlabs.com/docs/reference/">
<link rel="alternate" type="application/rss&#43;xml" href="https://butler-sos.ptarmiganlabs.com/docs/reference/index.xml">
<meta name="robots" content="noindex, nofollow">
<script defer data-domain="butler-sos.ptarmiganlabs.com" src="https://plausible.io/js/script.js"></script>

<link rel="canonical" href="https://butler-sos.ptarmiganlabs.com/docs/reference/" />



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Reference docs | Butler SOS</title>
<meta name="description" content="Technical reference docs and general sources of information that might be useful.
">
<meta property="og:url" content="https://butler-sos.ptarmiganlabs.com/docs/reference/">
  <meta property="og:site_name" content="Butler SOS">
  <meta property="og:title" content="Reference docs">
  <meta property="og:description" content="Technical reference docs and general sources of information that might be useful.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="website">

  <meta itemprop="name" content="Reference docs">
  <meta itemprop="description" content="Technical reference docs and general sources of information that might be useful.">
  <meta itemprop="dateModified" content="2025-03-15T23:56:39+01:00">
  <meta itemprop="wordCount" content="130">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Reference docs">
  <meta name="twitter:description" content="Technical reference docs and general sources of information that might be useful.">
<link rel="preload" href="/scss/main.min.48c25d0a5a23a1e8cae94d6c5e7622061e5345cf098171b1d6ee41d8e309e6c8.css" as="style" integrity="sha256-SMJdClojoejK6U1sXnYiBh5TRc8JgXGx1u5B2OMJ5sg=" crossorigin="anonymous">
<link href="/scss/main.min.48c25d0a5a23a1e8cae94d6c5e7622061e5345cf098171b1d6ee41d8e309e6c8.css" rel="stylesheet" integrity="sha256-SMJdClojoejK6U1sXnYiBh5TRc8JgXGx1u5B2OMJ5sg=" crossorigin="anonymous">
<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="/css/prism.css"/>

  </head>
  <body class="td-section">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg width="200" height="109" viewBox="0 0 200 109" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><image id="image" width="200" height="109" xlink:href="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QBMRXhpZgAATU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAyKADAAQAAAABAAAAbQAAAAD/7QA4UGhvdG9zaG9wIDMuMAA4QklNBAQAAAAAAAA4QklNBCUAAAAAABDUHYzZjwCyBOmACZjs+EJ+/8AAEQgAbQDIAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/bAEMAAgICAgICAwICAwUDAwMFBgUFBQUGCAYGBgYGCAoICAgICAgKCgoKCgoKCgwMDAwMDA4ODg4ODw8PDw8PDw8PD//bAEMBAgICBAQEBwQEBxALCQsQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEP/dAAQADf/aAAwDAQACEQMRAD8A+B6KKK/Cz/SQKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9D4Hooor8LP9JAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/0fgeiiivws/0kCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/S+B6KKK/Cz/SQKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9P4Hooor8LP9JAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/1Pgeiiivws/0kCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/V+B6KKK/Cz/SQKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9k="/></defs><use id="Background-Layer" xlink:href="#image" x="0" y="0" width="200" height="109"/><defs><image id="image-1" width="65" height="95" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABfCAYAAAC3K6quAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAQaADAAQAAAABAAAAXwAAAAAjR4mgAAAQc0lEQVR4Ae2cB2xd1RnHvzc84h3HzsB24iQOGwJhd4BApWwQG4QQQ4CoWlQk2oot2qKqhVYMiUJQoewpKAVKWYEISiEEwswiJCELnGU7y+v5vdff/9rXuX5+03l+tsr7pOtz371n/s+3znfOte9JswYzq+H6XlEBo42YbZtmtioYMLuR31d8rxBgsFEugHhjldml/u/b4OONNw8CqATjITOSz8SmLrn3Ph7oGi4aNSBowJFg0IITJljhbrtZoKzMenp6rHPzZutYu9Z8W7daEXmGg3VHBQhhBucbN84mn3++1R13nJVPm2YFlZUWDoWsfeNG2/D557b4qaesZe5cqwAYafZscsaIgyAAbOJEO/S++6z+mGMsCAf4fDuHWNXYaBNnzbIpP/2pzf3jH23Vgw9abWdnVoEYDu7SsNIiiYAP9v/hI4/Y1NNOs4Ly8gEAuJX4AwEb29BgR998s1WecYZt4rcDnpthF9MRBSEyZow1XXmlTfrxj9MaRhWAHXnNNdaKuGylBM5OVmjEQBAXFM+YYQ0nn2zB4uK0B9M4c6ZNP/dcW0OJ7rRLJc84ciDA0pUMqLKpKXkPY94GKHfImWfaxpIS6+Cda0ZjsmX0c8RAkDkshxMK0QOZUsPuu1ugvt62UTAbIjFyIDCjhZhBH2mmVIIuCVRXO5yQDRAyMpGOQ4P5CnP5IxFT93caswyHEo1aODw0HR+h7S78haGVHtzPzDgBOZyCNt/v7rutZexY20F9Q54JANi+fr31dGeu3lpaW62VsnKaskFpcULY77cwGrzi8MNtz6uvtrHI5KodO2zhHXfYONzZMTgvQWZHiKbLGX68wZaFC60Dt7h80qSMxrLo00+t49tvrYRSmc1i/GaSghCB7YP48bVHHWV1p5xi4wGhYvJkp6bjAeOw00+39R99ZCtfftk2vvOO+fHxx/A2HSn3Iw5bvvjCmhlQGfbfB9DpUHt7u7308MM2Hk4qpUB6pZLXnBCECJ0qOeAA2+tXv7KG44+3ItjfSwWFhTYe7a6r6cQTbQV+/bw//cm2zJtnlX36wps/9l6dj6xbZ188/rjtdthhVoqiS0Vh6n371Vdt2Wuv2cFkFuDpcl6yugNnm51ChoO8maQAA7iph95zj00+4QQrKBXmiakAUalBRMr33NMWM7PR775zVnypOhhgUBu+/to2U3UT3OZPwg1ROOfzTz6x+2+4wcZTponfEodUbSTqtcoxESsY6z/jgtBNZ/a/7TabftZZaZswLXqqEZUOAPnyrbesoqsrpfVQRwrR8svefddWbthg9ThPhShfiYa7iHIsAXUtgMNu+/nPrRDx2x8AxJfpiF06IAwShx5Kley3nzWdd16i8gmfa1AzEY05cNCm+fNtIr8HNcAz18tzOI7f0jLrHnrInkTJ1h15pNU0NlpJXzxh86ZNtmzZMnv/+eetdMECm0leVzBlItWmKDbtfZre34F9RM6D48db/TnnDMmTU5Nja2qsCSW6GnmvRvP7mEVH/nkncxrFU/Th7PjgGAVO1PnomjU2EZE78NRTbQucsOjjj235Z59ZOXqi6cAD7UcAU7Vliy0D2Cryl0+fbr7aWgt1dFiE+ntIw1gr3UdRnIUozUx8mAEgBKi4BhEogS2Xo7kDdKiIq5hOB+m8H5YvVuf7vLwQZq6LhqWwOulIN6ayi3R3rEgp9n/L008b02gByo1lpVjLYCr32MOKaaewosLxGNcvXWr/vuwyKyfPOPTQfkccYQcffbRtwxeQ8i1HIQdJv0DEugBAsz/50kttxoUXWoTBRrlC9KGL/KHt2231e+/ZZ3fdZVV9kSiXQyiWkAaA0MHsfXrnnbYOZ6iZwe6gcRN3FBHYYuBTDjrIrrr9dqufOtWpcMnixfbbX//aOpYssQIGHeGKchUBxgRkvZFcNcz2rN//3vb5xS/MD5Cx9B2dXUHdTbwII+utcM/899+3N5591qY3NtqxTEoDFqgHkELkkbgaXFMGYPFoCpGpFUSj1hGkkZil41AN6JV+jOMqY2YbYasQlxoV+krr9t3XKj2WYhps+SO4ZiHmsVGDJ4/q0AV8VgB4TRdfbHsy0/EAIIszMMfzpK33mMH5aP6VcGGNFCyctujee60Ry9HNLMuIamZdnaLysaT3UzHp82bPtgmAqr7oWTJSnn6S7DqdJ3WNotug5FnO0HaucvSGqBRAToEtm1980Spha3VSdTjEzJUhz3vBuqlMrFM3Mr2Z2ZcynUy9R9xyi63DIixHIYafe84Rqd14N6DDvS0N+lszZYptg4MlqumY0f4+e2sScnqhSwpGlxpvh/2X4h2GYHeXGvfe22Zdcomt5YE4xi0XRQyaLr/cqrE02Ds3e8JU9YsLxeQCU3qjnTqM2ZRT3UCqRXfcDvPcS+PwQA2dIx2SDqVTp1OPhlEAsl899pi1oTtckpI88Wc/wzbOtBYealYlv7VEjKYTPfaKgRyeZKQ2BIYfrnj9oots6d//bsWIpp7p0mSkQ9VYqJK6OtNUJW+xt7a0QVB2yby0/TxkN4zic6kM1I+/9lrbSIBE8l28zz52yK23WgFWxaVt27bZAkxcp4eL3HexqZSZZn86l7gi1eDlUHkBLkABV6M4FXnSpKSijEDQTMGgthJuWPnBBwPqPvDYY632Jz+xNmZh/1tusUqCoV569YUX7ME//9lZAnufx7tXp6SbJM8CJJUwrVq1yrajOF2StzkJi9LOg6yDoEbEliXY5Hm41Z3Mrkuy54fAwo1XXWX1AOKlr1CaD/3ud+ZH67ezrsiEUgGguj5kQr7ziKieTcJySRykp1JRRpygytQpWY42ls5LWNFJcYm0+Dn0pJPs1Ouus2LEw6UdmL47brzRSjB9U/ABugHBy7puPm+qyJWPDZkQ9SjkkkquF+Jdrv7mG28VVotOCCEWEtpU5TMGQS2pUBlcsPTRRwcoSXmVBQVi4F7qxnd4gaXyWpa+8vmrYNlOZkxeXiJSh6MM/gfPPGO1RLFaqTNx7t5a2gF33aJFA6qcyGIuio6Sg5WKhgSCuKEIZbQVz24F7mzEoyTdBjXbi2H/N/72N2ti8FJ0hViXTsJicncTkeoO43p/iJO06O23rUuusSdzrHj08L6dRVYLnOalSsQzUFWV1t7EkEBQYypYwAwshhs62tq87Tv37Zi5fzzwgIWJAUwDEImQD+C6WlosGgc0bwUBOGgj6w4/y+YqyibrZIi8IXRUe3PzgMko1poHJZ2OOCWr39uvQfeakTF0sA2XefErrwx6/86cOTYfKzID11dLXzWkqwdwooCRjGQSFZ0aT/2yRl4T6eUK1eGYatoIKWgLp7kURCxL8Gz1JLaMm8dNhwyCKhAQZczqx4TVmrEAstcKoy8mgHoffsM09IbEwNUSyq81QCoQlE8d0+BTdTBEezrHoPMLXrEMAEIFIIgTkkPea/HINjRSZ7WL2IlS+hdRn3pWfFvo0FusAapZWc7gnSMGnurDWItUIGjmFOSVXhEIakdXPJJ+icAJCtUxC/1Z5MlW4nq39tXT/yLOjcz+LpE6WcnVhoKchwxvoeNVcEAdz+TtqQF3AEq11HbNKj/jUoQV5F7EEtfiYTazVillcF6R8BZyzC1AODEOBuySTLbiISGeRehTMtplEFS5OjiWhsqJ/kjvCxhV7M4itzuJDicDQd0N427XshxeA2Ct6JsxHhB2DrO3SoEgzvKzavRu6el5NzoiFQCqJSsgqCINWK5uSmKGkpHDLWj754hVtiA6YyXvSQp4QfCuVvVcEScBnqy8qs4aCEn6OeCVM1seth3wsu+HFGkl0SHpEwHrhS2WsbVOcKLTcII3ZC8QtMXnLdtX/aAk5yAEFKrzgCBW7hbr0jV5d64b5XKWZnHnerU3j6yQSwE8SlkCH/XGioMOfqXiAtWTUxA0i1JW3i23KjT4LLbz6vAfFNbzAYgz26Ri5f579ZbfReiUEs/BjiBWQAFZRa91tsklcYJ8CIGZCoicgqAOFhI6887YNJa8v7n/frfvGadaq2gHLErq5TABJvOZCgA1mI7IZNyxZAWcI3oplGOy8rHvCuGCEs5ARuACd9dKecRBEpvRBwIdLWZDxcu2sYPK9LfrFPUArBcEcYK813TEIbecwKxpUeMVh0wHHS+/Nm1C4i6vwiWj3OhRBYLY00/0eAznHbINwnRimh19OsAFSfqgk/XETlXpvhmc5pQTChCFUiJGA9h2cJ8yftIECGuWL7dPcd1b2N3exPVfVrEbOCYQu3aJV3nurAOsOga2LSXslW1qaGy0CrjsASJR1RztU8S7ZcUKm0iMQRu4qZRjzkCI4sxMYqO1jE5mm2QmT+Aowevsf5QxeMUgJnMp0pnOuaaciYNkdD07WG2rV6O4HRcoa1hswsX+jBWsgjzaIBQAE7liAzKJGswZCDqt9g37inP+8AdryzDsnqjzer6Wsw23X3+9LWC3qhYQtEEk9pZCTCUGZHEodyDQXDmrwnVPPGEv0entrBR3lZoB855bb7WvCePNwhyKC4Yi3zkDQQPWinACQDTzfcPTv/yltWPChko6yjebsxJfwgGz2NqbQkVDPc2WUxA0YM1UPWzbSghuzl/+Yt2E14dCszlI+j5now5CzGRvJAbpsn9sezkHQR0QEBMUKic2GWL1mClJrc4n4tREHQ3cD5UD3HZHBATNmAInJQqIuD3JIBUIZZRVKF+B3l0dxK6Wz6Dr2c0q7Z+tzmernuyOMMe1jVoQtAzWEcFc0FDM6rD3SwA8junTucmzL7jAiogcDSeNSk7YwC7z7Jtusg/Y7G3hu4bhplEJgiLQ8v6mksqKDDeNShA0aHmXcoBy0cFctKExjWrKg8D05EHIg9ArpXlOyHNCnhN6EchzQp4T8pzQj0BeHPLi0M8MeT8hLw55cciLQz8CeXEYBeKgjZekmy8EWhNSsncJC8V/MXLWgf3IMBup3u8r3S46B7PZYjMunUqNJZ110Fe66nwSmGKLJfw9YiDo5OpWTpW0cnkPbehU+odz55pxYr6H77I3891E7PcR+vpNx3F2dQ/SRSXuvxNxXw53qq359Qy2nP+pUMqHW/p69j9vvmlP8A1lHZ/z1LJZq/+kUcb7Cv4NkcBYwlc1f+UTw0L+UeU0OpjOB+HxxiEOggOc/6nie8ZsNr+viJdxuJ/p4PYmDmhvYIBB/vHkZh3i4MTZJAa+FxyhQ1fbOAD6Leefi/gnFO3cL+VL+nKO/OyLSOhIjqLSQyGBwM7TGxwVv3REd6DUeA0nTIo4crORS7vMOtal1D1vVMVgCziFtp7zDKIDuPRFjb62ydaexIiCwDicswoakP4tgA7wS0m5BzA1W7rXO7G93rvPlOrKBo04CBqEBq4rEWmww9nRZG0n6tP/3fMgikXHyNbCag538cdJOQ3S747oXmgpFQJu6t47D/ve8Sw2T99r5d75Tg/derjvz+M+c1PvO295VQa55dzUqbPvh/vMSakvbn49DPK5zV18LvUom98+gPC7F4N2frspsumnIj81+pTqN2Wde/0mX/87N4+bX++wBM573bvPlboX7N5fl7e83uudynvzeOtgHFTrTJRS596tV3VxOWfg9Uzj0+++fF9xs/1/4HO+WP+fUnIAAAAASUVORK5CYII="/></defs><use id="Butler" xlink:href="#image-1" x="6" y="4" width="65" height="95"/><defs><text id="string" transform="matrix(1.0 0.0 0.0 1.0 20.045454545460004 16.51333333334)" fill="#fff" font-family="HelveticaNeue-Bold, Helvetica Neue" y="34" x="55.98623999999998" font-size="34.848" text-decoration="none">Butler</text></defs><use id="Butler-1" xlink:href="#string"/><defs><text id="string-1" transform="matrix(1.0 0.0 0.0 1.0 55.86363636364 54.400000000000006)" fill="#fff" font-family="HelveticaNeue-BoldItalic, Helvetica Neue" y="17" x="83.862624" font-size="17.424" text-decoration="none">SOS</text></defs><use id="BUTLER-copy" xlink:href="#string-1"/></svg></span><span class="navbar-brand__name">Butler SOS</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/about/"><span>About</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="/docs/"><span>Documentation</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/community/"><span>Community</span></a>
      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/docs/reference/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Reference docs</h1>
<div class="lead">Technical reference docs and general sources of information that might be useful.</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-45eb8994961db260c7bffb6dc530996d">Command line options</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2: <a href="#pg-b224ef866cfa84ce3ec13452bc419a8c">Config file format</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>3: <a href="#pg-7498139bb0a571d254834061181e3157">Available Metrics</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>3.1: <a href="#pg-c37c040476ce40f3021dc2975240119e">Available metrics: InfluxDB</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>3.2: <a href="#pg-3a5782be907ab37fcd71f782ea6c6c2c">Available Metrics: New Relic</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>3.3: <a href="#pg-d9368053cab4888224d02b24aa450a89">Available Metrics: Prometheus</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  

    </ul>


<div class="content">
      <h2 id="references-in-this-site">References in this site</h2>
<h3 id="config-file-format">Config file format</h3>
<p>A detailed description of all configuration options in the main config file is available <a href="/docs/reference/config_file_format/">here</a>.</p>
<h3 id="available-metrics">Available metrics</h3>
<p>A complete list of all metrics provided by Butler SOS is found <a href="/docs/reference/available_metrics/">here</a>.</p>
<h2 id="useful-references-out-there">Useful references out there</h2>
<h3 id="qlik-sense-apis">Qlik Sense APIs</h3>
<p>Qlik&rsquo;s API documentation is found <a href="https://help.qlik.com/en-US/sense-developer/February2021/Content/Sense_Helpsites/APIs-and-SDKs.htm">here</a>.</p>
<h3 id="influxdb">InfluxDB</h3>
<p>InfluxDB docs <a href="https://docs.influxdata.com/influxdb/v1.8/">here</a>.</p>
<p>Note that Butler SOS was developed with InfluxDB 1.x in mind. It is <strong>not</strong> currently compatible with InfluxDB 2.x.</p>
<h3 id="prometheus">Prometheus</h3>
<p>Prometheus docs <a href="https://prometheus.io">here</a>.</p>
<h3 id="grafana">Grafana</h3>
<p>Grafana docs <a href="https://grafana.com/docs/">here</a>.</p>
<h3 id="mqtt">MQTT</h3>
<p>There are various MQTT brokers available, both commercial and open source.<br>
<a href="https://mosquitto.org/">Mosquitto</a> is an open sourceMQTT broker with a solid track record and available as a Docker container.</p>
<p>There are also plenty of companies offering SaaS MQTT brokers, ranging from small specialized companies to the big cloud providers.</p>

</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-45eb8994961db260c7bffb6dc530996d">1 - Command line options</h1>
    <div class="lead">Description of Butler SOS&rsquo; command line options.</div>
	<!-- 

<div class="pageinfo pageinfo-primary">
<p>This is a placeholder page that shows you how to use this template site.</p>

</div>
 -->
<h2 id="command-line-options">Command line options</h2>
<p>When starting Butler SOS, you can pass command line options to customize its behavior.<br>
Looks like this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>Usage: butler-sos <span style="color:#ce5c00;font-weight:bold">[</span>options<span style="color:#ce5c00;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Butler SenseOps Stats <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Butler-SOS&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span> is a microservice publishing operational Qlik Sense metrics to InfluxDB, Prometheus and New Relic.
</span></span><span style="display:flex;"><span>User events and log events can be forwarded from Sense to Butler SOS and <span style="color:#204a87;font-weight:bold">then</span> acted upon there. Events can be stored in InfluxDB and sent to New Relic.
</span></span><span style="display:flex;"><span>Add Grafana <span style="color:#204a87;font-weight:bold">for</span> great looking dashboards and you get real-time monitoring of what happens inside a Qlik Sense environment.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Options:
</span></span><span style="display:flex;"><span>  -V, --version                        output the version number
</span></span><span style="display:flex;"><span>  -c, --configfile &lt;file&gt;              path to config file
</span></span><span style="display:flex;"><span>  -l, --loglevel &lt;level&gt;               log level <span style="color:#ce5c00;font-weight:bold">(</span>choices: <span style="color:#4e9a06">&#34;error&#34;</span>, <span style="color:#4e9a06">&#34;warn&#34;</span>, <span style="color:#4e9a06">&#34;info&#34;</span>, <span style="color:#4e9a06">&#34;verbose&#34;</span>, <span style="color:#4e9a06">&#34;debug&#34;</span>, <span style="color:#4e9a06">&#34;silly&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>  --new-relic-account-name  &lt;name...&gt;  New Relic account name. Used within Butler SOS to differentiate between different target New Relic accounts
</span></span><span style="display:flex;"><span>  --new-relic-api-key &lt;key...&gt;         insert API key to use with New Relic
</span></span><span style="display:flex;"><span>  --new-relic-account-id &lt;id...&gt;       New Relic account ID
</span></span><span style="display:flex;"><span>  --skip-config-verification           Disable config file verification <span style="color:#ce5c00;font-weight:bold">(</span>default: <span style="color:#204a87">false</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>  -h, --help                           display <span style="color:#204a87">help</span> <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#204a87">command</span>
</span></span></code></pre></div><h2 id="-v---version">-V, &ndash;version</h2>
<p>Output the version number of Butler SOS.</p>
<h2 id="-c---configfile">-c, &ndash;configfile</h2>
<p>Specifies the configuration file to use.</p>
<p>Valid values: A path to a configuration file.</p>
<p>Default: Whatever is specified in the <code>NODE_ENV</code> environment variable, with a .yaml extension added. Butler SOS will look for that file in the <code>./config</code> directory.</p>
<p>Example:</p>
<ul>
<li><code>-c</code> or <code>--configfile</code> are not specified. <code>NODE_ENV</code> is set to <code>production</code>. Butler SOS will try to read settings from <code>./config/production.yaml</code>.</li>
</ul>
<h2 id="-l---loglevel">-l, &ndash;loglevel</h2>
<p>Specifies the log level to use.<br>
When set, this overrides the log level specified in the configuration file.</p>
<p>Valid values: &rsquo;error&rsquo;, &lsquo;warn&rsquo;, &lsquo;info&rsquo;, &lsquo;verbose&rsquo;, &lsquo;debug&rsquo;, &lsquo;silly&rsquo;</p>
<p>Default: &lsquo;info&rsquo;</p>
<h2 id="new-relic-related-options">New Relic related options</h2>
<p>When using New Relic as backend for storing metrics, you can specify New Relic credentials in the config file - but that is not ideal from a security perspective.</p>
<p>To avoid that, you can specify the New Relic credentials on the command line using the following options.</p>
<h3 id="--new-relic-account-name">&ndash;new-relic-account-name</h3>
<p>List of New Relic account names. Used within Butler SOS to differentiate between different target New Relic accounts to which data can be sent. This name has nothing to do with the account name used in New Relic - it&rsquo;s purely for Butler SOS&rsquo; internal use.<br>
Specifically, it&rsquo;s at multiple places in the config file where you can specify to which New Relic account to send data.</p>
<p>Enclose account names in quotes if they contain spaces.<br>
Separate multiple account names with a space.</p>
<p>Example: <code>--new-relic-account-name &quot;Account 1&quot; &quot;Account 2&quot;</code></p>
<h3 id="--new-relic-api-key">&ndash;new-relic-api-key</h3>
<p>List of New Relic API keys. Used to authenticate with New Relic.</p>
<p>Enclose API keys in quotes if they contain spaces.<br>
Separate multiple API keys with a space. Note that the order of the API keys must match the order of the account names, i.e. the first API key corresponds to the first account name, the second API key corresponds to the second account name, and so on.</p>
<p>Example: <code>--new-relic-api-key &quot;API key 1&quot; &quot;API key 2&quot;</code></p>
<h3 id="--new-relic-account-id">&ndash;new-relic-account-id</h3>
<p>List of New Relic account IDs. Used to identify the New Relic account to which data should be sent.</p>
<p>Enclose account IDs in quotes if they contain spaces.<br>
Separate multiple account IDs with a space. Note that the order of the account IDs must match the order of the account names, i.e. the first account ID corresponds to the first account name, the second account ID corresponds to the second account name, and so on.</p>
<h2 id="--skip-config-verification">&ndash;skip-config-verification</h2>
<p>Disable config file verification.</p>
<p>By default, Butler SOS verifies the config file when it starts. If the config file is invalid, Butler SOS will log an error and exit.<br>
Use this option to disable config file verification.</p>
<h2 id="-h---help">-h, &ndash;help</h2>
<p>Display help for command.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-b224ef866cfa84ce3ec13452bc419a8c">2 - Config file format</h1>
    <div class="lead">Everything you ever wanted to know about the Butler SOS configuration file.</div>
	<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>The config file uses YAML notation, with file extensions of .yaml or .yml.<br>
The .yaml extension is recommended.</p></div>

<p>The config file is the heart of Butler SOS.<br>
All setting must be defined in the config file - run time errors are likely to occur otherwise.</p>
<p>A sample config file is included in the release ZIP files, and also <a href="https://raw.githubusercontent.com/ptarmiganlabs/butler-sos/master/src/config/production_template.yaml">available on GitHub</a>.</p>
<p>A few things to keep in mind:</p>
<ul>
<li>Topic names (e.g. &ldquo;Butler-SOS.logLevel&rdquo;) are case sensitive.</li>
<li>First time Butler SOS is started, a new check is done if the specified InfluxDB database already exists.
If it doesn&rsquo;t exist it will be created together with a default InfluxDB retention policy. The retention policy is based on the time period set in the config file.</li>
</ul>
<h4 id="top-level">Top level</h4>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td></td>
          <td></td>
      </tr>
      <tr>
          <td>logLevel</td>
          <td>The level of details in the logs. Possible values are silly, debug, verbose, info, warn, error (in order of decreasing level of detail).</td>
      </tr>
      <tr>
          <td>fileLogging</td>
          <td>true/false to enable/disable logging to disk file</td>
      </tr>
      <tr>
          <td>logDirectory</td>
          <td>Subdirectory where log files are stored</td>
      </tr>
      <tr>
          <td>anonTelemetry</td>
          <td>Can Butler SOS share anonymous data about itself with the Butler SOS project? More info on what data is collected <a href="/docs/about/telemetry/">here</a>.</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosconfigvisualisation">Butler-SOS.configVisualisation</h4>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>enable</td>
          <td>Should Butler SOS&rsquo; config file be visualized in a web UI? true/false</td>
      </tr>
      <tr>
          <td>host</td>
          <td>Hostname or IP address where the web server will listen. Should be localhost or the host&rsquo;s IP address in most cases.</td>
      </tr>
      <tr>
          <td>port</td>
          <td>Port where the web server will listen. Change if port 3100 is already in use.</td>
      </tr>
      <tr>
          <td>obfuscate</td>
          <td>Should the config file shown in the web UI be obfuscated? true/false</td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosheartbeat">Butler-SOS.heartbeat</h4>
<p>Heartbeats can be used to send &ldquo;I&rsquo;m alive&rdquo; messages to some other tool, e.g. an infrastructure monitoring tool.<br>
The concept is simple: The remoteURL will be called at the specified frequency. The receiving tool will then know that Butler SOS is alive.</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>enable</td>
          <td>Should heartbeats be sent to some URL, indicating that Butler SOS is alive and well? true/false</td>
      </tr>
      <tr>
          <td>remoteURL</td>
          <td>URL that will be called for heartbeats</td>
      </tr>
      <tr>
          <td>frequency</td>
          <td>How often should heartbeats be sent? Format according to <a href="https://bunkat.github.io/later/parsers.html#text">https://bunkat.github.io/later/parsers.html#text</a></td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosdockerhealthcheck">Butler-SOS.dockerHealthCheck</h4>
<p>Docker health checks are used when running Butler SOS as a Docker container.</p>
<p>The Docker engine will call the container&rsquo;s health check REST endpoint with a set interval to determine whether the container is alive/well or not.<br>
If you are <em>not</em> running Butler SOS in Docker you can disable this feature.</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>enable</td>
          <td>Should a Docker healthcheck endpoint be created within Butler SOS? Set to false if <em>not</em> running Butler SOS under Docker. true/false</td>
      </tr>
      <tr>
          <td>port</td>
          <td>Port the healthcheck should use. Usually 12398, but might need be changed if several Butler instances run on the same server</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosuptimemonitor">Butler-SOS.uptimeMonitor</h4>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>enable</td>
          <td>Should messages with Butler SOS uptime and memory usage be written to console and logs? true/false</td>
      </tr>
      <tr>
          <td>frequency</td>
          <td>How often should uptime messages be written to console and/or logs? Format according to <a href="https://bunkat.github.io/later/parsers.html#text">https://bunkat.github.io/later/parsers.html#text</a></td>
      </tr>
      <tr>
          <td>logLevel</td>
          <td>Starting at what log level should uptime messages be used? Possible values are silly, debug, verbose, info, warn, error. For example, if you specify &ldquo;verbose&rdquo; here, uptime messages will appear if you set overall log level to silly, debug or verbose.</td>
      </tr>
      <tr>
          <td>storeInInfluxdb.<br>butlerSOSMemoryUsage</td>
          <td>Should data on Butler SOS&rsquo; own memory use be stored in Infludb? true/false</td>
      </tr>
      <tr>
          <td>storeInInfluxdb.<br>instanceTag</td>
          <td>Tag used to differentiate data from multiple Butler SOS instances. Useful if running different Butler SOS instances against (for example) DEV, TEST and PROD environments</td>
      </tr>
      <tr>
          <td>storeNewRelic.<br>enable</td>
          <td>Should uptime data be sent to New Relic? true/false</td>
      </tr>
      <tr>
          <td>storeNewRelic.<br>destinationAccount</td>
          <td>Array of New Relic account names to which uptime data will be sent</td>
      </tr>
      <tr>
          <td>storeNewRelic.<br>metric.dynamic.<br>butlerMemoryUsage.enable</td>
          <td>Should Butler SOS memory metrics be sent to New Relic? true/false</td>
      </tr>
      <tr>
          <td>storeNewRelic.<br>metric.dynamic.<br>butlerUptime.enable</td>
          <td>Should Butler uptime (days, hours, minutes since startup) be sent to New Relic? true/false</td>
      </tr>
      <tr>
          <td>storeNewRelic.<br>attribute.static</td>
          <td>Array of attributes which will be added to all uptime metrics sent to New Relic</td>
      </tr>
      <tr>
          <td>storeNewRelic.<br>attribute.dynamic.<br>butlerVersion.enable</td>
          <td>Should uptime metrics be tagged with Butler SOS version number? true/false</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosthirdpartytoolscredentials">Butler-SOS.thirdPartyToolsCredentials</h4>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>newRelic</td>
          <td>Array of credentials for the New Relic accounts to which data should be sent. Each array item consists of several items, see below.</td>
      </tr>
      <tr>
          <td>newRelic[]<br>accountName</td>
          <td>Name of New Relic account. This is a &ldquo;friendly name&rdquo; that&rsquo;s used within Butler SOS to identify each NR account.</td>
      </tr>
      <tr>
          <td>newRelic[]<br>insertApiKey</td>
          <td>Insert API key associated with the NR account. Get this from the NR account&rsquo;s settings page.</td>
      </tr>
      <tr>
          <td>newRelic[]<br>accountId</td>
          <td>New Relic account id. Get this from the NR account&rsquo;s settings page.</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosuserevents">Butler-SOS.userEvents</h4>
<p>Track individual users opening/closing apps and starting/stopping sessions.<br>
Requires log appender XML file(s) to be added to Sense server(s).</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>enable</td>
          <td>Should Butler SOS track detailed user events (i.e. session start/stop, connection open/close)? true/false</td>
      </tr>
      <tr>
          <td>excludeUser</td>
          <td>Array of users (=directory/userId pairs) that should be disregarded when user events arrive from Sense. Remove sample users before deploying Butler SOS.</td>
      </tr>
      <tr>
          <td>udpServerConfig.<br>serverHost</td>
          <td>IP/host where the user event UDP server should listen for incoming connections. Usually the same IP/host as where Butler SOS is running. Using 0.0.0.0 will cause Butler SOS to listen on all available IPs.</td>
      </tr>
      <tr>
          <td>udpServerConfig.<br>portUserActivityEvents</td>
          <td>Port on which the user event UDP server will listen. Should match the port specified in the log appender.</td>
      </tr>
      <tr>
          <td>tags</td>
          <td>Array of tags (tagName/tagValue pairs) that should be added to each user event before sending it to InfluxDB. Remove sample tags before deploying Butler SOS.</td>
      </tr>
      <tr>
          <td>sendToMQTT.enable</td>
          <td>Should user events be sent to MQTT? true/false</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo.<br>everythingTopic.enable</td>
          <td>Should <strong>all</strong> user event messages be sent to an MQTT topic? true/false</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo.<br>everythingTopic.topic</td>
          <td>MQTT topic to which <strong>all</strong> user event messages will be sent.</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo.<br>sessionStartTopic.enable</td>
          <td>Should <strong>session start</strong> user event messages be sent to an MQTT topic? true/false</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo.<br>sessionStartTopic.topic</td>
          <td>MQTT topic to which <strong>session start</strong> user event messages will be sent.</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo.<br>sessionStopTopic.enable</td>
          <td>Should <strong>session stop</strong> user event messages be sent to an MQTT topic? true/false</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo.<br>sessionStopTopic.topic</td>
          <td>MQTT topic to which <strong>session stop</strong> user event messages will be sent.</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo.<br>connectionOpenTopic.enable</td>
          <td>Should <strong>connection open</strong> user event messages be sent to an MQTT topic? true/false</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo.<br>connectionOpenTopic.topic</td>
          <td>MQTT topic to which <strong>connection open</strong> user event messages will be sent.</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo.<br>connectionCloseTopic.enable</td>
          <td>Should <strong>connection close</strong> user event messages be sent to an MQTT topic? true/false</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo.<br>connectionCloseTopic.topic</td>
          <td>MQTT topic to which <strong>connection close</strong> user event messages will be sent.</td>
      </tr>
      <tr>
          <td>sendToInfluxdb.enable</td>
          <td>Should user events be saved in InfluxDB? true/false</td>
      </tr>
      <tr>
          <td>sendToNewRelic.enable</td>
          <td>Should user events be saved in New Relic? true/false</td>
      </tr>
      <tr>
          <td>sendToNewRelic.destinationAccount</td>
          <td>Array of New Relic account names to which user events will be sent.</td>
      </tr>
      <tr>
          <td>sendToNewRelic.scramble</td>
          <td>Should <code>user directory</code> and <code>user ID</code> fields be scrambled before user events are sent to New Relic? true/false</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-soslogevents">Butler-SOS.logEvents</h4>
<p>Log events are used to capture Sense warnings, errors and fatals in real time.
Requires log appender XML file(s) to be added to Sense server(s).</p>
<p>Note that log events can be enabled/disabled per source (repository, proxy, scheduler etc).</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>udpServerConfig.<br>serverHost</td>
          <td>IP/host where the log event UDP server should listen for incoming connections. Usually the same IP/host as where Butler SOS is running. Using 0.0.0.0 will cause Butler SOS to listen on all available IPs.</td>
      </tr>
      <tr>
          <td>udpServerConfig.<br>portLogEvents</td>
          <td>Port on which the log event UDP server will listen. Should match the port specified in the log appender.</td>
      </tr>
      <tr>
          <td>tags</td>
          <td>Array of tags (tagName/tagValue pairs) that should be added to each log event before sending it to InfluxDB. Remove sample tags before deploying Butler SOS.</td>
      </tr>
      <tr>
          <td>source.<br>engine.enable</td>
          <td>Should log events from the engine service be handled by Butler SOS? true/false</td>
      </tr>
      <tr>
          <td>source.<br>proxy.enable</td>
          <td>Should log events from the proxy service be handled by Butler SOS? true/false</td>
      </tr>
      <tr>
          <td>source.<br>repository.enable</td>
          <td>Should log events from the repository service be handled by Butler SOS? true/false</td>
      </tr>
      <tr>
          <td>source.<br>scheduler.enable</td>
          <td>Should log events from the scheduler service be handled by Butler SOS? true/false</td>
      </tr>
      <tr>
          <td>categorise.enable</td>
          <td>Should categorization of log events be enabled? true/false</td>
      </tr>
      <tr>
          <td>categorise.rules</td>
          <td>Array of rules that will be used to categorise log events. Each rule consists of a set of properties.</td>
      </tr>
      <tr>
          <td>categorise.rules[].<br>description</td>
          <td>Description of the rule.</td>
      </tr>
      <tr>
          <td>categorise.rules[].<br>logLevel[]</td>
          <td>Array of log levels that will be used to match log events against this rule.</td>
      </tr>
      <tr>
          <td>categorise.rules[].<br>action</td>
          <td>Action to take if a log event matches this rule. Possible values are &ldquo;categorise&rdquo; and &ldquo;drop&rdquo;.</td>
      </tr>
      <tr>
          <td>categorise.rules[].<br>category[]</td>
          <td>Array of name-value pairs that will be added to the log event if it matches this rule.</td>
      </tr>
      <tr>
          <td>categorise.rules[].<br>category[].name</td>
          <td>Name of the category.</td>
      </tr>
      <tr>
          <td>categorise.rules[].<br>category[].value</td>
          <td>Value of the category.</td>
      </tr>
      <tr>
          <td>categorise.rules[].<br>filter[]</td>
          <td>Array of type-value pairs that will be used to match log events against this rule.</td>
      </tr>
      <tr>
          <td>categorise.rules[].<br>filter[].type</td>
          <td>Type of filter. Possible values are &ldquo;sw&rdquo; = starts with, &ldquo;ew&rdquo; = ends with, &ldquo;so&rdquo; = substring of.</td>
      </tr>
      <tr>
          <td>categorise.ruleDefault</td>
          <td>Default values for categorization, if no other rule matches.</td>
      </tr>
      <tr>
          <td>categorise.ruleDefault.<br>enable</td>
          <td>Should the default rule be used? true/false</td>
      </tr>
      <tr>
          <td>categorise.ruleDefault.<br>category[]</td>
          <td>Array of name-value pairs that will be added to the log event if no other rule matches.</td>
      </tr>
      <tr>
          <td>categorise.ruleDefault.<br>category[].name</td>
          <td>Name of the category.</td>
      </tr>
      <tr>
          <td>categorise.ruleDefault.<br>category[].value</td>
          <td>Value of the category.</td>
      </tr>
      <tr>
          <td>sendToMQTT.enable</td>
          <td>Should log events be sent to MQTT? true/false</td>
      </tr>
      <tr>
          <td>sendToMQTT.baseTopic</td>
          <td>Root MQTT topic. All log events MQTT messages will be posted in this topic or subtopics of it.</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo<br>.baseTopic</td>
          <td>Should all log events be posted to the root topic? true/false</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo<br>.subsystemTopics</td>
          <td>All log events originate from a specific subsystem in a Sense server. These subsystems are organized in a hierarchical tree that can be directly mapped to MQTT topics. Should log events be posted as MQTT messages to such topics? true/false</td>
      </tr>
      <tr>
          <td>sendToInfluxdb.enable</td>
          <td>Should log events be saved in InfluxDB? true/false</td>
      </tr>
      <tr>
          <td>sendToNewRelic.enable</td>
          <td>Should log events be sent to New Relic? true/false</td>
      </tr>
      <tr>
          <td>sendToNewRelic.destinationAccount</td>
          <td>Array of New Relic account names to which log events will be sent.</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.engine.enable</td>
          <td>Should log events from the engine service be handled?</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.engine.logLevel.error</td>
          <td>Should ERROR log events from the engine service be handled?</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.engine.logLevel.warn</td>
          <td>Should WARN log events from the engine service be handled?</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.proxy.enable</td>
          <td>Should log events from the proxy service be handled?</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.proxy.logLevel.error</td>
          <td>Should ERROR log events from the proxy service be handled</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.proxy.logLevel.warn</td>
          <td>Should WARN log events from the proxy service be handled</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.repository.enable</td>
          <td>Should log events from the repository service be handled?</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.repository.logLevel.error</td>
          <td>Should ERROR log events from the repository service be handled</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.repository.logLevel.warn</td>
          <td>Should WARN log events from the repository service be handled</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.scheduler.enable</td>
          <td>Should log events from the scheduler service be handled?</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.scheduler.logLevel.error</td>
          <td>Should ERROR log events from the scheduler service be handled</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.scheduler.logLevel.warn</td>
          <td>Should WARN log events from the scheduler service be handled</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-soscert">Butler-SOS.cert</h4>
<p>Certificates to use when connecting to Sense. Get these from the Certificate Export in QMC.</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>clientCert</td>
          <td>Certificate file. Exported from QMC</td>
      </tr>
      <tr>
          <td>clientCertKey</td>
          <td>Certificate key file. Exported from QMC</td>
      </tr>
      <tr>
          <td>clientCertCA</td>
          <td>Root certificate for above certificate files. Exported from QMC</td>
      </tr>
      <tr>
          <td>clientCertPassphrase</td>
          <td>Password used to protect the certificate (as set when exporting cert from QMC)</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosmqttconfig">Butler-SOS.mqttConfig</h4>
<p>MQTT config parameters. These must be correctly defined for any other MQTT features in Butler SOS to work.</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>enable</td>
          <td>Should health metrics be sent to MQTT? true/false</td>
      </tr>
      <tr>
          <td>brokerHost</td>
          <td>IP or FQDN of MQTT broker</td>
      </tr>
      <tr>
          <td>brokerPort</td>
          <td>Broker port</td>
      </tr>
      <tr>
          <td>baseTopic</td>
          <td>Default topic used if not not otherwise specified elsewhere. Should end with /. For example butler-sos/</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosnewrelic">Butler-SOS.newRelic</h4>
<p>If enabled, select Butler SOS metrics and events will be sent to New Relic.</p>
<p>Note that New Relic destination accounts for events are defined in the <code>Butler-SOS.userEvent</code> and <code>Butler-SOS.logEvent</code> sections, whereas destination accounts for metrics are defined in this section (<code>Butler-SOS.newRelic</code>).</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>enable</td>
          <td>Should Qlik Sense health metrics be sent to New Relic? true/false</td>
      </tr>
      <tr>
          <td>event.url</td>
          <td>Which API URL should be used for sending events to New Relic?<br>At time of this writing the options are<br><a href="https://insights-collector.eu01.nr-data.net">https://insights-collector.eu01.nr-data.net</a><br><a href="https://insights-collector.newrelic.com">https://insights-collector.newrelic.com</a><br>More info here: <a href="https://docs.newrelic.com/docs/accounts/accounts-billing/account-setup/choose-your-data-center">https://docs.newrelic.com/docs/accounts/accounts-billing/account-setup/choose-your-data-center</a></td>
      </tr>
      <tr>
          <td>event.header</td>
          <td>Array of name/value pairs that will be added as http headers to all calls to the New Relic event API</td>
      </tr>
      <tr>
          <td>event.attribute.<br>static</td>
          <td>Array of name/value pairs, representing attributes/tags that will be added to all events sent to New Relic</td>
      </tr>
      <tr>
          <td>event.attribute.<br>dynamic.butlerSosVersion.<br>enable</td>
          <td>Should Butler SOS&rsquo; version be attached as an attribute to events sent to New Relic? true/false</td>
      </tr>
      <tr>
          <td>metric.destinationAccount</td>
          <td>Array of New Relic account names to which Sense health metrics will be sent.</td>
      </tr>
      <tr>
          <td>metric.url</td>
          <td>Which API URL should be used for sending Sense health metrics to New Relic?<br>At time of this writing the options are<br><a href="https://insights-collector.eu01.nr-data.net/metric/v1">https://insights-collector.eu01.nr-data.net/metric/v1</a><br><a href="https://metric-api.newrelic.com/metric/v1">https://metric-api.newrelic.com/metric/v1</a></td>
      </tr>
      <tr>
          <td>metric.header</td>
          <td>Array of name/value pairs that will be added as http headers to all calls to the New Relic metric API</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>engine.memory.<br>enable</td>
          <td>Send Sense memory metrics to New Relic? true/false</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>engine.cpu.<br>enable</td>
          <td>Send Sense CPU metrics to New Relic? true/false</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>engine.calls.<br>enable</td>
          <td>Send metrics about calls to the Sense engine to New Relic? true/false</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>engine.selections.<br>enable</td>
          <td>Send metrics about number of selections made in Sense apps to New Relic? true/false</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>engine.sessions.<br>enable</td>
          <td>Send aggregated Sense engine session metrics to New Relic? true/false</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>engine.users.<br>enable</td>
          <td>Send aggregated Sense user metrics to New Relic? true/false</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>engine.saturated.<br>enable</td>
          <td>Send Sense engine saturation status to New Relic? true/false</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>apps.docCount.<br>enable</td>
          <td>Send metrics on loaded/active/in-memory Sense apps to New Relic? true/false</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>apps.activeDocs.<br>enable</td>
          <td>Should data on what docs are active in engine be sent to New Relic (true/false)?</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>apps.loadedDocs.<br>enable</td>
          <td>Should data on what docs are loaded (=having open sessions or connections) in engine be sent to New Relic (true/false)?</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>apps.inMemoryDocs.<br>enable</td>
          <td>Should data on what docs are in engine memory be sent to New Relic (true/false)?</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>cache.cache.<br>enable</td>
          <td>Send Sense cache metrics to New Relic? true/false</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>proxy.sessions.<br>enable</td>
          <td>Send aggregated Sense proxy metrics to New Relic? true/false</td>
      </tr>
      <tr>
          <td>metric.attribute.<br>static</td>
          <td>Array of name/value pairs, representing attributes/tags that will be added to all Sense health metrics sent to New Relic</td>
      </tr>
      <tr>
          <td>metric.attribute.<br>dynamic.butlerSosVersion.<br>enable</td>
          <td>Should Butler SOS&rsquo; version be attached as an attribute to Sense health metrics sent to New Relic? true/false</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosprometheus">Butler-SOS.prometheus</h4>
<p>If enabled, select Butler SOS metrics will be exposed on a Prometheus compatible URL from where they can be scraped by Prometheus.</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>enable</td>
          <td>Should health metrics be made available for scraping on a Prometheus compatible API http endpoint? true/false</td>
      </tr>
      <tr>
          <td>host</td>
          <td>IP on which the Prometheus compatible endpoint should be available. Using 0.0.0.0 will cause Butler SOS to listen on all available IPs.</td>
      </tr>
      <tr>
          <td>port</td>
          <td>Port on which the Prometheus compatible endpoint will be made available. Default 9842.</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosinfluxdbconfig">Butler-SOS.influxdbConfig</h4>
<p>InfluxDB config parameters. These must be correctly defined for any other InfluxDB features in Butler SOS to work.</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>enable</td>
          <td>Should health metrics be stored in Influxdb? true/false</td>
      </tr>
      <tr>
          <td>host</td>
          <td>IP or FQDN of Influxdb server.</td>
      </tr>
      <tr>
          <td>port</td>
          <td>Port where Influxdb server is listening. Useful if Influxdb for some reason is not using its standard port of 8086. <br>NOTE: Must be set to a value (for example 8086), otherwise this config entry will be flagged as invalid when the config file format is verified on startup.</td>
      </tr>
      <tr>
          <td>version</td>
          <td>Influxdb version. Valid values are 1 and 2.</td>
      </tr>
      <tr>
          <td>v2Config.org</td>
          <td>Organization name to use when connecting to Influxdb v2.</td>
      </tr>
      <tr>
          <td>v2Config.bucket</td>
          <td>Bucket name to use when connecting to Influxdb v2.</td>
      </tr>
      <tr>
          <td>v2Config.description</td>
          <td>Description of the Inflluxdb bucket.</td>
      </tr>
      <tr>
          <td>v2Config.token</td>
          <td>Token to use when connecting to Influxdb v2.</td>
      </tr>
      <tr>
          <td>v2Config.retentionDuration</td>
          <td>Retention duration for the Influxdb bucket.</td>
      </tr>
      <tr>
          <td>v1Config.<br>auth.enable</td>
          <td>Enable if data is to be stored in a password protected Influxdb v1 database.</td>
      </tr>
      <tr>
          <td>v1Config.<br>auth.username</td>
          <td>Influxdb username.</td>
      </tr>
      <tr>
          <td>v1Config.<br>auth.password</td>
          <td>Influxdb password.</td>
      </tr>
      <tr>
          <td>v1Config.dbName</td>
          <td>Name of Influxdb v1 database to use.</td>
      </tr>
      <tr>
          <td>v1Config.<br>retentionPolicy.name</td>
          <td>Name of default retention policy that will be created in InfluxDB database when that database is created during first execution of Butler SOS.</td>
      </tr>
      <tr>
          <td>v1Config.<br>retentionPolicy.duration</td>
          <td>Duration during which metrics are kept in InfluxDB. After the duration has passed, InfluxDB will purge all data older than duration from the database. See <a href="https://docs.influxdata.com/influxdb/v1.8/query_language/spec/#durations">InfluxDB docs</a> for details on syntax.</td>
      </tr>
      <tr>
          <td>includeFields.<br>activeDocs</td>
          <td>Should a list of currently active Sense apps be stored in Influxdb? true/false</td>
      </tr>
      <tr>
          <td>includeFields.<br>loadedDocs</td>
          <td>Should a list of Sense apps opened in a user session be stored in Influxdb? true/false</td>
      </tr>
      <tr>
          <td>includeFields.<br>activeDocs</td>
          <td>Should a list of Sense apps loaded into memory (some apps might not currently be associated with a user session) be stored in Influxdb? true/false</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosappnames">Butler-SOS.appNames</h4>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>enableAppNameExtract</td>
          <td>Should app names be extracted from Qlik Sense server? true/false</td>
      </tr>
      <tr>
          <td>extractInterval</td>
          <td>How often (milliseconds) should app names be extracted from Sense server?</td>
      </tr>
      <tr>
          <td>hostIP</td>
          <td>IP or FQDN of Sense server from which app names should be extracted</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosusersessions">Butler-SOS.userSessions</h4>
<p>Extract user session data per virtual proxy.</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>enableSessionExtract</td>
          <td>Influxdb password</td>
      </tr>
      <tr>
          <td>pollingInterval</td>
          <td>Influxdb password</td>
      </tr>
      <tr>
          <td>excludeUser</td>
          <td>Array of users (=directory/userId pairs) that should be disregarded when user session data arrives from Sense.</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosserverstomonitor">Butler-SOS.serversToMonitor</h4>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>pollingInterval</td>
          <td>How often to query the Sense healthcheck API</td>
      </tr>
      <tr>
          <td>rejectUnauthorized</td>
          <td>Set to false to ignore warnings/errors caused by Qlik Sense&rsquo;s self-signed certificates. <br> Set to true if the Qlik Sense root CA is available on the computer where Butler SOS is running.</td>
      </tr>
      <tr>
          <td>serverTagsDefinition</td>
          <td>List of tags to add to each server when storing the data in Influxdb. All tags defined here MUST be present in each server&rsquo;s definition section further down in the config file!</td>
      </tr>
      <tr>
          <td>servers</td>
          <td>Array of servers to monitor. For each server a set of properties MUST be defined.</td>
      </tr>
      <tr>
          <td>servers.<br>host</td>
          <td>FQDN of server. Domain should match that of the certificate exported from QMC - otherwise certificate warnings may appear. NOTE: You need to specify the port too - should be :4747 unless it&rsquo;s been changed from default value (<em>very</em> unusual to change this).</td>
      </tr>
      <tr>
          <td>servers.<br>serverName</td>
          <td>Human friendly server name</td>
      </tr>
      <tr>
          <td>servers.<br>serverDescription</td>
          <td>Human friendly server description</td>
      </tr>
      <tr>
          <td>servers.<br>userSessions.<br>enable</td>
          <td>Control whether user session data should be retrieved for this server</td>
      </tr>
      <tr>
          <td>servers.<br>userSessions.<br>host</td>
          <td>Host and port from which to retrieve user session data. Usually on the form servername.mydomain.net:4243</td>
      </tr>
      <tr>
          <td>servers.<br>userSessions.<br>virtualProxies</td>
          <td>A list of key-value pairs. Use to specify for which virtual proxies on this server user session data should be retrieved.</td>
      </tr>
      <tr>
          <td>serverTags</td>
          <td>A list of key-value pairs. Use to provide more metadata for servers. Can then (among other things) be used to created more advanced Grafana dashboards.</td>
      </tr>
      <tr>
          <td>headers</td>
          <td>A list of key-value pairs. Headers specified here will be used when retrieving metrics from this Sense server.</td>
      </tr>
  </tbody>
</table>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-7498139bb0a571d254834061181e3157">3 - Available Metrics</h1>
    <div class="lead">In order to create graphs in for example Grafana, you must understand what metrics are available and how they are structured.</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-c37c040476ce40f3021dc2975240119e">3.1 - Available metrics: InfluxDB</h1>
    <div class="lead">In order to create dashboards in for example Grafana, you must understand what metrics are available and how they are structured.</div>
	<h2 id="influxdb">InfluxDB</h2>
<p>Metrics retrieved from the Sense servers can be stored in an <a href="https://www.influxdata.com/products/influxdb-overview/">InfluxDB</a> database. You don&rsquo;t have to be an InfluxDB expert to use Butler SOS, but understanding some basic concepts are helpful.</p>
<p>Storing metrics in InfluxDB is not mandatory, but some kind of metrics storage - either in InfluxDB, <a href="https://newrelic.com">New Relic</a> or <a href="/docs/reference/available_metrics/prometheus/">Prometheus</a> - is needed to take full benefit of Butler SOS&rsquo; features.</p>
<ul>
<li>InfluxDB is a <a href="https://www.influxdata.com/time-series-database/">time series database</a>. This means it is super good at storing values that have a timestamp associated with them - and pretty bad at everything else. In many respects time series databases are the opposite of traditional SQL databases (who are usually pretty bad at handling time series data).</li>
<li>Because of it&rsquo;s focus on time series data, InfluxDB v1 has its own query language, <a href="https://docs.influxdata.com/influxdb/v1.7/query_language/">InfluxQL</a>. It is somewhat similar to SQL, but also has many unique commands and features.
<ul>
<li>Influx DB v2 has a new query language called <a href="https://docs.influxdata.com/influxdb/v2.0/query-data/get-started/">Flux</a>. There are compatibility layers in InfluxDB v2 that allow you to use InfluxQL, meaning that existing Grafana dashboards and can be kept as they are, even if you upgrade to InfluxDB v2.</li>
<li>Flux is a more powerful query language than InfluxQL, but it also has a steeper learning curve. By learning Flux you will be able to do more advanced things with your data, for example in Grafana dashboards.</li>
</ul>
</li>
<li>It&rsquo;s worth browsing through the <a href="https://docs.influxdata.com/influxdb/">InfluxDB documentation</a> to get a feel for what InfluxDB is and how it works.
<ul>
<li><a href="https://docs.influxdata.com/influxdb/v1/">InfluxDB v1 documentation</a>.</li>
<li><a href="https://docs.influxdata.com/influxdb/v2/">InfluxDB v2 documentation</a>.</li>
</ul>
</li>
</ul>
<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>The list of metrics below shows <em>all</em> metrics that Butler SOS can store in InfluxDB.</p>
<p>If you have disabled some features of Butler SOS, the associated metrics will not be stored in InfluxDB.</p></div>

<h3 id="influxdb-v1-vs-v2">InfluxDB v1 vs v2</h3>
<p>That are some differences between InfluxDB v1 and v2 when it comes to terminology and concepts.</p>
<p>For example in InfluxDB v1, the main concepts are <em>databases</em>, <em>measurements</em>, <em>field keys</em> and <em>tag keys</em>.<br>
In InfluxDB v2 the main concepts are <em>buckets</em>, <em>measurements</em>, <em>fields</em> and <em>tags</em>.</p>
<p>The concepts are very similar, but the names are different.</p>
<p>The metrics below are the same for both InfluxDB v1 and v2.</p>
<h2 id="overview">Overview</h2>
<p><em>Measurements</em> are just what it sounds like: snapshots of some value(s), taken at a specific point in time.
A measurement can contain several <em>field keys</em>, which for practical purposes can be viewed as the individual metrics.</p>
<p>For example, the list of measurements look like this (using the InfluxDB command line client to explore the database structure):</p>
<pre tabindex="0"><code>&gt; use senseops
Using database senseops
&gt; show measurements
name: measurements
name
----
apps
butlersos_memory_usage
cache
cpu
log_event
log_event_logdb
mem
saturated
sense_server
session
user_events
user_session_details
user_session_list
user_session_summary
users
&gt;
</code></pre><p>Let&rsquo;s take a look at what field keys the <code>apps</code> measurement contains:</p>
<pre tabindex="0"><code>&gt; show field keys from apps
name: apps
fieldKey                     fieldType
--------                     ---------
active_docs                  string
active_docs_count            integer
active_docs_names            string
active_session_docs_names    string
calls                        integer
in_memory_docs               string
in_memory_docs_count         integer
in_memory_docs_names         string
in_memory_session_docs_names string
loaded_docs                  string
loaded_docs_count            integer
loaded_docs_names            string
loaded_session_docs_names    string
selections                   integer
&gt;
</code></pre><p>Ok, so the field keys are the actual metrics for which we gather data. Collectively those metrics (again: <em>field keys</em> in InfluxDB lingo) above are grouped into a <em>measurement</em> called <code>apps</code>.</p>
<p>There is one more concept you need to understand: <em>tag keys</em></p>
<p>It&rsquo;s pretty simple: Tag keys are used to categorize (or simply &ldquo;tag&rdquo;) measurements.<br>
Let&rsquo;s say you use Butler SOS to collect data from ten Sense servers. That&rsquo;s great, but how will you later distinguish between server 3 and server 8? You need some way of telling your Grafana dashboard to show the data for server 3 (if that&rsquo;s what you want).</p>
<p>Tags solve this. In the Butler SOS YAML config file you can define any number of tags that will be used to tag data coming in from Qlik Sense.</p>
<p>The beauty of tags is that they play very nicely with Grafana - without them the Grafana dashboards would not be nearly as flexible as they are.</p>
<p>To see what tag keys a certain measurement has you use a query similar to the one above/for fields:</p>
<pre tabindex="0"><code>&gt; show tag keys from apps
name: apps
tagKey
------
host
serverBrand
serverLocation
server_description
server_group
server_name
server_type
</code></pre><p>Note that this list of tags consists of two parts:</p>
<ol>
<li>Tags always present. These are inserted by Butler SOS and are present for all measurements. These are <code>host</code>, <code>server_description</code> and <code>server_name</code>.</li>
<li>Tags configured in Butler SOS&rsquo; config file. In the example above these are <code>serverBrand</code>, <code>serverLocation</code>, <code>server_group</code> and<code>server_type</code>.</li>
</ol>
<h2 id="measurements-and-fields">Measurements and fields</h2>
<p>The measurements are grouped based on what part of Sense they are retrieved from. The groups are</p>
<ol>
<li>General health metrics.</li>
<li>Metrics about user sessions, for example how many sessions there are per virtual proxy.</li>
<li>Event counters: Counters for the different types of events received from Sense.</li>
<li>User events: Session and connection related messages from QSEoW logs.</li>
<li>Log events: Warning, error and fatal messages from QSEoW logs.</li>
<li>Performance log events. Events from the QIX engine. Used to monitor performance of individual charts and other app objects.</li>
<li>Messages from the log database (deprecated, will be removed during 2nd half of 2024).</li>
<li>Metric relating to Butler SOS itself (i.e. not retrieved from Sense).</li>
</ol>
<h2 id="general-health-metrics">General health metrics</h2>
<p>A shared set of tag keys are available for all general health metrics:</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>host</td>
          <td>Host name, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].host</code> property. Usually a fully qualified host name, or in some cases an IP address.</td>
      </tr>
      <tr>
          <td>server_name</td>
          <td>Human readable/friendly server name, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].serverName</code> property.</td>
      </tr>
      <tr>
          <td>server_description</td>
          <td>Description of the server, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].serverDescription</code> property.</td>
      </tr>
  </tbody>
</table>
<p>In addition to the above, all tags defined in the YAML config file for the servers will be included as tag keys.</p>
<h3 id="measurement-apps">Measurement: apps</h3>
<p>Source: <a href="https://help.qlik.com/en-US/sense-developer/November2021/Subsystems/EngineAPI/Content/Sense_EngineAPI/GettingSystemInformation/HealthCheckStatus.htm">Health check API</a></p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>active_docs</td>
          <td>string</td>
          <td>An array of GUIDs of active apps. Empty if no apps are active. An app is active when a user is currently performing some action on it.</td>
      </tr>
      <tr>
          <td>active_docs_count</td>
          <td>integer</td>
          <td>Number of currently active apps</td>
      </tr>
      <tr>
          <td>active_docs_names</td>
          <td>string</td>
          <td>Names of currently active (non-session) apps</td>
      </tr>
      <tr>
          <td>active_session_docs_names</td>
          <td>string</td>
          <td>Names of currently active session apps</td>
      </tr>
      <tr>
          <td>in_memory_docs</td>
          <td>string</td>
          <td>An array of the GUIDs of all apps currently loaded into the memory, even if they do not have any open sessions or connections to it. The apps disappear from the list when the engine has purged them out from memory.</td>
      </tr>
      <tr>
          <td>in_memory_docs_count</td>
          <td>integer</td>
          <td>Number of apps currently in memory</td>
      </tr>
      <tr>
          <td>in_memory_docs_names</td>
          <td>string</td>
          <td>Names of (non-session) apps currently in memory</td>
      </tr>
      <tr>
          <td>in_memory_session_docs_names</td>
          <td>string</td>
          <td>Names of session apps currently in memory</td>
      </tr>
      <tr>
          <td>loaded_docs</td>
          <td>string</td>
          <td>An array of the GUIDs of apps currently loaded into memory and that have open sessions or connections. Empty if no apps are loaded.</td>
      </tr>
      <tr>
          <td>loaded_docs_count</td>
          <td>integer</td>
          <td>Number of currently loaded apps</td>
      </tr>
      <tr>
          <td>loaded_docs_names</td>
          <td>string</td>
          <td>Names of currently loaded (non-session) apps</td>
      </tr>
      <tr>
          <td>loaded_session_docs_names</td>
          <td>string</td>
          <td>Names of currently loaded session apps</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
          <td></td>
      </tr>
      <tr>
          <td>calls</td>
          <td>integer</td>
          <td>Number of calls to the Qlik associative engine since it started</td>
      </tr>
      <tr>
          <td>selections</td>
          <td>integer</td>
          <td>Number of selections made in Qlik associative engine since it started</td>
      </tr>
  </tbody>
</table>
<h3 id="measurement-cache">Measurement: cache</h3>
<p>Source: <a href="https://help.qlik.com/en-US/sense-developer/June2020/Subsystems/EngineAPI/Content/Sense_EngineAPI/GettingSystemInformation/HealthCheckStatus.htm">Health check API</a></p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>added</td>
          <td>integer</td>
          <td>Number of cache objects added to the cache</td>
      </tr>
      <tr>
          <td>bytes_added</td>
          <td>integer</td>
          <td>Number of bytes added to the cache</td>
      </tr>
      <tr>
          <td>hits</td>
          <td>integer</td>
          <td>Number of cache hits in engine</td>
      </tr>
      <tr>
          <td>lookups</td>
          <td>integer</td>
          <td>Number of lookups in engine</td>
      </tr>
      <tr>
          <td>replaced</td>
          <td>integer</td>
          <td>Number of cache objects replaced</td>
      </tr>
  </tbody>
</table>
<h3 id="measurement-cpu">Measurement: cpu</h3>
<p>Source: <a href="https://help.qlik.com/en-US/sense-developer/June2020/Subsystems/EngineAPI/Content/Sense_EngineAPI/GettingSystemInformation/HealthCheckStatus.htm">Health check API</a></p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>total</td>
          <td>integer</td>
          <td>Percentage of the CPU used by the engine, averaged over a time period of 30 seconds.</td>
      </tr>
  </tbody>
</table>
<h3 id="measurement-mem">Measurement: mem</h3>
<p>Source: <a href="https://help.qlik.com/en-US/sense-developer/June2020/Subsystems/EngineAPI/Content/Sense_EngineAPI/GettingSystemInformation/HealthCheckStatus.htm">Health check API</a></p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>allocated</td>
          <td>integer</td>
          <td>The total amount of allocated memory (committed + reserved) from the operating system in MB.</td>
      </tr>
      <tr>
          <td>committed</td>
          <td>integer</td>
          <td>The total amount of committed memory for the engine process in MB.</td>
      </tr>
      <tr>
          <td>free</td>
          <td>integer</td>
          <td>The total amount of free memory (minimum of free virtual and physical memory) in MB.</td>
      </tr>
  </tbody>
</table>
<h3 id="measurement-saturated">Measurement: saturated</h3>
<p>Source: <a href="https://help.qlik.com/en-US/sense-developer/June2020/Subsystems/EngineAPI/Content/Sense_EngineAPI/GettingSystemInformation/HealthCheckStatus.htm">Health check API</a></p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>saturated</td>
          <td>boolean</td>
          <td>When the value is true, the engine is running with high resource usage; otherwise the value is false. See link above for details.</td>
      </tr>
  </tbody>
</table>
<h3 id="measurement-sense_server">Measurement: sense_server</h3>
<p>Source: <a href="https://help.qlik.com/en-US/sense-developer/June2020/Subsystems/EngineAPI/Content/Sense_EngineAPI/GettingSystemInformation/HealthCheckStatus.htm">Health check API</a></p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>started</td>
          <td>string</td>
          <td>ISO timestamp when the engine service was started.</td>
      </tr>
      <tr>
          <td>uptime</td>
          <td>string</td>
          <td>Time since engine service was started (human readable).</td>
      </tr>
      <tr>
          <td>version</td>
          <td>string</td>
          <td>Engine version.</td>
      </tr>
  </tbody>
</table>
<h3 id="measurement-session">Measurement: session</h3>
<p>Source: <a href="https://help.qlik.com/en-US/sense-developer/June2020/Subsystems/EngineAPI/Content/Sense_EngineAPI/GettingSystemInformation/HealthCheckStatus.htm">Health check API</a></p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>active</td>
          <td>integer</td>
          <td>Number of active engine sessions. A session is active when a user is currently performing some action on an app, for example, making selections or creating content.</td>
      </tr>
      <tr>
          <td>total</td>
          <td>integer</td>
          <td>Total number of engine sessions.</td>
      </tr>
  </tbody>
</table>
<h3 id="measurement-users">Measurement: users</h3>
<p>Source: <a href="https://help.qlik.com/en-US/sense-developer/June2020/Subsystems/EngineAPI/Content/Sense_EngineAPI/GettingSystemInformation/HealthCheckStatus.htm">Health check API</a></p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>active</td>
          <td>integer</td>
          <td>Number of users currently doing something in some app.</td>
      </tr>
      <tr>
          <td>total</td>
          <td>integer</td>
          <td>Number of users with established sessions to the Sense server.</td>
      </tr>
  </tbody>
</table>
<h2 id="user-session-details">User session details</h2>
<p>User session metrics have slightly different tag keys depending on the granularity level of the metric - those metrics are therefore listed under each heading below.</p>
<h3 id="measurement-user_session_summary">Measurement: user_session_summary</h3>
<p>Source: <a href="https://help.qlik.com/en-US/sense-developer/June2020/Subsystems/ProxyServiceAPI/Content/Sense_ProxyServiceAPI/ProxyServiceAPI-Session-Module-API.htm">Session module API</a></p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>session_count</td>
          <td>float</td>
          <td>Total number of sessions, per server and virtual proxy.</td>
      </tr>
      <tr>
          <td>session_user_id_list</td>
          <td>string</td>
          <td>List of user IDs with sessions, per server and virtual proxy. NOTE: A single user may have more than one session open to a particular server/virtual proxy.</td>
      </tr>
  </tbody>
</table>
<p>Tag keys:</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>host</td>
          <td>Host name, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].host</code> property. Usually a fully qualified host name, or in some cases an IP address.</td>
      </tr>
      <tr>
          <td>server_name</td>
          <td>Human readable/friendly server name, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].serverName</code> property.</td>
      </tr>
      <tr>
          <td>server_description</td>
          <td>Description of the server, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].serverDescription</code> property.</td>
      </tr>
      <tr>
          <td>user_session_host</td>
          <td>Host name the session metrics are associated with.</td>
      </tr>
      <tr>
          <td>user_session_virtual_proxy</td>
          <td>Virtual proxy name the session metrics are associated with.</td>
      </tr>
  </tbody>
</table>
<h3 id="measurement-user_session_list">Measurement: user_session_list</h3>
<p>Source: <a href="https://help.qlik.com/en-US/sense-developer/June2020/Subsystems/ProxyServiceAPI/Content/Sense_ProxyServiceAPI/ProxyServiceAPI-Session-Module-API.htm">Session module API</a></p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>session_user_id_list</td>
          <td>string</td>
          <td>List of user IDs with sessions, per server and virtual proxy. NOTE: A single user may have more than one session open to a particular server/virtual proxy.</td>
      </tr>
  </tbody>
</table>
<p>Tag keys:</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>host</td>
          <td>Host name, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].host</code> property. Usually a fully qualified host name, or in some cases an IP address.</td>
      </tr>
      <tr>
          <td>server_name</td>
          <td>Human readable/friendly server name, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].serverName</code> property.</td>
      </tr>
      <tr>
          <td>server_description</td>
          <td>Description of the server, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].serverDescription</code> property.</td>
      </tr>
      <tr>
          <td>user_session_host</td>
          <td>Host name the session metrics are associated with.</td>
      </tr>
      <tr>
          <td>user_session_virtual_proxy</td>
          <td>Virtual proxy name the session metrics are associated with.</td>
      </tr>
  </tbody>
</table>
<h3 id="measurement-user_session_details">Measurement: user_session_details</h3>
<p>Source: <a href="https://help.qlik.com/en-US/sense-developer/June2020/Subsystems/ProxyServiceAPI/Content/Sense_ProxyServiceAPI/ProxyServiceAPI-Session-Module-API.htm">Session module API</a></p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>session_id</td>
          <td>string</td>
          <td>Session GUID, uniquely identifying the session in the entire Sense cluster.</td>
      </tr>
      <tr>
          <td>user_directory</td>
          <td>string</td>
          <td>Session user&rsquo;s user directory.</td>
      </tr>
      <tr>
          <td>user_id</td>
          <td>string</td>
          <td>Session user ID</td>
      </tr>
  </tbody>
</table>
<p>Tag keys:</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>host</td>
          <td>Host name, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].host</code> property. Usually a fully qualified host name, or in some cases an IP address.</td>
      </tr>
      <tr>
          <td>server_name</td>
          <td>Human readable/friendly server name, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].serverName</code> property.</td>
      </tr>
      <tr>
          <td>server_description</td>
          <td>Description of the server, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].serverDescription</code> property.</td>
      </tr>
      <tr>
          <td>user_session_host</td>
          <td>Host name the session metrics are associated with.</td>
      </tr>
      <tr>
          <td>user_session_virtual_proxy</td>
          <td>Virtual proxy name the session metrics are associated with.</td>
      </tr>
      <tr>
          <td>user_session_id</td>
          <td>Session GUID</td>
      </tr>
      <tr>
          <td>user_session_user_directory</td>
          <td>User&rsquo;s user directory</td>
      </tr>
      <tr>
          <td>user_session_user_id</td>
          <td>User ID</td>
      </tr>
  </tbody>
</table>
<h2 id="event-counters">Event counters</h2>
<p>Event counters are used to count the number of events received from Sense.</p>
<p>The measurement name is configured in the Butler SOS YAML config file, <code>Butler-SOS.qlikSenseEvents.eventCount.influxdb.measurementName</code>.</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>event_type</td>
          <td>Type of event. <code>log</code> or <code>user</code>.</td>
      </tr>
      <tr>
          <td>host</td>
          <td>Host name of the Sense server generating the event.</td>
      </tr>
      <tr>
          <td>source</td>
          <td>Source system within Sense that caused the event. Examples: <code>qseow-scheduler</code>, <code>qseow-proxy</code>, <code>qseow-engine</code>, <code>qseow-repository</code></td>
      </tr>
      <tr>
          <td>subsystem</td>
          <td>Subsystem where the event originated. More granular than <code>source</code>. Example: <code>System.Scheduler.Scheduler.Master.Task.TaskSession</code></td>
      </tr>
  </tbody>
</table>
<p>Static tags defined in the config file, <code>Butler-SOS.qlikSenseEvents.eventCount.influxdb.tags</code>, are also added to the InfluxDB datapoints.</p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>counter</td>
          <td>Number of events received.</td>
      </tr>
  </tbody>
</table>
<h3 id="unrecognized-events">Unrecognized events</h3>
<p>Unrecognized events are events that Butler SOS receives from Sense, but that do not have a valid source (<code>qseow-scheduler</code>, <code>qseow-proxy</code>, <code>qseow-engine</code>, <code>qseow-repository</code> etc).</p>
<p>These events will get a <code>event_type</code> of <code>user</code> or <code>log</code> based on what UDP port they arrived on.<br>
The <code>source</code>, <code>host</code> and <code>subsystem</code> tags will be set to <code>Unknown</code>.</p>
<h2 id="user-events">User events</h2>
<p>User events capture real-time events in Qlik Sense as they happen.<br>
They originate from Sense&rsquo;s log4net logging framework and are forwarded from Sense to Butler SOS by means of XML log appenders in Sense.<br>
These events are also forwarded as MQTT messages, allowing other systems to act when warnings/errors/fatals occur in Qlik Sense.</p>
<p>Setup instructions <a href="/docs/getting_started/setup/user-events/">here</a>.</p>
<p>The following user events are handled by Butler SOS:</p>
<ul>
<li>Session start</li>
<li>Session stop</li>
<li>Connection open</li>
<li>Connection close.</li>
</ul>
<h3 id="measurement-user_events">Measurement: user_events</h3>
<p>Tag keys present for all <code>user_events</code> records:</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>event_action</td>
          <td>Indicates what the event is about. Examples: <code>Start session</code>, <code>Stop session</code>, <code>Open connection</code>, <code>Close connection</code>.</td>
      </tr>
      <tr>
          <td>host</td>
          <td>Host name as reported in Qlik Sense&rsquo;s proxy log files.</td>
      </tr>
      <tr>
          <td>origin</td>
          <td>Textual description of what caused the event. Can for example be <code>AppAccess</code>, which means a user opened or closed a browser tab with a Sense app in it.</td>
      </tr>
      <tr>
          <td>userDirectory</td>
          <td>Sense user directory of the user causing the event.</td>
      </tr>
      <tr>
          <td>userId</td>
          <td>Sense user ID for the user causing the event.</td>
      </tr>
      <tr>
          <td>userFull</td>
          <td>The combination of <code>userDirectory</code> and <code>userId</code>.</td>
      </tr>
  </tbody>
</table>
<p>If the user event includes browser user agent information, the following tags will be present:</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>uaBrowserName</td>
          <td>Name of connecting user&rsquo;s browser.</td>
      </tr>
      <tr>
          <td>uaBrowserMajorVersion</td>
          <td>Connecting user&rsquo;s browser version.</td>
      </tr>
      <tr>
          <td>uaOsName</td>
          <td>Connecting user&rsquo;s operating system.</td>
      </tr>
      <tr>
          <td>uaOsVersion</td>
          <td>Connecting user&rsquo;s operating system version.</td>
      </tr>
  </tbody>
</table>
<p>In addition to the above tags defined in the Butler SOS config file will be added.<br>
More info <a href="/docs/getting_started/setup/user-events/#settings-in-main-config-file">here</a>.</p>
<p>Fields:</p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>appId</td>
          <td>Id of app that is opened/closed.</td>
      </tr>
      <tr>
          <td>appName</td>
          <td>Name of app that is opened/closed.</td>
      </tr>
      <tr>
          <td>userFull</td>
          <td>Same as the userFull tag.</td>
      </tr>
      <tr>
          <td>userId</td>
          <td>Same as the userId tag.</td>
      </tr>
  </tbody>
</table>
<h2 id="log-events">Log events</h2>
<p>Log events are used to capture warning, error and fatal messages in Sense. Once in Butler SOS these events are stored in InfluxDB (enabling Grafana dashboards).<br>
These events are also forwarded as MQTT messages, allowing other systems to act when warnings/errors/fatals occur in Qlik Sense.</p>
<p>Setup instructions <a href="/docs/getting_started/setup/log-events/">here</a>.</p>
<div class="notice info" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#info-notice"></use></svg></span>Info</p><p>There is only one measurement for log events. It&rsquo;s simply called <code>log_event</code>.</p>
<p>Different QSEoW services (Qlik Sense Enterprise on Windows) will send different tags and metrics in the log events.<br>
Each variant is described below.</p>
<p>This modular approach to log events makes it possible to extend Butler SOS&rsquo; with additional log events if/when needed..</p></div>

<p><em>Note 1: Static tags are added as for all log events, as defined in the config file, <code>Butler-SOS.logEvents.tags</code>.</em></p>
<p><em>Note 2: If log event categorization is enabled in the YAML config file, the categories defined there will be added as tags to the log event data points written to InfluxDB.</em></p>
<h3 id="source-proxy-service">Source: Proxy service</h3>
<p>Events such as failed login attempts will be sent from the proxy service.</p>
<p>Proxy log events have these tags:</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>host</td>
          <td>Host name as reported in Qlik Sense&rsquo;s log files.</td>
      </tr>
      <tr>
          <td>level</td>
          <td>Sense log level. Possible values are <code>WARN</code>, <code>ERROR</code>, <code>FATAL</code>.</td>
      </tr>
      <tr>
          <td>log_row</td>
          <td>Row number in Sense log file where the event can be found. Useful if you after all have to dig into the log files.</td>
      </tr>
      <tr>
          <td>result_code</td>
          <td>Result code as reported by the Sense source system that caused the event. Its meaning will differ depending on where the event originated.</td>
      </tr>
      <tr>
          <td>source</td>
          <td>Source system within Sense that caused the event. Examples: <code>qseow-scheduler</code>, <code>qseow-proxy</code>, <code>qseow-repository</code></td>
      </tr>
      <tr>
          <td>subsystem</td>
          <td>Subsystem where the event originated. More granular than <code>source</code>. Example: <code>System.Scheduler.Scheduler.Master.Task.TaskSession</code></td>
      </tr>
      <tr>
          <td>user_directory</td>
          <td>Sense user directory of the user causing the event. Example: <code>MYCOMPANY</code></td>
      </tr>
      <tr>
          <td>user_id</td>
          <td>Sense user ID for the user causing the event. Example: <code>joe</code></td>
      </tr>
      <tr>
          <td>user_full</td>
          <td>The combination of <code>user_directory</code> and <code>user_id</code>. Example: <code>MYCOMPANY\joe</code></td>
      </tr>
  </tbody>
</table>
<p>Fields in proxy log events:</p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>command</td>
          <td>Description of what caused the event, as found in the Sense logs. Example: <code>Login:TryLogin</code></td>
      </tr>
      <tr>
          <td>context</td>
          <td>In what context (if one exists) the event occurred. If no context is available <code>Not available</code> will be used.</td>
      </tr>
      <tr>
          <td>exception_message</td>
          <td>If a serious problem/exception occurs the associated message is available here.</td>
      </tr>
      <tr>
          <td>message</td>
          <td>Description of what the event is about. Example: <code>Login failed for user 'LAB\\goran' wrong credentials?</code></td>
      </tr>
      <tr>
          <td>origin</td>
          <td>Example: <code>qseow-repository.</code></td>
      </tr>
      <tr>
          <td>raw_event</td>
          <td>The raw event message as received from QSEoW. Described <a href="https://github.com/ptarmiganlabs/butler-sos/blob/bd9135d953d4fc2d025dc8326956b2504b3d06d4/src/lib/udp_handlers_log_events.js#L26">here</a>.</td>
      </tr>
      <tr>
          <td>result_code</td>
          <td>Example: <code>500</code></td>
      </tr>
  </tbody>
</table>
<p>The <code>raw_event</code> is the actual log event message sent from QSEoW to Butler SOS.<br>
It has the following components:</p>
<table>
  <thead>
      <tr>
          <th>Part of message</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>command</td>
          <td>Description of what caused the event, as found in the Sense logs. Example: <code>Login:TryLogin</code></td>
      </tr>
      <tr>
          <td>context</td>
          <td>In what context (if one exists) the event occurred. If no context is available <code>Not available</code> will be used.</td>
      </tr>
      <tr>
          <td>exception_message</td>
          <td>If a serious problem/exception occurs the associated message is available here.</td>
      </tr>
      <tr>
          <td>host</td>
          <td>Host name as reported in Qlik Sense&rsquo;s log files.</td>
      </tr>
      <tr>
          <td>level</td>
          <td>Sense log level. Possible values are <code>WARN</code>, <code>ERROR</code>, <code>FATAL</code>.</td>
      </tr>
      <tr>
          <td>log_row</td>
          <td>Row number in Sense log file where the event can be found. Useful if you after all have to dig into the log files.</td>
      </tr>
      <tr>
          <td>message</td>
          <td>Description of what the event is about. Example: <code>Login failed for user 'LAB\\goran' wrong credentials?</code></td>
      </tr>
      <tr>
          <td>origin</td>
          <td>Party of the proxy service the event originated from. Rarely used by Sense.</td>
      </tr>
      <tr>
          <td>result_code</td>
          <td>Result code as reported by the Sense source system that caused the event. Its meaning will differ depending on where the event originated. Example: <code>500</code></td>
      </tr>
      <tr>
          <td>source</td>
          <td>Source system within Sense that caused the event. Examples: <code>qseow-scheduler</code>, <code>qseow-proxy</code>, <code>qseow-repository</code></td>
      </tr>
      <tr>
          <td>subsystem</td>
          <td>Subsystem where the event originated. More granular than <code>source</code>. Example: <code>System.Scheduler.Scheduler.Master.Task.TaskSession</code></td>
      </tr>
      <tr>
          <td>tags</td>
          <td>User defined tags. Set in the main YAML config file. Example: <code>{&quot;env&quot;:&quot;DEV&quot;,&quot;foo&quot;:&quot;bar&quot;}</code></td>
      </tr>
      <tr>
          <td>ts_iso</td>
          <td>Timestamp (ISO format) when the event occurred, according to QSEoW. Example: <code>20211126T214006.122+0100</code></td>
      </tr>
      <tr>
          <td>ts_local</td>
          <td>Event timestamp (time format of Sense server). Example: <code>2021-11-26 21:40:06,122</code></td>
      </tr>
      <tr>
          <td>user_directory</td>
          <td>Sense user directory of the user causing the event. Example: <code>MYCOMPANY</code></td>
      </tr>
      <tr>
          <td>user_full</td>
          <td>The combination of <code>user_directory</code> and <code>user_id</code>. Example: <code>MYCOMPANY\joe</code></td>
      </tr>
      <tr>
          <td>user_id</td>
          <td>Sense user ID for the user causing the event. Example: <code>joe</code></td>
      </tr>
      <tr>
          <td>windows_user</td>
          <td>Windows account used to run the proxy QSEoW Windows service. Example: <code>LAB\\qlikservice</code></td>
      </tr>
  </tbody>
</table>
<h3 id="source-scheduler-service">Source: Scheduler service</h3>
<p>Events such as failed reload tasks will be sent from the scheduler service.</p>
<p>Scheduler log events have these tags:</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>host</td>
          <td>Host name as reported in Qlik Sense&rsquo;s log files.</td>
      </tr>
      <tr>
          <td>level</td>
          <td>Sense log level. Possible values are <code>WARN</code>, <code>ERROR</code>, <code>FATAL</code>.</td>
      </tr>
      <tr>
          <td>log_row</td>
          <td>Row number in Sense log file where the event can be found. Useful if you after all have to dig into the log files.</td>
      </tr>
      <tr>
          <td>source</td>
          <td>Source system within Sense that caused the event. Examples: <code>qseow-scheduler</code>, <code>qseow-proxy</code>, <code>qseow-repository</code></td>
      </tr>
      <tr>
          <td>subsystem</td>
          <td>Subsystem where the event originated. More granular than <code>source</code>. Example: <code>System.Scheduler.Scheduler.Master.Task.TaskSession</code></td>
      </tr>
      <tr>
          <td>user_directory</td>
          <td>Sense user directory of the user causing the event. Example: <code>MYCOMPANY</code></td>
      </tr>
      <tr>
          <td>user_id</td>
          <td>Sense user ID for the user causing the event. Example: <code>joe</code></td>
      </tr>
      <tr>
          <td>user_full</td>
          <td>The combination of <code>user_directory</code> and <code>user_id</code>. Example: <code>MYCOMPANY\joe</code></td>
      </tr>
      <tr>
          <td>task_id</td>
          <td>Task ID (if a task is involved in the event, for example task failing). Example: <code>58dd8322-e39c-4b71-b74e-13c47a2f6dd4</code></td>
      </tr>
      <tr>
          <td>task_name</td>
          <td>Task name (if a task is involved in the event). Example: <code>Reload task of Meetup.com</code></td>
      </tr>
  </tbody>
</table>
<p>Fields in scheduler log events:</p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>app_id</td>
          <td>Application ID (if an app is involved in the event). Example: <code>deba4bcf-47e4-472e-97b2-4fe8d6498e11</code></td>
      </tr>
      <tr>
          <td>app_name</td>
          <td>Application name (if an app is involved in the event). Example: <code>Meetup.com</code></td>
      </tr>
      <tr>
          <td>exception_message</td>
          <td>If a serious problem/exception occurs the associated message is available here.</td>
      </tr>
      <tr>
          <td>execution_id</td>
          <td>ID identifying a particular task execution. Example: <code>67a56c3b-2e20-4df8-ad1b-e48de28e1bfa</code></td>
      </tr>
      <tr>
          <td>message</td>
          <td>Description of what the event is about. Example: <code>Login failed for user 'LAB\\goran' wrong credentials?</code></td>
      </tr>
      <tr>
          <td>raw_event</td>
          <td>The raw event message as received from QSEoW. Described <a href="https://github.com/ptarmiganlabs/butler-sos/blob/bd9135d953d4fc2d025dc8326956b2504b3d06d4/src/lib/udp_handlers_log_events.js#L61">here</a>.</td>
      </tr>
  </tbody>
</table>
<p>The <code>raw_event</code> is the actual log event message sent from QSEoW to Butler SOS.<br>
It has the following components:</p>
<table>
  <thead>
      <tr>
          <th>Part of message</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>app_id</td>
          <td>Application ID (if an app is involved in the event). Example: <code>deba4bcf-47e4-472e-97b2-4fe8d6498e11</code></td>
      </tr>
      <tr>
          <td>app_name</td>
          <td>Application name (if an app is involved in the event). Example: <code>Meetup.com</code></td>
      </tr>
      <tr>
          <td>exception_message</td>
          <td>If a serious problem/exception occurs the associated message is available here.</td>
      </tr>
      <tr>
          <td>execution_id</td>
          <td>ID identifying a particular task execution. Example: <code>67a56c3b-2e20-4df8-ad1b-e48de28e1bfa</code></td>
      </tr>
      <tr>
          <td>host</td>
          <td>Host name as reported in Qlik Sense&rsquo;s log files.</td>
      </tr>
      <tr>
          <td>level</td>
          <td>Sense log level. Possible values are <code>WARN</code>, <code>ERROR</code>, <code>FATAL</code>.</td>
      </tr>
      <tr>
          <td>log_row</td>
          <td>Row number in Sense log file where the event can be found. Useful if you after all have to dig into the log files.</td>
      </tr>
      <tr>
          <td>message</td>
          <td>Description of what the event is about. Example: <code>Login failed for user 'LAB\\goran' wrong credentials?</code></td>
      </tr>
      <tr>
          <td>source</td>
          <td>Source system within Sense that caused the event. Example: <code>qseow-scheduler</code></td>
      </tr>
      <tr>
          <td>subsystem</td>
          <td>Subsystem where the event originated. More granular than <code>source</code>. Example: <code>System.Scheduler.Scheduler.Slave.Tasks.ReloadTask</code></td>
      </tr>
      <tr>
          <td>tags</td>
          <td>User defined tags. Set in the main YAML config file. Example: <code>{&quot;env&quot;:&quot;DEV&quot;,&quot;foo&quot;:&quot;bar&quot;}</code></td>
      </tr>
      <tr>
          <td>task_id</td>
          <td>Task ID (if a task is involved in the event, for example task failing). Example: <code>58dd8322-e39c-4b71-b74e-13c47a2f6dd4</code></td>
      </tr>
      <tr>
          <td>task_name</td>
          <td>Task name (if a task is involved in the event). Example: <code>Reload task of Meetup.com</code></td>
      </tr>
      <tr>
          <td>ts_iso</td>
          <td>Timestamp (ISO format) when the event occurred, according to QSEoW. Example: <code>20211126T214006.122+0100</code></td>
      </tr>
      <tr>
          <td>ts_local</td>
          <td>Event timestamp (time format of Sense server). Example: <code>2021-11-26 21:40:06,122</code></td>
      </tr>
      <tr>
          <td>user_directory</td>
          <td>Sense user directory of the user causing the event. Example: <code>MYCOMPANY</code></td>
      </tr>
      <tr>
          <td>user_full</td>
          <td>The combination of <code>user_directory</code> and <code>user_id</code>. Example: <code>MYCOMPANY\joe</code></td>
      </tr>
      <tr>
          <td>user_id</td>
          <td>Sense user ID for the user causing the event. Example: <code>joe</code></td>
      </tr>
      <tr>
          <td>windows_user</td>
          <td>Windows account used to run the proxy QSEoW Windows service. Example: <code>LAB\\qlikservice</code></td>
      </tr>
  </tbody>
</table>
<h3 id="source-repository-service">Source: Repository service</h3>
<p>The repository service is the hub around which the rest of Qlik Sense revolves.<br>
As such it emit events in many different situations. One example can be when a Sense node is offline (this example is used in the field description below).</p>
<p>Repository log events have these tags:</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>host</td>
          <td>Host name as reported in Qlik Sense&rsquo;s log files.</td>
      </tr>
      <tr>
          <td>level</td>
          <td>Sense log level. Possible values are <code>WARN</code>, <code>ERROR</code>, <code>FATAL</code>.</td>
      </tr>
      <tr>
          <td>log_row</td>
          <td>Row number in Sense log file where the event can be found. Useful if you after all have to dig into the log files.</td>
      </tr>
      <tr>
          <td>source</td>
          <td>Source system within Sense that caused the event. Examples: <code>qseow-scheduler</code>, <code>qseow-proxy</code>, <code>qseow-repository</code></td>
      </tr>
      <tr>
          <td>subsystem</td>
          <td>Subsystem where the event originated. More granular than <code>source</code>. Example: <code>System.Scheduler.Scheduler.Master.Task.TaskSession</code></td>
      </tr>
      <tr>
          <td>result_code</td>
          <td>Result code as reported by the Sense source system that caused the event. Its meaning will differ depending on where the event originated.</td>
      </tr>
      <tr>
          <td>user_directory</td>
          <td>Sense user directory of the user causing the event. Example: <code>MYCOMPANY</code></td>
      </tr>
      <tr>
          <td>user_id</td>
          <td>Sense user ID for the user causing the event. Example: <code>joe</code></td>
      </tr>
      <tr>
          <td>user_full</td>
          <td>The combination of <code>user_directory</code> and <code>user_id</code>. Example: <code>MYCOMPANY\joe</code></td>
      </tr>
  </tbody>
</table>
<p>Fields in scheduler log events:</p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>command</td>
          <td>Description of what caused the event, as found in the Sense logs. Example: <code>Login:TryLogin</code></td>
      </tr>
      <tr>
          <td>context</td>
          <td>In what context (if one exists) the event occurred. If no context is available <code>Not available</code> will be used.</td>
      </tr>
      <tr>
          <td>exception_message</td>
          <td>If a serious problem/exception occurs the associated message is available here.</td>
      </tr>
      <tr>
          <td>message</td>
          <td>Description of what the event is about. Example: <code>Login failed for user 'LAB\\goran' wrong credentials?</code></td>
      </tr>
      <tr>
          <td>origin</td>
          <td>Example: <code>qseow-repository.</code></td>
      </tr>
      <tr>
          <td>raw_event</td>
          <td>The raw event message as received from QSEoW. Described <a href="https://github.com/ptarmiganlabs/butler-sos/blob/bd9135d953d4fc2d025dc8326956b2504b3d06d4/src/lib/udp_handlers_log_events.js#L43">here</a>.</td>
      </tr>
      <tr>
          <td>result_code</td>
          <td>Example: <code>500</code></td>
      </tr>
  </tbody>
</table>
<p>The <code>raw_event</code> is the actual log event message sent from QSEoW to Butler SOS.<br>
It has the following components:</p>
<table>
  <thead>
      <tr>
          <th>Part of message</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>command</td>
          <td>Description of what caused the event, as found in the Sense logs. Example: <code>Check service status</code></td>
      </tr>
      <tr>
          <td>context</td>
          <td>In what context (if one exists) the event occurred. If no context is available <code>Not available</code> will be used. Example: <code>/qps/servicestatusworker</code></td>
      </tr>
      <tr>
          <td>exception_message</td>
          <td>If a serious problem/exception occurs the associated message is available here.</td>
      </tr>
      <tr>
          <td>host</td>
          <td>Host name of event source, as reported in Qlik Sense&rsquo;s log files. Example: <code>pro2-win1</code></td>
      </tr>
      <tr>
          <td>level</td>
          <td>Sense log level. Possible values are <code>WARN</code>, <code>ERROR</code>, <code>FATAL</code>.</td>
      </tr>
      <tr>
          <td>log_row</td>
          <td>Row number in Sense log file where the event can be found. Useful if you after all have to dig into the log files. Example: <code>7296</code></td>
      </tr>
      <tr>
          <td>message</td>
          <td>Description of what the event is about. Example: <code>Method: 'SendRimQrsStatusRequest'. Failed to retrieve service status from 'http://pro2-win3.lab.ptarmiganlabs.net:4444/status/'. Server host 'pro2-win3.lab.ptarmiganlabs.net'. Error message: 'Unable to connect to the remote server'</code></td>
      </tr>
      <tr>
          <td>origin</td>
          <td>Part of the proxy service the event originated from. Rarely used by Sense.</td>
      </tr>
      <tr>
          <td>result_code</td>
          <td>Result code as reported by the Sense source system that caused the event. Its meaning will differ depending on where the event originated. Example: <code>500</code></td>
      </tr>
      <tr>
          <td>source</td>
          <td>Source system within Sense that caused the event. Example: <code>qseow-repository</code></td>
      </tr>
      <tr>
          <td>subsystem</td>
          <td>Subsystem where the event originated. More granular than <code>source</code>. Example: <code>Service.Repository.Repository.Core.Status.ServiceStatusWorker</code></td>
      </tr>
      <tr>
          <td>tags</td>
          <td>User defined tags. Set in the main YAML config file. Example: <code>{&quot;env&quot;:&quot;DEV&quot;,&quot;foo&quot;:&quot;bar&quot;}</code></td>
      </tr>
      <tr>
          <td>ts_iso</td>
          <td>Timestamp (ISO format) when the event occurred, according to QSEoW. Example: <code>20211128T201538.508+0100</code></td>
      </tr>
      <tr>
          <td>ts_local</td>
          <td>Event timestamp (time format of Sense server). Example: <code>2021-11-28 20:15:38,508</code></td>
      </tr>
      <tr>
          <td>user_directory</td>
          <td>Sense user directory of the user causing the event. Example: <code>MYCOMPANY</code></td>
      </tr>
      <tr>
          <td>user_full</td>
          <td>The combination of <code>user_directory</code> and <code>user_id</code>. Example: <code>MYCOMPANY\joe</code></td>
      </tr>
      <tr>
          <td>user_id</td>
          <td>Sense user ID for the user causing the event. Example: <code>joe</code></td>
      </tr>
      <tr>
          <td>windows_user</td>
          <td>Windows account used to run the proxy QSEoW Windows service. Example: <code>LAB\\qlikservice</code></td>
      </tr>
  </tbody>
</table>
<h3 id="source-engine-service-errors-and-warnings">Source: Engine service (errors and warnings)</h3>
<p>The associative engine (the &ldquo;QIX&rdquo; engine) is the core of Qlik Sense. This is where the magic happens, all the calculations and selections in apps are ultimately done here.</p>
<p>Engine log events have these tags:</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>host</td>
          <td>Host name as reported in Qlik Sense&rsquo;s log files.</td>
      </tr>
      <tr>
          <td>level</td>
          <td>Sense log level. Possible values are <code>WARN</code>, <code>ERROR</code>, <code>FATAL</code>.</td>
      </tr>
      <tr>
          <td>log_row</td>
          <td>Row number in Sense log file where the event can be found. Useful if you after all have to dig into the log files.</td>
      </tr>
      <tr>
          <td>result_code</td>
          <td>Result code as reported by the Sense source system that caused the event. Its meaning will differ depending on where the event originated.</td>
      </tr>
      <tr>
          <td>source</td>
          <td>Source system within Sense that caused the event. Examples: <code>qseow-scheduler</code>, <code>qseow-proxy</code>, <code>qseow-repository</code></td>
      </tr>
      <tr>
          <td>subsystem</td>
          <td>Subsystem where the event originated. More granular than <code>source</code>. Example: <code>System.Scheduler.Scheduler.Master.Task.TaskSession</code></td>
      </tr>
      <tr>
          <td>user_directory</td>
          <td>Sense user directory of the user causing the event. Example: <code>MYCOMPANY</code></td>
      </tr>
      <tr>
          <td>user_id</td>
          <td>Sense user ID for the user causing the event. Example: <code>joe</code></td>
      </tr>
      <tr>
          <td>user_full</td>
          <td>The combination of <code>user_directory</code> and <code>user_id</code>. Example: <code>MYCOMPANY\joe</code></td>
      </tr>
      <tr>
          <td>windows_user</td>
          <td>Windows account used to run the engine QSEoW Windows service. Example: <code>LAB\\qlikservice</code></td>
      </tr>
      <tr>
          <td>task_id</td>
          <td>Task ID (if a task is involved in the event, for example task failing). Example: <code>58dd8322-e39c-4b71-b74e-13c47a2f6dd4</code></td>
      </tr>
      <tr>
          <td>task_name</td>
          <td>Task name (if a task is involved in the event). Example: <code>Reload task of Meetup.com</code></td>
      </tr>
      <tr>
          <td>app_id</td>
          <td>Application ID (if an app is involved in the event). Example: <code>deba4bcf-47e4-472e-97b2-4fe8d6498e11</code></td>
      </tr>
      <tr>
          <td>app_name</td>
          <td>Application name (if an app is involved in the event). Example: <code>Meetup.com</code></td>
      </tr>
      <tr>
          <td>engine_exe_version</td>
          <td>Version of the QIX engine executable.</td>
      </tr>
  </tbody>
</table>
<p>Fields in engine log events:</p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>command</td>
          <td>Description of what caused the event, as found in the Sense logs. Example: <code>Login:TryLogin</code></td>
      </tr>
      <tr>
          <td>context</td>
          <td>In what context (if one exists) the event occurred. If no context is available <code>Not available</code> will be used.</td>
      </tr>
      <tr>
          <td>exception_message</td>
          <td>If a serious problem/exception occurs the associated message is available here.</td>
      </tr>
      <tr>
          <td>message</td>
          <td>String. Description of what the event is about. Example: <code>Login failed for user 'LAB\\goran' wrong credentials?</code></td>
      </tr>
      <tr>
          <td>origin</td>
          <td>Part of the engine service the event originated from. Rarely used by Sense.</td>
      </tr>
      <tr>
          <td>raw_event</td>
          <td>The raw event message as received from QSEoW.</td>
      </tr>
      <tr>
          <td>session_id</td>
          <td>Engine session ID.</td>
      </tr>
      <tr>
          <td>result_code</td>
          <td>Result code as reported by the Sense source system that caused the event. Its meaning will differ depending on where the event originated. Example: <code>500</code></td>
      </tr>
  </tbody>
</table>
<h3 id="source-engine-service-performance-related-events">Source: Engine service (performance related events)</h3>
<p>Performance log events are used to capture <em>performance</em> related events from the associative/QIX engine.</p>
<p>Due to the potentially large number of performance log events, these can be filtered by Butler SOS.<br>
Accepted and rejected performance log events are stored in InfluxDB in slightly different ways.</p>
<h4 id="accepted-performance-log-events">Accepted performance log events</h4>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>host</code></td>
          <td>The hostname of the Sense server that generated the event.</td>
      </tr>
      <tr>
          <td><code>level</code></td>
          <td>The log level of the event. Always <code>INFO</code> for performance log events.</td>
      </tr>
      <tr>
          <td><code>source</code></td>
          <td>The source of the event. Always <code>qseow-qix-perf</code> for performance log events.</td>
      </tr>
      <tr>
          <td><code>log_row</code></td>
          <td>The log row number as created by Sense&rsquo;s logging framework.</td>
      </tr>
      <tr>
          <td><code>subsystem</code></td>
          <td>The subsystem that generated the event. Always <code>QixPerformance.Engine.Engine</code> for performance log events.</td>
      </tr>
      <tr>
          <td><code>method</code></td>
          <td>The engine method that generated the performance data. <code>Global::GetProgress</code>, <code>GenericObject::GetLayout</code>, <code>Global::OpenApp</code> etc</td>
      </tr>
      <tr>
          <td><code>object_type</code></td>
          <td>The type of object that the performance data is about. <code>table</code>, <code>barchart</code>, <code>sheet</code>, <code>CurrentSelection</code> etc.</td>
      </tr>
      <tr>
          <td><code>proxy_session_id</code></td>
          <td>The ID of the proxy session that generated the event. Will be a GUID for user sessions, 0 for internal work done by Sense.</td>
      </tr>
      <tr>
          <td><code>session_id</code></td>
          <td>The ID of the engine session that generated the event.</td>
      </tr>
  </tbody>
</table>
<p>| <code>user_full</code> | The full name of the user that generated the event. <User directory>&lt;user id&gt; |
| <code>user_directory</code> | The user directory of the user that generated the event. |
| <code>user_id</code> | The user ID of the user that generated the event. |
| <code>app_id</code> | The GUID of the app that the performance data is from. |
| <code>app_name</code> | The name of the app that the performance data is from, if available. Blank if not. |
| <code>object_id</code> | The ID of the app object that the performance data is about. |</p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>app_id</code></td>
          <td>String. The GUID of the app that the performance data is from.</td>
      </tr>
      <tr>
          <td><code>process_time</code></td>
          <td>Float. The amount of time that was needed to process the request. Milliseconds.</td>
      </tr>
      <tr>
          <td><code>work_time</code></td>
          <td>Float. The amount of time that the request did actual work. Milliseconds.</td>
      </tr>
      <tr>
          <td><code>lock_time</code></td>
          <td>Float. The amount of time that the request had to wait for an internal lock. Milliseconds.</td>
      </tr>
      <tr>
          <td><code>validate_time</code></td>
          <td>Float. The amount of time that the request used for validation. Milliseconds.</td>
      </tr>
      <tr>
          <td><code>traverse_time</code></td>
          <td>Float. The amount of time the request uses for the traverse part of the calculation. Milliseconds.</td>
      </tr>
      <tr>
          <td><code>handle</code></td>
          <td>String. The ID of the interface that handled the request. The interface can be Global, a certain sheet, a certain object, or similar.</td>
      </tr>
      <tr>
          <td><code>net_ram</code></td>
          <td>Integer. The amount of memory used for the calculation. Bytes.</td>
      </tr>
      <tr>
          <td><code>peak_ram</code></td>
          <td>Integer. The peak amount of memory used for the calculation. Bytes.</td>
      </tr>
      <tr>
          <td><code>raw_event</code></td>
          <td>JSON. The raw event data in JSON format. Useful together with the log chart type in Grafana.</td>
      </tr>
  </tbody>
</table>
<p>Descriptions of each metric/field can be found in the <a href="https://help.qlik.com/en-US/sense-admin/May2024/Subsystems/DeployAdministerQSE/Content/Sense_DeployAdminister/QSEoW/Deploy_QSEoW/Server-Logging-Tracing-Log-File-Format-Additional-Fields-QixPerformance-Log.htm">Qlik Sense logging documentation</a>.</p>
<h4 id="rejected-performance-log-events">Rejected performance log events</h4>
<p>For rejected performance log events, the individual events are not stored in InfluxDB.<br>
Instead, counters are used to keep track of how many events were rejected, broken down by a set of tags.</p>
<table>
  <thead>
      <tr>
          <th>Tag name</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>source</code></td>
          <td>Name of the event. Always <code>qseow-qix-perf</code> for rejected performance log events.</td>
      </tr>
      <tr>
          <td><code>app_id</code></td>
          <td>The GUID of the app that the performance data is from.</td>
      </tr>
      <tr>
          <td><code>app_name</code></td>
          <td>The name of the app that the performance data is from, if available. Blank if not.</td>
      </tr>
      <tr>
          <td><code>method</code></td>
          <td>The engine method that generated the performance data. <code>Global::GetProgress</code>, <code>GenericObject::GetLayout</code>, <code>Global::OpenApp</code> etc</td>
      </tr>
      <tr>
          <td><code>object_type</code></td>
          <td>The type of object that the performance data is about. <code>table</code>, <code>barchart</code>, <code>sheet</code>, <code>CurrentSelection</code> etc.</td>
      </tr>
  </tbody>
</table>
<p>A separate set of tags are added to the rejected performance log events.<br>
These tags are defined in the config file, <code>Butler-SOS.logEvents.enginePerformanceMonitor.trackRejectedEvents.tags</code>.</p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>counter</td>
          <td>Integer. The number of rejected performance log events.</td>
      </tr>
      <tr>
          <td>process_time</td>
          <td>Float. The amount of time that was needed to process the request. Milliseconds.</td>
      </tr>
  </tbody>
</table>
<h2 id="messages-from-the-log-database">Messages from the log database</h2>
<p>All log data written to InfluxDB share a common set of tag keys:</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>host</td>
          <td>Host name, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].host</code> property. Usually a fully qualified host name, or in some cases an IP address.</td>
      </tr>
      <tr>
          <td>server_name</td>
          <td>Human readable/friendly server name, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].serverName</code> property.</td>
      </tr>
      <tr>
          <td>server_description</td>
          <td>Description of the server, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].serverDescription</code> property.</td>
      </tr>
      <tr>
          <td>log_level</td>
          <td>The logging level of the log event (ERROR, WARNING, INFO etc).</td>
      </tr>
      <tr>
          <td>source_process</td>
          <td>Which Sense service the log event originated in.</td>
      </tr>
  </tbody>
</table>
<h3 id="measurement-log_event_logdb">Measurement: log_event_logdb</h3>
<p>Source: More or less <a href="https://help.qlik.com/en-US/sense-admin/November2021/Subsystems/DeployAdministerQSE/Content/Sense_DeployAdminister/QSEoW/Deploy_QSEoW/Qlik-Logging-Service.htm">log db</a>. A query is done to the log db in Postgres, the results are stored in InfluxDB. There is thus no Qlik API call per se.</p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>message</td>
          <td>string</td>
          <td>Log entry as retrieved from the Sense log database (Postgres).</td>
      </tr>
  </tbody>
</table>
<h2 id="butler-sos-metrics">Butler SOS metrics</h2>
<h3 id="measurement-butlersos_memory_usage">Measurement: butlersos_memory_usage</h3>
<p>These metrics tell you how much memory Butler SOS itself uses.<br>
More info on these metrics and what they mean is available <a href="https://www.valentinog.com/blog/node-usage/">here</a>.</p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>heap_total</td>
          <td>float</td>
          <td>Total size of the allocated heap.</td>
      </tr>
      <tr>
          <td>heap_used</td>
          <td>float</td>
          <td>Actual memory used during the execution of Butler SOS.</td>
      </tr>
      <tr>
          <td>process_memory</td>
          <td>float</td>
          <td>Total memory allocated for the execution of Butler SOS.</td>
      </tr>
  </tbody>
</table>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-3a5782be907ab37fcd71f782ea6c6c2c">3.2 - Available Metrics: New Relic</h1>
    <div class="lead">Once data has been sent to New Relic, its web based user interface makes it very intuitive to both create charts and combine these into dashboards.</div>
	<h2 id="new-relic">New Relic</h2>
<p><a href="https://newrelic.com">New Relic</a> offers a complete SaaS observability stack, ranging from high-volume ingestion of events/metrics/logs/traces to advanced dashboards that can be created ad-hoc using a web UI or from files and templates, for more of an infrastructure-as-code approach.</p>
<p>Storing metrics in New Relic is not mandatory, but some kind of metrics storage - either in <a href="https://newrelic.com">New Relic</a>, <a href="/docs/reference/available_metrics/influxdb/">InfluxDB</a> or <a href="/docs/reference/available_metrics/prometheus/">Prometheus</a> - is needed to take full benefit of Butler SOS&rsquo; features.</p>
<p>In order to view data in New Relic you first have to send data to them.</p>
<p>Butler SOS does this for you.</p>
<p>Furthermore, you can to a large degree control which Qlik Sense metrics, logs and events are sent to New Relic.</p>
<h2 id="data-volumes-and-pricing">Data volumes and pricing</h2>
<p>At the time of this writing New Relic offers a generous <a href="https://newrelic.com/pricing">free plan</a>.<br>
It will be a great starting point for everyone, if there&rsquo;s a need for more dashboard users etc the account can be upgraded as needed.</p>
<p>In most cases Butler SOS will not generate a lot of data and you can stay within New Relic&rsquo;s free tier.<br>
The amount of data generated by Sense health metrics and Butler SOS uptime metrics is very small indeed, but if your Qlik Sense environment for some reason generate a lot of <em>log events</em> that can cause the data volumes to increase rapidly.</p>
<p>For example, if a user connects to Sense and gets a https certificate warning in the browser, this will also cause a number of warnings and errors in the proxy logs. Multiple this by X users and there can suddenly be thousands of errors and warnings per hour in the Sense logs.<br>
If these are also sent to New Relic the data volumes increase quickly.</p>
<h3 id="overview-of-new-relic">Overview of New Relic</h3>
<p>New Relic is similar to InfluxDB in that Butler SOS pushes data to both systems.</p>
<p>The basic concepts are</p>
<ul>
<li><em>Metrics</em> represent a measurement of some kind. Number or sessions in the Sense proxy, amount of free RAM on a Sense server etc.</li>
<li><em>Events</em> are something that happened. Warnings and errors in the Sense log files can be forwarded to New Relic as events.<br>
Various user activities (user session start/stop etc) in Sense can also be sent to New Relic as events.</li>
<li><em>Attributes</em> are conceptually tags that are attached to metrics or events. These act as dimensions for the data.
Metrics in visualizations can be grouped by attributes, much in the same way Qlik Sense measurements are grouped by dimensions in Sense charts and tables.
<ul>
<li><em>Static attributes</em> are defined in Butler SOS&rsquo; config file.</li>
<li><em>Dynamic attributes</em> are determined at runtime.</li>
</ul>
</li>
</ul>
<p>In addition to the above these data formats exist but are not currently used by Butler SOS. This may change in the future.</p>
<ul>
<li><em>Logs</em> are essentially regular lines in a log file, consisting of several fields.</li>
<li><em>Distributed tracing</em> collects data as requests travel from one service to another, recording each segment of the journey as a span.
These spans contain important details about each segment of the request and are eventually combined into one trace.
The completed trace gives you a picture of the entire request.</li>
</ul>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-d9368053cab4888224d02b24aa450a89">3.3 - Available Metrics: Prometheus</h1>
    <div class="lead">In order to create graphs in for example Grafana, you must understand what metrics are available and how they are structured.</div>
	<h2 id="prometheus">Prometheus</h2>
<p>Metrics retrieved from the Sense servers can be stored in <a href="https://prometheus.io">Prometheus</a>. You don&rsquo;t have to be a Prometheus expert to use Butler SOS, but understanding some basic concepts are helpful.</p>
<p>Storing metrics in Prometheus is not mandatory, but some kind of metrics storage - either in Prometheus, <a href="/docs/reference/available_metrics/influxdb/">InfluxDB</a> or <a href="https://newrelic.com">New Relic</a> - is needed to take full benefit of Butler SOS&rsquo; features.</p>
<p>Prometheus gathers metrics by &ldquo;scraping&rdquo; data from web pages (&ldquo;endpoints&rdquo;) on which metrics are displayed in a well specified format.<br>
Most metrics from the Sense servers are exposed on a Prometheus compatible endpoint, but not all.<br>
InfluxDB is more flexible for some types of data, while Prometheus provides more easily used features for data aggregation when data should be displayed in Grafana.</p>
<h2 id="prometheus-endpoint">Prometheus endpoint</h2>
<p>Prometheus is enabled/disabled in the <code>Butler-SOS.prometheus</code> section in the config file.
Prometheus metrics are available on the <code>/metrics</code> URL on the IP and port specified in the config file.</p>
<p>For example, if the host is 0.0.0.0 and the port is 9842, Butler SOS will listen on port 9842 on all available network interfaces.
If the Butler SOS&rsquo; server&rsquo;s IP address is 192.168.1.168, a call from a web browser can look like this:</p>
<p><img src="/docs/reference/available_metrics/prometheus/prometheus-browser-1.png" alt="Prometheus metrics in web browser" title="Prometheus metrics in web browser"></p>
<p>This is the web page Prometheus will scrape and ingest into it&rsquo;s time-series database.</p>
<h3 id="overview-of-prometheus">Overview of Prometheus</h3>
<p>In contrast to InfluxDB, to which Butler SOS pushes data, Prometheus works the other way around.<br>
The Prometheus server is responsible for gathering data exposed by the systems that should be monitored (for example Butler SOS).</p>
<p>The basic concepts are</p>
<ul>
<li><a href="https://prometheus.io/docs/introduction/overview/#what-are-metrics">Metrics</a> represent the measurements of interest. &ldquo;fields&rdquo; in InfluxDB.</li>
<li><a href="https://prometheus.io/docs/concepts/data_model/#metric-names-and-labels">Labels</a> are used to categorize metrics (similar to tags in InfluxDB).</li>
</ul>
<h3 id="labels">Labels</h3>
<p>The labels available for all Prometheus metrics are:</p>
<table>
  <thead>
      <tr>
          <th>Label name</th>
          <th>Source</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>host</td>
          <td><code>Butler-SOS.serversToMonitor.servers[].host</code></td>
          <td>Host IP or FQDN of the server from which the metric comes.</td>
      </tr>
      <tr>
          <td>server_name</td>
          <td><code>Butler-SOS.serversToMonitor.servers[].serverName</code></td>
          <td>Human friendly server name.</td>
      </tr>
      <tr>
          <td>server_description</td>
          <td><code>Butler-SOS.serversToMonitor.servers[].serverDescription</code></td>
          <td>Human friendly server description.</td>
      </tr>
      <tr>
          <td>&hellip;</td>
          <td><code>Butler-SOS.serversToMonitor.servers[].serverTags.*</code></td>
          <td>All tags defined in the config file will be added as Prometheus labels.</td>
      </tr>
  </tbody>
</table>
<h3 id="metrics">Metrics</h3>
<p>Available metrics are similar to those in InfluxDB, with a few exceptions.</p>
<p>Prometheus is awesome when it comes to storing all kinds of measurements, but it doesn&rsquo;t offer a good way to store strings.<br>
For that reason Butler SOS metrics involving strings (for example list of apps loaded in memory) are not available on the Prometheus endpoint.<br>
Most of the metrics come from Qlik Sense&rsquo; <a href="https://help.qlik.com/en-US/sense-developer/November2020/Subsystems/EngineAPI/Content/Sense_EngineAPI/GettingSystemInformation/HealthCheckStatus.htm">health check API</a>.</p>
<h4 id="qlik-sense-metrics">Qlik Sense metrics</h4>
<p>These are the Prometheus metrics exposed by Butler SOS:</p>
<table>
  <thead>
      <tr>
          <th>Metric</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>butlersos_apps_calls</td>
          <td>Gauge</td>
          <td>Total number of requests made to the Qlik Sense engine.</td>
      </tr>
      <tr>
          <td>butlersos_apps_selections</td>
          <td>Gauge</td>
          <td>Total number of selections made to the Qlik Sense engine.</td>
      </tr>
      <tr>
          <td>butlersos_apps_activedocs_total</td>
          <td>Gauge</td>
          <td>Number of active apps. An app is active when a user is currently performing some action on it.</td>
      </tr>
      <tr>
          <td>butlersos_apps_inmemorydocs_total</td>
          <td>Gauge</td>
          <td>Number of apps apps currently loaded into memory, even if they do not have any open sessions or connections to it. Apps disappear from this metric when the engine has purged them from memory.</td>
      </tr>
      <tr>
          <td>butlersos_apps_loadeddocs_total</td>
          <td>Gauge</td>
          <td>Number of apps apps currently loaded into memory, that also have open sessions or connections.</td>
      </tr>
      <tr>
          <td>butlersos_cache_added</td>
          <td>Gauge</td>
          <td>Number of cache objects added.</td>
      </tr>
      <tr>
          <td>butlersos_cache_hits</td>
          <td>Gauge</td>
          <td>Number of cache hits.</td>
      </tr>
      <tr>
          <td>butlersos_cache_lookups</td>
          <td>Gauge</td>
          <td>Number of cache lookups.</td>
      </tr>
      <tr>
          <td>butlersos_cache_replaced</td>
          <td>Gauge</td>
          <td>Number of cache replaced cache objects.</td>
      </tr>
      <tr>
          <td>butlersos_cache_saturated</td>
          <td>Gauge</td>
          <td>When the value is 1, the engine is running with high resource usage; otherwise the value is 0.</td>
      </tr>
      <tr>
          <td>butlersos_cpu_total</td>
          <td>Gauge</td>
          <td>Percentage of the CPU used by the engine, averaged over a time period of 30 seconds.</td>
      </tr>
      <tr>
          <td>butlersos_mem_committed</td>
          <td>Gauge</td>
          <td>The total amount of committed memory for the engine process in MB.</td>
      </tr>
      <tr>
          <td>butlersos_mem_allocated</td>
          <td>Gauge</td>
          <td>The total amount of allocated memory (committed + reserved) from the operating system in MB.</td>
      </tr>
      <tr>
          <td>butlersos_mem_free</td>
          <td>Gauge</td>
          <td>The total amount of free memory (minimum of free virtual and physical memory) in MB.</td>
      </tr>
      <tr>
          <td>butlersos_session_active</td>
          <td>Gauge</td>
          <td>Number of active engine sessions. A session is active when a user is currently performing some action on an app, for example, making selections or creating content.</td>
      </tr>
      <tr>
          <td>butlersos_session_total</td>
          <td>Gauge</td>
          <td>Total number of engine sessions.</td>
      </tr>
      <tr>
          <td>butlersos_users_active</td>
          <td>Gauge</td>
          <td>Number of distinct active users. An active user is one who is currently performing an action on an app.</td>
      </tr>
      <tr>
          <td>butlersos_users_total</td>
          <td>Gauge</td>
          <td>Total number of distinct users within the current engine sessions.</td>
      </tr>
      <tr>
          <td>butlersos_engine_metadata</td>
          <td>Gauge</td>
          <td>Metadata about the Qlik Sense engine.</td>
      </tr>
      <tr>
          <td>butlersos_user_session_total</td>
          <td>Gauge</td>
          <td>Number of sessions (as reported by the proxy service).</td>
      </tr>
  </tbody>
</table>
<h4 id="nodejs-metrics">Node.js metrics</h4>
<p>A set of Node.js specific metrics are also available on Butler SOS&rsquo; Prometheus endpoint.<br>
These are described in the &ldquo;Default metrics&rdquo; section on <a href="https://github.com/siimon/prom-client">this</a> page.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  



          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Ptarmigan Labs Newsletter" aria-label="Ptarmigan Labs Newsletter">
    <a target="_blank" rel="noopener" href="https://ptarmiganlabs.com/#/portal/signup" aria-label="Ptarmigan Labs Newsletter">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="LinkedIn" aria-label="LinkedIn">
    <a target="_blank" rel="noopener" href="https://www.linkedin.com/in/gorsan/" aria-label="LinkedIn">
      <i class="fab fa-linkedin"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub discussions" aria-label="GitHub discussions">
    <a target="_blank" rel="noopener" href="https://github.com/ptarmiganlabs/butler-sos/discussions" aria-label="GitHub discussions">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/ptarmiganlabs/butler-sos" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Get in touch with Ptarmigan Labs" aria-label="Get in touch with Ptarmigan Labs">
    <a target="_blank" rel="noopener" href="mailto://info@ptarmiganlabs.com" aria-label="Get in touch with Ptarmigan Labs">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2018&ndash;2025
    <span class="td-footer__authors">Ptarmigan Labs AB</span></span><span class="td-footer__all_rights_reserved">All Rights Reserved</span><p class="td-footer__about mt-2"><a href="/about/">About Butler SOS</a></p>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/js/main.min.e31c2c3ea09070843d281c9229acf28ea382e633bae75ab340a57d57c1b24a41.js" integrity="sha256-4xwsPqCQcIQ9KBySKazyjqOC5jO651qzQKV9V8GySkE=" crossorigin="anonymous"></script>
<script src='/js/prism.js'></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>
