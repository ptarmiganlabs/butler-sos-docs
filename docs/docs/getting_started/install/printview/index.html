<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.131.0">
<link rel="canonical" type="text/html" href="https://butler-sos.ptarmiganlabs.com/docs/getting_started/install/">
<link rel="alternate" type="application/rss&#43;xml" href="https://butler-sos.ptarmiganlabs.com/docs/getting_started/install/index.xml">
<meta name="robots" content="noindex, nofollow">
<script defer data-domain="butler-sos.ptarmiganlabs.com" src="https://plausible.io/js/script.js"></script>

<link rel="canonical" href="https://butler-sos.ptarmiganlabs.com/docs/getting_started/install/" />



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Install | Butler SOS</title>
<meta name="description" content="The steps needed for installing and configuring vary slightly depending on what platform you use. The details are found here.
">
<meta property="og:url" content="https://butler-sos.ptarmiganlabs.com/docs/getting_started/install/">
  <meta property="og:site_name" content="Butler SOS">
  <meta property="og:title" content="Install">
  <meta property="og:description" content="The steps needed for installing and configuring vary slightly depending on what platform you use. The details are found here.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="website">

  <meta itemprop="name" content="Install">
  <meta itemprop="description" content="The steps needed for installing and configuring vary slightly depending on what platform you use. The details are found here.">
  <meta itemprop="dateModified" content="2024-09-02T16:27:31+02:00">
  <meta itemprop="wordCount" content="700">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Install">
  <meta name="twitter:description" content="The steps needed for installing and configuring vary slightly depending on what platform you use. The details are found here.">




<link rel="preload" href="/scss/main.min.5118d334f4d49e78b43432d75232dda13144ff70fc9d784048f9c31c8751ea0f.css" as="style">
<link href="/scss/main.min.5118d334f4d49e78b43432d75232dda13144ff70fc9d784048f9c31c8751ea0f.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="/css/prism.css"/>

  </head>
  <body class="td-section">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg width="200" height="109" viewBox="0 0 200 109" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><image id="image" width="200" height="109" xlink:href="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QBMRXhpZgAATU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAyKADAAQAAAABAAAAbQAAAAD/7QA4UGhvdG9zaG9wIDMuMAA4QklNBAQAAAAAAAA4QklNBCUAAAAAABDUHYzZjwCyBOmACZjs+EJ+/8AAEQgAbQDIAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/bAEMAAgICAgICAwICAwUDAwMFBgUFBQUGCAYGBgYGCAoICAgICAgKCgoKCgoKCgwMDAwMDA4ODg4ODw8PDw8PDw8PD//bAEMBAgICBAQEBwQEBxALCQsQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEP/dAAQADf/aAAwDAQACEQMRAD8A+B6KKK/Cz/SQKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9D4Hooor8LP9JAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/0fgeiiivws/0kCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/S+B6KKK/Cz/SQKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9P4Hooor8LP9JAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/1Pgeiiivws/0kCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/V+B6KKK/Cz/SQKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9k="/></defs><use id="Background-Layer" xlink:href="#image" x="0" y="0" width="200" height="109"/><defs><image id="image-1" width="65" height="95" xlink:href="data:image/png;base64,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"/></defs><use id="Butler" xlink:href="#image-1" x="6" y="4" width="65" height="95"/><defs><text id="string" transform="matrix(1.0 0.0 0.0 1.0 20.045454545460004 16.51333333334)" fill="#fff" font-family="HelveticaNeue-Bold, Helvetica Neue" y="34" x="55.98623999999998" font-size="34.848" text-decoration="none">Butler</text></defs><use id="Butler-1" xlink:href="#string"/><defs><text id="string-1" transform="matrix(1.0 0.0 0.0 1.0 55.86363636364 54.400000000000006)" fill="#fff" font-family="HelveticaNeue-BoldItalic, Helvetica Neue" y="17" x="83.862624" font-size="17.424" text-decoration="none">SOS</text></defs><use id="BUTLER-copy" xlink:href="#string-1"/></svg></span><span class="navbar-brand__name">Butler SOS</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/about/"><span>About</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="/docs/"><span>Documentation</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/community/"><span>Community</span></a>
      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/docs/getting_started/install/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Install</h1>
<div class="lead">The steps needed for installing and configuring vary slightly depending on what platform you use. The details are found here.</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-586fd08d3cdf9ce8963edb53d566d35a">Choosing a platform - what are the options?</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2: <a href="#pg-71789367edd5d985337d5c8decd98498">Native app</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.1: <a href="#pg-9d24ee3b75950dde560ebf08ddc9fc77">Windows</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.2: <a href="#pg-23b14bb080153f9fef11cbfb39401ec8">Linux and Mac OS</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>3: <a href="#pg-2d00e399c2ce3ff7029560e14fa1bf0d">Docker</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>4: <a href="#pg-63709b1cad5b08d29cad0f3c2660a2e1">InfluxDB &amp; Grafana</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>5: <a href="#pg-042f8545221354c3ca85f9b5466fea8f">Prometheus &amp; Grafana</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>


<div class="content">
      <style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice warning" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#warning-notice"></use></svg></span>Warning</p><p>Butler SOS can store data in InfluxDB 1.x or 2.x databases.</p>
<p>InfluxDB 3.x is currently (June 2024) in beta, but Butler SOS does not yet support it.</p></div>

<div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>There is a <a href="https://github.com/ptarmiganlabs/butler-sos/discussions/201">Tips &amp; Tricks to get started with Butler SOS</a> document on the Butler SOS forums.</p>
<p>It contains description of issues people have faced when installing Butler SOS, as well as solutions to them.</p></div>



<div class="pageinfo pageinfo-primary">
<p>If in doubt on how to install Butler SOS, please consider Docker as the first alternative.<br>
Why? Several reasons:</p>
<ul>
<li>Very quick to get started. Usually it takes just a few minutes to set up a Butler SOS instance in Docker.</li>
<li>Using Docker is a great way to test new tools without having to install the tool on one of your actual servers. If you decide the tool in question is not for you - just delete the Docker container. Your servers remain 100% the same as before the test.</li>
<li>The previous point is true not only for Butler SOS, but also its companion tools <a href="https://www.influxdata.com/products/influxdb-overview/">InfluxDB</a>, <a href="https://prometheus.io">Prometheus</a>, <a href="https://grafana.com/">Grafana</a> and <a href="https://en.wikipedia.org/wiki/MQTT">MQTT</a> (via for example the <a href="https://mosquitto.org/">Mosquitto MQTT broker</a>). You can run all of these tools in their own Docker containers, and not install a single piece of new, native applications during your evaluation of Butler SOS.</li>
<li>No need to install Node.js on your server(s). Less security, performance and maintenance concerns.</li>
<li>Make use of your existing Docker runtime environments, or use those offered by Amazon, Google, Microsoft etc.</li>
<li>Benefit from the extremely comprehensive tools ecosystem (monitoring, deployment etc) that is available for Docker.</li>
<li>Updating Butler SOS to the latest version (assuming no config file changes are needed for that particular upgrade) is as easy as stopping the container, doing a &ldquo;docker pull ptarmiganlabs/butler-sos:latest&rdquo;, and finally starting the container again.</li>
</ul>

</div>

<p>If Docker is not an option, the pre-built, stand-alone binaries for Windows, Linux and macOS are good options.<br>
They offer a download-configure-execute approach to running Butler SOS. Also a very good option.</p>
<p>But even with the above recommendations, Butler SOS can be deployed in lots of different configurations.<br>
It is therefore difficult to give precise instructions that will work everwhere, for everyone. Especially the fact that Butler SOS uses certificates to authenticate with Sense is a complicating factor. Certificates are (when correctly used) great for securing systems, but they can alse cause headaches.</p>
<p>First we must recognize that Sense uses <a href="https://en.wikipedia.org/wiki/Self-signed_certificate">self signed certificates</a>. This is fine, and as long as you work on a server where Sense Enterprise is installed, that server will have the Sense-provided certificates and Certificate Authority (CA) installed.</p>
<p>This means that the easiest option for getting Butler SOS up and running is usually to install it on one of your Sense servers.</p>
<p>That said, it is probably better system design to run Butler SOS (and maybe other members of the <a href="https://github.com/ptarmiganlabs">Butler family</a>) on their own server, maybe using some flavour of Linux (lower cost compared to Windows). Windows servers work equally well though.</p>
<p>In this case you might want to consider exporting the Sense CA certificate from one of your Sense servers, and then install it on the Linux server.
This <em>should</em> technically not be needed for Butler SOS to work correctly - as long as you specify the correct root.pem file in the Butler SOS config file, you should be ok.</p>
<p>If you specify an incorrect root CA certificate file in the <code>clientCertCA</code> config option, you will get an error like this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>2018-05-23T20:36:44.393Z - error: Error: Error: unable to verify the first certificate
</span></span><span style="display:flex;"><span>    at TLSSocket.&lt;anonymous&gt; <span style="color:#ce5c00;font-weight:bold">(</span>_tls_wrap.js:1105:38<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    at emitNone <span style="color:#ce5c00;font-weight:bold">(</span>events.js:106:13<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    at TLSSocket.emit <span style="color:#ce5c00;font-weight:bold">(</span>events.js:208:7<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    at TLSSocket._finishInit <span style="color:#ce5c00;font-weight:bold">(</span>_tls_wrap.js:639:8<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    at TLSWrap.ssl.onhandshakedone <span style="color:#ce5c00;font-weight:bold">(</span>_tls_wrap.js:469:38<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>2018-05-23T20:36:49.164Z - verbose: Event started: Query log db
</span></span><span style="display:flex;"><span>2018-05-23T20:36:49.180Z - verbose: Event started: Statistics collection
</span></span></code></pre></div><p>A general note on host names is also relevant.<br>
If you specify a server name of &ldquo;myserver.company.com&rdquo; while exporting certificates from the QMC, you should use that same server name in the Butler SOS config file.  Failing to do so will (most likely) result in an error:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>2018-05-23T19:51:03.087Z - error: Error: Error: Hostname/IP doesn<span style="color:#4e9a06">&#39;t match certificate&#39;</span>s altnames: <span style="color:#4e9a06">&#34;Host: serveralias.company.net. is not in the cert&#39;s altnames: DNS:myserver.company.com&#34;</span>
</span></span><span style="display:flex;"><span>    at Object.checkServerIdentity <span style="color:#ce5c00;font-weight:bold">(</span>tls.js:223:17<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    at TLSSocket.&lt;anonymous&gt; <span style="color:#ce5c00;font-weight:bold">(</span>_tls_wrap.js:1111:29<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    at emitNone <span style="color:#ce5c00;font-weight:bold">(</span>events.js:106:13<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    at TLSSocket.emit <span style="color:#ce5c00;font-weight:bold">(</span>events.js:208:7<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    at TLSSocket._finishInit <span style="color:#ce5c00;font-weight:bold">(</span>_tls_wrap.js:639:8<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    at TLSWrap.ssl.onhandshakedone <span style="color:#ce5c00;font-weight:bold">(</span>_tls_wrap.js:469:38<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>2018-05-23T19:51:07.701Z - verbose: Event started: Statistics collection
</span></span></code></pre></div>
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-586fd08d3cdf9ce8963edb53d566d35a">1 - Choosing a platform - what are the options?</h1>
    <div class="lead">You can run Butler SOS on several platforms, each with their own pros and cons. This section should help you decide which platform is right for you.</div>
	<!-- 

<div class="pageinfo pageinfo-primary">
<p>This is a placeholder page. Replace it with your own content.</p>

</div>
 -->
<p>As Butler SOS is written in Node.js, the tool in theory runs on all platforms where Node.js is available.
It is also available as a <a href="https://hub.docker.com/r/ptarmiganlabs/butler-sos">Docker image</a>.</p>
<p>Docker is <strong>by far</strong> the preferred way of running Butler SOS, mainly because it gives you a very nice, production grade (stable, scalable, monitorable etc) execution environment. If you are really serious about scalability and stability you could even run Butler SOS in Kubernetes.</p>
<p>Other platforms can be used too, of course - let&rsquo;s look at the pros and cons of some of the more commonly used platforms:</p>
<table>
<thead>
<tr>
<th>Platform</th>
<th>Pros</th>
<th>Cons</th>
</tr>
</thead>
<tbody>
<tr>
<td>Docker</td>
<td>- Easy to set up Butler SOS in Docker <br>- Easy to test new versions of Butler SOS <br>- Use existing Docker infrastructure<br>- Monitoring, restarts etc built into Docker<br> - Runs on low cost hardware and OSs</td>
<td>- Docker environment needed (if not already available). Setting up and running Docker is not hard, but does require somewhat other skills than those needed to run a Sense environment</td>
</tr>
<tr>
<td>Kubernetes</td>
<td>- Enterprise grade <br>- Fault tolerant <br>- Deployed alongside other enterprise applications</td>
<td>- More difficult to set up than Docker</td>
</tr>
<tr>
<td>Windows server</td>
<td>- Butler SOS can run on same server as Qlik Sense, saving hardware/server costs<br>- Pre-built, standalone binaries available</td>
<td>- Running Butler SOS natively on the Sense server is a potential risk (usually a good idea to isolate systems/services to their own servers/environments whenever possible)<br>- More difficult (compared to Docker) to achieve a production grade setup (auto restarts etc)</td>
</tr>
<tr>
<td>Linux</td>
<td>- No cost for operating system (at least not for most Linux versions)<br>- Runs on low cost hardware<br>- Pre-built, standalone binaries available</td>
<td>- More difficult (compared to Docker) to achieve a production grade setup (auto restarts etc)</td>
</tr>
<tr>
<td>Mac OS</td>
<td>- For development, if you want to extend or modify Butler SOS<br>- Signed, pre-built, standalone binaries available</td>
<td>- Not a server grade operating system, i.e. not for production use</td>
</tr>
<tr>
<td>Windows (desktop)</td>
<td>- For development, if you want to extend or modify Butler SOS</td>
<td>- Not a server grade operating system, i.e. not for production use</td>
</tr>
</tbody>
</table>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-71789367edd5d985337d5c8decd98498">2 - Native app</h1>
    <div class="lead">How to install Butler SOS as a Node.js application.</div>
	<h2 id="selecting-an-os">Selecting an OS</h2>
<p>While Qlik Sense Enterprise is a Windows only system, Butler SOS should be able to run on any OS where Node.js is available.<br>
Butler SOS has been succesfully used as a native Node.js app - during development and production - on Windows, Linux (Debian and Ubuntu tested) and mac OS.</p>
<h2 id="prerequisites">Prerequisites</h2>
<table>
<thead>
<tr>
<th>What</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td>Qlik Sense Enterprise on Windows</td>
<td><em>Mandatory.</em> Butler SOS is developed with Qlik Sense Enterprise on Windows (QSEoW) in mind. <br>Butler SOS is simply not intended to work with Sense Desktop or Sense cloud.</td>
</tr>
<tr>
<td>Node.js</td>
<td><em>Mandatory.</em> Butler SOS is written in Node - which is thus a firm requirement.</td>
</tr>
<tr>
<td>MQTT broker</td>
<td><em>Optional.</em> MQTT is used for outbound pub-sub messaging. Butler SOS assumes a working MQTT broker is available, the IP of which is defined in the Butler SOS config file. <a href="https://mosquitto.org/">Mosquitto</a> is a great open source broker. It requires very little hardware to run, even the smallest (usually free) Amazon/Google/Microsoft/&hellip; instance is enough, if you want a dedicated MQTT server. If you don&rsquo;t care about the pubsub features of Butler SOS, you don&rsquo;t need a MQTT broker. In this case you can disable the MQTT features in the config YAML file.</td>
</tr>
<tr>
<td><a href="https://www.influxdata.com/time-series-platform/">InfluxDB</a></td>
<td><em>Use at least one of InfluxDB and Prometheus.</em> An open source database for realtime information, used to store metrics around Butler&rsquo;s own memory usage over time (if this feature is enabled).<br> At this point more metrics and events are sent to InfluxDB, compared to Prometheus.</td>
</tr>
<tr>
<td><a href="https://prometheus.io">Prometheus</a></td>
<td><em>Use at least one of InfluxDB and Prometheus.</em> The de-facto standard open source tool for metrics gathering in large-scale systems, including Kubernetes. A bit more complex to set up and configure compared to InfluxDB, but also more focused on providing observability features.</td>
</tr>
<tr>
<td><a href="https://grafana.com">Grafana</a></td>
<td><em>Optional.</em> The de-facto open source standard for showing real-time metrics. In order to visualise Sense realtime metrics in Grafana you must enable at least one of InfluxDB or Prometheus.</td>
</tr>
</tbody>
</table>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-9d24ee3b75950dde560ebf08ddc9fc77">2.1 - Windows</h1>
    <div class="lead">Running Butler SOS in Windows.</div>
	<h2 id="installation">Installation</h2>
<p>There are two options: Run Butler SOS as a standalone binary or as a Node.js app.
The first is by far easier to set up and maintain and thus recommended.</p>
<h3 id="using-the-pre-built-standalone-app">Using the pre-built, standalone app</h3>
<p>The pre-build binaries are available from the <a href="https://github.com/ptarmiganlabs/butler-sos/releases">releases page</a>.</p>
<ol>
<li>Download the Windows binary</li>
<li>&ldquo;Unblock&rdquo; the downloaded zip file
<ol>
<li>Right-click the zip file</li>
<li>Select &ldquo;properties&rdquo;</li>
<li>Mark the &ldquo;Unblock&rdquo; check box in the lower right part of the properties window</li>
<li>Click the &ldquo;Apply&rdquo; button, then &ldquo;Ok&rdquo; to close the properties window</li>
</ol>
</li>
<li>Unzip the zip file</li>
<li>Move the extracted <code>butler-sos.exe</code> file to desired location, for example <code>d:\tools\butler-sos</code></li>
<li>Use <a href="https://nssm.cc/download">nssm</a> or similar tool to install Butler SOS as a Windows service</li>
</ol>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 410px">
<img class="card-img-top" src="/docs/getting_started/install/native/windows/unblock-butler-sos-windows-1_hu18366972164874321277.png" width="400" height="562">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Unblocking the Butler SOS zip file on Windows Server

</p>
</figcaption>
</figure>

<h3 id="using-nodejs">Using Node.js</h3>
<p>In this scenario you will use the Butler SOS source code together with the standard Node.js runtime libraries.</p>
<p>The result is the same as with the stand-alone binaries, you just have to do more of the work yourself.<br>
This is usually <em>not</em> preferred, but if you want to add new features to (or modify existone ones) Butler SOS, this option is for you</p>
<h3 id="1-install-nodejs">1. Install Node.js</h3>
<p>The <a href="https://nodejs.org/en/download/">latest LTS version</a> is usually a good choice.</p>
<h3 id="2-select-a-directory-from-which-butler-sos-will-be-run">2. Select a directory from which Butler SOS will be run</h3>
<p>This can be pretty much anywhere, in this example d:\tools\butler-sos will be used.</p>
<h3 id="3-get-butler-sos">3. Get Butler SOS</h3>
<p>Get the desired <a href="https://github.com/ptarmiganlabs/butler-sos/releases">Butler SOS version</a> and extract it into the directory above.</p>
<p>Get the latest available version unless you have a <em>really</em> good reason to use an older version.<br>
New features are added, bugs fixed and security updates are applied in each version - it&rsquo;s simply a good idea to use the latest version.</p>
<p>Do not just clone the Butler SOS repository as that will give you the latest development version, which may not yet be fully tested and packaged.<br>
The exception is of course if you want to contribute to Butler SOS development - then forking and cloning the repository is the right thing to do.</p>
<h3 id="4-install-nodejs-dependencies">4. Install Node.js dependencies</h3>
<p>From d:\tools\butler-sos\src, run <code>npm i</code> to install the various Node.js modules used by Butler SOS. Depending on your server configuration you may get some warnings about (for example) Python not being installed, these can usually be ignored.</p>
<h2 id="configuration">Configuration</h2>
<p>The configuration file is used the same way as when Butler SOS runs on Docker, with one exception:</p>
<p>The path to the certificates used to authenticate with Sense must be specified in the config file. With Docker the certificate path is always the same, but with Windows you need to specify where the certificate files are located.</p>
<p>For example, if the certificate files exported from Sense are stored in d:\secrets\sensecert, the config file would look like this when used on Windows:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Certificates to use when querying Sense for healthcheck data. Get these from the Certificate Export in QMC.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">cert</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">clientCert</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">d:\secrets\sensecert\client.pem</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">clientCertKey</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">d:\secrets\sensecert\client_key.pem</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">clientCertCA</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">d:\secrets\sensecert\root.pem</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="stayin-alive">Stayin&rsquo; alive</h2>
<p>A tool like Butler SOS should of course start automatically when the server it runs on is restarted. This can be achieved in at least a couple of ways:</p>
<ol>
<li>
<p>By far the best option is to turn Butler SOS into a Windows service. That way it will be started on server boot, restarted if it fails etc. There are various tools for doing this, with <a href="https://nssm.cc/">NSSM</a> being a very good one. Butler SOS has been installed in lots of Sense environments this way.</p>
</li>
<li>
<p>You can also use a Node process monitor such as <a href="http://pm2.keymetrics.io/">PM2</a> to monitor the Butler SOS process, and restart it if it for some reason crashes. PM2 is not entirely easy to use on Windows though.</p>
</li>
</ol>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-23b14bb080153f9fef11cbfb39401ec8">2.2 - Linux and Mac OS</h1>
    <div class="lead">Running Butler SOS in Linux and Mac OS. Installation and configuration.</div>
	<h2 id="installation">Installation</h2>
<p>There are two options: Run Butler SOS as a standalone binary or as a Node.js app.
The first is by far easier to set up and maintain and thus recommended.</p>
<h3 id="using-the-pre-built-standalone-app">Using the pre-built, standalone app</h3>
<p>The pre-build binaries are available from the <a href="https://github.com/ptarmiganlabs/butler-sos/releases">releases page</a>.</p>
<ol>
<li>Download the Linux/macOS binary</li>
<li>Move the extracted <code>butler-sos</code> file to desired location.</li>
<li>Use the process monitor of choice (see below) to make sure Butler SOS is always running</li>
</ol>
<h3 id="using-nodejs">Using Node.js</h3>
<p>This scenario is identical to the <a href="/docs/getting_started/install/native/windows/">Windows scenario</a>, please refer to that page for details. Keep in mind that the format of file systems paths differ between Windows and Linxu/Mac OS.</p>
<h2 id="configuration">Configuration</h2>
<p>Once again, same thing as <a href="/docs/getting_started/install/native/windows/">on Windows</a>.</p>
<h2 id="stayin-alive">Stayin&rsquo; alive</h2>
<p>A Node process monitor can be used on Linux or Mac OS too.<br>
Tools like <a href="http://pm2.keymetrics.io/">PM2</a> in fact usually work better on Linux/Mac OS than on Windows.</p>
<p>You can probably also use Linux&rsquo; standard service layer to start Butler SOS, that has not been tested though.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-2d00e399c2ce3ff7029560e14fa1bf0d">3 - Docker</h1>
    <div class="lead">Running Butler SOS in Docker. Installation and configuration.</div>
	<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>Butler SOS Docker images are automatically built for several architectures:</p>
<ul>
<li>amd64: This is by far the most common platform - your typical Intel based server use amd64.</li>
<li>arm64: Arm servers are now available from most cloud providers and offer very competetive price/performance. Apple&rsquo;s new M1 CPUs also use arm64, as does the newer Raspberry Pi models.</li>
<li>arm/v7: An older Arm architecture found in previous-gen Raspberry Pis, for example.</li>
</ul>
<p>All images are available on <a href="https://hub.docker.com/r/ptarmiganlabs/butler-sos/tags?page=1&ordering=last_updated">Docker Hub</a>.</p></div>

<p>Docker is great in that it runs on many different platforms.<br>
This means that as long as the Docker runtime environment is installed, you can run Butler SOS on your Mac laptop, on a Linux server or on a Windows server.<br>
Or in a Kubernetes cluster to get enterprise grade process monitoring of Butler SOS.</p>
<h2 id="installation">Installation</h2>
<h3 id="docker-runtime">Docker runtime</h3>
<p>Installing Docker is beyond the scope of this document, but there are plenty of online tutorials covering this.</p>
<h3 id="butler-sos-installation-and-configuration">Butler SOS installation and configuration</h3>
<p>When using Docker there is no installation in the traditional sense.<br>
Instead we (in this case) use a docker-compose file to define how Butler SOS should be executed within a Docker container. There are also other ways to start Docker containers, but docker-compose is usually a good and robust starting point.</p>
<p>Configuration of Butler specific settings is then done using Butler&rsquo;s own JSON/YAML config file.</p>
<h3 id="install--configure---walkthrough">Install &amp; configure - walkthrough</h3>
<p>Create a directory for Butler SOS. Config files and logs will be stored here.<br>
This example uses macOS but the commands will be very similar on Linux.<br>
Docker on Windows is another story - it&rsquo;s there and works great, but not always identical to Linux/macOS.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜  butler-sos-demo mkdir -p butler-sos-docker/config/certificate
</span></span><span style="display:flex;"><span>➜  butler-sos-demo mkdir -p butler-sos-docker/log
</span></span><span style="display:flex;"><span>➜  butler-sos-demo <span style="color:#204a87">cd</span> butler-sos-docker
</span></span><span style="display:flex;"><span>➜  butler-sos-docker
</span></span></code></pre></div><ol>
<li>
<p>Copy <a href="https://github.com/ptarmiganlabs/butler-sos/blob/master/docs/docker-compose/docker-compose.yml">docker-compose.yml</a> from the GitHub repository to the Butler SOS directory that was created above. The directory where the docker-compose file is stored is the &lsquo;root&rsquo; directory of Butler SOS - everything else is relative to this directory.</p>
</li>
<li>
<p>Adapt the docker-compose file as needed (usually no changes are needed if you want to run the latest version of Butler SOS).</p>
</li>
<li>
<p>Copy the <a href="https://github.com/ptarmiganlabs/butler-sos/blob/master/src/config/production_template.yaml">YAML config file</a> from the GitHub repository into the ./config directory, rename it to <code>production.yaml</code> (or something else, as long as it matches the NODE_ENV environment variable set in the <code>docker-compose.yml</code> file) and edit it as needed. Note that for the Docker setup the path to certificates (as specified in the YAML config file) should be <code>/nodeapp/config/certificate/</code> (this is the Docker container&rsquo;s internal path to the certificate directory).</p>
</li>
<li>
<p>Edit the config file above as needed, with respect to your local Sense environment, folder paths etc. The provided template file has reasonable defualt settings where possible, but there are also a number of paths, passwords etc that must be configured.</p>
</li>
<li>
<p>Export certifiates from the QMC in Qlik Sense Enterprise, place them in the <code>./config/certificate</code> directory (i.e. in a subdirectory to the directory where the docker-comspose file is stored). The certificates can in theory be placed anywhere, as long as they are made available to the Docker container via a volume mount in the docker-compose.yaml file (e.g. <code>- &quot;./config:/nodeapp/config&quot;</code>).</p>
</li>
</ol>
<p>Let&rsquo;s do this one step at a time.<br>
Here we will bring up a single container with Butler SOS in it.<br>
The Butler SOS config file is called <code>production.yaml</code>.</p>
<p>First, what files are there?</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜  butler-sos-docker ls -la
</span></span><span style="display:flex;"><span>total <span style="color:#0000cf;font-weight:bold">8</span>
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#0000cf;font-weight:bold">5</span> goran  staff   <span style="color:#0000cf;font-weight:bold">160</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:08 .
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#0000cf;font-weight:bold">3</span> goran  staff    <span style="color:#0000cf;font-weight:bold">96</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 18:49 ..
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#0000cf;font-weight:bold">4</span> goran  staff   <span style="color:#0000cf;font-weight:bold">128</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:08 config
</span></span><span style="display:flex;"><span>-rw-r--r--  <span style="color:#0000cf;font-weight:bold">1</span> goran  staff  <span style="color:#0000cf;font-weight:bold">1505</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:01 docker-compose.yml
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#0000cf;font-weight:bold">2</span> goran  staff    <span style="color:#0000cf;font-weight:bold">64</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 18:49 log
</span></span><span style="display:flex;"><span>➜  butler-sos-docker
</span></span><span style="display:flex;"><span>➜  butler-sos-docker ls -la config
</span></span><span style="display:flex;"><span>total <span style="color:#0000cf;font-weight:bold">48</span>
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#0000cf;font-weight:bold">4</span> goran  staff    <span style="color:#0000cf;font-weight:bold">128</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:08 .
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#0000cf;font-weight:bold">5</span> goran  staff    <span style="color:#0000cf;font-weight:bold">160</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:08 ..
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#0000cf;font-weight:bold">5</span> goran  staff    <span style="color:#0000cf;font-weight:bold">160</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:08 certificate
</span></span><span style="display:flex;"><span>-rw-r--r--  <span style="color:#0000cf;font-weight:bold">1</span> goran  staff  <span style="color:#0000cf;font-weight:bold">21903</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:08 production.yaml
</span></span><span style="display:flex;"><span>➜  butler-sos-docker
</span></span><span style="display:flex;"><span>➜  butler-sos-docker ls -la config/certificate
</span></span><span style="display:flex;"><span>total <span style="color:#0000cf;font-weight:bold">24</span>
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#0000cf;font-weight:bold">5</span> goran  staff   <span style="color:#0000cf;font-weight:bold">160</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:08 .
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#0000cf;font-weight:bold">4</span> goran  staff   <span style="color:#0000cf;font-weight:bold">128</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:08 ..
</span></span><span style="display:flex;"><span>-rw-r--r--@ <span style="color:#0000cf;font-weight:bold">1</span> goran  staff  <span style="color:#0000cf;font-weight:bold">1170</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:06 client.pem
</span></span><span style="display:flex;"><span>-rw-r--r--@ <span style="color:#0000cf;font-weight:bold">1</span> goran  staff  <span style="color:#0000cf;font-weight:bold">1704</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:06 client_key.pem
</span></span><span style="display:flex;"><span>-rw-r--r--@ <span style="color:#0000cf;font-weight:bold">1</span> goran  staff  <span style="color:#0000cf;font-weight:bold">1224</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:06 root.pem
</span></span><span style="display:flex;"><span>➜  butler-sos-docker
</span></span></code></pre></div><p>What does the docker-compose.yml file look like?</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜  butler-sos-docker cat docker-compose.yml
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># docker-compose.yml</span>
</span></span><span style="display:flex;"><span>version: <span style="color:#4e9a06">&#34;3.3&#34;</span>
</span></span><span style="display:flex;"><span>services:
</span></span><span style="display:flex;"><span>    butler-sos:
</span></span><span style="display:flex;"><span>        image: ptarmiganlabs/butler-sos:latest
</span></span><span style="display:flex;"><span>        container_name: butler-sos
</span></span><span style="display:flex;"><span>        restart: always
</span></span><span style="display:flex;"><span>        volumes:
</span></span><span style="display:flex;"><span>            <span style="color:#8f5902;font-style:italic"># Make config file and log files accessible outside of container</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;./config:/nodeapp/config&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;./log:/nodeapp/log&#34;</span>
</span></span><span style="display:flex;"><span>        environment:
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;NODE_ENV=production&#34;</span> <span style="color:#8f5902;font-style:italic"># Means that Butler SOS will read config data from production.yaml</span>
</span></span><span style="display:flex;"><span>        logging:
</span></span><span style="display:flex;"><span>            driver: <span style="color:#4e9a06">&#34;json-file&#34;</span>
</span></span><span style="display:flex;"><span>            options:
</span></span><span style="display:flex;"><span>                max-file: <span style="color:#4e9a06">&#34;5&#34;</span>
</span></span><span style="display:flex;"><span>                max-size: <span style="color:#4e9a06">&#34;5m&#34;</span>
</span></span><span style="display:flex;"><span>        networks:
</span></span><span style="display:flex;"><span>            - senseops
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>networks:
</span></span><span style="display:flex;"><span>    senseops:
</span></span><span style="display:flex;"><span>        driver: bridge
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>➜  butler-sos-docker
</span></span></code></pre></div><p>Ok, all good. Let&rsquo;s start the container using docker-compose (the exact output will depend on what version of Butler SOS you are using and what features you have enabled in its YAML config file).</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜  butler-sos-docker docker-compose up
</span></span><span style="display:flex;"><span>Creating network <span style="color:#4e9a06">&#34;butler-sos-docker_senseops&#34;</span> with driver <span style="color:#4e9a06">&#34;bridge&#34;</span>
</span></span><span style="display:flex;"><span>Creating butler-sos ... <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>Attaching to butler-sos
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:28.754Z info: CONFIG: Influxdb enabled: <span style="color:#204a87">true</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:28.757Z info: CONFIG: Influxdb host IP: 192.168.100.20
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:28.757Z info: CONFIG: Influxdb host port: <span style="color:#0000cf;font-weight:bold">8086</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:28.758Z info: CONFIG: Influxdb db name: senseops
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.003Z info: CONFIG: Found InfluxDB database: senseops
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.219Z info: --------------------------------------
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.220Z info: Starting Butler SOS
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.220Z info: Log level: verbose
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.221Z info: App version: 9.2.0
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.221Z info: Instance ID    : 87b978019ae........
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.222Z info:
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.223Z info: Node version   : v18.7.0
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.223Z info: Architecture   : x64
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.224Z info: Platform       : linux
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.224Z info: Release        : <span style="color:#0000cf;font-weight:bold">11</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.224Z info: Distro         : Debian GNU/Linux
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.224Z info: Codename       : bullseye
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.224Z info: Virtual        : <span style="color:#204a87">false</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.225Z info: Processors     : <span style="color:#0000cf;font-weight:bold">4</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.225Z info: Physical cores : <span style="color:#0000cf;font-weight:bold">4</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.225Z info: Cores          : <span style="color:#0000cf;font-weight:bold">4</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.226Z info: Docker arch.   : undefined
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.226Z info: Total memory   : <span style="color:#0000cf;font-weight:bold">6233055232</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.226Z info: Standalone app : <span style="color:#204a87">false</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.226Z info: --------------------------------------
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.226Z info: Client cert: /nodeapp/config/certificate/client.pem
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.227Z info: Client cert key: /nodeapp/config/certificate/client_key.pem
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.227Z info: CA cert: /nodeapp/config/certificate/root.pem
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.250Z verbose: MAIN: Anonymous telemetry reporting has been <span style="color:#204a87">set</span> up.
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.252Z verbose: MAIN: Starting Docker healthcheck server...
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.257Z info: USER EVENT: UDP server listening on 0.0.0.0:9997
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.257Z info: LOG EVENT: UDP server listening on 0.0.0.0:9996
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.290Z info: MAIN: Started Docker healthcheck server on port 12398.
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.290Z info: MAIN: Starting Prometheus Butler SOS endpoint on 0.0.0.0:9842.
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.291Z verbose: PROM: Setting up Prometheus client <span style="color:#204a87;font-weight:bold">for</span> server: sense1
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.292Z verbose: PROM: Setting up Prometheus client <span style="color:#204a87;font-weight:bold">for</span> server: sense2
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.310Z info: PROM: Prometheus Butler SOS metrics server now listening on port <span style="color:#0000cf;font-weight:bold">9842</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.311Z info: PROM: Prometheus Node.js metrics server now listening on port 0.0.0.0:9001
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:30.911Z verbose: --------------------------------
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:30.911Z verbose: Iteration <span style="color:#8f5902;font-style:italic"># 1, Uptime: 0 months, 0 days, 0 hours, 0 minutes, 2.005 seconds, Heap used 33.26 MB of total heap 58.39 MB. External (off-heap): 3.57 MB. Memory allocated to process: 92.45 MB.</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:31.051Z verbose: UPTIME NEW RELIC: Sent Butler SOS memory usage data to New Relic account <span style="color:#0000cf;font-weight:bold">123456789</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Ptarmigan Labs NR account&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:31.269Z verbose: MEMORY USAGE INFLUXDB: Sent Butler SOS memory usage data to InfluxDB
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>Once everything everything looks good you can stop the containers (ctrl-C), then start them again in daemon mode (i.e. running unattended in the background):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜  butler-sos-docker docker-compose up -d
</span></span><span style="display:flex;"><span>Starting butler-sos ... <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>➜  butler-sos-docker
</span></span></code></pre></div><p>Setting the log level to info in the config file will reduce log output.</p>
<p>The Docker container implements Docker healthchecks, which means you can run <code>docker ps</code> to see whether the container is healthy or not (assuming Docker healthchecks are enabled in the config file, of course):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜  butler-sos-docker docker ps
</span></span><span style="display:flex;"><span>CONTAINER ID   IMAGE                             COMMAND                  CREATED              STATUS                    PORTS     NAMES
</span></span><span style="display:flex;"><span>9d2253511a24   ptarmiganlabs/butler-sos:latest   <span style="color:#4e9a06">&#34;docker-entrypoint.s…&#34;</span>   About a minute ago   Up <span style="color:#0000cf;font-weight:bold">17</span> seconds <span style="color:#ce5c00;font-weight:bold">(</span>healthy<span style="color:#ce5c00;font-weight:bold">)</span>             butler-sos
</span></span><span style="display:flex;"><span>➜  butler-sos-docker
</span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-63709b1cad5b08d29cad0f3c2660a2e1">4 - InfluxDB &amp; Grafana</h1>
    <div class="lead">How to use Butler SOS with InfluxDB and Grafana using Docker.</div>
	<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice warning" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#warning-notice"></use></svg></span>Warning</p><p>Butler SOS supports InfluxDB version 1.x and 2x.</p>
<p>InfluxDB v3.x is not yet supported.</p></div>

<p>If you already have InfluxDB and/or Grafana running you can skip this section.</p>
<h2 id="running-in-docker-using-docker-compose">Running in Docker using docker-compose</h2>
<p>The easiest way to get started is to run these tools in Docker containers, controlled by docker-compose files.<br>
Running them under Kubernetes will give you a whole other level of fault tolerance, scalability etc - but this also requries much more when it comes to Kubernetes skills. Use the setup that&rsquo;s relevant to your use case.</p>
<p>You can use a single docker-compose file for Butler SOS, InfluxDB and Grafana - or separate docker-compose files for each tool.</p>
<p>The advantage of using a single docker-compose file is that the entire stack of tools will be launched in unison. You can create dependencies between the tools if needed etc - very convenient.
On the other hand, having separate docker-compose files makes it easier to restart (or upgrade or in other ways change) a single service without affecting other services.</p>
<h3 id="full-stack-docker-compose-file">Full stack docker-compose file</h3>
<p>Let&rsquo;s start Butler SOS, InfluxDB and Grafana from a single <code>docker-compose_fullstack_influxdb.yml</code> file:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜  butler-sos-docker cat docker-compose_fullstack_influxdb.yml
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># docker-compose_fullstack_influxdb.yml</span>
</span></span><span style="display:flex;"><span>version: <span style="color:#4e9a06">&#34;3.3&#34;</span>
</span></span><span style="display:flex;"><span>services:
</span></span><span style="display:flex;"><span>    butler-sos:
</span></span><span style="display:flex;"><span>        image: ptarmiganlabs/butler-sos:latest
</span></span><span style="display:flex;"><span>        container_name: butler-sos
</span></span><span style="display:flex;"><span>        restart: always
</span></span><span style="display:flex;"><span>        volumes:
</span></span><span style="display:flex;"><span>            <span style="color:#8f5902;font-style:italic"># Make config file and log files accessible outside of container</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;./config:/nodeapp/config&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;./log:/nodeapp/log&#34;</span>
</span></span><span style="display:flex;"><span>        environment:
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;NODE_ENV=production_influxdb&#34;</span> <span style="color:#8f5902;font-style:italic"># Means that Butler SOS will read config data from production_influxdb.yaml</span>
</span></span><span style="display:flex;"><span>        logging:
</span></span><span style="display:flex;"><span>            driver: <span style="color:#4e9a06">&#34;json-file&#34;</span>
</span></span><span style="display:flex;"><span>            options:
</span></span><span style="display:flex;"><span>                max-file: <span style="color:#4e9a06">&#34;5&#34;</span>
</span></span><span style="display:flex;"><span>                max-size: <span style="color:#4e9a06">&#34;5m&#34;</span>
</span></span><span style="display:flex;"><span>        networks:
</span></span><span style="display:flex;"><span>            - senseops
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    influxdb:
</span></span><span style="display:flex;"><span>        image: influxdb:1.8.10
</span></span><span style="display:flex;"><span>        container_name: influxdb
</span></span><span style="display:flex;"><span>        restart: always
</span></span><span style="display:flex;"><span>        volumes:
</span></span><span style="display:flex;"><span>            - ./influxdb/data:/var/lib/influxdb <span style="color:#8f5902;font-style:italic"># Mount for influxdb data directory</span>
</span></span><span style="display:flex;"><span>            - ./influxdb/config/:/etc/influxdb/ <span style="color:#8f5902;font-style:italic"># Mount for influxdb configuration</span>
</span></span><span style="display:flex;"><span>        ports:
</span></span><span style="display:flex;"><span>            <span style="color:#8f5902;font-style:italic"># The API for InfluxDB is served on port 8086</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;8086:8086&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;8082:8082&#34;</span>
</span></span><span style="display:flex;"><span>        environment:
</span></span><span style="display:flex;"><span>            <span style="color:#8f5902;font-style:italic"># Disable usage reporting</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;INFLUXDB_REPORTING_DISABLED=true&#34;</span>
</span></span><span style="display:flex;"><span>        networks:
</span></span><span style="display:flex;"><span>            - senseops
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    grafana:
</span></span><span style="display:flex;"><span>        image: grafana/grafana:latest
</span></span><span style="display:flex;"><span>        container_name: grafana
</span></span><span style="display:flex;"><span>        restart: always
</span></span><span style="display:flex;"><span>        ports:
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;3000:3000&#34;</span>
</span></span><span style="display:flex;"><span>        volumes:
</span></span><span style="display:flex;"><span>            - ./grafana/data:/var/lib/grafana
</span></span><span style="display:flex;"><span>        networks:
</span></span><span style="display:flex;"><span>            - senseops
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>networks:
</span></span><span style="display:flex;"><span>    senseops:
</span></span><span style="display:flex;"><span>        driver: bridge
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>➜  butler-sos-docker
</span></span></code></pre></div><p>Assuming you&rsquo;ve already completed the <a href="/docs/getting_started/setup/">setup of Butler SOS</a>, the result of running the <code>docker-compose_fullstack_influxdb.yml</code> file above is something like this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜  butler-sos-docker docker-compose -f docker-compose_fullstack_influxdb.yml up
</span></span><span style="display:flex;"><span>Creating network <span style="color:#4e9a06">&#34;butler-sos-docker_senseops&#34;</span> with driver <span style="color:#4e9a06">&#34;bridge&#34;</span>
</span></span><span style="display:flex;"><span>Creating influxdb   ... <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>Creating butler-sos ... <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>Creating grafana    ... <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>Attaching to butler-sos, grafana, influxdb
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>grafana       <span style="color:#000;font-weight:bold">|</span> <span style="color:#000">logger</span><span style="color:#ce5c00;font-weight:bold">=</span>grafanaStorageLogger <span style="color:#000">t</span><span style="color:#ce5c00;font-weight:bold">=</span>2022-08-21T18:13:42.76538465Z <span style="color:#000">level</span><span style="color:#ce5c00;font-weight:bold">=</span>info <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;storage starting&#34;</span>
</span></span><span style="display:flex;"><span>grafana       <span style="color:#000;font-weight:bold">|</span> <span style="color:#000">logger</span><span style="color:#ce5c00;font-weight:bold">=</span>ngalert <span style="color:#000">t</span><span style="color:#ce5c00;font-weight:bold">=</span>2022-08-21T18:13:42.780004463Z <span style="color:#000">level</span><span style="color:#ce5c00;font-weight:bold">=</span>info <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;warming cache for startup&#34;</span>
</span></span><span style="display:flex;"><span>grafana       <span style="color:#000;font-weight:bold">|</span> <span style="color:#000">logger</span><span style="color:#ce5c00;font-weight:bold">=</span>http.server <span style="color:#000">t</span><span style="color:#ce5c00;font-weight:bold">=</span>2022-08-21T18:13:42.796364325Z <span style="color:#000">level</span><span style="color:#ce5c00;font-weight:bold">=</span>info <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;HTTP Server Listen&#34;</span> <span style="color:#000">address</span><span style="color:#ce5c00;font-weight:bold">=[</span>::<span style="color:#ce5c00;font-weight:bold">]</span>:3000 <span style="color:#000">protocol</span><span style="color:#ce5c00;font-weight:bold">=</span>http <span style="color:#000">subUrl</span><span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">socket</span><span style="color:#ce5c00;font-weight:bold">=</span>
</span></span><span style="display:flex;"><span>grafana       <span style="color:#000;font-weight:bold">|</span> <span style="color:#000">logger</span><span style="color:#ce5c00;font-weight:bold">=</span>ngalert.multiorg.alertmanager <span style="color:#000">t</span><span style="color:#ce5c00;font-weight:bold">=</span>2022-08-21T18:13:42.807894344Z <span style="color:#000">level</span><span style="color:#ce5c00;font-weight:bold">=</span>info <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;starting MultiOrg Alertmanager&#34;</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:42.908Z info: CONFIG: Influxdb enabled: <span style="color:#204a87">true</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:42.911Z info: CONFIG: Influxdb host IP: influxdb
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:42.912Z info: CONFIG: Influxdb host port: <span style="color:#0000cf;font-weight:bold">8086</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:42.912Z info: CONFIG: Influxdb db name: senseops
</span></span><span style="display:flex;"><span>influxdb      <span style="color:#000;font-weight:bold">|</span> <span style="color:#000">ts</span><span style="color:#ce5c00;font-weight:bold">=</span>2022-08-21T18:13:43.139047Z <span style="color:#000">lvl</span><span style="color:#ce5c00;font-weight:bold">=</span>info <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Executing query&#34;</span> <span style="color:#000">log_id</span><span style="color:#ce5c00;font-weight:bold">=</span>0cSPbmJG000 <span style="color:#000">service</span><span style="color:#ce5c00;font-weight:bold">=</span>query <span style="color:#000">query</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;SHOW DATABASES&#34;</span>
</span></span><span style="display:flex;"><span>influxdb      <span style="color:#000;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">[</span>httpd<span style="color:#ce5c00;font-weight:bold">]</span> 172.24.0.2 - - <span style="color:#ce5c00;font-weight:bold">[</span>21/Aug/2022:18:13:43 +0000<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#4e9a06">&#34;GET /query?p=&amp;q=show+databases&amp;u= HTTP/1.1&#34;</span> <span style="color:#0000cf;font-weight:bold">200</span> <span style="color:#0000cf;font-weight:bold">84</span> <span style="color:#4e9a06">&#34;-&#34;</span> <span style="color:#4e9a06">&#34;-&#34;</span> fd854ac5-217c-11ed-8001-0242ac180003 <span style="color:#0000cf;font-weight:bold">1084</span>
</span></span><span style="display:flex;"><span>influxdb      <span style="color:#000;font-weight:bold">|</span> <span style="color:#000">ts</span><span style="color:#ce5c00;font-weight:bold">=</span>2022-08-21T18:13:43.169398Z <span style="color:#000">lvl</span><span style="color:#ce5c00;font-weight:bold">=</span>info <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Executing query&#34;</span> <span style="color:#000">log_id</span><span style="color:#ce5c00;font-weight:bold">=</span>0cSPbmJG000 <span style="color:#000">service</span><span style="color:#ce5c00;font-weight:bold">=</span>query <span style="color:#000">query</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;CREATE DATABASE senseops&#34;</span>
</span></span><span style="display:flex;"><span>influxdb      <span style="color:#000;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">[</span>httpd<span style="color:#ce5c00;font-weight:bold">]</span> 172.24.0.2 - - <span style="color:#ce5c00;font-weight:bold">[</span>21/Aug/2022:18:13:43 +0000<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#4e9a06">&#34;POST /query?p=&amp;q=create+database+%22senseops%22&amp;u= HTTP/1.1 &#34;</span> <span style="color:#0000cf;font-weight:bold">200</span> <span style="color:#0000cf;font-weight:bold">33</span> <span style="color:#4e9a06">&#34;-&#34;</span> <span style="color:#4e9a06">&#34;-&#34;</span> fd89e529-217c-11ed-8002-0242ac180003 <span style="color:#0000cf;font-weight:bold">2940</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.177Z info: CONFIG: Created new InfluxDB database: senseops
</span></span><span style="display:flex;"><span>influxdb      <span style="color:#000;font-weight:bold">|</span> <span style="color:#000">ts</span><span style="color:#ce5c00;font-weight:bold">=</span>2022-08-21T18:13:43.219945Z <span style="color:#000">lvl</span><span style="color:#ce5c00;font-weight:bold">=</span>info <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Executing query&#34;</span> <span style="color:#000">log_id</span><span style="color:#ce5c00;font-weight:bold">=</span>0cSPbmJG000 <span style="color:#000">service</span><span style="color:#ce5c00;font-weight:bold">=</span>query <span style="color:#000">query</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;CREATE RETENTION POLICY \&#34;10d\&#34; ON senseops DURATION 10d REPLICATION 1 DEFAULT&#34;</span>
</span></span><span style="display:flex;"><span>influxdb      <span style="color:#000;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">[</span>httpd<span style="color:#ce5c00;font-weight:bold">]</span> 172.24.0.2 - - <span style="color:#ce5c00;font-weight:bold">[</span>21/Aug/2022:18:13:43 +0000<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#4e9a06">&#34;POST /query?p=&amp;q=create+retention+policy+%2210d%22+on+%22senseops%22+duration+10d+replication+1+default&amp;u= HTTP/1.1 &#34;</span> <span style="color:#0000cf;font-weight:bold">200</span> <span style="color:#0000cf;font-weight:bold">33</span> <span style="color:#4e9a06">&#34;-&#34;</span> <span style="color:#4e9a06">&#34;-&#34;</span> fd91ac84-217c-11ed-8003-0242ac180003 <span style="color:#0000cf;font-weight:bold">2299</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.242Z info: CONFIG: Created new InfluxDB retention policy: 10d
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.391Z info: --------------------------------------
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.391Z info: Starting Butler SOS
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.392Z info: Log level: verbose
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.393Z info: App version: 9.2.0
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.394Z info: Instance ID    : 964cbd0a36bc....
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.394Z info:
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.395Z info: Node version   : v18.7.0
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.396Z info: Architecture   : x64
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.396Z info: Platform       : linux
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.396Z info: Release        : <span style="color:#0000cf;font-weight:bold">11</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.397Z info: Distro         : Debian GNU/Linux
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.397Z info: Codename       : bullseye
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.398Z info: Virtual        : <span style="color:#204a87">false</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.398Z info: Processors     : <span style="color:#0000cf;font-weight:bold">4</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.399Z info: Physical cores : <span style="color:#0000cf;font-weight:bold">4</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.399Z info: Cores          : <span style="color:#0000cf;font-weight:bold">4</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.400Z info: Docker arch.   : undefined
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.400Z info: Total memory   : <span style="color:#0000cf;font-weight:bold">6233055232</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.401Z info: Standalone app : <span style="color:#204a87">false</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.401Z info: --------------------------------------
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.402Z info: Client cert: /nodeapp/config/certificate/client.pem
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.402Z info: Client cert key: /nodeapp/config/certificate/client_key.pem
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.402Z info: CA cert: /nodeapp/config/certificate/root.pem
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.421Z verbose: MAIN: Anonymous telemetry reporting has been <span style="color:#204a87">set</span> up.
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.423Z verbose: MAIN: Starting Docker healthcheck server...
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.428Z info: USER EVENT: UDP server listening on 0.0.0.0:9997
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.429Z info: LOG EVENT: UDP server listening on 0.0.0.0:9996
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.461Z info: MAIN: Started Docker healthcheck server on port 12398.
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.462Z info: MAIN: Starting Prometheus Butler SOS endpoint on 0.0.0.0:9842.
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.464Z verbose: PROM: Setting up Prometheus client <span style="color:#204a87;font-weight:bold">for</span> server: sense1
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.465Z verbose: PROM: Setting up Prometheus client <span style="color:#204a87;font-weight:bold">for</span> server: sense2
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.482Z info: PROM: Prometheus Butler SOS metrics server now listening on port <span style="color:#0000cf;font-weight:bold">9842</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.483Z info: PROM: Prometheus Node.js metrics server now listening on port 0.0.0.0:9001
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:45.080Z verbose: --------------------------------
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:45.081Z verbose: Iteration <span style="color:#8f5902;font-style:italic"># 1, Uptime: 0 months, 0 days, 0 hours, 0 minutes, 2.007 seconds, Heap used 31.56 MB of total heap 60.81 MB. External (off-heap): 2.98 MB. Memory allocated to process: 102.28 MB.</span>
</span></span><span style="display:flex;"><span>influxdb      <span style="color:#000;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">[</span>httpd<span style="color:#ce5c00;font-weight:bold">]</span> 172.24.0.2 - - <span style="color:#ce5c00;font-weight:bold">[</span>21/Aug/2022:18:13:45 +0000<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#4e9a06">&#34;POST /write?db=senseops&amp;p=&amp;precision=n&amp;rp=&amp;u= HTTP/1.1 &#34;</span> <span style="color:#0000cf;font-weight:bold">204</span> <span style="color:#0000cf;font-weight:bold">0</span> <span style="color:#4e9a06">&#34;-&#34;</span> <span style="color:#4e9a06">&#34;-&#34;</span> feaf181f-217c-11ed-8004-0242ac180003 <span style="color:#0000cf;font-weight:bold">44267</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:45.137Z verbose: MEMORY USAGE INFLUXDB: Sent Butler SOS memory usage data to InfluxDB
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:45.198Z verbose: UPTIME NEW RELIC: Sent Butler SOS memory usage data to New Relic account <span style="color:#0000cf;font-weight:bold">123456789</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Ptarmigan Labs NR account&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>From a separate shell we can then ensure that the expected Docker containers are running:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜  ~ docker ps
</span></span><span style="display:flex;"><span>CONTAINER ID   IMAGE                             COMMAND                  CREATED              STATUS                        PORTS                                            NAMES
</span></span><span style="display:flex;"><span>2311d17d1285   ptarmiganlabs/butler-sos:latest   <span style="color:#4e9a06">&#34;docker-entrypoint.s…&#34;</span>   About a minute ago   Up About a minute <span style="color:#ce5c00;font-weight:bold">(</span>healthy<span style="color:#ce5c00;font-weight:bold">)</span>                                                    butler-sos
</span></span><span style="display:flex;"><span>a22307d12263   influxdb:1.8.10                   <span style="color:#4e9a06">&#34;/entrypoint.sh infl…&#34;</span>   About a minute ago   Up About a minute             0.0.0.0:8082-&gt;8082/tcp, 0.0.0.0:8086-&gt;8086/tcp   influxdb
</span></span><span style="display:flex;"><span>81df665545d0   grafana/grafana:latest            <span style="color:#4e9a06">&#34;/run.sh&#34;</span>                About a minute ago   Up About a minute             0.0.0.0:3000-&gt;3000/tcp                           grafana
</span></span><span style="display:flex;"><span>➜  ~
</span></span></code></pre></div><p>That&rsquo;s great, we now have a single command (<code>docker-compose -f docker-compose_fullstack_influxdb.yml up -d</code> for background/daemon mode) to bring up all the tools needed to monitor a Qlik Sense cluster!</p>
<p>Now, let&rsquo;s see if any data has arrived in InfluxDB.<br>
Let&rsquo;s check this by going into Grafana, which is available on port 3000.</p>
<p>First time logging into a new Grafana instance you can use the default admin acount (username=admin, password=admin).<br>
You will be asked to change that password during first login.</p>
<p>First add a data source in Grafana, pointing it to the local InfluxDB server.</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 810px">
<img class="card-img-top" src="/docs/getting_started/install/influxdb_grafana/grafana-influxdb-datasource-1_hu16195411686734643213.png" width="800" height="918">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Adding an InfluxDB datasource in Grafana

</p>
</figcaption>
</figure>

<p>Now we can create a basic chart in Grafana, showing for example Butler SOS&rsquo; own memory usage.<br>
After a while we should see some data in the chart:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1034px">
<img class="card-img-top" src="/docs/getting_started/install/influxdb_grafana/grafana-chart-1_hu1621247098358868806.png" width="1024" height="587">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Butler SOS' own memory usage, stored in InfluxDB and visualised in Grafana

</p>
</figcaption>
</figure>

<p>Need to stop the entire stack of tools?<br>
Easy - just run <code>docker-compose -f docker-compose_fullstack_influxdb.yml down</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜  butler-sos-docker docker-compose -f docker-compose_fullstack_influxdb.yml down
</span></span><span style="display:flex;"><span>Stopping butler-sos ... <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>Stopping influxdb   ... <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>Stopping grafana    ... <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>Removing butler-sos ... <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>Removing influxdb   ... <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>Removing grafana    ... <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>Removing network butler-sos-docker_senseops
</span></span><span style="display:flex;"><span>➜  butler-sos-docker
</span></span><span style="display:flex;"><span>➜
</span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-042f8545221354c3ca85f9b5466fea8f">5 - Prometheus &amp; Grafana</h1>
    <div class="lead">How to use Butler SOS with Prometheus and Grafana using Docker.</div>
	<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice warning" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#warning-notice"></use></svg></span>Warning</p><h2 id="work-in-progress">Work in progress</h2>
<p>While Butler SOS&rsquo; Prometheus support is functional and works well, this documentation page is not yet complete.</p></div>

<div class="notice info" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#info-notice"></use></svg></span>Info</p><p>Prometheus is extremely powerful and flexible.<br>
In fact, it&rsquo;s probably the closest thing there is to a de facto standard for monitoring large scale software systems today.<br>
No matter if you run Kubernetes cluster spanning multiple data centers and continents, or just a single Butler SOS instance - Prometheus is an excellent choice for monitoring of operational metrics.</p>
<p>That power and flexibility also means it can be challenging to set up Prometheus.<br>
Usually it&rsquo;s not that difficult, but if you&rsquo;re new to Docker and has no previous experience with monitoring tools, <a href="/docs/getting_started/install/influxdb_grafana/">using InfluxDB</a> is usually a bit easier.</p>
<p>Or view it as a chance to learn more about one of the absolute stars of open source software - Prometheus is awesome!</p></div>

<p>This page assumes you <strong>don&rsquo;t</strong> already have Prometheus and Grafana running.<br>
If you already have access to those tools you can of course instead configure them to work with Butler SOS.</p>
<h2 id="running-in-docker-using-docker-compose">Running in Docker using docker-compose</h2>
<p>The easiest way to get started is to run these tools in Docker containers, controlled by docker-compose files.<br>
Running them under Kubernetes will give you a whole other level of fault tolerance, scalability etc - but this also requries much more when it comes to Kubernetes skills.
Use the setup that&rsquo;s relevant to your use case.</p>
<p>You can use a single docker-compose file for Butler SOS, Prometheus and Grafana - or separate docker-compose files for each tool.</p>
<p>The advantage of using a single docker-compose file is that the entire stack of tools will be launched in unison. You can create dependencies between the tools if needed etc - very convenient.
On the other hand, having separate docker-compose files makes it easier to restart (or upgrade or in other ways change) a single service without affecting other services.</p>
<h3 id="full-stack-docker-compose-file">Full stack docker-compose file</h3>
<p>Let&rsquo;s start Butler SOS, Prometheus and Grafana from a single <code>docker-compose_fullstack_prometheus.yml</code> file:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># docker-compose_fullstack_prometheus.yml</span>
</span></span><span style="display:flex;"><span>version: <span style="color:#4e9a06">&#34;3.3&#34;</span>
</span></span><span style="display:flex;"><span>services:
</span></span><span style="display:flex;"><span>    butler-sos:
</span></span><span style="display:flex;"><span>        image: ptarmiganlabs/butler-sos:latest
</span></span><span style="display:flex;"><span>        container_name: butler-sos
</span></span><span style="display:flex;"><span>        restart: always
</span></span><span style="display:flex;"><span>        volumes:
</span></span><span style="display:flex;"><span>            <span style="color:#8f5902;font-style:italic"># Make config file and log files accessible outside of container</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;./config:/nodeapp/config&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;./log:/nodeapp/log&#34;</span>
</span></span><span style="display:flex;"><span>        environment:
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;NODE_ENV=production_prometheus&#34;</span> <span style="color:#8f5902;font-style:italic"># Means that Butler SOS will read config data from production_prometheus.yaml</span>
</span></span><span style="display:flex;"><span>        logging:
</span></span><span style="display:flex;"><span>            driver: <span style="color:#4e9a06">&#34;json-file&#34;</span>
</span></span><span style="display:flex;"><span>            options:
</span></span><span style="display:flex;"><span>                max-file: <span style="color:#4e9a06">&#34;5&#34;</span>
</span></span><span style="display:flex;"><span>                max-size: <span style="color:#4e9a06">&#34;5m&#34;</span>
</span></span><span style="display:flex;"><span>        networks:
</span></span><span style="display:flex;"><span>            - senseops
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    prometheus:
</span></span><span style="display:flex;"><span>        image: prom/prometheus:latest
</span></span><span style="display:flex;"><span>        container_name: prometheus
</span></span><span style="display:flex;"><span>        volumes:
</span></span><span style="display:flex;"><span>            - ./prometheus/:/etc/prometheus/
</span></span><span style="display:flex;"><span>            - prometheus_data:/prometheus
</span></span><span style="display:flex;"><span>        command:
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;--config.file=/etc/prometheus/prometheus.yml&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;--storage.tsdb.path=/prometheus&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;--web.console.libraries=/usr/share/prometheus/console_libraries&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;--web.console.templates=/usr/share/prometheus/consoles&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8f5902;font-style:italic"># - &#34;--log.level=debug&#34;</span>
</span></span><span style="display:flex;"><span>        ports:
</span></span><span style="display:flex;"><span>            - 9090:9090
</span></span><span style="display:flex;"><span>        links:
</span></span><span style="display:flex;"><span>            - alertmanager:alertmanager
</span></span><span style="display:flex;"><span>        networks:
</span></span><span style="display:flex;"><span>            - senseops
</span></span><span style="display:flex;"><span>        restart: always
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    alertmanager:
</span></span><span style="display:flex;"><span>        image: prom/alertmanager
</span></span><span style="display:flex;"><span>        container_name: alertmanager
</span></span><span style="display:flex;"><span>        ports:
</span></span><span style="display:flex;"><span>            - 9093:9093
</span></span><span style="display:flex;"><span>        volumes:
</span></span><span style="display:flex;"><span>            - ./alertmanager/:/etc/alertmanager/
</span></span><span style="display:flex;"><span>        networks:
</span></span><span style="display:flex;"><span>            - senseops
</span></span><span style="display:flex;"><span>        restart: always
</span></span><span style="display:flex;"><span>        command:
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;--config.file=/etc/alertmanager/config.yml&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;--storage.path=/alertmanager&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    grafana:
</span></span><span style="display:flex;"><span>        image: grafana/grafana:latest
</span></span><span style="display:flex;"><span>        container_name: grafana
</span></span><span style="display:flex;"><span>        restart: always
</span></span><span style="display:flex;"><span>        ports:
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;3000:3000&#34;</span>
</span></span><span style="display:flex;"><span>        volumes:
</span></span><span style="display:flex;"><span>            - ./grafana/data:/var/lib/grafana
</span></span><span style="display:flex;"><span>        networks:
</span></span><span style="display:flex;"><span>            - senseops
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>networks:
</span></span><span style="display:flex;"><span>    senseops:
</span></span><span style="display:flex;"><span>        driver: bridge
</span></span></code></pre></div><p>Assuming you&rsquo;ve already completed the <a href="/docs/getting_started/setup/">setup of Butler SOS</a>, the result of running the <code>docker-compose_fullstack_prometheus.yml</code> file above is something like this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>From a separate shell we can then ensure that the expected Docker containers are running:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜ docker ps
</span></span><span style="display:flex;"><span>CONTAINER ID   IMAGE                             COMMAND                  CREATED         STATUS                            PORTS                                                                                  NAMES
</span></span><span style="display:flex;"><span>➜ 
</span></span></code></pre></div><p>That&rsquo;s great, you now have a single command (<code>docker-compose -f docker-compose_fullstack_influxdb.yml up -d</code> for background/daemon mode) to bring up all the tools needed to monitor a Qlik Sense cluster!</p>
<p>Need to stop the entire stack of tools?<br>
Easy - just run <code>docker-compose -f docker-compose_fullstack_influxdb.yml down</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜ docker-compose -f docker-compose_fullstack_influxdb.yml down
</span></span><span style="display:flex;"><span>➜
</span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  



          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Ptarmigan Labs Newsletter" aria-label="Ptarmigan Labs Newsletter">
    <a target="_blank" rel="noopener" href="https://ptarmiganlabs.com/#/portal/signup" aria-label="Ptarmigan Labs Newsletter">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="LinkedIn" aria-label="LinkedIn">
    <a target="_blank" rel="noopener" href="https://www.linkedin.com/in/gorsan/" aria-label="LinkedIn">
      <i class="fab fa-linkedin"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/ptarmiganlabs/butler-sos" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Get in touch with Ptarmigan Labs" aria-label="Get in touch with Ptarmigan Labs">
    <a target="_blank" rel="noopener" href="mailto://info@ptarmiganlabs.com" aria-label="Get in touch with Ptarmigan Labs">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2018&ndash;2024
    <span class="td-footer__authors">Ptarmigan Labs AB</span></span><span class="td-footer__all_rights_reserved">All Rights Reserved</span><p class="td-footer__about mt-2"><a href="/about/">About Butler SOS</a></p>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/js/main.min.e31c2c3ea09070843d281c9229acf28ea382e633bae75ab340a57d57c1b24a41.js" integrity="sha256-4xwsPqCQcIQ9KBySKazyjqOC5jO651qzQKV9V8GySkE=" crossorigin="anonymous"></script>
<script src='/js/prism.js'></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>
