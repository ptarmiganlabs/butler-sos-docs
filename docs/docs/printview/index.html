<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.143.1">
<link rel="canonical" type="text/html" href="https://butler-sos.ptarmiganlabs.com/docs/">
<link rel="alternate" type="application/rss&#43;xml" href="https://butler-sos.ptarmiganlabs.com/docs/index.xml">
<meta name="robots" content="noindex, nofollow">
<script defer data-domain="butler-sos.ptarmiganlabs.com" src="https://plausible.io/js/script.js"></script>

<link rel="canonical" href="https://butler-sos.ptarmiganlabs.com/docs/" />



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Documentation | Butler SOS</title>
<meta name="description" content="


">
<meta property="og:url" content="https://butler-sos.ptarmiganlabs.com/docs/">
  <meta property="og:site_name" content="Butler SOS">
  <meta property="og:title" content="Documentation">
  <meta property="og:description" content="Tip">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="website">

  <meta itemprop="name" content="Documentation">
  <meta itemprop="description" content="Tip">
  <meta itemprop="dateModified" content="2024-04-15T08:23:17+02:00">
  <meta itemprop="wordCount" content="1664">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Documentation">
  <meta name="twitter:description" content="Tip">




<link rel="preload" href="/scss/main.min.6d989a9411ddd3f0dfc5b7b9fba65f18fa70fbdc118cf2e07a3d961ac89f6bc5.css" as="style">
<link href="/scss/main.min.6d989a9411ddd3f0dfc5b7b9fba65f18fa70fbdc118cf2e07a3d961ac89f6bc5.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="/css/prism.css"/>

  </head>
  <body class="td-section">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg width="200" height="109" viewBox="0 0 200 109" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><image id="image" width="200" height="109" xlink:href="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QBMRXhpZgAATU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAyKADAAQAAAABAAAAbQAAAAD/7QA4UGhvdG9zaG9wIDMuMAA4QklNBAQAAAAAAAA4QklNBCUAAAAAABDUHYzZjwCyBOmACZjs+EJ+/8AAEQgAbQDIAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/bAEMAAgICAgICAwICAwUDAwMFBgUFBQUGCAYGBgYGCAoICAgICAgKCgoKCgoKCgwMDAwMDA4ODg4ODw8PDw8PDw8PD//bAEMBAgICBAQEBwQEBxALCQsQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEP/dAAQADf/aAAwDAQACEQMRAD8A+B6KKK/Cz/SQKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9D4Hooor8LP9JAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/0fgeiiivws/0kCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/S+B6KKK/Cz/SQKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9P4Hooor8LP9JAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/1Pgeiiivws/0kCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/V+B6KKK/Cz/SQKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9k="/></defs><use id="Background-Layer" xlink:href="#image" x="0" y="0" width="200" height="109"/><defs><image id="image-1" width="65" height="95" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAABfCAYAAAC3K6quAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAQaADAAQAAAABAAAAXwAAAAAjR4mgAAAQc0lEQVR4Ae2cB2xd1RnHvzc84h3HzsB24iQOGwJhd4BApWwQG4QQQ4CoWlQk2oot2qKqhVYMiUJQoewpKAVKWYEISiEEwswiJCELnGU7y+v5vdff/9rXuX5+03l+tsr7pOtz371n/s+3znfOte9JswYzq+H6XlEBo42YbZtmtioYMLuR31d8rxBgsFEugHhjldml/u/b4OONNw8CqATjITOSz8SmLrn3Ph7oGi4aNSBowJFg0IITJljhbrtZoKzMenp6rHPzZutYu9Z8W7daEXmGg3VHBQhhBucbN84mn3++1R13nJVPm2YFlZUWDoWsfeNG2/D557b4qaesZe5cqwAYafZscsaIgyAAbOJEO/S++6z+mGMsCAf4fDuHWNXYaBNnzbIpP/2pzf3jH23Vgw9abWdnVoEYDu7SsNIiiYAP9v/hI4/Y1NNOs4Ly8gEAuJX4AwEb29BgR998s1WecYZt4rcDnpthF9MRBSEyZow1XXmlTfrxj9MaRhWAHXnNNdaKuGylBM5OVmjEQBAXFM+YYQ0nn2zB4uK0B9M4c6ZNP/dcW0OJ7rRLJc84ciDA0pUMqLKpKXkPY94GKHfImWfaxpIS6+Cda0ZjsmX0c8RAkDkshxMK0QOZUsPuu1ugvt62UTAbIjFyIDCjhZhBH2mmVIIuCVRXO5yQDRAyMpGOQ4P5CnP5IxFT93caswyHEo1aODw0HR+h7S78haGVHtzPzDgBOZyCNt/v7rutZexY20F9Q54JANi+fr31dGeu3lpaW62VsnKaskFpcULY77cwGrzi8MNtz6uvtrHI5KodO2zhHXfYONzZMTgvQWZHiKbLGX68wZaFC60Dt7h80qSMxrLo00+t49tvrYRSmc1i/GaSghCB7YP48bVHHWV1p5xi4wGhYvJkp6bjAeOw00+39R99ZCtfftk2vvOO+fHxx/A2HSn3Iw5bvvjCmhlQGfbfB9DpUHt7u7308MM2Hk4qpUB6pZLXnBCECJ0qOeAA2+tXv7KG44+3ItjfSwWFhTYe7a6r6cQTbQV+/bw//cm2zJtnlX36wps/9l6dj6xbZ188/rjtdthhVoqiS0Vh6n371Vdt2Wuv2cFkFuDpcl6yugNnm51ChoO8maQAA7iph95zj00+4QQrKBXmiakAUalBRMr33NMWM7PR775zVnypOhhgUBu+/to2U3UT3OZPwg1ROOfzTz6x+2+4wcZTponfEodUbSTqtcoxESsY6z/jgtBNZ/a/7TabftZZaZswLXqqEZUOAPnyrbesoqsrpfVQRwrR8svefddWbthg9ThPhShfiYa7iHIsAXUtgMNu+/nPrRDx2x8AxJfpiF06IAwShx5Kley3nzWdd16i8gmfa1AzEY05cNCm+fNtIr8HNcAz18tzOI7f0jLrHnrInkTJ1h15pNU0NlpJXzxh86ZNtmzZMnv/+eetdMECm0leVzBlItWmKDbtfZre34F9RM6D48db/TnnDMmTU5Nja2qsCSW6GnmvRvP7mEVH/nkncxrFU/Th7PjgGAVO1PnomjU2EZE78NRTbQucsOjjj235Z59ZOXqi6cAD7UcAU7Vliy0D2Cryl0+fbr7aWgt1dFiE+ntIw1gr3UdRnIUozUx8mAEgBKi4BhEogS2Xo7kDdKiIq5hOB+m8H5YvVuf7vLwQZq6LhqWwOulIN6ayi3R3rEgp9n/L008b02gByo1lpVjLYCr32MOKaaewosLxGNcvXWr/vuwyKyfPOPTQfkccYQcffbRtwxeQ8i1HIQdJv0DEugBAsz/50kttxoUXWoTBRrlC9KGL/KHt2231e+/ZZ3fdZVV9kSiXQyiWkAaA0MHsfXrnnbYOZ6iZwe6gcRN3FBHYYuBTDjrIrrr9dqufOtWpcMnixfbbX//aOpYssQIGHeGKchUBxgRkvZFcNcz2rN//3vb5xS/MD5Cx9B2dXUHdTbwII+utcM/899+3N5591qY3NtqxTEoDFqgHkELkkbgaXFMGYPFoCpGpFUSj1hGkkZil41AN6JV+jOMqY2YbYasQlxoV+krr9t3XKj2WYhps+SO4ZiHmsVGDJ4/q0AV8VgB4TRdfbHsy0/EAIIszMMfzpK33mMH5aP6VcGGNFCyctujee60Ry9HNLMuIamZdnaLysaT3UzHp82bPtgmAqr7oWTJSnn6S7DqdJ3WNotug5FnO0HaucvSGqBRAToEtm1980Spha3VSdTjEzJUhz3vBuqlMrFM3Mr2Z2ZcynUy9R9xyi63DIixHIYafe84Rqd14N6DDvS0N+lszZYptg4MlqumY0f4+e2sScnqhSwpGlxpvh/2X4h2GYHeXGvfe22Zdcomt5YE4xi0XRQyaLr/cqrE02Ds3e8JU9YsLxeQCU3qjnTqM2ZRT3UCqRXfcDvPcS+PwQA2dIx2SDqVTp1OPhlEAsl899pi1oTtckpI88Wc/wzbOtBYealYlv7VEjKYTPfaKgRyeZKQ2BIYfrnj9oots6d//bsWIpp7p0mSkQ9VYqJK6OtNUJW+xt7a0QVB2yby0/TxkN4zic6kM1I+/9lrbSIBE8l28zz52yK23WgFWxaVt27bZAkxcp4eL3HexqZSZZn86l7gi1eDlUHkBLkABV6M4FXnSpKSijEDQTMGgthJuWPnBBwPqPvDYY632Jz+xNmZh/1tusUqCoV569YUX7ME//9lZAnufx7tXp6SbJM8CJJUwrVq1yrajOF2StzkJi9LOg6yDoEbEliXY5Hm41Z3Mrkuy54fAwo1XXWX1AOKlr1CaD/3ud+ZH67ezrsiEUgGguj5kQr7ziKieTcJySRykp1JRRpygytQpWY42ls5LWNFJcYm0+Dn0pJPs1Ouus2LEw6UdmL47brzRSjB9U/ABugHBy7puPm+qyJWPDZkQ9SjkkkquF+Jdrv7mG28VVotOCCEWEtpU5TMGQS2pUBlcsPTRRwcoSXmVBQVi4F7qxnd4gaXyWpa+8vmrYNlOZkxeXiJSh6MM/gfPPGO1RLFaqTNx7t5a2gF33aJFA6qcyGIuio6Sg5WKhgSCuKEIZbQVz24F7mzEoyTdBjXbi2H/N/72N2ti8FJ0hViXTsJicncTkeoO43p/iJO06O23rUuusSdzrHj08L6dRVYLnOalSsQzUFWV1t7EkEBQYypYwAwshhs62tq87Tv37Zi5fzzwgIWJAUwDEImQD+C6WlosGgc0bwUBOGgj6w4/y+YqyibrZIi8IXRUe3PzgMko1poHJZ2OOCWr39uvQfeakTF0sA2XefErrwx6/86cOTYfKzID11dLXzWkqwdwooCRjGQSFZ0aT/2yRl4T6eUK1eGYatoIKWgLp7kURCxL8Gz1JLaMm8dNhwyCKhAQZczqx4TVmrEAstcKoy8mgHoffsM09IbEwNUSyq81QCoQlE8d0+BTdTBEezrHoPMLXrEMAEIFIIgTkkPea/HINjRSZ7WL2IlS+hdRn3pWfFvo0FusAapZWc7gnSMGnurDWItUIGjmFOSVXhEIakdXPJJ+icAJCtUxC/1Z5MlW4nq39tXT/yLOjcz+LpE6WcnVhoKchwxvoeNVcEAdz+TtqQF3AEq11HbNKj/jUoQV5F7EEtfiYTazVillcF6R8BZyzC1AODEOBuySTLbiISGeRehTMtplEFS5OjiWhsqJ/kjvCxhV7M4itzuJDicDQd0N427XshxeA2Ct6JsxHhB2DrO3SoEgzvKzavRu6el5NzoiFQCqJSsgqCINWK5uSmKGkpHDLWj754hVtiA6YyXvSQp4QfCuVvVcEScBnqy8qs4aCEn6OeCVM1seth3wsu+HFGkl0SHpEwHrhS2WsbVOcKLTcII3ZC8QtMXnLdtX/aAk5yAEFKrzgCBW7hbr0jV5d64b5XKWZnHnerU3j6yQSwE8SlkCH/XGioMOfqXiAtWTUxA0i1JW3i23KjT4LLbz6vAfFNbzAYgz26Ri5f579ZbfReiUEs/BjiBWQAFZRa91tsklcYJ8CIGZCoicgqAOFhI6887YNJa8v7n/frfvGadaq2gHLErq5TABJvOZCgA1mI7IZNyxZAWcI3oplGOy8rHvCuGCEs5ARuACd9dKecRBEpvRBwIdLWZDxcu2sYPK9LfrFPUArBcEcYK813TEIbecwKxpUeMVh0wHHS+/Nm1C4i6vwiWj3OhRBYLY00/0eAznHbINwnRimh19OsAFSfqgk/XETlXpvhmc5pQTChCFUiJGA9h2cJ8yftIECGuWL7dPcd1b2N3exPVfVrEbOCYQu3aJV3nurAOsOga2LSXslW1qaGy0CrjsASJR1RztU8S7ZcUKm0iMQRu4qZRjzkCI4sxMYqO1jE5mm2QmT+Aowevsf5QxeMUgJnMp0pnOuaaciYNkdD07WG2rV6O4HRcoa1hswsX+jBWsgjzaIBQAE7liAzKJGswZCDqt9g37inP+8AdryzDsnqjzer6Wsw23X3+9LWC3qhYQtEEk9pZCTCUGZHEodyDQXDmrwnVPPGEv0entrBR3lZoB855bb7WvCePNwhyKC4Yi3zkDQQPWinACQDTzfcPTv/yltWPChko6yjebsxJfwgGz2NqbQkVDPc2WUxA0YM1UPWzbSghuzl/+Yt2E14dCszlI+j5now5CzGRvJAbpsn9sezkHQR0QEBMUKic2GWL1mClJrc4n4tREHQ3cD5UD3HZHBATNmAInJQqIuD3JIBUIZZRVKF+B3l0dxK6Wz6Dr2c0q7Z+tzmernuyOMMe1jVoQtAzWEcFc0FDM6rD3SwA8junTucmzL7jAiogcDSeNSk7YwC7z7Jtusg/Y7G3hu4bhplEJgiLQ8v6mksqKDDeNShA0aHmXcoBy0cFctKExjWrKg8D05EHIg9ArpXlOyHNCnhN6EchzQp4T8pzQj0BeHPLi0M8MeT8hLw55cciLQz8CeXEYBeKgjZekmy8EWhNSsncJC8V/MXLWgf3IMBup3u8r3S46B7PZYjMunUqNJZ110Fe66nwSmGKLJfw9YiDo5OpWTpW0cnkPbehU+odz55pxYr6H77I3891E7PcR+vpNx3F2dQ/SRSXuvxNxXw53qq359Qy2nP+pUMqHW/p69j9vvmlP8A1lHZ/z1LJZq/+kUcb7Cv4NkcBYwlc1f+UTw0L+UeU0OpjOB+HxxiEOggOc/6nie8ZsNr+viJdxuJ/p4PYmDmhvYIBB/vHkZh3i4MTZJAa+FxyhQ1fbOAD6Leefi/gnFO3cL+VL+nKO/OyLSOhIjqLSQyGBwM7TGxwVv3REd6DUeA0nTIo4crORS7vMOtal1D1vVMVgCziFtp7zDKIDuPRFjb62ydaexIiCwDicswoakP4tgA7wS0m5BzA1W7rXO7G93rvPlOrKBo04CBqEBq4rEWmww9nRZG0n6tP/3fMgikXHyNbCag538cdJOQ3S747oXmgpFQJu6t47D/ve8Sw2T99r5d75Tg/derjvz+M+c1PvO295VQa55dzUqbPvh/vMSakvbn49DPK5zV18LvUom98+gPC7F4N2frspsumnIj81+pTqN2Wde/0mX/87N4+bX++wBM573bvPlboX7N5fl7e83uudynvzeOtgHFTrTJRS596tV3VxOWfg9Uzj0+++fF9xs/1/4HO+WP+fUnIAAAAASUVORK5CYII="/></defs><use id="Butler" xlink:href="#image-1" x="6" y="4" width="65" height="95"/><defs><text id="string" transform="matrix(1.0 0.0 0.0 1.0 20.045454545460004 16.51333333334)" fill="#fff" font-family="HelveticaNeue-Bold, Helvetica Neue" y="34" x="55.98623999999998" font-size="34.848" text-decoration="none">Butler</text></defs><use id="Butler-1" xlink:href="#string"/><defs><text id="string-1" transform="matrix(1.0 0.0 0.0 1.0 55.86363636364 54.400000000000006)" fill="#fff" font-family="HelveticaNeue-BoldItalic, Helvetica Neue" y="17" x="83.862624" font-size="17.424" text-decoration="none">SOS</text></defs><use id="BUTLER-copy" xlink:href="#string-1"/></svg></span><span class="navbar-brand__name">Butler SOS</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/about/"><span>About</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link active" href="/docs/"><span>Documentation</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/community/"><span>Community</span></a>
      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/docs/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Documentation</h1>





    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-c43b6569b496f1a6d7d9012ee3bc204f">About</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>1.1: <a href="#pg-7f6ad46d980f3f7fd962ac4f29a54c2f">Butler SOS</a></li>


    
  
    
    
	
<li>1.2: <a href="#pg-e7bae8258595af2ab77fb585b7c656bb">The Butler family</a></li>


    
  
    
    
	
<li>1.3: <a href="#pg-f4e58fe39d282d36514d33b47cd33235">Use cases</a></li>


    
  
    
    
	
<li>1.4: <a href="#pg-c1c4b0bd4070c97265b7f6cc1fbeae62">Versions</a></li>


    
  
    
    
	
<li>1.5: <a href="#pg-132c90853aed878831e7a0b0be8a0611">Contribution guidelines</a></li>


    
  
    
    
	
<li>1.6: <a href="#pg-2bb15e95294be09e4c2900c5cd1e6ce6">Telemetry</a></li>


    
  

    </ul>
    
  
    
    
	
<li>2: <a href="#pg-0d7696d24c78e212b3f7477df55bfbb6">Getting started</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.1: <a href="#pg-e566c4c01349bc72620fe657c0ee6111">Overview</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.2: <a href="#pg-93ab0901b2fdbfbaeb6cbd7b9de35e55">Install</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.2.1: <a href="#pg-586fd08d3cdf9ce8963edb53d566d35a">Choosing a platform - what are the options?</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.2.2: <a href="#pg-71789367edd5d985337d5c8decd98498">Native app</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.2.2.1: <a href="#pg-9d24ee3b75950dde560ebf08ddc9fc77">Windows</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.2.2.2: <a href="#pg-23b14bb080153f9fef11cbfb39401ec8">Linux and Mac OS</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>2.2.3: <a href="#pg-2d00e399c2ce3ff7029560e14fa1bf0d">Docker</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.2.4: <a href="#pg-63709b1cad5b08d29cad0f3c2660a2e1">InfluxDB &amp; Grafana</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.2.5: <a href="#pg-042f8545221354c3ca85f9b5466fea8f">Prometheus &amp; Grafana</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>2.3: <a href="#pg-97bfddd5a5329c919f770112aa32f108">Setup</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.3.1: <a href="#pg-0453b1fdbf444ece19d9953907886bed">Which config file to use</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.3.2: <a href="#pg-32e99a424e03dd5de2fb788192c39e44">Config file verification</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.3.3: <a href="#pg-193ca7d2f0c66ee0da86af01e86e0060">Visualise the config file</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.3.4: <a href="#pg-01bf8d5c5e8114ba3b6a75ca30faeeea">Configuring Butler SOS logging</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.3.5: <a href="#pg-216c86f38030b70ed4e12f460193db39">Configuring Butler SOS heartbeats</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.3.6: <a href="#pg-b154384aeaa5f9f04fc69d8533662f15">Docker healthcheck</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.3.7: <a href="#pg-6f9b5e45ca0f983b98e8870e01745c39">Configuring Butler SOS uptime monitor</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.3.8: <a href="#pg-9577e6f018c666ef9013ada6969c473d">Credentials to third party services</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.3.9: <a href="#pg-c025fedd1c5b151401fa36e6192c0ad6">General Sense event settings</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.3.9.1: <a href="#pg-f2b04c06fd6b90a401415dcf62731a5d">Configuring user events</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.3.9.2: <a href="#pg-9c48405983052b1e8f25cb3a889aa233">Configuring log events</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.3.9.2.1: <a href="#pg-bdc0f6c22b693c9c463a994ed16fece6">Engine performance log events</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>2.3.10: <a href="#pg-ee25f1a643b032d96760fc9e4b879eed">Configuring the log database</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.3.11: <a href="#pg-563127d8f9a87c7ae1827f3fb044af32">Connecting to a Qlik Sense server</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.3.12: <a href="#pg-25b0a95cb8bc645e4d2667ca1a768178">Setting up MQTT messaging</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.3.13: <a href="#pg-7c5408d413521ddaab60282e8a4a9417">Setting up the New Relic integration</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.3.14: <a href="#pg-e955dfed0f1487b3968692674211b625">Setting up Prometheus</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.3.15: <a href="#pg-c8041328467162b99ca60f7d5f646e57">Setting up InfluxDB time series database</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.3.16: <a href="#pg-7936f2024d9190126f844af0505839c1">Configuring extraction of app names from Qlik Sense</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.3.17: <a href="#pg-ff07b882fcf9f7b2efe9a2cc8afdedb0">Configuring user sessions</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.3.18: <a href="#pg-e7ea6a1a4c916466fff598a89a518e11">Configure which Sense servers to monitor</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2.3.19: <a href="#pg-778e075b00e53093cd9d41f008406df7">Configuring telemetry</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>2.4: <a href="#pg-b40866139e98d0392a12a0e06705e580">Day 2 operations</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.4.1: <a href="#pg-4c8c08ff9e6e86ac18f382e488a22fab">Monitoring Butler SOS</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>2.5: <a href="#pg-94a22a9eb27507e9652dbd17c53aceaf">Upgrade</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>3: <a href="#pg-dd948255948d6b59b32c471abcb62997">Concepts</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>3.1: <a href="#pg-bd1d75fd7b57f4940090c365c602a011">App metrics</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>3.2: <a href="#pg-824cd5d845e0027b5cc40d1ec64f916c">Sessions &amp; Connections</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>3.3: <a href="#pg-e043a76d0facae64d9dff8af44d69a73">Log events</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>3.3.1: <a href="#pg-d3f37fe9a34c2b149d9d7ce755fbd78f">Log events overview</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>3.3.2: <a href="#pg-8d45847027bddbbd36322ad7244ac7e7">Errors &amp; Warnings</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>3.3.3: <a href="#pg-1aa41e71096e07870129f911369bead9">Getting rid of Sense log noise</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>3.3.4: <a href="#pg-55b0693567350907dbecdefe43bcfa17">App performance monitoring</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>3.4: <a href="#pg-e95fda65b1c97ee86f69da3fcc03382d">Visualise Butler SOS config file</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>4: <a href="#pg-fb0f854c53f1ba28ad4c2ccf8d24df34">Examples</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>4.1: <a href="#pg-cc1b8c9c214ea88ebf273fe12e504b6b">Visualizing Butler SOS metrics in New Relic</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>4.2: <a href="#pg-1401fa1def94e1b098c2ffedc989cd38">Visualizing Butler SOS metrics in Grafana</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>4.2.1: <a href="#pg-5b4fef8689c43e39f0e77e055c0e5ac6">Qlik Sense monitoring using Butler SOS v9.2 and Grafana v9.1</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>4.2.2: <a href="#pg-6c457bbd56ae80802408b24a9a435763">Qlik Sense monitoring using Butler SOS v7 and Grafana v8</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>4.2.3: <a href="#pg-9435a4964452cecf6115601ce6500800">Qlik Sense monitoring using Grafana 7</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>4.2.4: <a href="#pg-edd1984019ac3d9f0eec8b15ca829eb0">Qlik Sense monitoring using Grafana 6</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>4.3: <a href="#pg-017005fb8e4eed4840a5162db7469692">Count user and log events</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>4.4: <a href="#pg-4ec7eb2bef1221c10858490cae5c1b93">Monitor Qlik Sense engine performance in Grafana</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>4.4.1: <a href="#pg-4a97186d0e2fad090925395978e13fdf">Track how long it takes to open Sense apps</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>4.4.2: <a href="#pg-ba2041bccabce515d0c22504e6cb57cd">Find charts that are slow to update</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>5: <a href="#pg-8df6ea6904416b571ff9bc73afb50933">Reference docs</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>5.1: <a href="#pg-45eb8994961db260c7bffb6dc530996d">Command line options</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>5.2: <a href="#pg-b224ef866cfa84ce3ec13452bc419a8c">Config file format</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>5.3: <a href="#pg-7498139bb0a571d254834061181e3157">Available Metrics</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>5.3.1: <a href="#pg-c37c040476ce40f3021dc2975240119e">Available metrics: InfluxDB</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>5.3.2: <a href="#pg-3a5782be907ab37fcd71f782ea6c6c2c">Available Metrics: New Relic</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>5.3.3: <a href="#pg-d9368053cab4888224d02b24aa450a89">Available Metrics: Prometheus</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>
    
  

    </ul>
    
  
    
    
	
<li>6: <a href="#pg-0e10aa79b66ebaf60284768f9c0d59cf">Security considerations</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>7: <a href="#pg-398fc7a5231e967cd05e2e77c98b4b4f">Legal stuff</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  

    </ul>


<div class="content">
      

<div class="pageinfo pageinfo-primary">
<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>Starting with version 9.3, the <a href="https://github.com/ptarmiganlabs/butler-sos/releases">GitHub releases page</a> is the place where release notes are found.</p></div>
<p>Release notes for older versions are found below.</p>
<h3 id="whats-new-in-version-92">What&rsquo;s new in version 9.2</h3>
<h4 id="features">Features</h4>
<ul>
<li>Add support for storing Sense engine warning/error log messages in InfluxDB. <a href="https://github.com/ptarmiganlabs/butler-sos/issues/435">#435</a></li>
<li>Specify zero or more New Relic credentials via command line options. <a href="https://github.com/ptarmiganlabs/butler-sos/issues/429">#429</a></li>
<li>Support for sending metrics and events to multiple New Relic accounts. <a href="https://github.com/ptarmiganlabs/butler-sos/issues/417">#417</a></li>
<li>Write info on startup about execution type. <a href="https://github.com/ptarmiganlabs/butler-sos/issues/430">#430</a></li>
</ul>
<h4 id="bug-fixes">Bug Fixes</h4>
<ul>
<li>Add missing XML log appender file for QS engine service. <a href="https://github.com/ptarmiganlabs/butler-sos/issues/433">#433</a></li>
<li>Log events now correctly sent to New Relic, incl engine log events. <a href="https://github.com/ptarmiganlabs/butler-sos/issues/432">#432</a></li>
</ul>
<h4 id="miscellaneous">Miscellaneous</h4>
<ul>
<li>Remove unnecessary handling of engine performance log messages. <a href="https://github.com/ptarmiganlabs/butler-sos/issues/434">#434</a></li>
<li>Updated dependencies</li>
</ul>
<h3 id="whats-new-in-version-91">What&rsquo;s new in version 9.1</h3>
<h4 id="features-1">Features</h4>
<ul>
<li>Better logging when warnings and errors occur. <a href="https://github.com/ptarmiganlabs/butler-sos/issues/404">#404</a></li>
</ul>
<h4 id="bug-fixes-1">Bug Fixes</h4>
<ul>
<li>Send correct tags to Prometheus endpoint. <a href="https://github.com/ptarmiganlabs/butler-sos/issues/422">#422</a></li>
</ul>
<h4 id="miscellaneous-1">Miscellaneous</h4>
<ul>
<li>Apply consistent formatting to all source and doc files. <a href="https://github.com/ptarmiganlabs/butler-sos/issues/419">#419</a></li>
<li>Upgrade Prometheus metrics lib to latest version.</li>
<li>Update dependencies to latest versions.</li>
</ul>
<h3 id="whats-new-in-version-90">What&rsquo;s new in version 9.0</h3>
<p>Focus of this release is twofold:</p>
<ol>
<li>Improve the usability of the stand-alone Butler SOS binaries.</li>
<li>Send metrics and log events to the New Relic monitoring service.</li>
</ol>
<h4 id="-breaking-changes">⚠ BREAKING CHANGES</h4>
<ul>
<li>Add external memory to uptime data in InfluxDB.<br>
This is a minor change, but it does also require a small change in the config file.</li>
</ul>
<h4 id="features-2">Features</h4>
<ul>
<li>Add command line options to Butler SOS. <a href="https://github.com/ptarmiganlabs/butler-sos/issues/387">#387</a></li>
<li>Add external memory to uptime data in InfluxDB.</li>
<li>Add New Relic as destination for SenseOps metrics.</li>
<li>Add optional scrambling of user id for user events sent to New Relic. <a href="https://github.com/ptarmiganlabs/butler-sos/issues/398">#398</a></li>
<li>Send engine, proxy and session metrics to New Relic.</li>
</ul>
<h4 id="bug-fixes-2">Bug Fixes</h4>
<ul>
<li>Compress stand-alone binaries.</li>
<li>Include New Relic status in telemetry data (23c292c)</li>
</ul>
<h4 id="miscellaneous-2">Miscellaneous</h4>
<ul>
<li>Make proxy related log entries easier to understand.<a href="https://github.com/ptarmiganlabs/butler-sos/issues/392">#392</a></li>
<li>Make user event log messages easier to understand. <a href="https://github.com/ptarmiganlabs/butler-sos/issues/396">#396</a></li>
<li>More relevant log prefixes for proxy session logging.</li>
<li>Update dependencies to latest versions.</li>
</ul>
<h3 id="whats-new-in-version-81">What&rsquo;s new in version 8.1</h3>
<ul>
<li>Scanning for security risks and vulnerabilities is now done as part of the release process.
This is in addition to the daily scans that are also done (and have been done for a long time].</li>
<li>Clean up the Docker images (available on Docker Hub) in order to keep them as lean as possible.</li>
</ul>
<h3 id="whats-new-in-version-80">What&rsquo;s new in version 8.0</h3>
<p>The version number change indicate this release contains breaking changes.</p>
<p>Well&hellip; When working on the release process for Butler SOS we happened to bump the version number too much. Oops.<br>
No breaking changes in this version.</p>
<p>There&rsquo;s a major new feature though:<br>
<strong>Pre-compiled, standalone binaries for Windows, Linux and macOS!</strong></p>
<p>This has been planned for ages and we finally got around to implement it.<br>
It may look like a minor change but it does make it easier to get started with Butler SOS:</p>
<ul>
<li>You no longer have to first install Node.js, then install all the Butler SOS files.</li>
<li>All you need is now a single binary and a valid YAML config file (which hasn&rsquo;t changed since previous version/7.x).</li>
<li>If you want to keep using a separate Node.js engine for running Butler SOS that&rsquo;s perfectly fine too.</li>
</ul>
<h3 id="whats-new-in-version-70">What&rsquo;s new in version 7.0</h3>
<p>This is a major release including features that have been on the roadmap for years, but never really graduated from the concept phase.<br>
Until now, that is.</p>
<p>The big thing in v7.0 is the addition of a generic way to handle QSEoW warning and error events.<br>
These used to be written to both log files and the Sense log database, but with log db gone those events only exist in the log files.</p>
<p>Butler SOS can now handle these events and store them in InfluxDB or re-publish them as MQTT messages.<br>
Grafana dashboards attached to InfluxDB gives you close to a real-time view into Sense errors and warnings.</p>
<p>Or simply:<br>
<strong>Get the most important messages from the Sense log files sent in real-time to Butler SOS - and from there out into the world as needed.</strong></p>
<p>⚠️ NOTE: Because of the significant nature of the changes below, this version includes some breaking changes.</p>
<ul>
<li>⚠️ Added support for dealing with individual QSEoW log events.<br>
Initially warning and error events from the proxy, scheduler and repository services are sent to Butler SOS.</li>
<li>MQTT topics matching the QSEoW subsystem where log events originated.<br>
When sending log events to MQTT, there&rsquo;s an option to send each log event to a MQTT subtopic corresponding to the QSEoW subsystem the event originated from. This is useful for 3rd party systems that want to detect (and probably take action based on) very specific QSEoW log events.<br>
For example, a log event from the <code>Service.Scheduler.Scheduler.Master.Task.TaskSession</code> subsystem in QSEoW would be posted to the topic <code>&lt;some root topic&gt;/service/scheduler/scheduler/master/task/tasksession</code>.</li>
<li>⚠️ Improved handling of user activity events.<br>
These can now be sent to zero or more different MQTT topics, each covering a specific kind of user activity (start/stop session, open/close connection etc).</li>
<li>⚠️ Take the first step towards removing support for QSEoW log db in Butler SOS.<br>
There is no date set yet when log db support will be removed, but at some point that&rsquo;s likely to happen.
<ul>
<li>In this release the previously existing InfluxDB measure <code>log_event</code> has been renamed to <code>log_event_logdb</code>.</li>
<li>The new log events introduced in v7.0 will be stored in the <code>log_event</code> message going forward.</li>
</ul>
</li>
<li>The <a href="https://github.com/bunkat/later">later</a> library is no longer maintained and has been replaced by <a href="https://github.com/breejs/later">@breejs/later</a>.</li>
<li>All libraries used by Butler SOS updated to latest versions.</li>
<li>Documentation site updated with respect to v7.0.</li>
</ul>
<h3 id="whats-new-in-version-60">What&rsquo;s new in version 6.0</h3>
<p>First, while the switch to 6.0 indicate there are breaking changes, that&rsquo;s not entirely true.</p>
<p>There are however significant changes to many parts of the code base.</p>
<p>The code is now better, more modern, scalable and in general better structured.<br>
Plenty of testing has been done, but in order to highlight that lots of changes were done, we decided to move to 6.0 rather than 5.7.</p>
<ul>
<li>Added Prometheus support.<br>
Most Butler SOS metrics are now exposed on a Prometheus-friendly endpoint. They can thus easily be scraped by and ingested into Prometheus.<br>
Once in Prometheus the Qlik Sense metrics can be visualized using Grafana (just as before when using InfluxDB), but also used in very capable alerting scenarios. Prometheus has great integrations with many incident management tools, for example.</li>
<li>The Prometheus endpoint also include general Node.js metrics that can be used to monitor Butler SOS itself.</li>
<li>Switched process for doing releases of Butler SOS.<br>
Things are now more automated which should result in more predictable and consistent <a href="/docs/about/versioning/">version numbers</a>. The changelog file will be auto-generated going forward (it will start from version 5.6.0, older version still available as <code>changelog_old.md</code>).</li>
</ul>
<h3 id="whats-new-in-version-56">What&rsquo;s new in version 5.6</h3>
<ul>
<li>Added user event monitoring. Up until now this has been a feature of <a href="https://butler.ptarmiganlabs.com">Butler</a>, but as this feature is very much within the domain covered by Butler SOS, it&rsquo;s moving here instead.<br>
The events monitored are session start/stop (typically users logging in/out/timeout) and connection open/close (typically an app being opened/closed in a browser tab).</li>
<li>Added a blacklist for user sessions. If a user is added to the blacklist, the detailed session data for that user will not be saved to InfluxDB.<br>
The user will still be included in the session summary metrics and count towards the total number of sessions, at any given time.<br>
Note: The blacklist only applies to storing detailed session data in InfluxDB, MQTT (if enabled) is not affected by the blacklist.</li>
<li>Anonymous telemetry added. Same set of data included in other Butler tools, i.e. only information about what the execution environment of Butler SOS looks like and which features are enabled.
The rationale for adding telemetry is to give Butler SOS developers a better understanding of on what kinds of servers the software is used. This insight will make it easier to develop future Butler SOS versions.</li>
<li>Continuing the journey towards using the same formatting principles in the config files for all the various Butler tools.<br>
In Butler SOS&rsquo; config file there&rsquo;s been a mix between &ldquo;enabled&rdquo;, &ldquo;enable&rdquo;, &ldquo;enableMqtt&rdquo; etc to tell whether a certain feature should be enabled or not. Confusing.
We&rsquo;re moving towards only using &ldquo;enable&rdquo; for this. This release changes this for most config file entries.
Rest assured though, the old format will still work - but you are <strong>strongly</strong> recommended to adapt the <a href="/docs/reference/config_file_format/">current config file format</a> as it includes settings for other new (as of version 5.6) features too.</li>
<li>Major refactoring of the documentation site <a href="https://butler-sos.ptarmiganlabs.com">butler-sos.ptarmiganlabs.com</a>. This site is now more aligned with other Butler sites, for example <a href="https://butler.ptarmiganlabs.com">butler.ptarmiganlabs.com</a>.</li>
<li>Various bug fixes, performance improvements and fixed typos.</li>
</ul>
<h3 id="whats-new-in-version-55">What&rsquo;s new in version 5.5</h3>
<ul>
<li>Docker images for various Arm architectures are now created as part of the standard release process.</li>
</ul>
<h3 id="whats-new-in-version-54">What&rsquo;s new in version 5.4</h3>
<p>This video gives an idea of what Butler SOS is capable of.</p>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/CCMr8svrJXI?autoplay=1&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=1&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"></iframe>
    </div>
<br>
<br>
<p>Highlights of version 5.4 include:</p>
<ul>
<li><strong>Sample dashboards</strong> are now built using the brand new, shiny and all together awesome Grafana 7. Did we mention that Grafana 7 is awesome? Awesome.</li>
<li>Ever wondered how long Butler SOS has been running or how much memory it uses? The new <strong>uptime messages</strong> have you covered.</li>
<li>You are properly impressed with the uptime messages - good. Why not store them to Influxdb, so you can also <strong>visualize Butler SOS&rsquo; own memory use</strong>? It&rsquo;s just a couple of changes in the config file away.</li>
<li>Don&rsquo;t want to use the <strong>Docker healthchecks</strong>? No reason to if you don&rsquo;t user Docker. You can now turn it off in the config file.</li>
<li>Ah, you are a serious Sense user and have separate DEV and PROD environments? Good - now Butler SOS tags its own memory use so you can <strong>monitor each Butler SOS instance separately</strong>.</li>
<li>Who will monitor the monitor? Butler SOS can now <strong>send heartbeats</strong> to customizable URLs at desired intervals. Perfect if you want to monitor Butler SOS using for example <a href="https://healthchecks.io">healthchecks.io</a>. Very, very cool actually.</li>
<li><strong>Bugs, bugs and bugs</strong>. The known ones have been fixed. Keep reporting new ones!</li>
<li><strong>Update all dependencies</strong> to latest versions, to ensure security concerns are addressed.</li>
</ul>
<p>Releases are <a href="https://github.com/ptarmiganlabs/butler-sos/releases">available on Github</a>.</p>

</div>


</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-c43b6569b496f1a6d7d9012ee3bc204f">1 - About</h1>
    <div class="lead"><p>Information about the Butler SOS software, community, docs and more.</p>
<p>Are you stuck on something while setting up Butler SOS? Got ideas for new features?<br>
Don&rsquo;t hesitate to post your thoughts in the <a href="https://github.com/ptarmiganlabs/butler-sos/discussions">Butler SOS forums</a>.</p>
</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-7f6ad46d980f3f7fd962ac4f29a54c2f">1.1 - Butler SOS</h1>
    <div class="lead">An introduction to Butler SOS.</div>
	<p>The Butler SOS project is about adding best-in-class monitoring to the client-managed Windows version of Qlik Sense Enterprise, also known as QSEoW (Qlik Sense Enterprise on Windows).</p>
<p>The goal is to provide a close to real-time view into what&rsquo;s happening in a Qlik Sense environment.</p>
<p>At different times different metrics will be of interest.<br>
For that reason Butler SOS stores all metrics from Sense in a time-series database (InfluxDB and Prometheus both supported), from which dashboards, reports etc can be created using tools such as Grafana.<br>
Grafana is an open source, world-class visualization tool for time series data. It also has great alerting features and integrate with all kinds of alerting solutions, email, Teams, Slack and more.</p>
<p>If you don&rsquo;t fancy InfluxDB or Prometheus, Qlik Sense metrics and events can also be sent to New Relic for storage and visualization.<br>
They offer a free tier that will go a long way towards testing out a cloud-based visualization solution for Butler SOS.</p>
<p>Metrics are a major component of operational monitoring, but it&rsquo;s also important to keep on top of what errors and warning occur in the system.<br>
As of late 2021 the log database is no longer part of QSEoW, with the log files the only place where you can find those errors and warnings.</p>
<p>Butler SOS address this by sending log events in real-time from QSEoW to Butler SOS, which then stores them in InfluxDB, and/or send them to New Relic, and/or re-publish them as MQTT messages.<br>
This basically means you will very rarely have to plow through endless log files to find information about warnings and errors that have occurred.<br>
Warnings and errors can also be categorized by Butler SOS, making it <em>much</em> easier to understand what is happening in your Sense environment.</p>
<p>By listening in on the Qlik Sense log events from the associative engine, Butler SOS gets very detailed information about what is happening in the engine (which is where the magic happens).<br>
This means you get very detailed information about what is happening in your Sense apps, sheets and charts - as it happens.<br>
A chart that takes too long to render, an app that opens slowly, a sheet that is slow to load - all these things can be monitored in real-time.</p>
<p>Butler SOS also tracks user agents of all users accessing your Sense environment.
This means you get real-time insights into what operating systems and browsers are used to access your Sense environment.</p>
<p>There is a clear goal that Butler SOS should be very configurable.<br>
In practice this means that features can be turned on/off as needed, improving security and lowering memory usage.</p>
<p>Butler SOS is written in <a href="https://nodejs.org/en/">Node.js</a> and runs on most modern operating systems.<br>
Stand-alone binary files are created for Windows, Linux and macOS.<br>
Windows and macOS binaries are signed with a code-signing certificates, making it easier to install and run on those platforms.</p>
<p>You can run Butler SOS on the same server as Qlik Sense, in a Docker container on a Linux server, in Kubernetes, on Mac OS, on Raspberry Pi (not a good idea.. but possible and proven to work).</p>
<p>Butler SOS is a member of a group of tools collectively referred to as the &ldquo;Butler family&rdquo;, more info is available <a href="/docs/about/butler-family/">here</a>.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-e7bae8258595af2ab77fb585b7c656bb">1.2 - The Butler family</h1>
    <div class="lead">Please meet the Butlers. They&rsquo;re a nice, wild bunch!</div>
	<p><a href="https://github.com/ptarmiganlabs/butler">Butler</a> started out with a very specific need to start Sense reloads from outside systems.<br>
Over the years a few projects (for example Butler SOS, which simplifies day 2 operations ([<a href="https://www.infoworld.com/article/3442754/why-de-risking-day-2-operations-is-a-smart-business-strategy.html">1</a>], [<a href="https://dzone.com/articles/defining-day-2-operations">2</a>]) have spun off from the original Butler project, and still other projects have been created from scratch to solve specific challenges around developing Sense apps and running Qlik Sense server environments.</p>
<p>All members of the Butler family are available on <a href="https://github.com/ptarmiganlabs">Ptarmigan Labs&rsquo; GitHub page</a>.</p>
<p>Projects with production grade release status are (as of this writing):</p>
<h3 id="butler">Butler</h3>
<p>The original Butler. Offers various utilities that make it easier to develop Sense apps, as well as simplifying day 2 operations.</p>
<p><a href="https:/butler.ptarmiganlabs.com">butler.ptarmiganlabs.com</a>.</p>
<h3 id="butler-sos">Butler SOS</h3>
<p>Real-time operational metrics for Qlik Sense.<br>
A must-have if you are responsible for a Sense environment with more than a dozen or so users.</p>
<p>Butler SOS makes it possible to detect and alert on issues as they happen, rather than in retrospect much later.</p>
<p><a href="https://butler-sos.ptarmiganlabs.com">butler-sos.ptarmiganlabs.com</a>. (This site!)</p>
<h3 id="butler-sheet-icons">Butler Sheet Icons</h3>
<p>Automates the creation of sheet icons for Qlik Sense Enterprise on Windows (QSEoW) applications.</p>
<p>It&rsquo;s a cross platform command line tool which given the correct Sense credentials will take screen shots of all sheets in a Sense app (or all apps on a Sense server!), then create thumbnail versions of those screenshots.<br>
Finally those thumbnails will be set as sheet icons.</p>
<p>No more manual screenshot taking, resizing images, navigating hundreds of sheets in dozens of apps.<br>
Start Butler Sheet Icons instead and go get a nice <a href="https://www.swedishfood.com/fika">fika</a>.</p>
<p>The tool can be used stand-along or as part of an automated release process.</p>
<p><a href="https://github.com/ptarmiganlabs/butler-sheet-icons">https://github.com/ptarmiganlabs/butler-sheet-icons</a></p>
<h3 id="ctrl-q">Ctrl-Q</h3>
<p>Given the name of this tool it doesn&rsquo;t sound like a member of the Butler family.<br>
Let&rsquo;s say Ctrl-Q is a sibling of the Butler bunch.</p>
<p>While the Butler tools are (usually) intended to solve and simplify rather specific use cases, Ctrl-Q is aimed at being the lazy Qlik developer&rsquo;s best friend.</p>
<p>Let&rsquo;s say there is some manual, tedious, time consuming and error prone activity that a Qlik Sense developer is faced with.<br>
For example importing dozens of apps from QVF files and creating a hundred associated reload tasks.<br>
Ctrl-Q lets you do this with a single command, using definitions in an Excel file. Instead of spending a day on this the actual execution takes a minute or so.</p>
<p>In other words: Ctrl-Q focus on high-value use cases that are difficult or impossible to solve using other tools.</p>
<p><a href="https://github.com/ptarmiganlabs/ctrl-q">github.com/ptarmiganlabs/ctrl-q</a></p>
<h3 id="butler-cw">Butler CW</h3>
<p>Butler Cache Warmer. Cache warming is the process of proactively forcing Sense apps to be loaded into RAM, so they are readily available when users open them.<br>
Using Butler CW is an easy way to make your end users&rsquo; experience of Sense a little better.</p>
<p><a href="https://github.com/ptarmiganlabs/butler-cw">github.com/ptarmiganlabs/butler-cw</a></p>
<h3 id="butler-app-duplicator">Butler App Duplicator</h3>
<p>No matter if you are a single developer creating Sense apps, or have lots of developers doing this, having app templates is a good idea:</p>
<ul>
<li>Lowered barrier of entry for new Sense developers.</li>
<li>Productivity boost when developing Sense apps.</li>
<li>Encouraging a common coding standard across all apps.</li>
</ul>
<p><a href="https://github.com/ptarmiganlabs/butler-app-duplicator">github.com/ptarmiganlabs/butler-app-duplicator</a></p>
<h3 id="butler-spyglass">Butler Spyglass</h3>
<p>This tool is mainly of interest if you have lots of QVDs and apps, but when that&rsquo;s the case it&rsquo;s of paramount importance to understand what apps use which QVDs. In other words what data lineage looks like.</p>
<p>Butler Spyglass also extracts full load scripts for all Sense apps, creating a historical record of all load scripts for all Sense apps.</p>
<p><a href="https://github.com/ptarmiganlabs/butler-spyglass">github.com/ptarmiganlabs/butler-spyglass</a></p>
<h3 id="butler-notifier">Butler Notifier</h3>
<p>This tool makes it easy to tap into the Qlik Sense notification API. From there you can get all kinds of notifications, including task reload failures and changes in session state (user login/logout etc).</p>
<p><a href="https://github.com/ptarmiganlabs/butler-notifier">github.com/ptarmiganlabs/butler-notifier</a></p>
<h3 id="butler-icon-uploader">Butler Icon Uploader</h3>
<p>Visual looks is important when it comes to analytics, and this holds true also for Sense apps.</p>
<p>The Butler Icon Uploader makes it easy to upload icon libraries (for example Font Awesome) to Qlik Sense Enterprise. With such icons available it is then easy for app developers to use professional quality sheet and app icons in their Sense apps.</p>
<p><a href="https://github.com/ptarmiganlabs/butler-icon-upload">github.com/ptarmiganlabs/butler-icon-upload</a></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-f4e58fe39d282d36514d33b47cd33235">1.3 - Use cases</h1>
    <div class="lead">How can Butler SOS be used?</div>
	<p>A complete list of metrics is available in the <a href="/docs/reference/available_metrics/">reference section</a>.</p>
<h2 id="monitor-qlik-sense-metrics">Monitor Qlik Sense metrics</h2>
<p>This is the main use case for Butler SOS, with a large number of monitored metrics.<br>
Butler SOS can be configured to store these metrics in InfluxDB/Prometheus and/or send them as MQTT messages.</p>
<h3 id="session-count">Session count</h3>
<p>A session (or more specifically, a &ldquo;proxy session&rdquo;) is created when a user logs into Sense.<br>
The session is typically reused when a user opens additional Sense apps from the same browser.<br>
Knowing how many users are logged at any given time gives a Sense admin an understanding of when peak hours are, when service windows should be planed, whether the server(s) is too small or too big etc.</p>
<p>The session metrics are arguably among the most important ones provided by Butler SOS</p>
<h3 id="applications">Applications</h3>
<p>Butler SOS tracks how many and what applications (IDs and app names) are in loaded into the monitored Qlik engine(s).
In-memory and active applications are also tracked in the same way.</p>
<p>These metrics provide useful insights into the degree to which loaded apps are actually used and to what degree caching is in effect.</p>
<p>A couple of bonus metrics are also included: Number of calls made to the Qlik associative engine and number of selections done by users in the engine. Not really useful as such, but they do serve as a good relative measurement of how active users are between days/weeks/months.</p>
<h3 id="cache-status">Cache status</h3>
<p>The caching of applications in RAM is one of Qlik&rsquo;s classic selling points. But is it really working?</p>
<p>Butler SOS provides a set of metrics (bytes added to cache, lookups, cache hits/misses etc) that give hard numbers to the question of whether the cache is working or not.</p>
<p>While this is probably not as interesting from an operational perspective as user session counts, RAM usage and errors/warnings from the Sense logs, the cache metrics should definitely be monitored over medium timespans.</p>
<p>For example, if the cache hit ration goes down over weeks or months, that could mean a poorer user experience over that same time period.</p>
<h2 id="monitor-server-metrics">Monitor server metrics</h2>
<p>Some basic server metrics (free RAM and CPU load) are monitored by Butler SOS. You may have other, dedicated server monitoring tools too - Butler SOS does not replace these.<br>
It&rsquo;s however often convenient to have both server and Sense metrics side by side, thus Butler SOS includes some of the more important server metrics in addition to the Sense ones.</p>
<p>These metrics are only stored in InfluxDB/Prometheus, i.e. not sent as MQTT messages.</p>
<h3 id="available-memoryram">Available memory/RAM</h3>
<p>As Qlik Sense is an in-memory analytics tool you <em>really</em> want to ensure that there is always available memory for users&rsquo; apps.<br>
If your Sense server runs out of memory it&rsquo;s basically game over.
Now, Sense usually does a very good job reclaiming unused memory, but it&rsquo;s still critically important to monitor memory usage.</p>
<p>One error scenario that&rsquo;s hard or impossible to catch without Butler SOS style monitoring is that of apps with Cartesian products in them.<br>
They can easily consume tens of hundreds GByte of RAM within seconds, bringing a Sense server to a halt.<br>
Butler SOS has more than once proven its value when debugging this specific issue.</p>
<h3 id="cpu-load">CPU load</h3>
<p>If a server is heavily loaded it will eventually be seen as slow(er) by end users, with associated badwill accumulating.</p>
<h2 id="log-events-qlik-sense-errors--warning">Log events: Qlik Sense errors &amp; warning</h2>
<p>The Sense logs are always available on the Sense servers, the problem is that they are hard to reach there - at least in real time.<br>
Retrospective analysis is also cumbersome, you basically have to manually dig up the specific log files of interest and then search them for the needed information.<br>
Qlik <em>does</em> provide good analysis apps for the logs, but they are not real-time and they must be reloaded (which tends to be slow and resource intensive) to show new data.</p>
<p>Butler SOS simplifies this greatly by having select log events (warnings, errors and fatals by default) sent from the Sense servers to Butler SOS.<br>
Once such a log event message arrives, Butler SOS will store it in its database (for example InfluxDB or New Relic), from where the log event can be visualized using Grafana or within New Relic.</p>
<p>Log events from several Qlik Sense services can selectively be forwarded to Butler SOS:</p>
<ul>
<li>Engine</li>
<li>Proxy</li>
<li>Repository</li>
<li>Scheduler</li>
</ul>
<p>A sample use case of log events:</p>
<ol>
<li>Create a Grafana or New Relic real-time chart showing number of warnings/errors per 5-minute window.</li>
<li>Set up an alert in those tools to notify you when number of events during past 5 minutes go above some limit.</li>
</ol>
<p>This is trivial to set up, but gives you a very capable, close to real-time error/warning monitoring solution.</p>
<p>Log events can also be re-published as MQTT messages. This makes it possible for 3rd party systems to trigger actions when certain log events occur in Qlik Sense.</p>
<h3 id="categorization-of-log-events">Categorization of log events</h3>
<p>By categorizing log events, Butler SOS makes it much easier to understand what is happening in your Sense environment.<br>
For example, if you categorize log events as follows:</p>
<ul>
<li>reload failures as &ldquo;reload_failures&rdquo;</li>
<li>engine related errors/warnings as&quot;engine&quot;</li>
<li>Active Directory related errors as &ldquo;active_directory&rdquo;</li>
<li>permission denied related messages as &ldquo;permission&rdquo;</li>
</ul>
<p>&hellip;you can then easily create Grafana charts that show number of warnings/errors per category, and also clearly show how many unknown log events there are.<br>
It&rsquo;s also easy to track volume of warnings/errors over time, and to set up alerts when number of events go above some threshold.</p>
<h3 id="engine-performance-log-events">Engine performance log events</h3>
<p>Butler SOS can also process performance log events from the Qlik associative engine (the &ldquo;Qix&rdquo; engine as it was called in older versions of Sense).</p>
<p>These events provide <em>very</em> detailed insights into how the engine is performing, including how long it takes to calculate expressions, how long it takes to open apps, how long it takes to calculate charts etc.<br>
And how much memory each of those operations consume.</p>
<p>This is a very powerful feature, but when enabled in Qlik Sense (from the QMC) it will generate <em>a lot</em> of data that will all be store in the Sense log files.</p>
<p>By configuring Qlik Sense to send these events to Butler SOS instead of storing it in ever growing log files, you gain several advantages:</p>
<ul>
<li>The data is stored in a time series database, making it easy to visualise, analyze and alert on in real time.</li>
<li>By applying retention policies in the database, you keep only the most recent data, thus saving (<em>lots of!</em>) disk space compared to storing all data in log files on the Sense servers.</li>
</ul>
<p>Let&rsquo;s look at a few examples of what data volumes are generated by these events:</p>
<ul>
<li>A user opening a Sense app will generate 15-20 log events.</li>
<li>Making a selection in a chart will generate 10-15 log events.</li>
<li>A scheduled reload will generate 5-10 initial log events, then one progress event every 2 seconds, and finally 5-10 log events when the reload is done. For long running reloads this can easily generate 1000+ log events.</li>
</ul>
<p>When enabled via the QMC, the associated Sense log files can easily reach millions of lines per day week even on a relatively small Sense environment.<br>
Butler SOS lets you handle this data in a more efficient way.</p>
<h2 id="the-log-database">The log database</h2>
<p>The log database in Qlik Sense Enterprise on Windows is deprecated as of late 2021.<br>
Butler SOS still maintains support for older QSEoW versions. At some point in the future this support is however likely to be removed.</p>
<p>This feature relies on Butler SOS querying log db with certain intervals (typically every few minutes).<br>
A list of recent log events are returned to Butler SOS. The events are de-duplicated before stored in InfluxDB.</p>
<p>This essentially achieve the same thing as the more modern log event feature of Butler SOS - but with longer delays.
The log event model is almost instantaneous whereas the log db polling will be its very nature result in non real-time data.</p>
<h2 id="user-activity-events">User activity events</h2>
<p>Detailed events are available for all users:</p>
<ul>
<li>Session start</li>
<li>Session stop</li>
<li>Connection open</li>
<li>Connection close</li>
</ul>
<p>These events are both stored in InfluxDB and re-published as MQTT messages.</p>
<p>Usually it&rsquo;s enough to track how many users are currently using the Qlik Sense system.<br>
Exactly <em>what</em> users are usually of less interest.</p>
<p>At times you may want more detailed insights though. Then these events are incredibly useful.</p>
<p>For example:</p>
<ul>
<li>Sometimes network issues cause some users&rsquo; browsers to start many new sessions instead of re-using existing sessions.<br>
This can result in the proxy service overloading and making access to Sense slow for all users.<br>
Butler SOS makes it easy to detect this. Just create a Grafana chart that shows number of <code>session start</code> events over time, attach an alert that goes off if number of new sessions per minute is too high.</li>
<li>Let&rsquo;s say a specific user has troubles using Sense apps as intended, or a user is suspected of causing excessive RAM/CPU usage.<br>
Subscribe to the MQTT user activity messages coming from Butler SOS, filtering out just the user(s) of interest.<br>
Get a notification the very moment the user connects to Sense after which you can follow in real time what happens with the system. Does CPU go up? Free RAM goes down? Which apps are loaded?</li>
</ul>
<p>You can also use the MQTT message to create your personal disco light, controlled by your Sense users connecting and dropping off the Sense server&hellip;</p>
<p>Green = User opening a connection to Sense<br>
Red = User closing connection to Sense</p>
<p>From <a href="https://www.youtube.com/watch?v=T_IxQYdoqJA">YouTube</a>.</p>
<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/T_IxQYdoqJA?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"></iframe>
    </div>


</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-c1c4b0bd4070c97265b7f6cc1fbeae62">1.4 - Versions</h1>
    <div class="lead">Features are added, bugs fixed. How are Butler SOS versions set?</div>
	

<div class="pageinfo pageinfo-primary">
<p>In the spirit of not copying information to several places, the version history is kept as annotations of each release on the <a href="https://github.com/ptarmiganlabs/butler-sos/releases">GitHub release page</a>.</p>
<p>Version numbers include up to 3 levels, for example version 4.6.2 (which is a fictitious version):</p>
<p>4 is the <strong>major</strong> version. It is increased when Butler has added major new features, or in other ways changed in major ways.<br>
If following this principle, breaking changes should always result in a bumped major version.</p>
<p>6 is the <strong>minor</strong> version. This indicates a smaller update, when one or a few minor features have been added.</p>
<p>2 is the <strong>patch</strong> level. When individual bugs are fixed, these are released with an increased patch level.</p>
<p>Note 1: Major and minor updates usually include bug fixes too.<br>
Note 2: If a version of 5.2 is mentioned, this implicitly means 5.2.0.</p>

</div>


</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-132c90853aed878831e7a0b0be8a0611">1.5 - Contribution guidelines</h1>
    <div class="lead">How to contribute to Butler SOS.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Butler SOS is an open source project, using the <a href="https://choosealicense.com/licenses/mit/">MIT license</a>.</p>
<p>This means that all source code, documentation etc is available as-is, at no cost.</p>
<p><strong>It however also means that anyone interested can - and is encouraged to - contribute to the project!</strong></p>

</div>

<p>Butler SOS is developed in <a href="https://nodejs.org">Node.js</a>, with support from various <a href="https://www.npmjs.com/">NPM</a> modules.</p>
<p>We use <a href="https://gohugo.io/">Hugo</a> to format and generate this documentation site, the <a href="https://github.com/google/docsy">Docsy</a> theme for styling and site structure.<br>
Hugo is an open-source static site generator that provides us with templates, content organization in a standard directory structure, and a website generation engine. You write the pages in Markdown (or HTML if you want), and Hugo wraps them up into a website.</p>
<p>All submissions, including submissions by project members, require review. We use GitHub pull requests for this purpose. Consult <a href="https://help.github.com/articles/about-pull-requests/">GitHub Help</a> for more information on using pull requests.</p>
<h2 id="creating-an-issue">Creating an issue</h2>
<p>If you&rsquo;ve found a problem - or have a feature suggestion - with Butler SOS itself or the documentation, but you&rsquo;re not sure how to fix it yourself, please create an issue in the <a href="https://github.com/ptarmiganlabs/butler-sos/issues/">Butler SOS repo</a>. You can also create an issue about a specific doc page by clicking the <strong>Create Issue</strong> button in the top right hand corner of the page.</p>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Security/Disclosure</h4>

    If you discover a serious bug with Butler that may pose a security problem, please disclose it confidentially to <a href="mailto:security@ptarmiganlabs.com">security@ptarmiganlabs.com</a> first, so that it can be assessed and hopefully fixed prior to being exploited. Please do not raise GitHub issues for security-related doubts or problems.

</div>

<h2 id="development-concepts">Development concepts</h2>
<p>Some of the main tools/processes used during development of Butler SOS are:</p>
<h3 id="visual-studio-code-vsc">Visual Studio Code (=VSC)</h3>
<p>Any IDE supporting Node.js can be used, but VSC works really well. Open Source and a huge ecosystem of extensions.</p>
<h3 id="github">GitHub</h3>
<p>Used to store source code, track issues, change requests etc.</p>
<p>GitHub Actions used to build Docker images.</p>
<h3 id="release-please">Release Please</h3>
<p><a href="https://github.com/googleapis/release-please">Release Please</a> is used to create release notes.<br>
It also enforces consistent versioning when new (sometimes breaking) features are added, bugs fixed etc.</p>
<p>This means that as of Butler SOS 6.0 you can have more trust in the <a href="https://semver.org">semantic versioning</a> of Butler SOS releases.</p>
<h3 id="eslint--prettier">ESLint + Prettier</h3>
<p>Used to enforce a uniform source code format that also follow best practices defined in ESLint.</p>
<p>ESLint shows code issues within Visual Studio Code, but standalone reports can also be created:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜ npx eslint . --format table
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>/Users/goran/code/butler-sos/src/butler-sos.js
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>║ Line     │ Column   │ Type     │ Message                                                │ Rule ID              ║
</span></span><span style="display:flex;"><span>╟──────────┼──────────┼──────────┼────────────────────────────────────────────────────────┼──────────────────────╢
</span></span><span style="display:flex;"><span>║ <span style="color:#0000cf;font-weight:bold">31</span>       │ <span style="color:#0000cf;font-weight:bold">18</span>       │ error    │ Unexpected require<span style="color:#ce5c00;font-weight:bold">()</span>.                                  │ global-require       ║
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>/Users/goran/code/butler-sos/src/lib/appnamesextract.js
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>║ Line     │ Column   │ Type     │ Message                                                │ Rule ID              ║
</span></span><span style="display:flex;"><span>╟──────────┼──────────┼──────────┼────────────────────────────────────────────────────────┼──────────────────────╢
</span></span><span style="display:flex;"><span>║ <span style="color:#0000cf;font-weight:bold">29</span>       │ <span style="color:#0000cf;font-weight:bold">37</span>       │ error    │ A constructor name should not start with a             │ new-cap              ║
</span></span><span style="display:flex;"><span>║          │          │          │ lowercase letter.                                      │                      ║
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>/Users/goran/code/butler-sos/src/lib/heartbeat.js
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>║ Line     │ Column   │ Type     │ Message                                                │ Rule ID              ║
</span></span><span style="display:flex;"><span>╟──────────┼──────────┼──────────┼────────────────────────────────────────────────────────┼──────────────────────╢
</span></span><span style="display:flex;"><span>║ <span style="color:#0000cf;font-weight:bold">3</span>        │ <span style="color:#0000cf;font-weight:bold">1</span>        │ error    │ Unexpected var, use <span style="color:#204a87">let</span> or const instead.              │ no-var               ║
</span></span><span style="display:flex;"><span>║ <span style="color:#0000cf;font-weight:bold">6</span>        │ <span style="color:#0000cf;font-weight:bold">1</span>        │ error    │ Unexpected var, use <span style="color:#204a87">let</span> or const instead.              │ no-var               ║
</span></span><span style="display:flex;"><span>║ <span style="color:#0000cf;font-weight:bold">6</span>        │ <span style="color:#0000cf;font-weight:bold">21</span>       │ warning  │ Unexpected unnamed <span style="color:#204a87;font-weight:bold">function</span>.                           │ func-names           ║
</span></span><span style="display:flex;"><span>║ <span style="color:#0000cf;font-weight:bold">9</span>        │ <span style="color:#0000cf;font-weight:bold">15</span>       │ error    │ Unexpected <span style="color:#204a87;font-weight:bold">function</span> expression.                        │ prefer-arrow-        ║
</span></span><span style="display:flex;"><span>║          │          │          │                                                        │ callback             ║
</span></span><span style="display:flex;"><span>║ <span style="color:#0000cf;font-weight:bold">9</span>        │ <span style="color:#0000cf;font-weight:bold">15</span>       │ warning  │ Unexpected unnamed <span style="color:#204a87;font-weight:bold">function</span>.                           │ func-names           ║
</span></span><span style="display:flex;"><span>║ <span style="color:#0000cf;font-weight:bold">9</span>        │ <span style="color:#0000cf;font-weight:bold">25</span>       │ error    │ <span style="color:#4e9a06">&#39;response&#39;</span> is defined but never used.                  │ no-unused-vars       ║
</span></span><span style="display:flex;"><span>║ <span style="color:#0000cf;font-weight:bold">13</span>       │ <span style="color:#0000cf;font-weight:bold">16</span>       │ error    │ Unexpected <span style="color:#204a87;font-weight:bold">function</span> expression.                        │ prefer-arrow-        ║
</span></span><span style="display:flex;"><span>║          │          │          │                                                        │ callback             ║
</span></span><span style="display:flex;"><span>║ <span style="color:#0000cf;font-weight:bold">13</span>       │ <span style="color:#0000cf;font-weight:bold">16</span>       │ warning  │ Unexpected unnamed <span style="color:#204a87;font-weight:bold">function</span>.                           │ func-names           ║
</span></span><span style="display:flex;"><span>║ <span style="color:#0000cf;font-weight:bold">27</span>       │ <span style="color:#0000cf;font-weight:bold">9</span>        │ error    │ All <span style="color:#4e9a06">&#39;var&#39;</span> declarations must be at the top of the       │ vars-on-top          ║
</span></span><span style="display:flex;"><span>║          │          │          │ <span style="color:#204a87;font-weight:bold">function</span> scope.                                        │                      ║
</span></span><span style="display:flex;"><span>║ <span style="color:#0000cf;font-weight:bold">27</span>       │ <span style="color:#0000cf;font-weight:bold">9</span>        │ error    │ Unexpected var, use <span style="color:#204a87">let</span> or const instead.              │ no-var               ║
</span></span><span style="display:flex;"><span>║ <span style="color:#0000cf;font-weight:bold">28</span>       │ <span style="color:#0000cf;font-weight:bold">9</span>        │ error    │ All <span style="color:#4e9a06">&#39;var&#39;</span> declarations must be at the top of the       │ vars-on-top          ║
</span></span><span style="display:flex;"><span>║          │          │          │ <span style="color:#204a87;font-weight:bold">function</span> scope.                                        │                      ║
</span></span><span style="display:flex;"><span>║ <span style="color:#0000cf;font-weight:bold">28</span>       │ <span style="color:#0000cf;font-weight:bold">9</span>        │ error    │ Unexpected var, use <span style="color:#204a87">let</span> or const instead.              │ no-var               ║
</span></span><span style="display:flex;"><span>║ <span style="color:#0000cf;font-weight:bold">28</span>       │ <span style="color:#0000cf;font-weight:bold">13</span>       │ error    │ <span style="color:#4e9a06">&#39;t&#39;</span> is assigned a value but never used.                │ no-unused-vars       ║
</span></span><span style="display:flex;"><span>║ <span style="color:#0000cf;font-weight:bold">28</span>       │ <span style="color:#0000cf;font-weight:bold">35</span>       │ error    │ Unexpected <span style="color:#204a87;font-weight:bold">function</span> expression.                        │ prefer-arrow-        ║
</span></span><span style="display:flex;"><span>║          │          │          │                                                        │ callback             ║
</span></span><span style="display:flex;"><span>║ <span style="color:#0000cf;font-weight:bold">28</span>       │ <span style="color:#0000cf;font-weight:bold">35</span>       │ warning  │ Unexpected unnamed <span style="color:#204a87;font-weight:bold">function</span>.                           │ func-names           ║
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>╔════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
</span></span><span style="display:flex;"><span>║ <span style="color:#0000cf;font-weight:bold">13</span> Errors                                                                                                      ║
</span></span><span style="display:flex;"><span>╟────────────────────────────────────────────────────────────────────────────────────────────────────────────────╢
</span></span><span style="display:flex;"><span>║ <span style="color:#0000cf;font-weight:bold">4</span> Warnings                                                                                                     ║
</span></span><span style="display:flex;"><span>╚════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>➜
</span></span></code></pre></div><p>To format all source code files:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜  npm run format:prettier
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&gt; butler-sos@5.6.0 format:prettier
</span></span><span style="display:flex;"><span>&gt; npx prettier --config .prettierrc.yaml <span style="color:#4e9a06">&#34;./**/*.{ts,css,less,js}&#34;</span> --write
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>butler-sos.js 97ms
</span></span><span style="display:flex;"><span>docker-healthcheck.js 13ms
</span></span><span style="display:flex;"><span>globals.js 90ms
</span></span><span style="display:flex;"><span>lib/appnamesextract.js 35ms
</span></span><span style="display:flex;"><span>lib/healthmetrics.js 27ms
</span></span><span style="display:flex;"><span>lib/heartbeat.js 8ms
</span></span><span style="display:flex;"><span>lib/logdb.js 34ms
</span></span><span style="display:flex;"><span>lib/post-to-influxdb.js 85ms
</span></span><span style="display:flex;"><span>lib/post-to-mqtt.js 27ms
</span></span><span style="display:flex;"><span>lib/prom-client.js 45ms
</span></span><span style="display:flex;"><span>lib/servertags.js 5ms
</span></span><span style="display:flex;"><span>lib/service_uptime.js 14ms
</span></span><span style="display:flex;"><span>lib/sessionmetrics.js 29ms
</span></span><span style="display:flex;"><span>lib/telemetry.js 18ms
</span></span><span style="display:flex;"><span>lib/udp_handlers.js 18ms
</span></span><span style="display:flex;"><span>➜
</span></span></code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-2bb15e95294be09e4c2900c5cd1e6ce6">1.6 - Telemetry</h1>
    <div class="lead">What&rsquo;s telemetry and why is it important?</div>
	

<div class="pageinfo pageinfo-primary">
<p>Sharing telemetry data from Butler SOS is optional.<br>
You can use all Butler SOS features without sharing telemetry data.</p>
<p>That said, if you find Butler SOS useful you are <strong>strongly encouraged</strong> to leave the telemetry feature turned on.<br>
Having access to this data greatly helps the Butler SOS developers when they design new features, fix bugs etc.</p>
<p>The Butler SOS developers care about you - sharing telemetry data is your way of showing you care about them.</p>
<p>Sharing is caring!</p>

</div>

<h2 id="whats-telemetry">What&rsquo;s telemetry</h2>
<p>From <a href="https://en.wikipedia.org/wiki/Telemetry">Wikipedia</a>:</p>
<p><em>Telemetry is the in situ collection of measurements or other data at remote points and their automatic transmission to receiving equipment (telecommunication) for monitoring.</em></p>
<p>In the context of software tools (including Butler) telemetry is often used to describe the process of sending information about the tool itself to some monitoring system.</p>
<h2 id="why-telemetry-in-butler-sos">Why telemetry in Butler SOS?</h2>
<p>This is a good question.</p>
<p>For several years there was no telemetry at all in Butler SOS.</p>
<p>Development of new features were driven mainly by what features were needed at the time.<br>
Or the fact that Qlik released some new feature in Sense and Butler SOS was a way to test that new feature from the perspective of the Sense APIs.</p>
<p>That&rsquo;s all good but today Butler SOS is a rather significant tool with features spanning monitoring, alerting and more.</p>
<p>This multitude of features is also one of the core reasons for adding telemetry to Butler SOS:</p>


<div class="pageinfo pageinfo-info">
<ul>
<li>Which Butler SOS features are actually used out there?</li>
<li>Which operating systems, Node.js versions and hardware platforms is Butler SOS running on?</li>
</ul>

</div>

<p>Without this information the Butler SOS developers will keep working in the dark, not really knowing where to focus their efforts.</p>
<p>On the other hand - <strong>with</strong> access to telemetry data a lot of possibilities open up for the Butler SOS developers:</p>
<ul>
<li>If telemetry shows that no one uses a particular feature, maybe that feature should be scheduled for deprecation?</li>
<li>The opposite of the previous: If lots of users use a specific Butler SOS feature, then that feature is a candidate for future focus and development.</li>
<li>Telemetry will show if lots of users run Butler SOS on old Node.js versions. Knowing this its possible to set a migration schedule for what Node.js versions are supported - avoiding hard errors when some old Node.js version is no longer supported by Butler SOS.</li>
<li>Same thing for understanding what operating systems Butler SOS runs (and should be supported) on.</li>
</ul>
<h3 id="configuring-butler-sos-telemetry">Configuring Butler SOS&rsquo; telemetry</h3>
<p>Instructions <a href="/docs/getting_started/setup/telemetry/">here</a>.</p>
<h2 id="the-details">The details</h2>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">What's shared</h4>

    <p>The telemetry data includes the following:</p>
<ol>
<li><strong>Information about what features are enabled and which are disabled.</strong><br>
<em>Why: This tells the Butler SOS developers which features are used and which aren&rsquo;t.<br>
This is critical information when it comes to planning where to focus future development efforts.</em></li>
<li><strong>Information about Butler SOS&rsquo;s execution environment</strong> (operating system, hardware architecture, Node.js version etc).<br>
<em>Why: Ideally the Butler SOS developers want to use as modern versions of Node.js as possible. But if telemetry shows that lots os Butler SOS instances use old Node.js versions or run on some (yet) untested/unverified Linux version - then maybe those older Node.js/Linux versions must be supported for yet some time.</em></li>
</ol>

</div>



<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">What's not shared</h4>

    <p>The telemetry data will never include:</p>
<ol>
<li>Data that can identify your Sense environment or the server on which Butler SOS runs. This includes IP/MAC addresses or other network information, server names, Docker container metadata or similar.</li>
<li>Any actual data handled by Butler SOS (user IDs, app names, number of users in your system etc).</li>
<li>Qlik Sense or other certificates in any shape or form.</li>
</ol>

</div>

<h3 id="where-is-telemetry-data-sent">Where is telemetry data sent</h3>
<p>Butler SOS uses PostHog to collect telemetry data.</p>
<p>PostHog is an open source telemetry platform that is used by many open source projects.
The data is stored in the EU.</p>
<h3 id="deleting-telemetry-data">Deleting telemetry data</h3>
<p>Even though no-one (not even Ptarmigan Labs who runs the telemetry database!) has any way of ever connecting the data sent by <em>your</em> Butler SOS instance to <em>you</em> (it&rsquo;s all anonymized, remember?), there can be cases where telemetry data must be deleted.</p>
<p>The <a href="/docs/legal_stuff/#telemetry-data">legal page</a> has more information about this.</p>
<h3 id="field-level-description-of-telemetry-data">Field level description of telemetry data</h3>
<p>A telemetry message from Butler SOS contains the information below.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;system&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;id&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;62f221c94dc72823ebba9488a74006ccf69da8f8c6cfaa896a60d9a02186cc2e&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;arch&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;x64&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;platform&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;linux&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;release&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;22.04.4 LTS&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;distro&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Ubuntu&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;codename&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;jammy&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;virtual&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;isRunningInDocker&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;nodeVersion&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;v20.15.0&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">},</span>
</span></span><span style="display:flex;"><span>  <span style="color:#204a87;font-weight:bold">&#34;enabledFeatures&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&#34;feature&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;heartbeat&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;dockerHealthCheck&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;uptimeMonitor&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;uptimeMonitorNewRelic&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;udpServer&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;eventCount&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;rejectedEventCount&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;userEvents&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;userEventsMQTT&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;userEventsInfluxdb&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;userEventsNewRelic&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;logEventsProxy&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;logEventsScheduler&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;logEventsRepository&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;logEventCategorise&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;logEventCategoriseRuleCount&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">4</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;logEventCategoriseRuleDefault&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;logEventEnginePerformanceMonitor&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;logEventEnginePerformanceMonitorNameLookup&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;logEventEnginePerformanceMonitorTrackRejected&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;logEventsMQTT&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;logEventsInfluxdb&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;logEventsNewRelic&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;logdb&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;mqtt&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;newRelic&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">false</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;prometheus&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;influxdb&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;influxdbVersion&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;appNames&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
</span></span><span style="display:flex;"><span>      <span style="color:#204a87;font-weight:bold">&#34;userSessions&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">}</span>
</span></span></code></pre></div><h4 id="the-anonymous-id-field">The anonymous ID field</h4>
<p>The <code>id</code> field deserves a bit more explanation.</p>
<p>It&rsquo;s purpose is to uniquely identify the Butler SOS instance - nothing else.<br>
If Butler SOS is stopped and started again the same ID will be used.<br>
If reinstalled on a new server, or if the server&rsquo;s network configuration changes, a new ID will be created.</p>
<p>Some sensitive information is used to create the ID, but as the ID is anonymized before sent as part of the telemetry data, <em>no sensitive information leaves your servers</em>.</p>
<p>The ID field is created as follows:</p>
<ol>
<li>
<p>Combine the following information to a single string</p>
<ol>
<li>MAC address of default network interface</li>
<li>IPv4 address of default network interface</li>
<li>IP or FQDN of Sense server where repository service is running</li>
<li>System unique ID as reported by the OS. Not all OSs support this though, which is why field 1-3 above are also needed to get a unique ID.</li>
</ol>
</li>
<li>
<p>Run the created string through a <a href="https://en.wikipedia.org/wiki/Cryptographic_hash_function">one-way hashing/message digest function</a>.
Butler SOS uses Node.js&rsquo; own <a href="https://nodejs.org/docs/latest-v15.x/api/crypto.html">Crypto</a> library to create a <a href="https://en.wikipedia.org/wiki/SHA-2">SHA-256</a> hash, using the default network interface&rsquo;s MAC address as salt.<br>
Security is increased due to the fact that the salt never leaves the server where Butler is running.</p>
<p>The bottom line is that it&rsquo;s impossible to reverse the process and get the IP, host name etc used in step 1 above.<br>
Then again - this is cryptography, and there are no guarantees.<br>
But if you trust the certificates securing Sense itself, then the ID anonymization in Butler SOS should be ok too. Both are built on the same concepts of one-way cryptographic functions.</p>
</li>
<li>
<p>The result is a string that uniquely identifies the Butler SOS instance at hand, without giving away any sensitive data about the system where Butler is running.</p>
</li>
</ol>
<p>See above for an example of what the <code>id</code> field looks like.<br>
The <code>id</code> field is always shown during Butler startup.</p>
<h2 id="telemetry-faq">Telemetry FAQ</h2>
<ol>
<li>
<p><strong><em>What data is included in the telemetry messages?</em></strong><br>
See above.<br>
The telemetry includes information about which Butler SOS features are enabled vs disabled.
A unique, anonymized ID is included too, it&rsquo;s unique to each Butler SOS instance and is used soley to distinguish between different Butler SOS instances.<br>
Finally some information about Butler SOS&rsquo;s execution environment is included. Things like operating system, Node.js version used etc.</p>
</li>
<li>
<p><strong><em>Can my Sense environment be identified via telemetry data?</em></strong><br>
Short answer: No.<br>
Longer answer: No information about your Sense environment is sent as part of telemetry. No IP addresses or server names, no IDs of Sense apps/tasks/etc, no information about what actual data passed through Butler SOS, or any other data that can be linked to your Sense environment is included in the telemetry data.</p>
</li>
</ol>

</div>



    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-0d7696d24c78e212b3f7477df55bfbb6">2 - Getting started</h1>
    <div class="lead">Taking your first steps.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Butler SOS is written in <a href="https://nodejs.org/en/">Node.js</a>, which is a cross-platform programming environment.
This means most kinds of computers and servers can be used to run Butler SOS, including Windows, Linux and Mac OS.</p>
<p>Setting up Butler SOS is pretty straightforward, but you do need a working understanding of Qlik Sense admin tasks.<br>
For example, you need to export certificates from the QMC, as well as installing Butler SOS itself.</p>

</div>


</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-e566c4c01349bc72620fe657c0ee6111">2.1 - Overview</h1>
    <div class="lead">SenseOps monitoring - what&rsquo;s that? <br><br> This page provides the general steps to get started with Butler SOS.<br> It also explains how Butler SOS relates to other tools and services that collectively make up the SenseOps concept.</div>
	<!-- 

<div class="pageinfo pageinfo-primary">
<p>This is a placeholder page that shows you how to use this template site.</p>

</div>
 -->
<p><img src="/butler-sos-overview-1.png" alt="Butler SOS"></p>
<h2 id="qlik-sense--devops--senseops">Qlik Sense + DevOps = SenseOps</h2>
<p>Butler SenseOps Stats (&ldquo;Butler SOS&rdquo;) is a monitoring tool for <a href="https://www.qlik.com/us/products/qlik-sense">Qlik Sense</a>, built with DevOps workflows in mind.</p>
<p>It publishes operational, close to real-time Qlik Sense Enterprise metrics to <a href="https://www.influxdata.com/time-series-platform/influxdb/">InfluxDB</a>, <a href="https://prometheus.io">Prometheus</a>, <a href="https://newrelic.com">New Relic</a> and <a href="https://en.wikipedia.org/wiki/MQTT">MQTT</a>. From there it can be visualized using tools like <a href="https://grafana.com/">Grafana</a>, New Relic or acted on by downstream systems that listen to the MQTT topics used by Butler SOS.</p>
<p>Butler SOS gathers operational metrics from several sources, including the <a href="https://help.qlik.com/en-US/sense-developer/May2021/Subsystems/EngineAPI/Content/Sense_EngineAPI/GettingSystemInformation/HealthCheckStatus.htm">Sense healthcheck API</a> and <a href="https://help.qlik.com/en-US/sense-developer/May2021/Subsystems/ProxyServiceAPI/Content/Sense_ProxyServiceAPI/ProxyServiceAPI-Session-Module-API.htm">Session API</a> and the <a href="https://help.qlik.com/en-US/sense-admin/May2024/Subsystems/DeployAdministerQSE/Content/Sense_DeployAdminister/QSEoW/Deploy_QSEoW/Server-Logging.htm">Sense logs</a>.</p>
<h2 id="do-i-really-need-a-tool-like-this">Do I really need a tool like this?</h2>
<p>Let&rsquo;s say you are somehow involved in (or maybe even responsible for) your company&rsquo;s client-managed Qlik Sense Enterprise on Windows (QSEoW) environment.</p>
<p>Let&rsquo;s also assume you have more than 5-10 users in your Sense environment. Maybe you even have business critical data in your Sense apps.</p>
<p>Given the above, the answer is almost certainly &ldquo;yes&rdquo; : You can simplify your workday and provide a better analytics experience to your end users by using a tool like Butler SOS.</p>
<p>Looking at companies using Butler SOS, they range from small companies with a single Sense server to large enterprises with dozens of Sense servers and (many!) thousands of users.</p>
<h2 id="why-a-separate-tool-for-this">Why a separate tool for this?</h2>
<p>Good question.</p>
<p>While Qlik Sense ships with a great Operations Monitor application, it is not useful or intended for real-time operational monitoring.<br>
The Ops Monitor app is great for retrospective analysis of what happened in a Qlik Sense environment, but for a real-time understanding of what&rsquo;s going on in a Sense environment something else is needed - enter Butler SOS.</p>
<p>The most common way of using Butler SOS is for creating real-time dashboards based on the data in the InfluxDB or Prometheus database, showing operational metrics for a Qlik Sense Enterprise environment.</p>
<p>Sample screen shots of some basic <a href="https://grafana.com/">Grafana</a> dashboards created using data extracted by Butler SOS:</p>
<p><img src="/docs/getting_started/overview/butlersos_5_4_main_metrics.png" alt="Grafana dashboard" title="SenseOps dashboard showing errors and warnings, using Grafana 7"></p>
<p><img src="/docs/getting_started/overview/senseOps_dashboard_3.png" alt="Grafana dashboard" title="SenseOps dashboard showing errors and warnings, using Grafana 6"></p>
<p><img src="/docs/getting_started/overview/senseOps_dashboard_4.png" alt="Grafana dashboard" title="SenseOps dashboard showing Qlik Sense metrics, using Grafana 6"></p>
<p>As mentioned above, Butler SOS can also send data to <a href="https://en.wikipedia.org/wiki/MQTT">MQTT</a> for use in any MQTT enabled tool or system.</p>
<h2 id="known-limitations--improvement-ideas">Known limitations &amp; improvement ideas</h2>
<p>Things can always be improved, of course. Here are some ideas on things for future versions:</p>
<ul>
<li>The MQTT messages are kind of basic, at least when it comes to data from the Sense logs and for detailed user sessions. In both those cases a single text string is sent to MQTT. That&rsquo;s fine, but assumes the downstream consumer of the MQTT message can parse the string and extract the information of interest.<br>
A better approach would be to send more detailed MQTT messages. Those would be easier to consume and act upon for downstream systems, but it would on the other mean <strong>lots</strong> more MQTT messages being sent.</li>
<li>Send data as Kafka messages. Same basic idea as for MQTT messages, but having the Sense operational data in Kafka would make it easier to process/use it in (big) data pipelines.</li>
</ul>
<p>If you have ideas or suggestions on new features, please feel free to add them in the <a href="https://github.com/ptarmiganlabs/butler-sos/issues/new/choose">Butler SOS Github project</a>.</p>
<h2 id="where-should-i-go-next">Where should I go next?</h2>
<p>Ready to move on?</p>
<p>Great! Here are some good starting points</p>
<ul>
<li><a href="/docs/examples/">Examples</a>: Check out some Grafana dashboards to get inspiration what can be done!</li>
<li><a href="/docs/getting_started/">Installation &amp; setup</a>: Learn how to install Butler SOS, then set it up according to your needs.</li>
</ul>
<h2 id="i-have-a-question-or-want-to-report-an-issue">I have a question or want to report an issue</h2>
<p>Feel free to reach out via <a href="https://github.com/ptarmiganlabs/butler-sos/discussions">GitHub discussions</a> for general questions, <a href="https://github.com/ptarmiganlabs/butler-sos/issues">GitHub issues</a> for bugs, or by email to <a href="mailto:info@ptarmiganlabs.com">info@ptarmiganlabs.com</a>.</p>
<h2 id="security--disclosure">Security / Disclosure</h2>
<p>If you discover any important bug with Butler SOS that may pose a security problem, please disclose it confidentially to <a href="mailto://security@ptarmiganlabs.com">security@ptarmiganlabs.com</a> first, so that it can be assessed and hopefully fixed prior to being exploited. Please do not raise GitHub issues for security-related doubts or problems.</p>
<h2 id="whos-behind-butler-sos">Who&rsquo;s behind Butler SOS?</h2>
<p>Butler SOS is an open source project sponsored by <a href="https://ptarmiganlabs.com">Ptarmigan Labs</a>, an IT consulting company in Stockholm, Sweden.<br>
Project lead is <a href="https://www.linkedin.com/in/gorsan">Göran Sander</a> from same company.</p>
<p>Please refer to the <a href="/docs/about/contributing/">Contribution guidelines</a> page for details on how to contribute, suggest features etc to the tool.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-93ab0901b2fdbfbaeb6cbd7b9de35e55">2.2 - Install</h1>
    <div class="lead">The steps needed for installing and configuring vary slightly depending on what platform you use. The details are found here.</div>
	<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice warning" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#warning-notice"></use></svg></span>Warning</p><p>Butler SOS can store data in InfluxDB 1.x or 2.x databases.</p>
<p>InfluxDB 3.x is currently not supported.</p></div>

<div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>There is a <a href="https://github.com/ptarmiganlabs/butler-sos/discussions/201">Tips &amp; Tricks to get started with Butler SOS</a> document on the Butler SOS forums.</p>
<p>It contains description of issues people have faced when installing Butler SOS, as well as solutions to them.</p></div>



<div class="pageinfo pageinfo-primary">
<p>If in doubt on how to install Butler SOS, please consider Docker (or Kubernetes if available) as the first alternative.<br>
Why? Several reasons:</p>
<ul>
<li>Very quick to get started. Usually it takes just a few minutes to set up a Butler SOS instance in Docker.</li>
<li>Using Docker is a great way to test new tools without having to install the tool on one of your actual servers. If you decide the tool in question is not for you - just delete the Docker container. Your servers remain 100% the same as before the test.</li>
<li>The previous point is true not only for Butler SOS, but also its companion tools <a href="https://www.influxdata.com/products/influxdb-overview/">InfluxDB</a>, <a href="https://prometheus.io">Prometheus</a>, <a href="https://grafana.com/">Grafana</a> and <a href="https://en.wikipedia.org/wiki/MQTT">MQTT</a> (via for example the <a href="https://mosquitto.org/">Mosquitto MQTT broker</a>). You can run all of these tools in their own Docker containers, and not install a single piece of new, native applications during your evaluation of Butler SOS.</li>
<li>Make use of your existing Docker runtime environments, or use those offered by Amazon, Google, Microsoft etc.</li>
<li>Benefit from the comprehensive tools ecosystem (monitoring, deployment etc) that is available for Docker.</li>
<li>Updating Butler SOS to the latest version (assuming no config file changes are needed for that particular upgrade) is as easy as stopping the container, doing a &ldquo;docker pull ptarmiganlabs/butler-sos:latest&rdquo;, and finally starting the container again.</li>
</ul>

</div>

<p>If Docker is not an option, the pre-built, stand-alone binaries for Windows, Linux and macOS are good options.<br>
They offer a download-configure-execute approach to running Butler SOS.<br>
This will be the easiest way to use Butler SOS if you are not familiar with Docker.</p>
<p>But even with the above recommendations, Butler SOS can be deployed in lots of different configurations.<br>
It is therefore difficult to give precise instructions that will work everywhere, for everyone. Especially the fact that Butler SOS uses certificates to authenticate with Sense is a complicating factor. Certificates are (when correctly used) great for securing systems, but they can also cause headaches.</p>
<p>First we must recognize that Sense uses <a href="https://en.wikipedia.org/wiki/Self-signed_certificate">self signed certificates</a>. This is fine, and as long as you work on a server where Sense Enterprise is installed, that server will have the Sense-provided certificates and Certificate Authority (CA) installed.</p>
<p>This means that the easiest option for getting Butler SOS up and running is usually to install it on one of your Sense servers.</p>
<p>That said, it is probably better system design to run Butler SOS (and maybe other members of the <a href="https://github.com/ptarmiganlabs">Butler family</a>) on their own server, maybe using some flavour of Linux (lower cost compared to Windows). Windows servers work equally well though.</p>
<p>In this case you might want to consider exporting the Sense CA certificate from one of your Sense servers, and then install it on the Linux server.
This <em>should</em> technically not be needed for Butler SOS to work correctly - as long as you specify the correct root.pem file in the Butler SOS config file, you should be ok.</p>
<p>If you specify an incorrect root CA certificate file in the <code>clientCertCA</code> config option, you will get an error like this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>2018-05-23T20:36:44.393Z - error: Error: Error: unable to verify the first certificate
</span></span><span style="display:flex;"><span>    at TLSSocket.&lt;anonymous&gt; <span style="color:#ce5c00;font-weight:bold">(</span>_tls_wrap.js:1105:38<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    at emitNone <span style="color:#ce5c00;font-weight:bold">(</span>events.js:106:13<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    at TLSSocket.emit <span style="color:#ce5c00;font-weight:bold">(</span>events.js:208:7<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    at TLSSocket._finishInit <span style="color:#ce5c00;font-weight:bold">(</span>_tls_wrap.js:639:8<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    at TLSWrap.ssl.onhandshakedone <span style="color:#ce5c00;font-weight:bold">(</span>_tls_wrap.js:469:38<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>2018-05-23T20:36:49.164Z - verbose: Event started: Query log db
</span></span><span style="display:flex;"><span>2018-05-23T20:36:49.180Z - verbose: Event started: Statistics collection
</span></span></code></pre></div><p>A general note on host names is also relevant.<br>
If you specify a server name of &ldquo;myserver.company.com&rdquo; while exporting certificates from the QMC, you should use that same server name in the Butler SOS config file. Failing to do so will (most likely) result in an error:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>2018-05-23T19:51:03.087Z - error: Error: Error: Hostname/IP doesn<span style="color:#4e9a06">&#39;t match certificate&#39;</span>s altnames: <span style="color:#4e9a06">&#34;Host: serveralias.company.net. is not in the cert&#39;s altnames: DNS:myserver.company.com&#34;</span>
</span></span><span style="display:flex;"><span>    at Object.checkServerIdentity <span style="color:#ce5c00;font-weight:bold">(</span>tls.js:223:17<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    at TLSSocket.&lt;anonymous&gt; <span style="color:#ce5c00;font-weight:bold">(</span>_tls_wrap.js:1111:29<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    at emitNone <span style="color:#ce5c00;font-weight:bold">(</span>events.js:106:13<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    at TLSSocket.emit <span style="color:#ce5c00;font-weight:bold">(</span>events.js:208:7<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    at TLSSocket._finishInit <span style="color:#ce5c00;font-weight:bold">(</span>_tls_wrap.js:639:8<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>    at TLSWrap.ssl.onhandshakedone <span style="color:#ce5c00;font-weight:bold">(</span>_tls_wrap.js:469:38<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>2018-05-23T19:51:07.701Z - verbose: Event started: Statistics collection
</span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-586fd08d3cdf9ce8963edb53d566d35a">2.2.1 - Choosing a platform - what are the options?</h1>
    <div class="lead">You can run Butler SOS on several platforms, each with their own pros and cons. This section should help you decide which platform is right for you.</div>
	<!-- 

<div class="pageinfo pageinfo-primary">
<p>This is a placeholder page. Replace it with your own content.</p>

</div>
 -->
<p>As Butler SOS is written in Node.js, the tool in theory runs on all platforms where Node.js is available.
It is also available as a <a href="https://hub.docker.com/r/ptarmiganlabs/butler-sos">Docker image</a>.</p>
<p>Docker is <strong>by far</strong> the preferred way of running Butler SOS, mainly because it gives you a very nice, production grade (stable, scalable, monitorable etc) execution environment. If you are really serious about scalability and stability you could even run Butler SOS in Kubernetes.</p>
<p>Other platforms can be used too, of course - let&rsquo;s look at the pros and cons of some of the more commonly used platforms:</p>
<table>
  <thead>
      <tr>
          <th>Platform</th>
          <th>Pros</th>
          <th>Cons</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Docker</td>
          <td>- Easy to set up Butler SOS in Docker <br>- Easy to test new versions of Butler SOS <br>- Use existing Docker infrastructure<br>- Monitoring, restarts etc built into Docker<br> - Runs on low cost hardware and OSs</td>
          <td>- Docker environment needed (if not already available). Setting up and running Docker is not hard, but does require somewhat other skills than those needed to run a Sense environment</td>
      </tr>
      <tr>
          <td>Kubernetes</td>
          <td>- Enterprise grade <br>- Fault tolerant <br>- Deployed alongside other enterprise applications</td>
          <td>- More difficult to set up than Docker</td>
      </tr>
      <tr>
          <td>Windows server</td>
          <td>- Butler SOS can run on same server as Qlik Sense, saving hardware/server costs<br>- Pre-built, standalone binaries available</td>
          <td>- Running Butler SOS natively on the Sense server is a potential risk (usually a good idea to isolate systems/services to their own servers/environments whenever possible)<br>- More difficult (compared to Docker) to achieve a production grade setup (auto restarts etc)</td>
      </tr>
      <tr>
          <td>Linux</td>
          <td>- No cost for operating system (at least not for most Linux versions)<br>- Runs on low cost hardware<br>- Pre-built, standalone binaries available</td>
          <td>- More difficult (compared to Docker) to achieve a production grade setup (auto restarts etc)</td>
      </tr>
      <tr>
          <td>Mac OS</td>
          <td>- For development, if you want to extend or modify Butler SOS<br>- Signed, pre-built, standalone binaries available</td>
          <td>- Not a server grade operating system, i.e. not for production use</td>
      </tr>
      <tr>
          <td>Windows (desktop)</td>
          <td>- For development, if you want to extend or modify Butler SOS</td>
          <td>- Not a server grade operating system, i.e. not for production use</td>
      </tr>
  </tbody>
</table>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-71789367edd5d985337d5c8decd98498">2.2.2 - Native app</h1>
    <div class="lead">How to install Butler SOS as a Node.js application.</div>
	<h2 id="selecting-an-os">Selecting an OS</h2>
<p>While Qlik Sense Enterprise is a Windows only system, Butler SOS should be able to run on any OS where Node.js is available.<br>
Butler SOS has been successfully used as a native Node.js app - during development and production - on Windows, Linux (Debian and Ubuntu tested) and mac OS.</p>
<h2 id="prerequisites">Prerequisites</h2>
<table>
  <thead>
      <tr>
          <th>What</th>
          <th>Comment</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Qlik Sense Enterprise on Windows</td>
          <td><em>Mandatory.</em> Butler SOS is developed with Qlik Sense Enterprise on Windows (QSEoW) in mind. <br>Butler SOS is simply not intended to work with Sense Desktop or Sense cloud.</td>
      </tr>
      <tr>
          <td>Node.js</td>
          <td><em>Mandatory.</em> Butler SOS is written in Node - which is thus a firm requirement.</td>
      </tr>
      <tr>
          <td>MQTT broker</td>
          <td><em>Optional.</em> MQTT is used for outbound pub-sub messaging. Butler SOS assumes a working MQTT broker is available, the IP of which is defined in the Butler SOS config file. <a href="https://mosquitto.org/">Mosquitto</a> is a great open source broker. It requires very little hardware to run, even the smallest (usually free) Amazon/Google/Microsoft/&hellip; instance is enough, if you want a dedicated MQTT server. If you don&rsquo;t care about the pubsub features of Butler SOS, you don&rsquo;t need a MQTT broker. In this case you can disable the MQTT features in the config YAML file.</td>
      </tr>
      <tr>
          <td><a href="https://www.influxdata.com/time-series-platform/">InfluxDB</a></td>
          <td><em>Use at least one of InfluxDB and Prometheus.</em> An open source database for real-time information, used to store metrics around Butler&rsquo;s own memory usage over time (if this feature is enabled).<br> At this point more metrics and events are sent to InfluxDB, compared to Prometheus.</td>
      </tr>
      <tr>
          <td><a href="https://prometheus.io">Prometheus</a></td>
          <td><em>Use at least one of InfluxDB and Prometheus.</em> The de-facto standard open source tool for metrics gathering in large-scale systems, including Kubernetes. A bit more complex to set up and configure compared to InfluxDB, but also more focused on providing observability features.</td>
      </tr>
      <tr>
          <td><a href="https://grafana.com">Grafana</a></td>
          <td><em>Optional.</em> The de-facto open source standard for showing real-time metrics. In order to visualise Sense real-time metrics in Grafana you must enable at least one of InfluxDB or Prometheus.</td>
      </tr>
  </tbody>
</table>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-9d24ee3b75950dde560ebf08ddc9fc77">2.2.2.1 - Windows</h1>
    <div class="lead">Running Butler SOS in Windows.</div>
	<h2 id="installation">Installation</h2>
<p>There are two options: Run Butler SOS as a standalone binary or as a Node.js app.
The first is by far easier to set up and maintain and thus recommended.</p>
<h3 id="using-the-pre-built-standalone-app">Using the pre-built, standalone app</h3>
<p>The pre-build binaries are available from the <a href="https://github.com/ptarmiganlabs/butler-sos/releases">releases page</a>.</p>
<ol>
<li>Download the Windows binary</li>
<li>&ldquo;Unblock&rdquo; the downloaded zip file
<ol>
<li>Right-click the zip file</li>
<li>Select &ldquo;properties&rdquo;</li>
<li>Mark the &ldquo;Unblock&rdquo; check box in the lower right part of the properties window</li>
<li>Click the &ldquo;Apply&rdquo; button, then &ldquo;Ok&rdquo; to close the properties window</li>
</ol>
</li>
<li>Unzip the zip file</li>
<li>Move the extracted <code>butler-sos.exe</code> file to desired location, for example <code>d:\tools\butler-sos</code></li>
<li>Use <a href="https://nssm.cc/download">nssm</a> or similar tool to install Butler SOS as a Windows service</li>
</ol>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 410px">
<img class="card-img-top" src="/docs/getting_started/install/native/windows/unblock-butler-sos-windows-1_hu_ac2f9a55133ac0fd.png" width="400" height="562">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Unblocking the Butler SOS zip file on Windows Server

</p>
</figcaption>
</figure>

<h3 id="using-nodejs">Using Node.js</h3>
<p>In this scenario you will use the Butler SOS source code together with the standard Node.js runtime libraries.</p>
<p>The result is the same as with the stand-alone binaries, you just have to do more of the work yourself.<br>
This is usually <em>not</em> preferred, but if you want to add new features to (or modify existing ones) Butler SOS, this option is for you</p>
<h4 id="1-install-nodejs">1. Install Node.js</h4>
<p>The <a href="https://nodejs.org/en/download/">latest LTS version</a> is usually a good choice.</p>
<h4 id="2-select-a-directory-from-which-butler-sos-will-be-run">2. Select a directory from which Butler SOS will be run</h4>
<p>This can be pretty much anywhere, in this example d:\tools\butler-sos will be used.</p>
<h4 id="3-get-butler-sos">3. Get Butler SOS</h4>
<p>Get the desired <a href="https://github.com/ptarmiganlabs/butler-sos/releases">Butler SOS version</a> and extract it into the directory above.</p>
<p>Get the latest available version unless you have a <em>really</em> good reason to use an older version.<br>
New features are added, bugs fixed and security updates are applied in each version - it&rsquo;s simply a good idea to use the latest version.</p>
<p>Do not just clone the Butler SOS repository as that will give you the latest development version, which may not yet be fully tested and packaged.<br>
The exception is of course if you want to contribute to Butler SOS development - then forking and cloning the repository is the right thing to do.</p>
<h4 id="4-install-nodejs-dependencies">4. Install Node.js dependencies</h4>
<p>From d:\tools\butler-sos\src, run <code>npm i</code> to install the various Node.js modules used by Butler SOS. Depending on your server configuration you may get some warnings about (for example) Python not being installed, these can usually be ignored.</p>
<h2 id="configuration">Configuration</h2>
<p>The configuration file is used the same way as when Butler SOS runs on Docker, with one exception:</p>
<p>The path to the certificates used to authenticate with Sense must be specified in the config file. With Docker the certificate path is always the same, but with Windows you need to specify where the certificate files are located.</p>
<p>For example, if the certificate files exported from Sense are stored in d:\secrets\sensecert, the config file would look like this when used on Windows:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Certificates to use when querying Sense for healthcheck data. Get these from the Certificate Export in QMC.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">cert</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">clientCert</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">d:\secrets\sensecert\client.pem</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">clientCertKey</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">d:\secrets\sensecert\client_key.pem</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">clientCertCA</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">d:\secrets\sensecert\root.pem</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="stayin-alive">Stayin&rsquo; alive</h2>
<p>A tool like Butler SOS should of course start automatically when the server it runs on is restarted. This can be achieved in at least a couple of ways:</p>
<ol>
<li>
<p>By far the best option is to turn Butler SOS into a Windows service. That way it will be started on server boot, restarted if it fails etc. There are various tools for doing this, with <a href="https://nssm.cc/">NSSM</a> being a very good one. Butler SOS has been installed in lots of Sense environments this way.</p>
</li>
<li>
<p>You can also use a Node process monitor such as <a href="http://pm2.keymetrics.io/">PM2</a> to monitor the Butler SOS process, and restart it if it for some reason crashes. PM2 is not entirely easy to use on Windows though.</p>
</li>
</ol>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-23b14bb080153f9fef11cbfb39401ec8">2.2.2.2 - Linux and Mac OS</h1>
    <div class="lead">Running Butler SOS in Linux and Mac OS. Installation and configuration.</div>
	<h2 id="installation">Installation</h2>
<p>There are two options: Run Butler SOS as a standalone binary or as a Node.js app.
The first is by far easier to set up and maintain and thus recommended.</p>
<h3 id="using-the-pre-built-standalone-app">Using the pre-built, standalone app</h3>
<p>The pre-build binaries are available from the <a href="https://github.com/ptarmiganlabs/butler-sos/releases">releases page</a>.</p>
<ol>
<li>Download the Linux/macOS binary</li>
<li>Move the extracted <code>butler-sos</code> file to desired location.</li>
<li>Use the process monitor of choice (see below) to make sure Butler SOS is always running</li>
</ol>
<h3 id="using-nodejs">Using Node.js</h3>
<p>This scenario is identical to the <a href="/docs/getting_started/install/native/windows/">Windows scenario</a>, please refer to that page for details. Keep in mind that the format of file systems paths differ between Windows and Linux/Mac OS.</p>
<h2 id="configuration">Configuration</h2>
<p>Once again, same thing as <a href="/docs/getting_started/install/native/windows/">on Windows</a>.</p>
<h2 id="stayin-alive">Stayin&rsquo; alive</h2>
<p>A Node process monitor can be used on Linux or Mac OS too.<br>
Tools like <a href="http://pm2.keymetrics.io/">PM2</a> in fact usually work better on Linux/Mac OS than on Windows.</p>
<p>You can probably also use Linux&rsquo; standard service layer to start Butler SOS, that has not been tested though.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-2d00e399c2ce3ff7029560e14fa1bf0d">2.2.3 - Docker</h1>
    <div class="lead">Running Butler SOS in Docker. Installation and configuration.</div>
	<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>Butler SOS Docker images are automatically built for several architectures:</p>
<ul>
<li>amd64: This is by far the most common platform - your typical Intel based server use amd64.</li>
<li>arm64: Arm servers are now available from most cloud providers and offer very competitive price/performance. Apple&rsquo;s new M1 CPUs also use arm64, as does the newer Raspberry Pi models.</li>
<li>arm/v7: An older Arm architecture found in previous-gen Raspberry Pis, for example.</li>
</ul>
<p>All images are available on <a href="https://hub.docker.com/r/ptarmiganlabs/butler-sos/tags?page=1&amp;ordering=last_updated">Docker Hub</a>.</p></div>

<p>Docker is great in that it runs on many different platforms.<br>
This means that as long as the Docker runtime environment is installed, you can run Butler SOS on your Mac laptop, on a Linux server or on a Windows server.<br>
Or in a Kubernetes cluster to get enterprise grade process monitoring of Butler SOS.</p>
<h2 id="installation">Installation</h2>
<h3 id="docker-runtime">Docker runtime</h3>
<p>Installing Docker is beyond the scope of this document, but there are plenty of online tutorials covering this.</p>
<h3 id="butler-sos-installation-and-configuration">Butler SOS installation and configuration</h3>
<p>When using Docker there is no installation in the traditional sense.<br>
Instead we (in this case) use a docker-compose file to define how Butler SOS should be executed within a Docker container. There are also other ways to start Docker containers, but docker-compose is usually a good and robust starting point.</p>
<p>Configuration of Butler specific settings is then done using Butler&rsquo;s own JSON/YAML config file.</p>
<h3 id="install--configure---walkthrough">Install &amp; configure - walkthrough</h3>
<p>Create a directory for Butler SOS. Config files and logs will be stored here.<br>
This example uses macOS but the commands will be very similar on Linux.<br>
Docker on Windows is another story - it&rsquo;s there and works great, but not always identical to Linux/macOS.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜  butler-sos-demo mkdir -p butler-sos-docker/config/certificate
</span></span><span style="display:flex;"><span>➜  butler-sos-demo mkdir -p butler-sos-docker/log
</span></span><span style="display:flex;"><span>➜  butler-sos-demo <span style="color:#204a87">cd</span> butler-sos-docker
</span></span><span style="display:flex;"><span>➜  butler-sos-docker
</span></span></code></pre></div><ol>
<li>
<p>Copy <a href="https://github.com/ptarmiganlabs/butler-sos/blob/master/docs/docker-compose/docker-compose.yml">docker-compose.yml</a> from the GitHub repository to the Butler SOS directory that was created above. The directory where the docker-compose file is stored is the &lsquo;root&rsquo; directory of Butler SOS - everything else is relative to this directory.</p>
</li>
<li>
<p>Adapt the docker-compose file as needed (usually no changes are needed if you want to run the latest version of Butler SOS).</p>
</li>
<li>
<p>Copy the <a href="https://github.com/ptarmiganlabs/butler-sos/blob/master/src/config/production_template.yaml">YAML config file</a> from the GitHub repository into the ./config directory, rename it to <code>production.yaml</code> (or something else, as long as it matches the NODE_ENV environment variable set in the <code>docker-compose.yml</code> file) and edit it as needed. Note that for the Docker setup the path to certificates (as specified in the YAML config file) should be <code>/nodeapp/config/certificate/</code> (this is the Docker container&rsquo;s internal path to the certificate directory).</p>
</li>
<li>
<p>Edit the config file above as needed, with respect to your local Sense environment, folder paths etc. The provided template file has reasonable default settings where possible, but there are also a number of paths, passwords etc that must be configured.</p>
</li>
<li>
<p>Export certificates from the QMC in Qlik Sense Enterprise, place them in the <code>./config/certificate</code> directory (i.e. in a subdirectory to the directory where the docker-compose file is stored). The certificates can in theory be placed anywhere, as long as they are made available to the Docker container via a volume mount in the docker-compose.yaml file (e.g. <code>- &quot;./config:/nodeapp/config&quot;</code>).</p>
</li>
</ol>
<p>Let&rsquo;s do this one step at a time.<br>
Here we will bring up a single container with Butler SOS in it.<br>
The Butler SOS config file is called <code>production.yaml</code>.</p>
<p>First, what files are there?</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜  butler-sos-docker ls -la
</span></span><span style="display:flex;"><span>total <span style="color:#0000cf;font-weight:bold">8</span>
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#0000cf;font-weight:bold">5</span> goran  staff   <span style="color:#0000cf;font-weight:bold">160</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:08 .
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#0000cf;font-weight:bold">3</span> goran  staff    <span style="color:#0000cf;font-weight:bold">96</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 18:49 ..
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#0000cf;font-weight:bold">4</span> goran  staff   <span style="color:#0000cf;font-weight:bold">128</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:08 config
</span></span><span style="display:flex;"><span>-rw-r--r--  <span style="color:#0000cf;font-weight:bold">1</span> goran  staff  <span style="color:#0000cf;font-weight:bold">1505</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:01 docker-compose.yml
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#0000cf;font-weight:bold">2</span> goran  staff    <span style="color:#0000cf;font-weight:bold">64</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 18:49 log
</span></span><span style="display:flex;"><span>➜  butler-sos-docker
</span></span><span style="display:flex;"><span>➜  butler-sos-docker ls -la config
</span></span><span style="display:flex;"><span>total <span style="color:#0000cf;font-weight:bold">48</span>
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#0000cf;font-weight:bold">4</span> goran  staff    <span style="color:#0000cf;font-weight:bold">128</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:08 .
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#0000cf;font-weight:bold">5</span> goran  staff    <span style="color:#0000cf;font-weight:bold">160</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:08 ..
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#0000cf;font-weight:bold">5</span> goran  staff    <span style="color:#0000cf;font-weight:bold">160</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:08 certificate
</span></span><span style="display:flex;"><span>-rw-r--r--  <span style="color:#0000cf;font-weight:bold">1</span> goran  staff  <span style="color:#0000cf;font-weight:bold">21903</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:08 production.yaml
</span></span><span style="display:flex;"><span>➜  butler-sos-docker
</span></span><span style="display:flex;"><span>➜  butler-sos-docker ls -la config/certificate
</span></span><span style="display:flex;"><span>total <span style="color:#0000cf;font-weight:bold">24</span>
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#0000cf;font-weight:bold">5</span> goran  staff   <span style="color:#0000cf;font-weight:bold">160</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:08 .
</span></span><span style="display:flex;"><span>drwxr-xr-x  <span style="color:#0000cf;font-weight:bold">4</span> goran  staff   <span style="color:#0000cf;font-weight:bold">128</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:08 ..
</span></span><span style="display:flex;"><span>-rw-r--r--@ <span style="color:#0000cf;font-weight:bold">1</span> goran  staff  <span style="color:#0000cf;font-weight:bold">1170</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:06 client.pem
</span></span><span style="display:flex;"><span>-rw-r--r--@ <span style="color:#0000cf;font-weight:bold">1</span> goran  staff  <span style="color:#0000cf;font-weight:bold">1704</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:06 client_key.pem
</span></span><span style="display:flex;"><span>-rw-r--r--@ <span style="color:#0000cf;font-weight:bold">1</span> goran  staff  <span style="color:#0000cf;font-weight:bold">1224</span> Aug <span style="color:#0000cf;font-weight:bold">21</span> 19:06 root.pem
</span></span><span style="display:flex;"><span>➜  butler-sos-docker
</span></span></code></pre></div><p>What does the docker-compose.yml file look like?</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜  butler-sos-docker cat docker-compose.yml
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># docker-compose.yml</span>
</span></span><span style="display:flex;"><span>version: <span style="color:#4e9a06">&#34;3.3&#34;</span>
</span></span><span style="display:flex;"><span>services:
</span></span><span style="display:flex;"><span>    butler-sos:
</span></span><span style="display:flex;"><span>        image: ptarmiganlabs/butler-sos:latest
</span></span><span style="display:flex;"><span>        container_name: butler-sos
</span></span><span style="display:flex;"><span>        restart: always
</span></span><span style="display:flex;"><span>        volumes:
</span></span><span style="display:flex;"><span>            <span style="color:#8f5902;font-style:italic"># Make config file and log files accessible outside of container</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;./config:/nodeapp/config&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;./log:/nodeapp/log&#34;</span>
</span></span><span style="display:flex;"><span>        environment:
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;NODE_ENV=production&#34;</span> <span style="color:#8f5902;font-style:italic"># Means that Butler SOS will read config data from production.yaml</span>
</span></span><span style="display:flex;"><span>        logging:
</span></span><span style="display:flex;"><span>            driver: <span style="color:#4e9a06">&#34;json-file&#34;</span>
</span></span><span style="display:flex;"><span>            options:
</span></span><span style="display:flex;"><span>                max-file: <span style="color:#4e9a06">&#34;5&#34;</span>
</span></span><span style="display:flex;"><span>                max-size: <span style="color:#4e9a06">&#34;5m&#34;</span>
</span></span><span style="display:flex;"><span>        networks:
</span></span><span style="display:flex;"><span>            - senseops
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>networks:
</span></span><span style="display:flex;"><span>    senseops:
</span></span><span style="display:flex;"><span>        driver: bridge
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>➜  butler-sos-docker
</span></span></code></pre></div><p>Ok, all good. Let&rsquo;s start the container using docker-compose (the exact output will depend on what version of Butler SOS you are using and what features you have enabled in its YAML config file).</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜  butler-sos-docker docker-compose up
</span></span><span style="display:flex;"><span>Creating network <span style="color:#4e9a06">&#34;butler-sos-docker_senseops&#34;</span> with driver <span style="color:#4e9a06">&#34;bridge&#34;</span>
</span></span><span style="display:flex;"><span>Creating butler-sos ... <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>Attaching to butler-sos
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:28.754Z info: CONFIG: Influxdb enabled: <span style="color:#204a87">true</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:28.757Z info: CONFIG: Influxdb host IP: 192.168.100.20
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:28.757Z info: CONFIG: Influxdb host port: <span style="color:#0000cf;font-weight:bold">8086</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:28.758Z info: CONFIG: Influxdb db name: senseops
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.003Z info: CONFIG: Found InfluxDB database: senseops
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.219Z info: --------------------------------------
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.220Z info: Starting Butler SOS
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.220Z info: Log level: verbose
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.221Z info: App version: 9.2.0
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.221Z info: Instance ID    : 87b978019ae........
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.222Z info:
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.223Z info: Node version   : v18.7.0
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.223Z info: Architecture   : x64
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.224Z info: Platform       : linux
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.224Z info: Release        : <span style="color:#0000cf;font-weight:bold">11</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.224Z info: Distro         : Debian GNU/Linux
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.224Z info: Codename       : bullseye
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.224Z info: Virtual        : <span style="color:#204a87">false</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.225Z info: Processors     : <span style="color:#0000cf;font-weight:bold">4</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.225Z info: Physical cores : <span style="color:#0000cf;font-weight:bold">4</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.225Z info: Cores          : <span style="color:#0000cf;font-weight:bold">4</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.226Z info: Docker arch.   : undefined
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.226Z info: Total memory   : <span style="color:#0000cf;font-weight:bold">6233055232</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.226Z info: Standalone app : <span style="color:#204a87">false</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.226Z info: --------------------------------------
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.226Z info: Client cert: /nodeapp/config/certificate/client.pem
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.227Z info: Client cert key: /nodeapp/config/certificate/client_key.pem
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.227Z info: CA cert: /nodeapp/config/certificate/root.pem
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.250Z verbose: MAIN: Anonymous telemetry reporting has been <span style="color:#204a87">set</span> up.
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.252Z verbose: MAIN: Starting Docker healthcheck server...
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.257Z info: USER EVENT: UDP server listening on 0.0.0.0:9997
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.257Z info: LOG EVENT: UDP server listening on 0.0.0.0:9996
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.290Z info: MAIN: Started Docker healthcheck server on port 12398.
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.290Z info: MAIN: Starting Prometheus Butler SOS endpoint on 0.0.0.0:9842.
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.291Z verbose: PROM: Setting up Prometheus client <span style="color:#204a87;font-weight:bold">for</span> server: sense1
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.292Z verbose: PROM: Setting up Prometheus client <span style="color:#204a87;font-weight:bold">for</span> server: sense2
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.310Z info: PROM: Prometheus Butler SOS metrics server now listening on port <span style="color:#0000cf;font-weight:bold">9842</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:29.311Z info: PROM: Prometheus Node.js metrics server now listening on port 0.0.0.0:9001
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:30.911Z verbose: --------------------------------
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:30.911Z verbose: Iteration <span style="color:#8f5902;font-style:italic"># 1, Uptime: 0 months, 0 days, 0 hours, 0 minutes, 2.005 seconds, Heap used 33.26 MB of total heap 58.39 MB. External (off-heap): 3.57 MB. Memory allocated to process: 92.45 MB.</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:31.051Z verbose: UPTIME NEW RELIC: Sent Butler SOS memory usage data to New Relic account <span style="color:#0000cf;font-weight:bold">123456789</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Ptarmigan Labs NR account&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-23T03:45:31.269Z verbose: MEMORY USAGE INFLUXDB: Sent Butler SOS memory usage data to InfluxDB
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>Once everything everything looks good you can stop the containers (ctrl-C), then start them again in daemon mode (i.e. running unattended in the background):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜  butler-sos-docker docker-compose up -d
</span></span><span style="display:flex;"><span>Starting butler-sos ... <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>➜  butler-sos-docker
</span></span></code></pre></div><p>Setting the log level to info in the config file will reduce log output.</p>
<p>The Docker container implements Docker healthchecks, which means you can run <code>docker ps</code> to see whether the container is healthy or not (assuming Docker healthchecks are enabled in the config file, of course):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜  butler-sos-docker docker ps
</span></span><span style="display:flex;"><span>CONTAINER ID   IMAGE                             COMMAND                  CREATED              STATUS                    PORTS     NAMES
</span></span><span style="display:flex;"><span>9d2253511a24   ptarmiganlabs/butler-sos:latest   <span style="color:#4e9a06">&#34;docker-entrypoint.s…&#34;</span>   About a minute ago   Up <span style="color:#0000cf;font-weight:bold">17</span> seconds <span style="color:#ce5c00;font-weight:bold">(</span>healthy<span style="color:#ce5c00;font-weight:bold">)</span>             butler-sos
</span></span><span style="display:flex;"><span>➜  butler-sos-docker
</span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-63709b1cad5b08d29cad0f3c2660a2e1">2.2.4 - InfluxDB &amp; Grafana</h1>
    <div class="lead">How to use Butler SOS with InfluxDB and Grafana using Docker.</div>
	<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice warning" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#warning-notice"></use></svg></span>Warning</p><p>Butler SOS supports InfluxDB version 1.x and 2x.</p>
<p>InfluxDB v3.x is not yet supported.</p></div>

<p>If you already have InfluxDB and/or Grafana running you can skip this section.</p>
<h2 id="running-in-docker-using-docker-compose">Running in Docker using docker-compose</h2>
<p>The easiest way to get started is to run these tools in Docker containers, controlled by docker-compose files.<br>
Running them under Kubernetes will give you a whole other level of fault tolerance, scalability etc - but this also requires much more when it comes to Kubernetes skills. Use the setup that&rsquo;s relevant to your use case.</p>
<p>You can use a single docker-compose file for Butler SOS, InfluxDB and Grafana - or separate docker-compose files for each tool.</p>
<p>The advantage of using a single docker-compose file is that the entire stack of tools will be launched in unison. You can create dependencies between the tools if needed etc - very convenient.
On the other hand, having separate docker-compose files makes it easier to restart (or upgrade or in other ways change) a single service without affecting other services.</p>
<h3 id="full-stack-docker-compose-file">Full stack docker-compose file</h3>
<p>Let&rsquo;s start Butler SOS, InfluxDB and Grafana from a single <code>docker-compose_fullstack_influxdb.yml</code> file:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜  butler-sos-docker cat docker-compose_fullstack_influxdb.yml
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># docker-compose_fullstack_influxdb.yml</span>
</span></span><span style="display:flex;"><span>version: <span style="color:#4e9a06">&#34;3.3&#34;</span>
</span></span><span style="display:flex;"><span>services:
</span></span><span style="display:flex;"><span>    butler-sos:
</span></span><span style="display:flex;"><span>        image: ptarmiganlabs/butler-sos:latest
</span></span><span style="display:flex;"><span>        container_name: butler-sos
</span></span><span style="display:flex;"><span>        restart: always
</span></span><span style="display:flex;"><span>        volumes:
</span></span><span style="display:flex;"><span>            <span style="color:#8f5902;font-style:italic"># Make config file and log files accessible outside of container</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;./config:/nodeapp/config&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;./log:/nodeapp/log&#34;</span>
</span></span><span style="display:flex;"><span>        environment:
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;NODE_ENV=production_influxdb&#34;</span> <span style="color:#8f5902;font-style:italic"># Means that Butler SOS will read config data from production_influxdb.yaml</span>
</span></span><span style="display:flex;"><span>        logging:
</span></span><span style="display:flex;"><span>            driver: <span style="color:#4e9a06">&#34;json-file&#34;</span>
</span></span><span style="display:flex;"><span>            options:
</span></span><span style="display:flex;"><span>                max-file: <span style="color:#4e9a06">&#34;5&#34;</span>
</span></span><span style="display:flex;"><span>                max-size: <span style="color:#4e9a06">&#34;5m&#34;</span>
</span></span><span style="display:flex;"><span>        networks:
</span></span><span style="display:flex;"><span>            - senseops
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    influxdb:
</span></span><span style="display:flex;"><span>        image: influxdb:1.8.10
</span></span><span style="display:flex;"><span>        container_name: influxdb
</span></span><span style="display:flex;"><span>        restart: always
</span></span><span style="display:flex;"><span>        volumes:
</span></span><span style="display:flex;"><span>            - ./influxdb/data:/var/lib/influxdb <span style="color:#8f5902;font-style:italic"># Mount for influxdb data directory</span>
</span></span><span style="display:flex;"><span>            - ./influxdb/config/:/etc/influxdb/ <span style="color:#8f5902;font-style:italic"># Mount for influxdb configuration</span>
</span></span><span style="display:flex;"><span>        ports:
</span></span><span style="display:flex;"><span>            <span style="color:#8f5902;font-style:italic"># The API for InfluxDB is served on port 8086</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;8086:8086&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;8082:8082&#34;</span>
</span></span><span style="display:flex;"><span>        environment:
</span></span><span style="display:flex;"><span>            <span style="color:#8f5902;font-style:italic"># Disable usage reporting</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;INFLUXDB_REPORTING_DISABLED=true&#34;</span>
</span></span><span style="display:flex;"><span>        networks:
</span></span><span style="display:flex;"><span>            - senseops
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    grafana:
</span></span><span style="display:flex;"><span>        image: grafana/grafana:latest
</span></span><span style="display:flex;"><span>        container_name: grafana
</span></span><span style="display:flex;"><span>        restart: always
</span></span><span style="display:flex;"><span>        ports:
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;3000:3000&#34;</span>
</span></span><span style="display:flex;"><span>        volumes:
</span></span><span style="display:flex;"><span>            - ./grafana/data:/var/lib/grafana
</span></span><span style="display:flex;"><span>        networks:
</span></span><span style="display:flex;"><span>            - senseops
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>networks:
</span></span><span style="display:flex;"><span>    senseops:
</span></span><span style="display:flex;"><span>        driver: bridge
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>➜  butler-sos-docker
</span></span></code></pre></div><p>Assuming you&rsquo;ve already completed the <a href="/docs/getting_started/setup/">setup of Butler SOS</a>, the result of running the <code>docker-compose_fullstack_influxdb.yml</code> file above is something like this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜  butler-sos-docker docker-compose -f docker-compose_fullstack_influxdb.yml up
</span></span><span style="display:flex;"><span>Creating network <span style="color:#4e9a06">&#34;butler-sos-docker_senseops&#34;</span> with driver <span style="color:#4e9a06">&#34;bridge&#34;</span>
</span></span><span style="display:flex;"><span>Creating influxdb   ... <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>Creating butler-sos ... <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>Creating grafana    ... <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>Attaching to butler-sos, grafana, influxdb
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>grafana       <span style="color:#000;font-weight:bold">|</span> <span style="color:#000">logger</span><span style="color:#ce5c00;font-weight:bold">=</span>grafanaStorageLogger <span style="color:#000">t</span><span style="color:#ce5c00;font-weight:bold">=</span>2022-08-21T18:13:42.76538465Z <span style="color:#000">level</span><span style="color:#ce5c00;font-weight:bold">=</span>info <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;storage starting&#34;</span>
</span></span><span style="display:flex;"><span>grafana       <span style="color:#000;font-weight:bold">|</span> <span style="color:#000">logger</span><span style="color:#ce5c00;font-weight:bold">=</span>ngalert <span style="color:#000">t</span><span style="color:#ce5c00;font-weight:bold">=</span>2022-08-21T18:13:42.780004463Z <span style="color:#000">level</span><span style="color:#ce5c00;font-weight:bold">=</span>info <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;warming cache for startup&#34;</span>
</span></span><span style="display:flex;"><span>grafana       <span style="color:#000;font-weight:bold">|</span> <span style="color:#000">logger</span><span style="color:#ce5c00;font-weight:bold">=</span>http.server <span style="color:#000">t</span><span style="color:#ce5c00;font-weight:bold">=</span>2022-08-21T18:13:42.796364325Z <span style="color:#000">level</span><span style="color:#ce5c00;font-weight:bold">=</span>info <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;HTTP Server Listen&#34;</span> <span style="color:#000">address</span><span style="color:#ce5c00;font-weight:bold">=[</span>::<span style="color:#ce5c00;font-weight:bold">]</span>:3000 <span style="color:#000">protocol</span><span style="color:#ce5c00;font-weight:bold">=</span>http <span style="color:#000">subUrl</span><span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">socket</span><span style="color:#ce5c00;font-weight:bold">=</span>
</span></span><span style="display:flex;"><span>grafana       <span style="color:#000;font-weight:bold">|</span> <span style="color:#000">logger</span><span style="color:#ce5c00;font-weight:bold">=</span>ngalert.multiorg.alertmanager <span style="color:#000">t</span><span style="color:#ce5c00;font-weight:bold">=</span>2022-08-21T18:13:42.807894344Z <span style="color:#000">level</span><span style="color:#ce5c00;font-weight:bold">=</span>info <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;starting MultiOrg Alertmanager&#34;</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:42.908Z info: CONFIG: Influxdb enabled: <span style="color:#204a87">true</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:42.911Z info: CONFIG: Influxdb host IP: influxdb
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:42.912Z info: CONFIG: Influxdb host port: <span style="color:#0000cf;font-weight:bold">8086</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:42.912Z info: CONFIG: Influxdb db name: senseops
</span></span><span style="display:flex;"><span>influxdb      <span style="color:#000;font-weight:bold">|</span> <span style="color:#000">ts</span><span style="color:#ce5c00;font-weight:bold">=</span>2022-08-21T18:13:43.139047Z <span style="color:#000">lvl</span><span style="color:#ce5c00;font-weight:bold">=</span>info <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Executing query&#34;</span> <span style="color:#000">log_id</span><span style="color:#ce5c00;font-weight:bold">=</span>0cSPbmJG000 <span style="color:#000">service</span><span style="color:#ce5c00;font-weight:bold">=</span>query <span style="color:#000">query</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;SHOW DATABASES&#34;</span>
</span></span><span style="display:flex;"><span>influxdb      <span style="color:#000;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">[</span>httpd<span style="color:#ce5c00;font-weight:bold">]</span> 172.24.0.2 - - <span style="color:#ce5c00;font-weight:bold">[</span>21/Aug/2022:18:13:43 +0000<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#4e9a06">&#34;GET /query?p=&amp;q=show+databases&amp;u= HTTP/1.1&#34;</span> <span style="color:#0000cf;font-weight:bold">200</span> <span style="color:#0000cf;font-weight:bold">84</span> <span style="color:#4e9a06">&#34;-&#34;</span> <span style="color:#4e9a06">&#34;-&#34;</span> fd854ac5-217c-11ed-8001-0242ac180003 <span style="color:#0000cf;font-weight:bold">1084</span>
</span></span><span style="display:flex;"><span>influxdb      <span style="color:#000;font-weight:bold">|</span> <span style="color:#000">ts</span><span style="color:#ce5c00;font-weight:bold">=</span>2022-08-21T18:13:43.169398Z <span style="color:#000">lvl</span><span style="color:#ce5c00;font-weight:bold">=</span>info <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Executing query&#34;</span> <span style="color:#000">log_id</span><span style="color:#ce5c00;font-weight:bold">=</span>0cSPbmJG000 <span style="color:#000">service</span><span style="color:#ce5c00;font-weight:bold">=</span>query <span style="color:#000">query</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;CREATE DATABASE senseops&#34;</span>
</span></span><span style="display:flex;"><span>influxdb      <span style="color:#000;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">[</span>httpd<span style="color:#ce5c00;font-weight:bold">]</span> 172.24.0.2 - - <span style="color:#ce5c00;font-weight:bold">[</span>21/Aug/2022:18:13:43 +0000<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#4e9a06">&#34;POST /query?p=&amp;q=create+database+%22senseops%22&amp;u= HTTP/1.1 &#34;</span> <span style="color:#0000cf;font-weight:bold">200</span> <span style="color:#0000cf;font-weight:bold">33</span> <span style="color:#4e9a06">&#34;-&#34;</span> <span style="color:#4e9a06">&#34;-&#34;</span> fd89e529-217c-11ed-8002-0242ac180003 <span style="color:#0000cf;font-weight:bold">2940</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.177Z info: CONFIG: Created new InfluxDB database: senseops
</span></span><span style="display:flex;"><span>influxdb      <span style="color:#000;font-weight:bold">|</span> <span style="color:#000">ts</span><span style="color:#ce5c00;font-weight:bold">=</span>2022-08-21T18:13:43.219945Z <span style="color:#000">lvl</span><span style="color:#ce5c00;font-weight:bold">=</span>info <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Executing query&#34;</span> <span style="color:#000">log_id</span><span style="color:#ce5c00;font-weight:bold">=</span>0cSPbmJG000 <span style="color:#000">service</span><span style="color:#ce5c00;font-weight:bold">=</span>query <span style="color:#000">query</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;CREATE RETENTION POLICY \&#34;10d\&#34; ON senseops DURATION 10d REPLICATION 1 DEFAULT&#34;</span>
</span></span><span style="display:flex;"><span>influxdb      <span style="color:#000;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">[</span>httpd<span style="color:#ce5c00;font-weight:bold">]</span> 172.24.0.2 - - <span style="color:#ce5c00;font-weight:bold">[</span>21/Aug/2022:18:13:43 +0000<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#4e9a06">&#34;POST /query?p=&amp;q=create+retention+policy+%2210d%22+on+%22senseops%22+duration+10d+replication+1+default&amp;u= HTTP/1.1 &#34;</span> <span style="color:#0000cf;font-weight:bold">200</span> <span style="color:#0000cf;font-weight:bold">33</span> <span style="color:#4e9a06">&#34;-&#34;</span> <span style="color:#4e9a06">&#34;-&#34;</span> fd91ac84-217c-11ed-8003-0242ac180003 <span style="color:#0000cf;font-weight:bold">2299</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.242Z info: CONFIG: Created new InfluxDB retention policy: 10d
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.391Z info: --------------------------------------
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.391Z info: Starting Butler SOS
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.392Z info: Log level: verbose
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.393Z info: App version: 9.2.0
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.394Z info: Instance ID    : 964cbd0a36bc....
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.394Z info:
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.395Z info: Node version   : v18.7.0
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.396Z info: Architecture   : x64
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.396Z info: Platform       : linux
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.396Z info: Release        : <span style="color:#0000cf;font-weight:bold">11</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.397Z info: Distro         : Debian GNU/Linux
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.397Z info: Codename       : bullseye
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.398Z info: Virtual        : <span style="color:#204a87">false</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.398Z info: Processors     : <span style="color:#0000cf;font-weight:bold">4</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.399Z info: Physical cores : <span style="color:#0000cf;font-weight:bold">4</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.399Z info: Cores          : <span style="color:#0000cf;font-weight:bold">4</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.400Z info: Docker arch.   : undefined
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.400Z info: Total memory   : <span style="color:#0000cf;font-weight:bold">6233055232</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.401Z info: Standalone app : <span style="color:#204a87">false</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.401Z info: --------------------------------------
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.402Z info: Client cert: /nodeapp/config/certificate/client.pem
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.402Z info: Client cert key: /nodeapp/config/certificate/client_key.pem
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.402Z info: CA cert: /nodeapp/config/certificate/root.pem
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.421Z verbose: MAIN: Anonymous telemetry reporting has been <span style="color:#204a87">set</span> up.
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.423Z verbose: MAIN: Starting Docker healthcheck server...
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.428Z info: USER EVENT: UDP server listening on 0.0.0.0:9997
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.429Z info: LOG EVENT: UDP server listening on 0.0.0.0:9996
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.461Z info: MAIN: Started Docker healthcheck server on port 12398.
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.462Z info: MAIN: Starting Prometheus Butler SOS endpoint on 0.0.0.0:9842.
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.464Z verbose: PROM: Setting up Prometheus client <span style="color:#204a87;font-weight:bold">for</span> server: sense1
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.465Z verbose: PROM: Setting up Prometheus client <span style="color:#204a87;font-weight:bold">for</span> server: sense2
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.482Z info: PROM: Prometheus Butler SOS metrics server now listening on port <span style="color:#0000cf;font-weight:bold">9842</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:43.483Z info: PROM: Prometheus Node.js metrics server now listening on port 0.0.0.0:9001
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:45.080Z verbose: --------------------------------
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:45.081Z verbose: Iteration <span style="color:#8f5902;font-style:italic"># 1, Uptime: 0 months, 0 days, 0 hours, 0 minutes, 2.007 seconds, Heap used 31.56 MB of total heap 60.81 MB. External (off-heap): 2.98 MB. Memory allocated to process: 102.28 MB.</span>
</span></span><span style="display:flex;"><span>influxdb      <span style="color:#000;font-weight:bold">|</span> <span style="color:#ce5c00;font-weight:bold">[</span>httpd<span style="color:#ce5c00;font-weight:bold">]</span> 172.24.0.2 - - <span style="color:#ce5c00;font-weight:bold">[</span>21/Aug/2022:18:13:45 +0000<span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#4e9a06">&#34;POST /write?db=senseops&amp;p=&amp;precision=n&amp;rp=&amp;u= HTTP/1.1 &#34;</span> <span style="color:#0000cf;font-weight:bold">204</span> <span style="color:#0000cf;font-weight:bold">0</span> <span style="color:#4e9a06">&#34;-&#34;</span> <span style="color:#4e9a06">&#34;-&#34;</span> feaf181f-217c-11ed-8004-0242ac180003 <span style="color:#0000cf;font-weight:bold">44267</span>
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:45.137Z verbose: MEMORY USAGE INFLUXDB: Sent Butler SOS memory usage data to InfluxDB
</span></span><span style="display:flex;"><span>butler-sos    <span style="color:#000;font-weight:bold">|</span> 2022-08-21T18:13:45.198Z verbose: UPTIME NEW RELIC: Sent Butler SOS memory usage data to New Relic account <span style="color:#0000cf;font-weight:bold">123456789</span> <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Ptarmigan Labs NR account&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>From a separate shell we can then ensure that the expected Docker containers are running:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜  ~ docker ps
</span></span><span style="display:flex;"><span>CONTAINER ID   IMAGE                             COMMAND                  CREATED              STATUS                        PORTS                                            NAMES
</span></span><span style="display:flex;"><span>2311d17d1285   ptarmiganlabs/butler-sos:latest   <span style="color:#4e9a06">&#34;docker-entrypoint.s…&#34;</span>   About a minute ago   Up About a minute <span style="color:#ce5c00;font-weight:bold">(</span>healthy<span style="color:#ce5c00;font-weight:bold">)</span>                                                    butler-sos
</span></span><span style="display:flex;"><span>a22307d12263   influxdb:1.8.10                   <span style="color:#4e9a06">&#34;/entrypoint.sh infl…&#34;</span>   About a minute ago   Up About a minute             0.0.0.0:8082-&gt;8082/tcp, 0.0.0.0:8086-&gt;8086/tcp   influxdb
</span></span><span style="display:flex;"><span>81df665545d0   grafana/grafana:latest            <span style="color:#4e9a06">&#34;/run.sh&#34;</span>                About a minute ago   Up About a minute             0.0.0.0:3000-&gt;3000/tcp                           grafana
</span></span><span style="display:flex;"><span>➜  ~
</span></span></code></pre></div><p>That&rsquo;s great, we now have a single command (<code>docker-compose -f docker-compose_fullstack_influxdb.yml up -d</code> for background/daemon mode) to bring up all the tools needed to monitor a Qlik Sense cluster!</p>
<p>Now, let&rsquo;s see if any data has arrived in InfluxDB.<br>
Let&rsquo;s check this by going into Grafana, which is available on port 3000.</p>
<p>First time logging into a new Grafana instance you can use the default admin account (username=admin, password=admin).<br>
You will be asked to change that password during first login.</p>
<p>First add a data source in Grafana, pointing it to the local InfluxDB server.</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 810px">
<img class="card-img-top" src="/docs/getting_started/install/influxdb_grafana/grafana-influxdb-datasource-1_hu_853634b1ec668f8f.png" width="800" height="918">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Adding an InfluxDB data source in Grafana

</p>
</figcaption>
</figure>

<p>Now we can create a basic chart in Grafana, showing for example Butler SOS&rsquo; own memory usage.<br>
After a while we should see some data in the chart:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1034px">
<img class="card-img-top" src="/docs/getting_started/install/influxdb_grafana/grafana-chart-1_hu_aa7f8d873ecff50c.png" width="1024" height="587">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Butler SOS' own memory usage, stored in InfluxDB and visualized in Grafana

</p>
</figcaption>
</figure>

<p>Need to stop the entire stack of tools?<br>
Easy - just run <code>docker-compose -f docker-compose_fullstack_influxdb.yml down</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜  butler-sos-docker docker-compose -f docker-compose_fullstack_influxdb.yml down
</span></span><span style="display:flex;"><span>Stopping butler-sos ... <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>Stopping influxdb   ... <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>Stopping grafana    ... <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>Removing butler-sos ... <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>Removing influxdb   ... <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>Removing grafana    ... <span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span>Removing network butler-sos-docker_senseops
</span></span><span style="display:flex;"><span>➜  butler-sos-docker
</span></span><span style="display:flex;"><span>➜
</span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-042f8545221354c3ca85f9b5466fea8f">2.2.5 - Prometheus &amp; Grafana</h1>
    <div class="lead">How to use Butler SOS with Prometheus and Grafana using Docker.</div>
	<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice warning" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#warning-notice"></use></svg></span>Warning</p><h2 id="work-in-progress">Work in progress</h2>
<p>While Butler SOS&rsquo; Prometheus support is functional and works well, this documentation page is not yet complete.</p></div>

<div class="notice info" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#info-notice"></use></svg></span>Info</p><p>Prometheus is extremely powerful and flexible.<br>
In fact, it&rsquo;s probably the closest thing there is to a de facto standard for monitoring large scale software systems today.<br>
No matter if you run Kubernetes cluster spanning multiple data centers and continents, or just a single Butler SOS instance - Prometheus is an excellent choice for monitoring of operational metrics.</p>
<p>That power and flexibility also means it can be challenging to set up Prometheus.<br>
Usually it&rsquo;s not that difficult, but if you&rsquo;re new to Docker and has no previous experience with monitoring tools, <a href="/docs/getting_started/install/influxdb_grafana/">using InfluxDB</a> is usually a bit easier.</p>
<p>Or view it as a chance to learn more about one of the absolute stars of open source software - Prometheus is awesome!</p></div>

<p>This page assumes you <strong>don&rsquo;t</strong> already have Prometheus and Grafana running.<br>
If you already have access to those tools you can of course instead configure them to work with Butler SOS.</p>
<h2 id="running-in-docker-using-docker-compose">Running in Docker using docker-compose</h2>
<p>The easiest way to get started is to run these tools in Docker containers, controlled by docker-compose files.<br>
Running them under Kubernetes will give you a whole other level of fault tolerance, scalability etc - but this also requires much more when it comes to Kubernetes skills.
Use the setup that&rsquo;s relevant to your use case.</p>
<p>You can use a single docker-compose file for Butler SOS, Prometheus and Grafana - or separate docker-compose files for each tool.</p>
<p>The advantage of using a single docker-compose file is that the entire stack of tools will be launched in unison. You can create dependencies between the tools if needed etc - very convenient.
On the other hand, having separate docker-compose files makes it easier to restart (or upgrade or in other ways change) a single service without affecting other services.</p>
<h3 id="full-stack-docker-compose-file">Full stack docker-compose file</h3>
<p>Let&rsquo;s start Butler SOS, Prometheus and Grafana from a single <code>docker-compose_fullstack_prometheus.yml</code> file:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># docker-compose_fullstack_prometheus.yml</span>
</span></span><span style="display:flex;"><span>version: <span style="color:#4e9a06">&#34;3.3&#34;</span>
</span></span><span style="display:flex;"><span>services:
</span></span><span style="display:flex;"><span>    butler-sos:
</span></span><span style="display:flex;"><span>        image: ptarmiganlabs/butler-sos:latest
</span></span><span style="display:flex;"><span>        container_name: butler-sos
</span></span><span style="display:flex;"><span>        restart: always
</span></span><span style="display:flex;"><span>        volumes:
</span></span><span style="display:flex;"><span>            <span style="color:#8f5902;font-style:italic"># Make config file and log files accessible outside of container</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;./config:/nodeapp/config&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;./log:/nodeapp/log&#34;</span>
</span></span><span style="display:flex;"><span>        environment:
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;NODE_ENV=production_prometheus&#34;</span> <span style="color:#8f5902;font-style:italic"># Means that Butler SOS will read config data from production_prometheus.yaml</span>
</span></span><span style="display:flex;"><span>        logging:
</span></span><span style="display:flex;"><span>            driver: <span style="color:#4e9a06">&#34;json-file&#34;</span>
</span></span><span style="display:flex;"><span>            options:
</span></span><span style="display:flex;"><span>                max-file: <span style="color:#4e9a06">&#34;5&#34;</span>
</span></span><span style="display:flex;"><span>                max-size: <span style="color:#4e9a06">&#34;5m&#34;</span>
</span></span><span style="display:flex;"><span>        networks:
</span></span><span style="display:flex;"><span>            - senseops
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    prometheus:
</span></span><span style="display:flex;"><span>        image: prom/prometheus:latest
</span></span><span style="display:flex;"><span>        container_name: prometheus
</span></span><span style="display:flex;"><span>        volumes:
</span></span><span style="display:flex;"><span>            - ./prometheus/:/etc/prometheus/
</span></span><span style="display:flex;"><span>            - prometheus_data:/prometheus
</span></span><span style="display:flex;"><span>        command:
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;--config.file=/etc/prometheus/prometheus.yml&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;--storage.tsdb.path=/prometheus&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;--web.console.libraries=/usr/share/prometheus/console_libraries&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;--web.console.templates=/usr/share/prometheus/consoles&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#8f5902;font-style:italic"># - &#34;--log.level=debug&#34;</span>
</span></span><span style="display:flex;"><span>        ports:
</span></span><span style="display:flex;"><span>            - 9090:9090
</span></span><span style="display:flex;"><span>        links:
</span></span><span style="display:flex;"><span>            - alertmanager:alertmanager
</span></span><span style="display:flex;"><span>        networks:
</span></span><span style="display:flex;"><span>            - senseops
</span></span><span style="display:flex;"><span>        restart: always
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    alertmanager:
</span></span><span style="display:flex;"><span>        image: prom/alertmanager
</span></span><span style="display:flex;"><span>        container_name: alertmanager
</span></span><span style="display:flex;"><span>        ports:
</span></span><span style="display:flex;"><span>            - 9093:9093
</span></span><span style="display:flex;"><span>        volumes:
</span></span><span style="display:flex;"><span>            - ./alertmanager/:/etc/alertmanager/
</span></span><span style="display:flex;"><span>        networks:
</span></span><span style="display:flex;"><span>            - senseops
</span></span><span style="display:flex;"><span>        restart: always
</span></span><span style="display:flex;"><span>        command:
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;--config.file=/etc/alertmanager/config.yml&#34;</span>
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;--storage.path=/alertmanager&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    grafana:
</span></span><span style="display:flex;"><span>        image: grafana/grafana:latest
</span></span><span style="display:flex;"><span>        container_name: grafana
</span></span><span style="display:flex;"><span>        restart: always
</span></span><span style="display:flex;"><span>        ports:
</span></span><span style="display:flex;"><span>            - <span style="color:#4e9a06">&#34;3000:3000&#34;</span>
</span></span><span style="display:flex;"><span>        volumes:
</span></span><span style="display:flex;"><span>            - ./grafana/data:/var/lib/grafana
</span></span><span style="display:flex;"><span>        networks:
</span></span><span style="display:flex;"><span>            - senseops
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>networks:
</span></span><span style="display:flex;"><span>    senseops:
</span></span><span style="display:flex;"><span>        driver: bridge
</span></span></code></pre></div><p>Assuming you&rsquo;ve already completed the <a href="/docs/getting_started/setup/">setup of Butler SOS</a>, the result of running the <code>docker-compose_fullstack_prometheus.yml</code> file above is something like this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>From a separate shell we can then ensure that the expected Docker containers are running:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜ docker ps
</span></span><span style="display:flex;"><span>CONTAINER ID   IMAGE                             COMMAND                  CREATED         STATUS                            PORTS                                                                                  NAMES
</span></span><span style="display:flex;"><span>➜
</span></span></code></pre></div><p>That&rsquo;s great, you now have a single command (<code>docker-compose -f docker-compose_fullstack_influxdb.yml up -d</code> for background/daemon mode) to bring up all the tools needed to monitor a Qlik Sense cluster!</p>
<p>Need to stop the entire stack of tools?<br>
Easy - just run <code>docker-compose -f docker-compose_fullstack_influxdb.yml down</code>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>➜ docker-compose -f docker-compose_fullstack_influxdb.yml down
</span></span><span style="display:flex;"><span>➜
</span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-97bfddd5a5329c919f770112aa32f108">2.3 - Setup</h1>
    <div class="lead">Everything you wanted to know about Butler SOS configuration but never dared to ask.</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-0453b1fdbf444ece19d9953907886bed">2.3.1 - Which config file to use</h1>
    <div class="lead">Butler SOS can use multiple config files. Here you learn to control which one is used by Butler SOS.</div>
	<p>A description of the config file format is available <a href="/docs/reference/config_file_format/">here</a>.</p>
<h2 id="select-which-config-file-to-use">Select which config file to use</h2>
<p>Butler SOS uses configuration files in YAML format.</p>
<p>Butler SOS comes with a default config file called <code>production_template.yaml</code>.<br>
Make a copy of it, then rename the copy to <code>butler-sos-config-prod.yaml</code>, <code>production.yaml</code>, <code>staging.yaml</code> or something else suitable to your specific use case.</p>
<p>Update the config file as needed (see the <a href="/docs/reference/config_file_format/">config file reference page</a> for details).</p>
<p>Trying to run Butler SOS with the default config file (the one included in the files download from GitHub) will not work - you <em>must</em> adapt it to your server environment. For example, you need to enter the IP or host name of you Sense server(s), the IP or host name where Butler SOS is running, where the Sense certificates are stored etc.</p>
<p>The name of the config file matters. Unless you specifically name which config to use when starting Butler SOS, it will look for an environment variable called &ldquo;NODE_ENV&rdquo; and then try to load a config file named with the value found in NODE_ENV.</p>
<p>Example 1:</p>
<ul>
<li>Environment variable <code>NODE_ENV</code> = <code>production</code></li>
<li>Butler SOS is started without specifying a config file: <code>butler.exe --loglevel info</code></li>
<li>Butler SOS will look for a config file <code>config/production.yaml</code>.</li>
</ul>
<p>Example 2:</p>
<ul>
<li>Butler SOS is started with a command line option specifying a config file: <code>butler.exe --configfile d:\some\path\butler-sos-config-prod.yaml --loglevel info</code></li>
<li>Butler SOS will not look at the <code>NODE_ENV</code> environment variable. Settings will be loaded from the <code>butler-sos-config-prod.yaml</code> instead.</li>
</ul>
<h3 id="running-several-butler-sos-instances-in-parallel">Running several Butler SOS instances in parallel</h3>
<p>If you have several Sense clusters (for example DEV, TEST and PROD environments) you can either monitor them all from a single Butler SOS instance, or set up separate instances for each Sense cluster.<br>
The second case is implemented by creating several config files: <code>butler-sos-dev.yaml</code>, <code>butler-sos-test.yaml</code> and <code>butler-sos-prod.yaml</code>.</p>
<p>In this scenario three instances of Butler SOS should be started, each given a different config file by setting the NODE_ENV variable as needed when starting Butler SOS.<br>
Or (this option is usually much easier!) use the <code>--configfile</code> command line option when starting Butler SOS.</p>
<p>Note: If running several Butler SOS instances in parallel, you must also ensure that each one uses unique port numbers for their respective UDP servers etc.</p>
<h3 id="setting-environment-variables">Setting environment variables</h3>
<p>The method for setting environment variables varies between operating systems:</p>
<p>On Windows:</p>
<pre><code>set NODE_ENV=production
</code></pre>
<p>Mac OS or Linux</p>
<pre><code>export NODE_ENV=production
</code></pre>
<p>If using Docker, the NODE_ENV environment variable is set in the docker-compose.yml file (as already done in the <a href="https://github.com/ptarmiganlabs/butler-sos/tree/master/docs/docker-compose">template docker-compose files</a>.)</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-32e99a424e03dd5de2fb788192c39e44">2.3.2 - Config file verification</h1>
    <div class="lead">How to verify that the Butler SOS config file is valid.</div>
	<p>A description of the config file format is available <a href="/docs/reference/config_file_format/">here</a>.</p>
<p>Getting the config file correctly set up is usually the most challenging part of setting up Butler SOS.<br>
The config file is written in an easy to read YAML format, but given the number of settings that can be configured, it can be a bit daunting to get it right.</p>
<h2 id="verify-the-config-file">Verify the config file</h2>
<p>Config file verification is enabled by default.</p>
<p>Verification is done when Butler SOS is started, and if the config file is not valid, Butler SOS will not start.</p>
<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice info" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#info-notice"></use></svg></span>Info</p><p>All settings in the config file are mandatory.</p>
<p>If you don&rsquo;t want to use a specific Butler SOS feature, you must still include its settings in the config file, but you are free to disable the feature and set its setting to empty strings/values/arrays, or just leave the default values in place.</p></div>

<h2 id="skipping-config-file-verification">Skipping config file verification</h2>
<p>If you want to skip config file verification, you can do so by starting Butler SOS with the &lsquo;&ndash;skip-config-verification<code>setting to</code>true` in the config file.</p>
<p>This will bypass all checks of the config file&rsquo;s validity, and Butler SOS will try to start with the provided config file.<br>
This can be useful if you are in the process of setting up Butler SOS and want to start it before the config file is complete, but for production scenarios it is recommended to leave config file verification enabled.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-193ca7d2f0c66ee0da86af01e86e0060">2.3.3 - Visualise the config file</h1>
    <div class="lead"><p>Butler SOS can visualise its config file on a web page, using an internal web server.<br>
This can be useful for troubleshooting and understanding how Butler SOS is configured.</p>
<p>The configuration can optionally be obfuscated to hide sensitive information.</p>
</div>
	<h2 id="whats-this">What&rsquo;s this?</h2>
<p>Butler SOS can visualise its config file on a web page, using an internal web server.
This can be useful for troubleshooting and understanding how Butler SOS is configured.</p>
<p>If enabled, the web server will serve a web page on the IP address and port specified in the config file.<br>
The default IP address is <code>localhost</code> and the default port is <code>3100</code>.</p>
<p>By clicking the &ldquo;Download</p>
<h3 id="json-and-yaml">JSON and YAML</h3>
<p>The web page will show the config file in both JSON and YAML format.</p>
<p>The JSON format is useful if you want to copy the config file and paste it into a JSON validator, for example.<br>
The YAML format is easier to read and understand for humans, and is also the format used in the config file.</p>
<p>Examples:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/getting_started/setup/config-file-visualisation/butler-sos-config-vis-json-1_hu_df5a1523c06f692c.png" width="1200" height="683">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Butler SOS config file visualization - JSON view

</p>
</figcaption>
</figure>

<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/getting_started/setup/config-file-visualisation/butler-sos-config-vis-yaml-1_hu_b5e179c9a12661d2.png" width="1200" height="683">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Butler SOS config file visualization - YAML view

</p>
</figcaption>
</figure>

<h3 id="obfuscation">Obfuscation</h3>
<p>The configuration can optionally be obfuscated to hide sensitive information.<br>
This is useful if you need to share the config file with someone else, but don&rsquo;t want to share sensitive information like IP addresses, user names or passwords.<br>
Obfuscation is enabled/disabled in the config file.</p>
<p>For example, if asking for support on the <a href="https://github.com/ptarmiganlabs/butler-sos/discussions">Butler SOS forum</a>, you can share the obfuscated config file without revealing sensitive information.</p>
<p><em>Disclaimer: Obfuscation is not foolproof, but it should be good enough for most use cases.<br>
Always check the obfuscated config file before sharing it.</em></p>
<h2 id="settings-in-config-file">Settings in config file</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">Butler-SOS</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Should Butler SOS start a web server that serves an obfuscated view of the Butler SOS config file?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">configVisualisation</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">host</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">localhost      </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Hostname or IP address where the web server will listen. Should be localhost in most cases.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">3100</span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#8f5902;font-style:italic"># Port where the web server will listen. Change if port 3100 is already in use.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">obfuscate</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># Should the config file shown in the web UI be obfuscated?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-01bf8d5c5e8114ba3b6a75ca30faeeea">2.3.4 - Configuring Butler SOS logging</h1>
    <div class="lead">Butler SOS can log its activities to console and disk files.<br>
Log files can be useful for retrospective troubleshooting of Butler SOS.</div>
	<h2 id="whats-this">What&rsquo;s this?</h2>
<p>Butler SOS continuously logs what its doing.<br>
Logging is always done to console and optionally also to disk files.</p>
<p>The top level section <code>Butler-SOS</code> in the config file has a set of settings that control logging.</p>
<p>Log level (verbosity) can be set, logging to disk can be enabled/disabled and the directory where log files are stored can be set.<br>
Log level can also be set on the command line when starting Butler SOS, using the <code>--loglevel</code> option.</p>
<p>Log files are kept for 30 days, after which they are automatically deleted.</p>
<h2 id="settings-in-main-config-file">Settings in main config file</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">Butler-SOS</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Logging configuration</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">logLevel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">info         </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Log level. Possible log levels are silly, debug, verbose, info, warn, error</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">fileLogging</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#8f5902;font-style:italic"># true/false to enable/disable logging to disk file</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">logDirectory</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">log      </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Subdirectory where log files are stored</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-216c86f38030b70ed4e12f460193db39">2.3.5 - Configuring Butler SOS heartbeats</h1>
    <div class="lead">Heartbeats provide a way to monitor that Butler SOS is running and working as intended.<br>
Butler SOS can send periodic heartbeat messages to a monitoring tool, which can then alert if Butler SOS hasn&rsquo;t checked in as expected.</div>
	

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Optional</h4>

    <p>These settings are optional.</p>
<p>If you don&rsquo;t need this feature just disable it and leave the default values in the config as they are.</p>
<p>Do note though that Butler SOS expects the configuration properties below to exist in the config file, but will <em>ignore their values</em> if the related features are disabled.</p>


</div>

<h2 id="whats-this">What&rsquo;s this?</h2>
<p>A tool like Butler SOS should be viewed as mission critical, at least if it is used to monitor mission critical Sense apps.</p>
<p>But how can you know whether Butler SOS itself is working?<br>
Somehow Butler SOS should be monitored.</p>
<p>Butler SOS (and most other tools in the Butler family) has a <strong>heartbeat</strong> feature.<br>
It sends periodic messages to a monitoring tool, which can then alert if Butler SOS hasn&rsquo;t checked in as expected.</p>
<p><a href="https://healthchecks.io/">Healthchecks.io</a> is an example of such as tool. It&rsquo;s open source and can be self-hosted, but also has a SaaS option if so preferred.</p>
<p><a href="https://github.com/louislam/uptime-kuma">Uptime Kuma</a> is another great tool that can be used, it has a somewhat slicker UI than Healthchecks.io - but it&rsquo;s really a matter of personal preference which one to use.</p>
<p>More info on using Healthchecks.io with Butler (Butler SOS works the same way) can be found <a href="https://ptarmiganlabs.com/blog/2020/07/26/black-box-monitoring-of-butler-tools-monitoring-the-monitor/">in this blog post</a>.</p>
<h2 id="settings-in-main-config-file">Settings in main config file</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">Butler-SOS</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Heartbeats can be used to send &#34;I&#39;m alive&#34; messages to some other tool, e.g. an infrastructure monitoring tool</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># The concept is simple: The remoteURL will be called at the specified frequency. The receiving tool will then know</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># that Butler SOS is alive.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">heartbeat</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">remoteURL</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">http://my.monitoring.server/some/path/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">frequency</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">every 1 hour        </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># https://bunkat.github.io/later/parsers.html#text</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-b154384aeaa5f9f04fc69d8533662f15">2.3.6 - Docker healthcheck</h1>
    <div class="lead">Docker has a concept of &ldquo;health checks&rdquo;, which is a way for Docker containers to tell the Docker runtime engine that the container is alive and well.
Butler SOS can be configured to send such health check messages to Docker.</div>
	

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Optional</h4>

    <p>These settings are optional.</p>
<p>If you don&rsquo;t need this feature just disable it and leave the default values in the config as they are.</p>
<p>Do note though that Butler SOS expects the configuration properties below to exist in the config file, but will <em>ignore their values</em> if the related features are disabled.</p>


</div>

<p>Note: Sending health check messages is only meaningful when running Butler SOS as a Docker container.</p>
<h2 id="settings-in-main-config-file">Settings in main config file</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">Butler-SOS</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Docker health checks are used when running Butler SOS as a Docker container. </span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># The Docker engine will call the container&#39;s health check REST endpoint with a set interval to determine</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># whether the container is alive/well or not.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># If you are not running Butler SOS in Docker you can safely disable this feature. </span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">dockerHealthCheck</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># Control whether a REST endpoint will be set up to serve Docker health check messages</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">12398</span><span style="color:#f8f8f8;text-decoration:underline">                     </span><span style="color:#8f5902;font-style:italic"># Port the Docker health check service runs on (if enabled)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-6f9b5e45ca0f983b98e8870e01745c39">2.3.7 - Configuring Butler SOS uptime monitor</h1>
    <div class="lead">Butler SOS can optionally log how long it&rsquo;s been running and how much memory it uses.<br>
Optionally the memory usage can also be stored to an InfluxDB database or sent to New Relic, for later viewing/alerting in for example a Grafana dashboard or within New Relic.</div>
	

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Optional</h4>

    <p>These settings are optional.</p>
<p>If you don&rsquo;t need this feature just disable it and leave the default values in the config as they are.</p>
<p>Do note though that Butler SOS expects the configuration properties below to exist in the config file, but will <em>ignore their values</em> if the related features are disabled.</p>


</div>

<h2 id="whats-this">What&rsquo;s this?</h2>
<p>In some cases - especially when investigating issues or bugs - it can be useful to get log messages telling how long Butler SOS has been running and how much memory it uses.</p>
<p>This feature is called &ldquo;uptime monitoring&rdquo; and can be enabled in the main config file. The feature is being added to more and more tools in the <a href="https://github.com/ptarmiganlabs">Butler family</a> of tools for Qlik Sense.</p>
<p>The logging interval is configurable, as is the log level required for uptime messages to be shown in the console/file log.</p>
<p>Select a reasonable retention policy and logging frequency!<br>
You will rarely if ever need to know how much memory Butler SOS used a month ago&hellip; A retention policy of 1-2 weeks is usually a good start, logging uptime metrics every few minutes.</p>
<h3 id="influxdb">InfluxDB</h3>
<p>The memory usage data can optionally be written to InfluxDB, from where it can later be viewed in Grafana.<br>
The metrics will be stored in the database specified in the <code>Butler-SOS.influxdbConfig</code> section of the config file.</p>
<p>Note that <code>Butler-SOS.influxdbConfig.enable</code> must also be set to <code>true</code> for <em>any</em> data to be sent to InfluxDB.</p>
<h3 id="new-relic">New Relic</h3>
<p>Uptime metrics can be sent to zero or more New Relic accounts.</p>
<p>New Relic attributes (a concept where each data point sent to New Relic is tagged with a set of attributes) can be added to the metrics.<br>
Attributes come in two forms: Static and dynamic.</p>
<ul>
<li>Static attributes are hard-coded strings that don&rsquo;t change over time. Could be used to distinguish metrics from DEV, TEST and PROD Sense environments.</li>
<li>Dynamic attributes may change each time Butler SOS is started, or even more often in the future if/when more dynamic attributes are added.<br>
An example is the Butler SOS version, which will change when Butler SOS is upgraded to a new version.</li>
</ul>
<h3 id="log-level">Log level</h3>
<p>The log level does not affect storing uptime metrics in InfluxDB or New Relic.</p>
<h2 id="settings-in-main-config-file">Settings in main config file</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">Butler-SOS</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Uptime monitor</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">uptimeMonitor</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># Should uptime messages be written to the console and log files?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">frequency</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">every 15 minutes    </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># https://bunkat.github.io/later/parsers.html#text</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">logLevel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">verbose              </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Starting at what log level should uptime messages be shown in console log and log files?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">storeInInfluxdb</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> 
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">butlerSOSMemoryUsage</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># Should data on Butler SOS&#39; own memory use be stored in Infludb?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">instanceTag</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">PROD            </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Tag that can be used to differentiate data from multiple Butler SOS instances</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">storeNewRelic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">destinationAccount</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#000">First NR account</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#000">Second NR account</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">metric</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">dynamic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">butlerMemoryUsage</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#8f5902;font-style:italic"># Should Butler SOS&#39; memory/RAM usage be sent to New Relic?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">butlerUptime</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#8f5902;font-style:italic"># Should Butler SOS&#39; uptime (how long since it was started) be sent to New Relic?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">attribute</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> 
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">static</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                     </span><span style="color:#8f5902;font-style:italic"># Static attributes/dimensions to attach to the data sent to New Relic.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">metricType</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">butler-sos-uptime</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">qs_service</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">butler-sos</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">qs_environment</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">prod</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">dynamic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">butlerVersion</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> 
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#8f5902;font-style:italic"># Should the Butler SOS version be included in the data sent to New Relic?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-9577e6f018c666ef9013ada6969c473d">2.3.8 - Credentials to third party services</h1>
    
	

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Optional</h4>

    <p>These settings are optional.</p>
<p>If you do not use any third party services with Butler SOS you can leave the default values in this section.</p>


</div>

<h2 id="whats-this">What&rsquo;s this?</h2>
<p>Butler SOS can interact with certain third party services, such as New Relic.<br>
These services typically require some kind of authentication with associated credentials (username, password etc).<br>
Those credentials are stored in the <code>Butler-SOS.thirdPartyToolsCredentials</code> section of the config file.</p>
<h2 id="new-relic">New Relic</h2>
<p>Zero, one or more New Relic accounts with their respective credentials can be specified.<br>
These accounts can then be used by Butler SOS&rsquo; various features.</p>
<p>Note that different Butler SOS features can send their data to different New Relic accounts.<br>
This is specified in each feature&rsquo;s section in the YAML config file.</p>
<p>Example:</p>
<ul>
<li>Sense user events are sent to <code>First NR account</code></li>
<li>Sense log events are sent to <code>Second NR account</code></li>
<li>Sense RAM usage is sent to both <code>First NR account</code> and <code>Second NR account</code></li>
</ul>
<p>Note that the <code>accountName</code> setting is only used within Butler SOS to reference the different New Relic accounts.<br>
Specifically, it is <em>not</em> used by or within New Relic itself.</p>
<h2 id="settings-in-main-config-file">Settings in main config file</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#000">---</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">Butler-SOS</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Credentials for third party systems that Butler SOS integrate with.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># These can also be specified via command line parameters when starting Butler SOS.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Command line options takes precedence over settings in this config file.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">thirdPartyToolsCredentials</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">newRelic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># Array of New Relic accounts/insert keys.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:bold">accountName</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">First NR account</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">insertApiKey</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;API key 1 (with insert permissions) from New Relic&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">accountId</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;New Relic account ID 1&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:bold">accountName</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Second NR account</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">insertApiKey</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;API key 2 (with insert permissions) from New Relic&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">accountId</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;New Relic account ID 2&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-c025fedd1c5b151401fa36e6192c0ad6">2.3.9 - General Sense event settings</h1>
    <div class="lead"><p>Butler SOS can act as a receiver of Qlik Sense events, sent as UDP messages from Qlik Sense Enterprise.<br>
This section of the config file contains general settings for how Butler SOS should handle these events.</p>
<p>More specific settings for each event type (user, log, &hellip;) can be found in the respective sections of the config file.</p>
</div>
	<h2 id="whats-this">What&rsquo;s this?</h2>
<p>Butler SOS can receive events from Qlik Sense Enterprise, sent as UDP messages.<br>
Two kinds of events are supported: User events and log events.</p>
<ul>
<li>User events are events that are generated when a user interacts with Qlik Sense, for example logging into Sense or opening an app.</li>
<li>Log events originate from the Sense logging framework itself, which is also responsible for logging things to Qlik Sense&rsquo;s own log files.</li>
</ul>
<p>Some aspects of these events are general in nature, i.e. shared between the different event types, and are configured in this section of the config file.</p>
<h2 id="counters-for-user-and-log-events">Counters for user and log events</h2>
<p>If log and/or user events are enabled there is a risk that the number of events generated by a QSEoW cluster can be overwhelming.<br>
To make it easier to understand the volume of events generated, Butler SOS can be configured to count the number of events generated by the Sense cluster.</p>
<p>The counters are stored in InfluxDB and can be used to create dashboards in Grafana.</p>
<p>Each InfluxDB datapoint has tags and fields as described in the <a href="/docs/reference/available_metrics/influxdb/#event-counters">reference section</a>.</p>
<h2 id="rejected-events">Rejected events</h2>
<p>Butler SOS can be configured to reject certain events even though the event is correctly formatted and contains valid data.<br>
The need to do this can arise if the Sense cluster generates a large number of events, and not all of them are relevant for the current monitoring use case.</p>
<p>For example, performance log events (event name <code>qseow-qix-perf</code>) will be emitted by Sense every 2 seconds during scheduled reloads.
There is rarely a need to store all these events in InfluxDB, so they can be filtered out (=rejected) by Butler SOS.<br>
But they can also be seen as valid and stored in InfluxDB, depending on the use case.</p>
<p>Rejected events are counted and the counters stored in InfluxDB.<br>
They can be used to understand how many events are rejected by Butler SOS, versus how many are received in total (see the section above).</p>
<p>The InfluxDB measurement name is defined in the config file, <code>Butler-SOS.qlikSenseEvents.rejectedEventCount.influxdb.measurementName</code>.</p>
<p>Each event type and name may have its own rejection settings, defined in the respective sections of the config file.<br>
They may also store different tags and fields in InfluxDB.</p>
<p>The currently defined rejection settings are:</p>
<h2 id="performance-log-events">Performance log events</h2>
<p>These events come from the Qlik associative engine (the &ldquo;QIX engine&rdquo;) an contain very detailed performance data about apps, app objects, charts, user selections in apps etc.</p>
<p>Counters for rejected performance log events are enabled via the <code>Butler-SOS.logEvents.enginePerformanceMonitor.trackRejectedEvents.enable</code> setting in the config file.</p>
<p>Once this data is in InfluxDB it can be used in Grafana dashboards, for example showing how long each app takes to open:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 810px">
<img class="card-img-top" src="/docs/getting_started/setup/qlik-sense-events/butler-sos-app-open-time-1_hu_362cc475984b8622.png" width="800" height="472">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Average time to open Sense apps

</p>
</figcaption>
</figure>

<p>The data stored in InfluxDB for performance log events is described <a href="http://localhost:1313/docs/reference/available_metrics/influxdb/#source-engine-service-performance-related-events">here</a>.</p>
<h2 id="settings-in-main-config-file">Settings in main config file</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#000">---</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">Butler-SOS</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Shared settings for user and log events (see below)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">qlikSenseEvents</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># Shared settings for user and log events (see below)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">influxdb</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># Should summary (counter) of user/log events, and rejected events be stored in InfluxDB?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">writeFrequency</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">20000</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># How often (milliseconds) should rejected event count be written to InfluxDB?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">eventCount</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                     </span><span style="color:#8f5902;font-style:italic"># Track how many events are received from Sense.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                    </span><span style="color:#8f5902;font-style:italic"># Some events are valid, some are not. Of the valid events, some are rejected by Butler SOS</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                    </span><span style="color:#8f5902;font-style:italic"># based on the configuration in this file.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># Should event count be stored in InfluxDB?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">influxdb</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">measurementName</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">event_count</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Name of the InfluxDB measurement where event count is stored</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">tags</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                       </span><span style="color:#8f5902;font-style:italic"># Tags are added to the data before it&#39;s stored in InfluxDB</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">env</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">DEV</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">foo</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">bar</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">rejectedEventCount</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#8f5902;font-style:italic"># Rejected events are events that are received from Sense, that are correctly formatted,</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                    </span><span style="color:#8f5902;font-style:italic"># but that are rejected by Butler SOS based on the configuration in this file.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                    </span><span style="color:#8f5902;font-style:italic"># An example of a rejected event is a performance log event that is filtered out by Butler SOS.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># Should rejected events be counted and stored in InfluxDB?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">influxdb</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">measurementName</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">rejected_event_count</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Name of the InfluxDB measurement where rejected event count is stored</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="log-appender-xml-files">Log appender XML files</h2>
<p>Sample log appender files are available in the ZIP file available from the <a href="https://github.com/ptarmiganlabs/butler-sos/releases">download page</a>, in subfolders engine/proxy/repository/scheduler of <code>config/log_appender_xml/</code> folder.</p>
<p>Note that the log appender files contain slightly different information for each Sense service (engine/proxy/repository/scheduler)!<br>
Also keep in mind that the log appender files <strong>must</strong> be called <code>LocalLogConfig.xml</code> and placed in these directories on the all Sense servers (assuming the default installation path of Qlik Sense):</p>
<ul>
<li><code>C:\ProgramData\Qlik\Sense\Engine</code></li>
<li><code>C:\ProgramData\Qlik\Sense\Proxy</code></li>
<li><code>C:\ProgramData\Qlik\Sense\Repository</code></li>
<li><code>C:\ProgramData\Qlik\Sense\Scheduler</code></li>
</ul>
<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>If you have more than one Sense server you strictly speaking don&rsquo;t <em>have</em> to deploy log appenders to all servers.</p>
<p>If you are only interested in receiving log events from some servers and/or services (engine, proxy, repository, scheduler) - deploy the log appender files there.</p></div>


</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-f2b04c06fd6b90a401415dcf62731a5d">2.3.9.1 - Configuring user events</h1>
    
	

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Optional</h4>

    <p>These settings are optional.</p>
<p>If you don&rsquo;t do anything user activity events are turned off by default.</p>


</div>

<h2 id="whats-this">What&rsquo;s this?</h2>
<p>User events are among the most detailed bits of information retrieved from Sense by Butler SOS.<br>
They capture session start/stop events (=users logging in/out) and connection open/close events (apps opened/closed in browser tabs).</p>
<p>These events rely on two things to be correctly configured:</p>
<ol>
<li>Settings in Butler SOS&rsquo; config file.</li>
<li>Log appender XML file(s) being deployed on the Sense server(s) where user activity events should be captured.</li>
</ol>
<p>Both are described below.</p>
<h2 id="tech-deep-dive">Tech deep-dive</h2>
<p>The user events are created by hooking into Sense&rsquo;s logging framework, which is called Log4Net.</p>
<p>By placing a carefully crafted XML file in the Qlik Sense proxy service&rsquo;s configuration directory, we can instruct Log4Net to forward certain Sense log events that we are interested in to Butler SOS.<br>
In this case we are interested in session start/stop and connection open/close events.</p>
<p>The XML file is also known as a &ldquo;log appender file&rdquo;.<br>
It contains instructions that tell Log4Net to do various things when the specified filter matches the actual log data created by Sense. Examples include sending emails, writing log entries to disk (i.e. regular file logging!), sending the log row as a UDP message and more.<br>
Here we&rsquo;re interested in the UDP message feature.</p>
<blockquote>
<p>So, by means of a log appender file we tell Log4Net to send certain log rows to Butler SOS as UDP messages.</p></blockquote>
<p>We also have to specify in the log appender file what host/IP address and port Butler SOS listens to, i.e. where the UDP messages should be sent.<br>
Finally we have to make sure firewalls are open and allow UDP traffic from the Sense server(s) to Butler SOS.</p>
<p>If everything is set up correctly UDP messages will arrive at Butler SOS within seconds after the actual event taking place in Qlik Sense, i.e. close to real-time.</p>
<h2 id="tagging-of-data">Tagging of data</h2>
<h3 id="influxdb">InfluxDB</h3>
<p>The tags added to InfluxDB are described in the reference documentation for <a href="/docs/reference/available_metrics/influxdb/#user-events">log events</a>.</p>
<h3 id="new-relic">New Relic</h3>
<p>The following attributes (which is New Relic lingo for tags) are added:</p>
<ol>
<li>A core set of attributes are added to all user events
<ol>
<li><code>qs_host</code>: Host name of the Sense server the event originated at.</li>
<li><code>qs_event_action</code>: What kind of user event that took place. Examples are &ldquo;Start session&rdquo;, &ldquo;Stop session, &ldquo;Open connection&rdquo;, &ldquo;Close connection&rdquo;.</li>
<li><code>qs_userFull</code>: Full directory/user ID of the user the event is about. Will be scrambled if scrambling enabled in config file.</li>
<li><code>qs_userDirectory</code>: User directory of the user the event is about. Will be scrambled if scrambling enabled in config file.</li>
<li><code>qs_userId</code>: User ID of the user the event is about. Will be scrambled if scrambling enabled in config file.</li>
<li><code>qs_origin</code>: What kind of activity caused the event, for example &ldquo;AppAccess&rdquo;. May be empty for some user events.</li>
<li><code>qs_appId</code>: App ID of the app the event is about. May be empty for some user events.</li>
<li><code>qs_appName</code>: App name of the app the event is about. May be empty for some user events.</li>
<li><code>qs_uaBrowserName</code>: Browser name of the user agent that caused the event.</li>
<li><code>qs_uaBrowserMajorVersion</code>: Browser major version of the user agent that caused the event.</li>
<li><code>qs_uaOsName</code>: OS name of the user agent that caused the event.</li>
<li><code>qs_uaOsVersion</code>: OS version of the user agent that caused the event.</li>
</ol>
</li>
<li>Custom attributes defined in the Butler SOS config file&rsquo;s <code>Butler-SOS.userEvents.tags</code> section of the config file.</li>
</ol>
<p>Note: Attributes defined further down in the list above will overwrite already defined attributes if their names match.<br>
To avoid problems you should make sure not to use already defined attributes.</p>
<h2 id="settings-in-config-file">Settings in config file</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#000">---</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">Butler-SOS</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Track individual users opening/closing apps and starting/stopping sessions. </span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Requires log appender XML file(s) to be added to Sense server(s).</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">userEvents</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                       
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">excludeUser</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># Optional blacklist of users that should be disregarded when it comes to user events</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:bold">directory</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">LAB</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">userId</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">testuser1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:bold">directory</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">LAB</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">userId</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">testuser2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">udpServerConfig</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">serverHost</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;IP or FQDN&gt;     </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Host/IP where user event server will listen for events from Sense</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">portUserActivityEvents</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">9997</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Port on which user event server will listen for events from Sense</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">tags</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                           </span><span style="color:#8f5902;font-style:italic"># Tags are added to the data before it&#39;s stored in InfluxDB</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:bold">tag</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">env</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">DEV</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:bold">tag</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">foo</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">bar</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">sendToMQTT</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> 
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># Set to true if user events should be forwarded as MQTT messages</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">postTo</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                       </span><span style="color:#8f5902;font-style:italic"># Control when and to which MQTT topics messages are sent </span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">everythingTopic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#8f5902;font-style:italic"># Topic to which all user events are sent</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">topic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">qliksense/userevent</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">sessionStartTopic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic"># Topic to which &#34;session start&#34; events are sent</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">topic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">qliksense/userevent/session/start</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">sessionStopTopic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#8f5902;font-style:italic"># Topic to which &#34;session stop&#34; events are sent</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">topic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">qliksense/userevent/session/stop</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">connectionOpenTopic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># Topic to which &#34;connection open&#34; events are sent</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">topic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">qliksense/userevent/connection/open</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">connectionCloseTopic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#8f5902;font-style:italic"># Topic to which &#34;connection close&#34; events are sent</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">topic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">qliksense/userevent/connection/close</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">sendToInfluxdb</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># Set to true if user events should be stored in InfluxDB</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">sendToNewRelic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># Should log events be sent to New Relic?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">destinationAccount</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#000">First NR account</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#000">Second NR account</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">scramble</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># Should user info (user directory and user ID) be scrambled before sent to NR?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="log-appender-xml-files">Log appender XML files</h2>
<p>A sample log appender file <code>LocalLogConfig.xml</code> is available in the ZIP file available from the <a href="https://github.com/ptarmiganlabs/butler-sos/releases">download page</a>, in the  <code>config/log_appender_xml/proxy/LocalLogConfig.xml</code> folder.</p>
<p>That file includes log appenders for both user and log events.<br>
Looks like this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">&lt;!-- Log appender finding user session events --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;appender</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;EventSession&#34;</span> <span style="color:#c4a000">type=</span><span style="color:#4e9a06">&#34;log4net.Appender.UdpAppender&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;filter</span> <span style="color:#c4a000">type=</span><span style="color:#4e9a06">&#34;log4net.Filter.StringMatchFilter&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;stringToMatch&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;Start session for user&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/filter&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;filter</span> <span style="color:#c4a000">type=</span><span style="color:#4e9a06">&#34;log4net.Filter.StringMatchFilter&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;stringToMatch&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;Stop session for user&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/filter&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;filter</span> <span style="color:#c4a000">type=</span><span style="color:#4e9a06">&#34;log4net.Filter.DenyAllFilter&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;remoteAddress&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;FQDN or IP of server where Butler SOS is running&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;remotePort&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;9997&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;encoding&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;utf-8&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;layout</span> <span style="color:#c4a000">type=</span><span style="color:#4e9a06">&#34;log4net.Layout.PatternLayout&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;converter&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;name&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;hostname&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;type&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;Qlik.Sense.Logging.log4net.Layout.Pattern.HostNamePatternConverter&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#204a87;font-weight:bold">&lt;/converter&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;conversionpattern&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;/qseow-proxy-session/;%hostname;%property{Command};%property{UserDirectory};%property{UserId};%property{Origin};%property{Context};%message&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/layout&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">&lt;!-- Log appender finding user connection events --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;appender</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;EventConnection&#34;</span> <span style="color:#c4a000">type=</span><span style="color:#4e9a06">&#34;log4net.Appender.UdpAppender&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;filter</span> <span style="color:#c4a000">type=</span><span style="color:#4e9a06">&#34;log4net.Filter.StringMatchFilter&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;stringToMatch&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;connection Opened for session&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/filter&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;filter</span> <span style="color:#c4a000">type=</span><span style="color:#4e9a06">&#34;log4net.Filter.StringMatchFilter&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;stringToMatch&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;connection Closed for session&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/filter&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;filter</span> <span style="color:#c4a000">type=</span><span style="color:#4e9a06">&#34;log4net.Filter.DenyAllFilter&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;remoteAddress&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;FQDN or IP of server where Butler SOS is running&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;remotePort&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;9997&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;encoding&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;utf-8&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;layout</span> <span style="color:#c4a000">type=</span><span style="color:#4e9a06">&#34;log4net.Layout.PatternLayout&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;converter&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;name&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;hostname&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;type&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;Qlik.Sense.Logging.log4net.Layout.Pattern.HostNamePatternConverter&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>             <span style="color:#204a87;font-weight:bold">&lt;/converter&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;conversionpattern&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;/qseow-proxy-connection/;%hostname;%property{Command};%property{UserDirectory};%property{UserId};%property{Origin};%property{Context};%message&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/layout&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">&lt;!-- Generic appender for detecting warnings and errors --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;appender</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;LogEvent&#34;</span> <span style="color:#c4a000">type=</span><span style="color:#4e9a06">&#34;log4net.Appender.UdpAppender&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;threshold&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;warn&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;remoteAddress&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;FQDN or IP of server where Butler SOS is running&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;remotePort&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;9996&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;encoding&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;utf-8&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;layout</span> <span style="color:#c4a000">type=</span><span style="color:#4e9a06">&#34;log4net.Layout.PatternLayout&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;converter&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;name&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;rownum&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;type&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;Qlik.Sense.Logging.log4net.Layout.Pattern.CounterPatternConverter&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;/converter&gt;</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;converter&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;name&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;hostname&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;type&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;Qlik.Sense.Logging.log4net.Layout.Pattern.HostNamePatternConverter&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;/converter&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;converter&gt;</span>
</span></span><span style="display:flex;"><span>                  <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;name&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;longIso8601date&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span> 
</span></span><span style="display:flex;"><span>                  <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;type&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;Qlik.Sense.Logging.log4net.Layout.Pattern.Iso8601TimeOffsetPatternConverter&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;/converter&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;converter&gt;</span> 
</span></span><span style="display:flex;"><span>                  <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;name&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;user&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span> 
</span></span><span style="display:flex;"><span>                  <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;type&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;Qlik.Sense.Logging.log4net.Layout.Pattern.ServiceUserNameCachedPatternConverter&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;/converter&gt;</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;converter&gt;</span> 
</span></span><span style="display:flex;"><span>                  <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;name&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;encodedmessage&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span> 
</span></span><span style="display:flex;"><span>                  <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;type&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;Qlik.Sense.Logging.log4net.Layout.Pattern.EncodedMessagePatternConverter&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;/converter&gt;</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;converter&gt;</span> 
</span></span><span style="display:flex;"><span>                  <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;name&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;encodedexception&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span> 
</span></span><span style="display:flex;"><span>                  <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;type&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;Qlik.Sense.Logging.log4net.Layout.Pattern.EncodedExceptionPatternConverter&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;/converter&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">&lt;param</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;conversionpattern&#34;</span> <span style="color:#c4a000">value=</span><span style="color:#4e9a06">&#34;/qseow-proxy/;%rownum{9999};%longIso8601date;%date;%level;%hostname;%logger;%user;%encodedmessage;%encodedexception;%property{UserDirectory};%property{UserId};%property{Command};%property{Result};%property{Origin};%property{Context}&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;/layout&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/appender&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">&lt;!-- Send UDP message to Butler SOS on user activity --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;logger</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;AuditActivity.Proxy&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;appender-ref</span> <span style="color:#c4a000">ref=</span><span style="color:#4e9a06">&#34;EventSession&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;appender-ref</span> <span style="color:#c4a000">ref=</span><span style="color:#4e9a06">&#34;EventConnection&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/logger&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#8f5902;font-style:italic">&lt;!-- Send UDP message to Butler SOS on warnings and errors --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;logger</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;Audit.Proxy&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;appender-ref</span> <span style="color:#c4a000">ref=</span><span style="color:#4e9a06">&#34;LogEvent&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/logger&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;logger</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;AuditSecurity&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;appender-ref</span> <span style="color:#c4a000">ref=</span><span style="color:#4e9a06">&#34;LogEvent&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/logger&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;logger</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;Security.Proxy&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;appender-ref</span> <span style="color:#c4a000">ref=</span><span style="color:#4e9a06">&#34;LogEvent&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/logger&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;logger</span> <span style="color:#c4a000">name=</span><span style="color:#4e9a06">&#34;System.Proxy&#34;</span><span style="color:#204a87;font-weight:bold">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#204a87;font-weight:bold">&lt;appender-ref</span> <span style="color:#c4a000">ref=</span><span style="color:#4e9a06">&#34;LogEvent&#34;</span> <span style="color:#204a87;font-weight:bold">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">&lt;/logger&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">&lt;/configuration&gt;</span>
</span></span></code></pre></div><style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>If you have several servers in your Sense cluster you probably need several log appender files too.</p>
<p>More specifically, you should put a log appender file on each server where the Qlik Sense proxy service is running, i.e. on all servers via which end users access the Sense cluster.</p></div>

<p>Note the places where you need to fill in the IP/host where Butler SOS is running, as well as the port number to use (set to 9997 but can be changed if needed).</p>
<p>Make necessary changes so the file matches your environment, then deploy to <code>C:\ProgramData\Qlik\Sense\Proxy\LocalLogConfig.xml</code> (adapt path if you have a different installation path).<br>
Note that the file <strong>must</strong> be called <code>LocalLogConfig.xml</code>!</p>
<p>Sense will usually detect and use the file without any restarts needed, but it can take a while. You can always restart the Sense proxy service to make sure the XML file is applied and used.</p>
<p>Once in place you should see events in the Butler SOS console/file logs if you set logging level to <code>verbose</code>, <code>debug</code> or <code>silly</code>.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-9c48405983052b1e8f25cb3a889aa233">2.3.9.2 - Configuring log events</h1>
    
	

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Optional</h4>

    <p>These settings are optional.</p>
<p>If you don&rsquo;t do anything log events are turned off by default.</p>


</div>

<h2 id="whats-this">What&rsquo;s this?</h2>
<p>Butler SOS log events are designed to be a replacement for the most important/useful aspects of Qlik Sense&rsquo; log database, which was removed from Qlik Sense Enterprise on Windows in mid 2021.</p>
<p>The log events capture warnings, errors and fatals from the various QSEoW subsystems.<br>
These events used to be sent to the PostgreSQL logging database, most (but not all) are also sent to QSEoW&rsquo;s log files.</p>
<p>Using Butler SOS&rsquo; log events is arguably even <em>better</em> than getting the same information from log db:<br>
Log db had to be polled to detect new log events and this polling could realistically only be done every few minutes. It also put additional load on an often already struggling part of many QSEoW clusters.</p>
<p>With Butler SOS&rsquo; log events concept the notifications are almost instantaneous.<br>
Errors and warnings show up in the Grafana or New Relic dashboards within seconds after taking place in QSEoW.</p>
<p>Log events rely on two things to work:</p>
<ol>
<li>Settings in the Butler SOS config file.</li>
<li>Log appender XML files being deployed on the Sense servers where log events should be captured.</li>
</ol>
<p>Both are described below.</p>
<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice info" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#info-notice"></use></svg></span>Info</p><p>As of Butler SOS version 9.2, log events are captured in these QSEoW services:</p>
<ul>
<li>Engine</li>
<li>Proxy</li>
<li>Repository</li>
<li>Scheduler</li>
</ul>
<p>Support for additional modules is reasonably easy to add, please <a href="https://github.com/ptarmiganlabs/butler-sos/issues/new?assignees=&amp;labels=&amp;template=feature_request.md&amp;title=">create a ticket</a> if you believe some service should be added to the list above.</p></div>

<h2 id="tech-deep-dive">Tech deep-dive</h2>
<p>The underlying mechanism is the same as described on the <a href="/docs/getting_started/setup/user-events/#tech-deep-dive">user events page</a>.</p>
<h2 id="tagging-of-data">Tagging of data</h2>
<h3 id="categorizing-log-events">Categorizing log events</h3>
<p>Log events can optionally be categorized by Butler SOS.<br>
The reason for categorizing log events is to make it easier to make Sense of the potentially large number of log events that can be generated by a QSEoW cluster.</p>
<p>For example, if a QSEoW cluster creates 1000 warnings and errors per hour, it&rsquo;s difficult to know which warnings are important and which are not.<br>
By categorizing the messages, for example by the subsystem that generated them and/or what they refer to, it&rsquo;s easier to understand what&rsquo;s going on.</p>
<p>Possible ways of categorizing log events could be &ldquo;access denied&rdquo; issues, &ldquo;user directory&rdquo; issues, &ldquo;app reload failed&rdquo; issues, &ldquo;general engine issues&rdquo; etc.</p>
<p>Log events can be categorized in any number of ways, but the template config file contains a few examples.<br>
Specifically:</p>
<ol>
<li>Access denied issues
<ol>
<li>Captures log events of severity WARN and ERROR.</li>
<li>Match log events against two filters.
<ol>
<li>Log message starts with &ldquo;Access was denied for User:&rdquo;.</li>
<li>Log message contains &ldquo;was denied for User</li>
</ol>
</li>
<li>categorizes them by setting category tag <code>qs_log_category</code> to <code>access-denied</code>.</li>
</ol>
</li>
<li>AD issues
<ol>
<li>Captures log events of severity WARN and ERROR.</li>
<li>Match log events against one filter.
<ol>
<li>Log message starts with &ldquo;Duplicate entity with userId&rdquo;.</li>
</ol>
</li>
<li>categorizes them by setting category tag <code>qs_log_category</code> to <code>user-directory</code>.</li>
</ol>
</li>
<li>Qlik Sense service down
<ol>
<li>Captures log events of severity WARN.</li>
<li>Match log events against two filters.
<ol>
<li>Log message starts with &ldquo;Failed to request service alive response from&rdquo;.</li>
<li>Log message contains &ldquo;Unable to connect to the remote server&rdquo;.</li>
</ol>
</li>
<li>categorizes them by setting category tag <code>qs_log_category</code> to <code>qs-service</code>.</li>
</ol>
</li>
<li>Reload task failed
<ol>
<li>Captures log events of severity WARN and ERROR.</li>
<li>Match log events against four filters.
<ol>
<li>Log message starts with &ldquo;Task finished with state FinishedFail&rdquo;.</li>
<li>Log message starts with &ldquo;Task finished with state Error&rdquo;.</li>
<li>Log message ends with &ldquo;Reload failed in Engine. Check engine or script logs.&rdquo;.</li>
<li>Log message starts with &ldquo;Reload sequence was not successful (Result=False, Finished=True, Aborted=False) for engine connection with handle&rdquo;.</li>
</ol>
</li>
<li>categorizes them by setting category tag <code>qs_log_category</code> to <code>reload-failed</code>.</li>
</ol>
</li>
<li>If no rules match the log event, it will be categorized as <code>unknown</code>.
<ol>
<li>The default rule can be enabled/disabled in the config file via the <code>ruleDefault.enable</code> parameter.</li>
</ol>
</li>
</ol>
<p>Note 1: It is possible to assign <em>one or more</em> categories to a log event.
This provides flexibility in how you later create dashboards in for example Grafana or New Relic.</p>
<p>Note 2: The sample/template config file may be updated with more examples in the future.</p>
<div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>It is also possible to drop log events that match a certain pattern, for example if you are never interested in seeing them in Grafana or New Relic.<br>
This is done by setting the <code>action</code> parameter to <code>drop</code> in the config file, for that particular rule.</p></div>

<h3 id="influxdb">InfluxDB</h3>
<p>The tags added to InfluxDB are described in the reference documentation for <a href="/docs/reference/available_metrics/influxdb/#log-events">log events</a>.</p>
<p>Log categories are added as tags to InfluxDB datapoints.</p>
<h3 id="new-relic">New Relic</h3>
<p>The following attributes (which is New Relic lingo for tags) are added:</p>
<ol>
<li>A core set of attributes are added to all user events. Note that some attributes will be empty for some/many log events.
<ol>
<li><code>qs_ts_iso</code>: Event timestamp in ISO format.</li>
<li><code>qs_ts_local</code>: Event timestamp in local (server) time zone.</li>
<li><code>qs_log_source</code>: Which Sense service the event originated in, for example &ldquo;qseow-proxy&rdquo;, &ldquo;qseow-repository&rdquo;.</li>
<li><code>qs_log_level</code>: Log level of the event. &ldquo;WARN&rdquo;, &ldquo;ERROR&rdquo;, or &ldquo;FATAL&rdquo;.</li>
<li><code>qs_host</code>: Host name of the Sense server the event originated at.</li>
<li><code>qs_subsystem</code>: Which part of each Sense service the event originated in, for example &ldquo;System.Proxy.Proxy.Core.RequestListener&rdquo;, &ldquo;System.Engine.Engine&rdquo;.</li>
<li><code>qs_windows_user</code>: Name of the Windows user that&rsquo;s used to run the Window service where the event originated.</li>
<li><code>qs_message</code>: Event message.</li>
<li><code>qs_exception_message</code>: Additional information about the event.</li>
<li><code>qs_user_full</code>: Full directory/user ID of the user the event is about. Will be scrambled if scrambling enabled in config file.</li>
<li><code>qs_user_directory</code>: User directory of the user the event is about. Will be scrambled if scrambling enabled in config file.</li>
<li><code>qs_user_id</code>: User ID of the user the event is about. Will be scrambled if scrambling enabled in config file.</li>
<li><code>qs_command</code>: What command (if any) caused the event. Example: &ldquo;Doc::DoSave&rdquo;, &ldquo;Doc::CreateObject&rdquo;.</li>
<li><code>qs_result_code</code>: Result code as reported by Sense. Usually empty.</li>
<li><code>qs_origin</code>: What kind of activity caused the event, for example &ldquo;AppAccess&rdquo;.</li>
<li><code>qs_context</code>: Additional information about the event.</li>
<li><code>qs_task_name</code>: Task name (if any) causing the event.</li>
<li><code>qs_app_name</code>: App name (if any) causing the event.</li>
<li><code>qs_task_id</code>: Task ID (if any) causing the event.</li>
<li><code>qs_app_id</code>: App ID (if any) causing the event.</li>
<li><code>qs_execution_id</code>: Execution ID as reported by Sense.</li>
<li><code>qs_proxy_session_id</code>: Proxy session ID as reported by Sense.</li>
<li><code>qs_engine_ts</code>: Engine timestamp (if any) associated with the event.</li>
<li><code>qs_process_id</code>: Process ID of engine service.</li>
<li><code>qs_engine_exe_version</code>: Version of engine service&rsquo;s EXE file.</li>
<li><code>qs_server_started</code>: Timestamp when Sense engine service was started.</li>
<li><code>qs_entry_type</code>: Entry type as reported by Sense. Usually empty.</li>
<li><code>qs_session_id</code>: Session ID as reported by Sense.</li>
</ol>
</li>
<li>Custom attributes defined in the Butler SOS config file&rsquo;s <code>Butler-SOS.logEvents.tags</code> section.</li>
<li>Custom attributes defined in the Butler SOS config file&rsquo;s <code>Butler-SOS.newRelic.event.attribute.static</code> section.</li>
<li>Dynamic attributes
<ol>
<li><code>butlerSosVersion</code>: Butler SOS version. Enabled by setting <code>Butler-SOS.newRelic.event.attribute.dynamic.butlerSosVersion.enable</code> to true in config file.</li>
</ol>
</li>
</ol>
<p>Note: Attributes defined further down in the list above will overwrite already defined attributes if their names match.<br>
To avoid problems you should make sure not to use already defined attributes.</p>
<p>Log categories are currently NOT included in the data sent to New Relic.</p>
<h2 id="settings-in-main-config-file">Settings in main config file</h2>
<div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>The config snippet below comes from the <a href="https://github.com/ptarmiganlabs/butler-sos/blob/master/src/config/production_template.yaml">production_template.yaml</a> file.</p>
<p>Being a template, it contains examples on how configuration <em>may</em> be done - not necessarily how it <em>should</em> be done.<br>
For example, the <code>env/DEV</code> and <code>foo/bar</code> tags are optional and can be changed to something else, or removed all together if not used.</p></div>

<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">Butler-SOS</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Log events are used to capture Sense warnings, errors and fatals in real time</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">logEvents</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">udpServerConfig</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">serverHost</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;IP or FQDN&gt;        </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Host/IP where log event server will listen for events from Sense</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">portLogEvents</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">9996</span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># Port on which log event server will listen for events from Sense</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">tags</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># - name: env</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic">#   value: DEV</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># - name: foo</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic">#   value: bar</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">source</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">engine</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># Should log events from the engine service be handled?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">proxy</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># Should log events from the proxy service be handled?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">repository</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># Should log events from the repository service be handled?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">scheduler</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># Should log events from the scheduler service be handled?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">categorise</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                        </span><span style="color:#8f5902;font-style:italic"># Take actions on log events based on their content</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">rules</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                           </span><span style="color:#8f5902;font-style:italic"># Rules are used to match log events to filters</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># - description: Find access denied errors</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#   logLevel:                    # Log events of this Log level will be matched. WARN, ERROR, FATAL. Case insensitive.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#     - WARN</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#     - ERROR</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#   action: categorise           # Action to take on matched log events. Possible values are categorise, drop</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#   category:                    # Category to assign to matched log events. Name/value pairs.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#                                # Will be added to InfluxDB datapoints as tags.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#     - name: qs_log_category</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#       value: access-denied</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#   filter:                      # Filter used to match log events. Case sensitive.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#     - type: sw                 # Type of filter. sw = starts with, ew = ends with, so = substring of</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#       value: &#34;Access was denied for User:&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#     - type: so</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#       value: was denied for User</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># - description: Find AD issues</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#   logLevel:                    # Log events of this Log level will be matched. WARN, ERROR, FATAL. Case insensitive.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#     - ERROR</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#     - WARN</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#   action: categorise           # Action to take on matched log events. Possible values are categorise, drop</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#   category:                    # Category to assign to matched log events. Name/value pairs.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#                                # Will be added to InfluxDB datapoints as tags.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#     - name: qs_log_category</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#       value: user-directory</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#   filter:                      # Filter used to match log events. Case sensitive.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#     - type: sw                 # Type of filter. sw = starts with, ew = ends with, so = substring of</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#       value: Duplicate entity with userId</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># - description: Qlik Sense service down</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#   logLevel:                    # Log events of this Log level will be matched. WARN, ERROR, FATAL. Case insensitive.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#     - WARN</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#   action: categorise           # Action to take on matched log events. Possible values are categorise, drop</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#   category:                    # Category to assign to matched log events. Name/value pairs.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#                                # Will be added to InfluxDB datapoints as tags.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#     - name: qs_log_category</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#       value: qs-service</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#   filter:                      # Filter used to match log events. Case sensitive.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#     - type: sw                 # Type of filter. sw = starts with, ew = ends with, so = substring of</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#       value: Failed to request service alive response from</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#     - type: so                 # Type of filter. sw = starts with, ew = ends with, so = substring of</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#       value: Unable to connect to the remote server</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># - description: Reload task failed</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#   logLevel:                    # Log events of this Log level will be matched. WARN, ERROR, FATAL. Case insensitive.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#     - WARN</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#     - ERROR</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#   action: categorise           # Action to take on matched log events. Possible values are categorise, drop</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#   category:                    # Category to assign to matched log events. Name/value pairs.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#                                # Will be added to InfluxDB datapoints as tags.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#     - name: qs_log_category</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#       value: reload-failed</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#   filter:                      # Filter used to match log events. Case sensitive.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#     - type: sw                 # Type of filter. sw = starts with, ew = ends with, so = substring of</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#       value: Task finished with state FinishedFail</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#     - type: sw                 # Type of filter. sw = starts with, ew = ends with, so = substring of</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#       value: Task finished with state Error</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#     - type: ew                 # Type of filter. sw = starts with, ew = ends with, so = substring of</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#       value: Reload failed in Engine. Check engine or script logs.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#     - type: sw                 # Type of filter. sw = starts with, ew = ends with, so = substring of</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic">#       value: Reload sequence was not successful (Result=False, Finished=True, Aborted=False) for engine connection with handle</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">ruleDefault</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                     </span><span style="color:#8f5902;font-style:italic"># Default rule to use if no other rules match the log event</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">category</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">qs_log_category</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">unknown</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">enginePerformanceMonitor</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#8f5902;font-style:italic"># Detailed app performance data extraction from log events</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                     </span><span style="color:#8f5902;font-style:italic"># Should app performance data be extracted from log events?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">appNameLookup</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># Should app names be looked up based on app IDs?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">trackRejectedEvents</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                   </span><span style="color:#8f5902;font-style:italic"># Should events that are rejected by the app performance monitor be tracked?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">tags</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                           </span><span style="color:#8f5902;font-style:italic"># Tags are added to the data before it&#39;s stored in InfluxDB</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic"># - name: env</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic">#   value: DEV</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic"># - name: foo</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic">#   value: bar</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">monitorFilter</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># What objects should be monitored? Entire apps or just specific object(s) within some specific app(s)?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># Two kinds of monitoring can be done:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># 1) Monitor all apps, except those listed for exclusion. This is defined in the allApps section.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># 2) Monitor only specific apps. This is defined in the appSpecific section.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># An event will be accepted if it matches any of the rules in the allApps section OR any of the rules in the appSpecific section.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">allApps</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># Should all apps be monitored?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">appExclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                   </span><span style="color:#8f5902;font-style:italic"># What apps should be excluded from monitoring?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># If both appId and appName are specified, both must match the event&#39;s data for it to be considered a match.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#8f5902;font-style:italic"># - appId: 5b817efe-472d-43ce-8a31-6cce34af7de9</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#8f5902;font-style:italic"># - appName: Sales forecast</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#8f5902;font-style:italic"># - appId: f42d6b16-8faf-45ca-a783-59f9da47db6e</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#8f5902;font-style:italic">#   appName: Inventory analysis</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">objectType</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">allObjectTypes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># Should all object types be monitored?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">allObjectTypesExclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># If allObjectTypes is set to true, the object types in this array are excluded from monitoring.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># someObjectTypesInclude (below) is ignored in that case.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - LoadModelList</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - &lt;Unknown&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - linechart</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - map</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">someObjectTypesInclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#8f5902;font-style:italic"># What object types should be included in monitoring?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># Only applicable if allObjectTypes is set to false.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - LoadModelList</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - sheet</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - barchart</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">method</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">allMethods</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#8f5902;font-style:italic"># Should all methods be monitored?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">allMethodsExclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic"># If allMethods is set to true, the methods in this array are excluded from monitoring.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># someMethodsInclude (below) is ignored in that case.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - Global::OpenApp</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - Doc::GetAppLayout</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - Doc::CreateSessionObject</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">someMethodsInclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># What methods should be included in monitoring?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># Only applicable if allMethods is set to false.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - GenericObject::GetLayout</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - GenericObject::GetHyperCubeContinuousData</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">appSpecific</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># Should app specific monitoring be done?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">app</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:bold">include</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># What apps should be monitored?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># If both appId and appName are specified, both must match the event&#39;s data for it to be considered a match.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># - appId: d7cf16f9-6a95-462a-9ff1-a6d413326de4</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># - appName: Budget 2025</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># - appId: 6931136d-c234-4358-a40c-e37153aba7c9</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic">#   appName: Sales basket analysis</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:bold">objectType</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">allObjectTypes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#8f5902;font-style:italic"># Should all object types be monitored?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">allObjectTypesExclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># If allObjectTypes is set to true, the object types in this array are excluded from monitoring.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># someObjectTypesInclude (below) is ignored in that case.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - table</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - map</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">someObjectTypesInclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># What object types should be included in monitoring?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># Only applicable if allObjectTypes is set to false.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - sheet</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - barchart</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - linechart</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - map</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:bold">appObject</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">allAppObjects</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#8f5902;font-style:italic"># Should all app objects be monitored?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">allAppObjectsExclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#8f5902;font-style:italic"># If allAppObjects is set to true, the app objects in this array are excluded from monitoring.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># someAppObjectsInclude (below) is ignored in that case.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - objectId: AaBbCc</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - objectId: DdEeFf</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">someAppObjectsInclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># What app objects should be included in monitoring?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># Only applicable if allAppObjects is set to false.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - objectId: YJEpPT</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:bold">method</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">allMethods</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># Should all methods be monitored?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">allMethodsExclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># If allMethods is set to true, the methods in this array are excluded from monitoring.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># someMethodsInclude (below) is ignored in that case.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - Global::OpenApp</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - Doc::GetAppLayout</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - Doc::CreateSessionObject</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">someMethodsInclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#8f5902;font-style:italic"># What methods should be included in monitoring?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># Only applicable if allMethods is set to false.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - GenericObject::GetLayout</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - GenericObject::GetHyperCubeContinuousData</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">sendToMQTT</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># Should log events be sent as MQTT messages?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">baseTopic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">qliksense/logevent   </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># What topic should log events be forwarded to?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">postTo</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">baseTopic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">subsystemTopics</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic"># Should log events be sent to subtopics corresponding to the QSEoW subsystems where the events originated?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">sendToInfluxdb</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># Should log events be stored in InfluxDB?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">sendToNewRelic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># Should log events be sent to New Relic?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">destinationAccount</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># - First NR account</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># - Second NR account</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">source</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">engine</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># Should log events from the engine service be handled?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">logLevel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">error</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># Should error level log events be handled by Butler SOS?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">warn</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># Should warning level log events be handled by Butler SOS?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">proxy</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># Should log events from the proxy service be handled?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">logLevel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">error</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># Should error level log events be handled by Butler SOS?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">warn</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># Should warning level log events be handled by Butler SOS?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">repository</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># Should log events from the repository service be handled?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">logLevel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">error</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># Should error level log events be handled by Butler SOS?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">warn</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># Should warning level log events be handled by Butler SOS?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">scheduler</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># Should log events from the scheduler service be handled?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">logLevel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">error</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># Should error level log events be handled by Butler SOS?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">warn</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># Should warning level log events be handled by Butler SOS?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-bdc0f6c22b693c9c463a994ed16fece6">2.3.9.2.1 - Engine performance log events</h1>
    <div class="lead"><p>Butler SOS can capture detailed performance data from the Qlik Sense engine service, based on log events generated by that service.</p>
<p>Due to the risk of generating a large number of log events, this feature comes with a comprehensive set of settings to control what data is captured and stored in InfluxDB, and what is rejected.</p>
</div>
	<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice warning" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#warning-notice"></use></svg></span>Warning</p><p>Due to the risk of overwhelming the InfluxDB database with a large number of performance log events, this feature is disabled by default in the sample config file.<br>
If you want to use this feature, you must enable it first.</p>
<p>It&rsquo;s also recommended to start small and gradually increase the number of performance log events captured, to make sure the InfluxDB database can handle the load.</p>
<p>For example, start by capturing only a few specific types of objects types, methods etc for a limited set of apps, and then gradually increase/customize from there if needed.</p></div>

<h2 id="whats-this">What&rsquo;s this?</h2>
<p>&ldquo;Performance log events&rdquo; are a regular log events generated by the Qlik Sense engine service.<br>
They get a special name in Butler SOS because they contain detailed performance data about the engine&rsquo;s operations, something that can be very useful when monitoring the performance of the Qlik Sense engine.</p>
<p>These events make it possible to monitor how the engine is performing in close to real time.</p>
<p>Butler SOS can capture all or some of these events and store them in InfluxDB, where they can be used to create dashboards in Grafana - just like any other events or metrics captured by Butler SOS.</p>
<h2 id="how-it-works">How it works</h2>
<p>Once a log event has been identified as a <em>performance log event</em> (by looking at the event name, which is <code>qseow-qix-perf</code> in this case), Butler SOS will extract the data of interest from the event.</p>
<p>The data is then checked against a set of rules/filters to determine if the event should be stored in full detail in InfluxDB (=<strong>accepted</strong>) or not (=<strong>rejected</strong>).</p>
<p>For rejected events, a counter is incremented to keep track of how many events have been rejected.<br>
The counters are written to InfluxDB at regular intervals, controlled by the <code>Butler-SOS.qlikSenseEvents.influxdb.writeFrequency</code> setting in the config file.</p>
<p>Once the data has been accepted, it is immediately stored in InfluxDB with a set of tags and fields, as described below.</p>
<h2 id="filtering-of-log-events">Filtering of log events</h2>
<p>There are two kinds of filters that can be defined in the config file:</p>
<ul>
<li>Filters that apply to all apps</li>
<li>App specific filters that apply to specific apps</li>
</ul>
<p>An event will be accepted if it matches either or both of the above filter types.<br>
If an event does not match either of the two filter types, it will be rejected.</p>
<h3 id="filters-applying-to-all-apps">Filters applying to all apps</h3>
<p>Global filters are defined in the <code>Butler-SOS.logEvents.enginePerformanceMonitor.monitorFilter.allApps</code> section of the config file.<br>
All references to config file settings below are relative to this section.</p>
<p>The all-app filter consists of several parts/subfilters:</p>
<ul>
<li>Apps for which events should be excluded, based on app ID and/or app name</li>
<li>Object types to include/exclude</li>
<li>Methods to include/exclude</li>
</ul>
<p>An event must match <em>all</em> of the subfilters to be accepted by the all-app filter.</p>
<h4 id="enablingdisabling">Enabling/disabling</h4>
<p>It is possible to enabled/disable monitoring of all apps via the <code>enable</code> setting.
If disabled no events will be accepted via the global all-apps filter type.</p>
<h4 id="excluding-apps">Excluding apps</h4>
<p>The <code>appExclude[]</code> array can be used to exclude specific apps from monitoring.<br>
The effect is that events from all apps, <em>except</em> the apps listed in <code>appExclude[]</code>, will be accepted (unless the event is rejected by some of the other all-app filters).</p>
<p><code>appExclude[]</code> can contain zero or more objects, each with either an <code>appId</code> or an <code>appName</code> properties, or both.<br>
If both properties are present, both must match the event&rsquo;s data for it to be considered a match.</p>
<h4 id="filtering-by-object-type">Filtering by object type</h4>
<p>The <code>objectType</code> section can be used to filter events based on the object type of the event.<br>
&ldquo;Object types&rdquo; are things like <code>barchart</code>, <code>sheet</code>, <code>map</code>, but also internal Sense objects like <code>AppPropsList</code> and <code>appprops</code>.</p>
<ul>
<li>If <code>objectType.allObjectTypes</code> is set to <code>true</code>, all object types are monitored, except those listed in <code>allObjectTypesExclude[]</code>.
<ul>
<li><code>someObjectTypesInclude[]</code> is not used in this case.</li>
</ul>
</li>
<li>If <code>objectType.allObjectTypes</code> is set to <code>false</code>, only the object types listed in <code>someObjectTypesInclude[]</code> will result in events being accepted.
<ul>
<li><code>allObjectTypesExclude[]</code> is not used in this case.</li>
</ul>
</li>
</ul>
<p>Put differently: You can either start by including all object types and then specify which ones to exclude, <em>or</em> start with an empty list and add the object types you want to include.</p>
<h4 id="filtering-by-method">Filtering by method</h4>
<p>&ldquo;Methods&rdquo; refer to the various operations that the Sense engine performs.<br>
Examples include <code>Global::OpenApp</code>, <code>Global::GetProgress</code>, <code>Doc::GetAppLayout</code>, <code>Doc::CreateSessionObject</code>.</p>
<p>The concepts for filtering by method are the same as for filtering by object type (see above).</p>
<h3 id="filter-applying-to-specific-apps">Filter applying to specific apps</h3>
<p>If the all-app filters are not useful (they may generate too much data, for example), it is possible to define <em>app-specific</em> filters in the <code>Butler-SOS.logEvents.enginePerformanceMonitor.monitorFilter.appSpecific</code> section of the config file.<br>
All references to config file settings below are relative to this section.</p>
<p>App-specific filters are defined in the array <code>app[]</code>.<br>
It includes zero or more objects, each of which contains the following subfilters:</p>
<ul>
<li>Apps to include, based on app ID and/or app name.</li>
<li>Object types to include/exclude</li>
<li>App objects to include/exclude</li>
<li>Methods to include/exclude</li>
</ul>
<p>The concepts for including all (and then excluding some) or starting with an empty list and adding what you want to include are the same as for the all-app filters.</p>
<h4 id="enablingdisabling-1">Enabling/disabling</h4>
<p>It is possible to enabled/disable app specific monitoring via the <code>enable</code> setting.
If disabled no events will be accepted via the app specific filter type.</p>
<h4 id="including-apps">Including apps</h4>
<p>The <code>app[].include[]</code> contains the app IDs and/or app names of the apps to include in the filter.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">appSpecific</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Should app specific monitoring be done?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">app</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#204a87;font-weight:bold">include</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># What apps should be monitored?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># If both appId and appName are specified, both must match the event&#39;s data for it to be considered a match.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:bold">appId</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">d7cf16f9-6a95-462a-9ff1-a6d413326de4</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:bold">appName</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Budget 2025</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:bold">appId</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">6931136d-c234-4358-a40c-e37153aba7c9</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">appName</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Sales basket analysis</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h4 id="filtering-by-object-type-1">Filtering by object type</h4>
<p>The <code>objectType</code> section can be used to filter events based on the object type of the event.</p>
<p>The concepts for filtering by object type are the same as for the all-app filters.</p>
<h4 id="filtering-by-app-object">Filtering by app object</h4>
<p>The <code>appObject</code> section can be used to filter events based on the object ID of the app object that the event is related to.<br>
This is useful if you want to monitor only specific objects within an app, for example certain chart or table.</p>
<p>Getting the ID of an app object is a bit tricky, but for charts, tables and other UI elements it can be done in a few reasonably easy ways.<br>
The below works for Qlik Sense 2024-May - your mileage may vary for other versions.</p>
<h5 id="share-object-from-within-app">Share object from within app</h5>
<ol>
<li>Open the app, then move to the sheet the chart is on.</li>
<li>Right click the chart and select &ldquo;Share&rdquo;. Click &ldquo;Embed&rdquo;.</li>
<li>The object ID is shown under the preview image of the chart. It is also available in the Iframe URL as the <code>obj</code> parameter.</li>
</ol>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 810px">
<img class="card-img-top" src="/docs/getting_started/setup/qlik-sense-events/log-events/performance-log-events/butler-sos-get-object-id-1_hu_7d91c81156f89d59.png" width="800" height="453">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Get the object ID from the "Share" dialog within the Sense app itself.

</p>
</figcaption>
</figure>

<h5 id="use-a-chrome-extension">Use a Chrome extension</h5>
<p>This works if you are using Chrome and have the <a href="https://upper88.com/addsensechrome.html">Add Sense</a> extension installed.</p>
<ol>
<li>Open the app, then move to the sheet the chart is on.</li>
<li>Click the Add Sense icon in the Chrome toolbar, then &ldquo;Show&rdquo; in the menu that appears.</li>
<li>Popup windows will appear with information - including the object ID - about all UI objects on the sheet.</li>
</ol>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 810px">
<img class="card-img-top" src="/docs/getting_started/setup/qlik-sense-events/log-events/performance-log-events/butler-sos-get-object-id-2_hu_f40da85093f82adf.png" width="800" height="470">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Get the object ID from the Add Sense extension in Chrome.

</p>
</figcaption>
</figure>

<h5 id="use-the-single-configurator-in-the-qlik-sense-dev-hub">Use the &ldquo;Single configurator&rdquo; in the Qlik Sense Dev Hub</h5>
<p>While it is possible to get the object ID from the Dev Hub, it is not recommended as the Dev Hub will be removed in a future version of Qlik Sense.</p>
<p>Still, if you are using a version of Sense that has the Dev Hub, you can get the object ID like this:</p>
<ol>
<li>Open the Dev Hub, then the &ldquo;Single configurator&rdquo; tool (usually found at <a href="https://mysense.some.domain/dev-hub/single-configurator%29">https://mysense.some.domain/dev-hub/single-configurator)</a>.</li>
<li>Select the app and the object you want to get the ID for in the drop-down to the left.</li>
<li>Select the chart or table you are interested in. The object ID is found in the URL.</li>
</ol>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 810px">
<img class="card-img-top" src="/docs/getting_started/setup/qlik-sense-events/log-events/performance-log-events/butler-sos-get-object-id-3_hu_a5a8adc212688500.png" width="800" height="453">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Get the object ID from the URL in the Single configurator tool in the Dev Hub.

</p>
</figcaption>
</figure>

<p>The concepts for filtering by app object are the same as for other filter types.</p>
<h4 id="filtering-by-method-1">Filtering by method</h4>
<p>The <code>method</code> section can be used to filter events based on the method that generated the event.</p>
<p>The concepts for filtering by method are the same as for other filter types.</p>
<h2 id="metrics-for-accepted-performance-log-events">Metrics for accepted performance log events</h2>
<p>The accepted performance log events stored in InfluxDB are described <a href="/docs/reference/available_metrics/influxdb/#source-engine-service-performance-related-events">here</a>.</p>
<h2 id="metrics-for-rejected-performance-log-events">Metrics for rejected performance log events</h2>
<p>The rejected performance log events stored in InfluxDB are described <a href="/docs/reference/available_metrics/influxdb/#source-engine-service-performance-related-events">here</a>.</p>
<h2 id="settings-in-config-file">Settings in config file</h2>
<div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>The config snippet below comes from the <a href="https://github.com/ptarmiganlabs/butler-sos/blob/master/src/config/production_template.yaml">production_template.yaml</a> file.</p>
<p>Being a template, it contains examples on how configuration <em>may</em> be done - not necessarily how it <em>should</em> be done.<br>
For example, the <code>env/DEV</code> and <code>foo/bar</code> tags are optional and can be changed to something else, or removed all together if not used.</p></div>

<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">Butler-SOS</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Log events are used to capture Sense warnings, errors and fatals in real time</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">logEvents</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">enginePerformanceMonitor</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#8f5902;font-style:italic"># Detailed app performance data extraction from log events</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                     </span><span style="color:#8f5902;font-style:italic"># Should app performance data be extracted from log events?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">appNameLookup</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># Should app names be looked up based on app IDs?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">trackRejectedEvents</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                   </span><span style="color:#8f5902;font-style:italic"># Should events that are rejected by the app performance monitor be tracked?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">tags</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                           </span><span style="color:#8f5902;font-style:italic"># Tags are added to the data before it&#39;s stored in InfluxDB</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic"># - name: env</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic">#   value: DEV</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic"># - name: foo</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic">#   value: bar</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">monitorFilter</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># What objects should be monitored? Entire apps or just specific object(s) within some specific app(s)?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># Two kinds of monitoring can be done:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># 1) Monitor all apps, except those listed for exclusion. This is defined in the allApps section.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># 2) Monitor only specific apps. This is defined in the appSpecific section.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># An event will be accepted if it matches any of the rules in the allApps section OR any of the rules in the appSpecific section.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">allApps</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># Should all apps be monitored?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">appExclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                   </span><span style="color:#8f5902;font-style:italic"># What apps should be excluded from monitoring?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># If both appId and appName are specified, both must match the event&#39;s data for it to be considered a match.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#8f5902;font-style:italic"># - appId: 5b817efe-472d-43ce-8a31-6cce34af7de9</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#8f5902;font-style:italic"># - appName: Sales forecast</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#8f5902;font-style:italic"># - appId: f42d6b16-8faf-45ca-a783-59f9da47db6e</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#8f5902;font-style:italic">#   appName: Inventory analysis</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">objectType</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">allObjectTypes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># Should all object types be monitored?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">allObjectTypesExclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># If allObjectTypes is set to true, the object types in this array are excluded from monitoring.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># someObjectTypesInclude (below) is ignored in that case.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - LoadModelList</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - &lt;Unknown&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - linechart</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - map</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">someObjectTypesInclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#8f5902;font-style:italic"># What object types should be included in monitoring?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># Only applicable if allObjectTypes is set to false.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - LoadModelList</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - sheet</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - barchart</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">method</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">allMethods</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#8f5902;font-style:italic"># Should all methods be monitored?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">allMethodsExclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic"># If allMethods is set to true, the methods in this array are excluded from monitoring.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># someMethodsInclude (below) is ignored in that case.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - Global::OpenApp</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - Doc::GetAppLayout</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - Doc::CreateSessionObject</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">someMethodsInclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># What methods should be included in monitoring?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># Only applicable if allMethods is set to false.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - GenericObject::GetLayout</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># - GenericObject::GetHyperCubeContinuousData</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">appSpecific</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># Should app specific monitoring be done?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">app</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:bold">include</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># What apps should be monitored?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># If both appId and appName are specified, both must match the event&#39;s data for it to be considered a match.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># - appId: d7cf16f9-6a95-462a-9ff1-a6d413326de4</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># - appName: Budget 2025</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># - appId: 6931136d-c234-4358-a40c-e37153aba7c9</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic">#   appName: Sales basket analysis</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:bold">objectType</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">allObjectTypes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#8f5902;font-style:italic"># Should all object types be monitored?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">allObjectTypesExclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># If allObjectTypes is set to true, the object types in this array are excluded from monitoring.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># someObjectTypesInclude (below) is ignored in that case.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - table</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - map</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">someObjectTypesInclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># What object types should be included in monitoring?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># Only applicable if allObjectTypes is set to false.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - sheet</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - barchart</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - linechart</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - map</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:bold">appObject</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">allAppObjects</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#8f5902;font-style:italic"># Should all app objects be monitored?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">allAppObjectsExclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#8f5902;font-style:italic"># If allAppObjects is set to true, the app objects in this array are excluded from monitoring.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># someAppObjectsInclude (below) is ignored in that case.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - objectId: AaBbCc</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - objectId: DdEeFf</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">someAppObjectsInclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># What app objects should be included in monitoring?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># Only applicable if allAppObjects is set to false.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - objectId: YJEpPT</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:bold">method</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">allMethods</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># Should all methods be monitored?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">allMethodsExclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># If allMethods is set to true, the methods in this array are excluded from monitoring.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># someMethodsInclude (below) is ignored in that case.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - Global::OpenApp</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - Doc::GetAppLayout</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - Doc::CreateSessionObject</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">someMethodsInclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#8f5902;font-style:italic"># What methods should be included in monitoring?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># Only applicable if allMethods is set to false.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - GenericObject::GetLayout</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># - GenericObject::GetHyperCubeContinuousData</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="log-appender-xml-files">Log appender XML files</h2>
<p>Sample log appender files are available in the ZIP file available from the <a href="https://github.com/ptarmiganlabs/butler-sos/releases">download page</a>, in subfolders engine/proxy/repository/scheduler of <code>config/log_appender_xml/</code> folder.</p>
<p>Note that the log appender files contain slightly different information for each Sense service (engine/proxy/repository/scheduler)!<br>
Also keep in mind that the log appender files <strong>must</strong> be called <code>LocalLogConfig.xml</code> and placed in these directories on the all Sense servers:</p>
<ul>
<li><code>C:\ProgramData\Qlik\Sense\Engine</code></li>
<li><code>C:\ProgramData\Qlik\Sense\Proxy</code></li>
<li><code>C:\ProgramData\Qlik\Sense\Repository</code></li>
<li><code>C:\ProgramData\Qlik\Sense\Scheduler</code></li>
</ul>
<div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>If you have more than one Sense server you strictly speaking don&rsquo;t <em>have</em> to deploy log appenders to all servers.</p>
<p>If you are only interested in receiving log events from some servers and/or services (engine, proxy, repository, scheduler) - deploy the log appender files there.</p></div>


</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-ee25f1a643b032d96760fc9e4b879eed">2.3.10 - Configuring the log database</h1>
    
	<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice warning" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#warning-notice"></use></svg></span>Warning</p><p>Support for Qlik Sense log db was removed in Butler SOS version 11.0.0.</p>
<p>It&rsquo;s recommended to use <a href="/docs/getting_started/setup/log-events/">log events</a> instead, they provide a more flexible and scalable way to capture log events from Qlik Sense.</p></div>

<h2 id="whats-this">What&rsquo;s this?</h2>
<p>Up until mid 2021 Qlik Sense Enterprise on Windows included a logging database to which log events were sent.
It was removed from the product due to mainly performance reasons - it could be difficult to scale properly for large Sense clusters.</p>
<p>Butler SOS offers a replacement for log db, in the form of <a href="/docs/getting_started/setup/log-events/">log events</a>.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-563127d8f9a87c7ae1827f3fb044af32">2.3.11 - Connecting to a Qlik Sense server</h1>
    <div class="lead">Details on how to configure the connection from Butler SOS to Qlik Sense Enterprise on Windows.</div>
	

<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Mandatory</h4>

    These settings are mandatory.<br>
They must exist in the config file and be correctly set for Butler SOS to work.

</div>

<h2 id="whats-this">What&rsquo;s this?</h2>
<p>In order to interact with a Qlik Sense Enterprise on Windows (QSEoW) environment, Butler SOS needs to know a few things about that environment. This is true no matter if the Sense cluster consists of a single Sense server or many.</p>
<h2 id="settings-in-main-config-file">Settings in main config file</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#000">---</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">Butler-SOS</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Certificates to use when connecting to Sense. Get these from the Certificate Export in QMC.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">cert</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">clientCert</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;path/to/cert/client.pem&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">clientCertKey</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;path/to/cert/client_key.pem&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">clientCertCA</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;path/to/cert/root.pem&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">clientCertPassphrase</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;certificate key password, if one was specified when exporting certificates from Sense QMC &gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># If running Butler in a Docker container, the cert paths MUST be the following</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># clientCert: /nodeapp/config/certificate/client.pem</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># clientCertKey: /nodeapp/config/certificate/client_key.pem</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># clientCertCA: /nodeapp/config/certificate/root.pem</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># clientCertPassphrase: </span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="qlik-sense-certificates">Qlik Sense certificates</h2>
<p>Butler SOS uses certificates to authenticate with Qlik Sense.<br>
These certificates must be exported from the Qlik Management Console (QMC).</p>
<p><img src="/docs/getting_started/setup/qlik-sense-server-settings/qmc-certexport-1.png" alt="Qlik Sense certificate export" title="Exporting certificates from Qlik"></p>
<p>To export certificates you need to provide a few pieces of information:</p>
<ol>
<li>The IP or full host name that Butler SOS&rsquo; will use when calling Butler SOS APIs.
For example, if Butler SOS get data from <code>server1.my.domain</code> (i.e. the config setting <code>Butler.serverToMonitor.server.host</code> is set to <code>server1.my.domain</code>), the value <code>server1.my.domain</code> should be entered as &ldquo;machine name&rdquo; when exporting the certificates from the QMC.</li>
<li>You only need to export certificate from one server in multi-server Sense clusters. The exported certificate can be used to access and get data from any server in the cluster.</li>
<li>Butler SOS can handle certificates with or without password protection. If you choose to use a password, you must enter that password in the Butler SOS config file.</li>
<li>Check the &ldquo;Include secret key&rdquo; check box.</li>
<li>Export certificates in PEM format.</li>
</ol>
<p><img src="/docs/getting_started/setup/qlik-sense-server-settings/qmc-certexport-2.png" alt="Qlik Sense certificate export" title="Exporting certificates from Qlik, step 2"></p>
<p>Then click the &ldquo;Export certificates&rdquo; button. If all goes well the certificates are now exported to a folder on the Sense server to which you are connected (i.e. the server hosting the virtual proxy you are connected to):</p>
<p><img src="/docs/getting_started/setup/qlik-sense-server-settings/qmc-certexport-3.png" alt="Qlik Sense certificate export" title="Exporting certificates from Qlik - all done!"></p>
<p>The exported certificate files will be used when <a href="/docs/reference/config_file_format/">configuring Butler SOS</a>.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-25b0a95cb8bc645e4d2667ca1a768178">2.3.12 - Setting up MQTT messaging</h1>
    <div class="lead">Butler SOS can use MQTT as a channel for pub-sub style M2M (machine to machine) messages. This page describes how to configure MQTT in Butler SOS.</div>
	

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Optional</h4>

    <p>These settings are optional.</p>
<p>If you don&rsquo;t need the MQTT feature, just disable it and leave the default values in the config as they are.</p>
<p>Do note though that Butler expects the configuration properties below to exist in the config file, but will <em>ignore their values</em> if the related features are disabled.</p>


</div>

<h2 id="whats-this">What&rsquo;s this?</h2>
<p><a href="https://mqtt.org/">MQTT</a> is a light weight messaging protocol based on a publish-subscribe metaphor. It is widely used in Internet of Things and telecom sectors.</p>
<p>MQTT has features such as guaranteed delivery of messages, which makes it very useful for communicating between Sense and both up- and downstream source/destination systems.</p>
<p>Butler SOS can be configured to forward various metrics and events from Sense as MQTT messages. In order to do so, some shared configuration needs to be in place first. This section covers that configuration.</p>
<p>Specifically, a MQTT broker/gateway has to be configured. All MQTT messages from Butler SOS will be sent to this broker.</p>
<h2 id="settings-in-main-config-file">Settings in main config file</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">Butler-SOS</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># MQTT config parameters</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">mqttConfig</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># Items below are mandatory if mqttConfig.enable=true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">brokerHost</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;IP of MQTT broker/server&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">brokerPort</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1883</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">baseTopic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">butler-sos/         </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Default topic used if not not otherwise specified elsewhere. Should end with /</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-7c5408d413521ddaab60282e8a4a9417">2.3.13 - Setting up the New Relic integration</h1>
    <div class="lead">Butler SOS can send metrics and events to New Relic.<br>
This way it&rsquo;s possible use their SaaS solution for storing and visualizing Butler SOS data.</div>
	

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Optional</h4>

    <p>These settings are optional.</p>
<p>If you don&rsquo;t need the New Relic feature, just disable it and leave the default values in the config as they are.</p>
<p>Do note though that Butler expects the configuration properties below to exist in the config file, but will <em>ignore their values</em> if the related features are disabled.</p>


</div>

<h2 id="whats-this">What&rsquo;s this?</h2>
<p><a href="https://newrelic.com">New Relic</a> offers a suite of online/SaaS products that collectively form a very complete observability stack.</p>
<p>From a Butler SOS perspective the interesting parts are metrics, event and log handling.<br>
By forwarding such data to New Relic it&rsquo;s not necessary to run local InfluxDB and Grafana instances.</p>
<p>That said, New Relic is a commercial service and while their free tier is very generous, there will be a trade-off between a local/lower cost InfluxDB/Grafana setup and using New Relic.<br>
With InfluxDB/Grafana you also get more fine grained control over both data storage and visualizations, while New Relic offer ease of setup and no need to host InfluxDB/Grafana yourself.</p>
<p>Below the settings for sending Qlik Sense health metrics to New Relic are described.</p>
<h2 id="tagging-of-data">Tagging of data</h2>
<p>The following attributes (which is New Relic lingo for tags) are added.</p>
<p>Note: Attributes defined further down in the list will overwrite already defined attributes if their names match.<br>
To avoid problems you should make sure not to use already defined attributes.</p>
<h3 id="tags-for-qlik-sense-health-metrics">Tags for Qlik Sense health metrics</h3>
<ol>
<li>Static attributes defined in the config file&rsquo;s <code>Butler-SOS.newRelic.metric.attribute.static</code> section.</li>
<li>Dynamic attributes
<ol>
<li><code>butlerSosVersion</code>: Butler SOS version</li>
</ol>
</li>
<li>Dynamic attributes based on whether each item in <code>Butler-SOS.newRelic.metric.dynamic</code> section is enabled/disabled.
<ol>
<li>If <code>Butler-SOS.newRelic.metric.dynamic.engine.memory</code> section is enabled
<ol>
<li><code>qs_memCommited</code></li>
<li><code>qs_memAllocated</code></li>
<li><code>qs_memFree</code></li>
</ol>
</li>
<li>If <code>Butler-SOS.newRelic.metric.dynamic.engine.cpu</code> section is enabled
<ol>
<li><code>qs_cpuTotal</code></li>
</ol>
</li>
<li>If <code>Butler-SOS.newRelic.metric.dynamic.engine.calls</code> section is enabled
<ol>
<li><code>qs_engineCalls</code></li>
</ol>
</li>
<li>If <code>Butler-SOS.newRelic.metric.dynamic.engine.selections</code> section is enabled
<ol>
<li><code>qs_engineSelections</code></li>
</ol>
</li>
<li>If <code>Butler-SOS.newRelic.metric.dynamic.engine.sessions</code> section is enabled
<ol>
<li><code>qs_engineSessionsActive</code></li>
<li><code>qs_engineSessionsTotal</code></li>
</ol>
</li>
<li>If <code>Butler-SOS.newRelic.metric.dynamic.engine.users</code> section is enabled
<ol>
<li><code>qs_engineUsersActive</code></li>
<li><code>qs_engineUsersTotal</code></li>
</ol>
</li>
<li>If <code>Butler-SOS.newRelic.metric.dynamic.engine.saturated</code> section is enabled
<ol>
<li><code>qs_engineSaturated</code></li>
</ol>
</li>
<li>If <code>Butler-SOS.newRelic.metric.dynamic.apps.docCount</code> section is enabled
<ol>
<li><code>qs_docsActiveCount</code></li>
<li><code>qs_docsLoadedCount</code></li>
<li><code>qs_docsInMemoryCount</code></li>
</ol>
</li>
<li>If <code>Butler-SOS.newRelic.metric.dynamic.cache.cache</code> section is enabled
<ol>
<li><code>qs_cacheHits</code></li>
<li><code>qs_cacheLookups</code></li>
<li><code>qs_cacheaAdded</code></li>
<li><code>qs_cacheReplaced</code></li>
<li><code>qs_cacheBytesAdded</code></li>
</ol>
</li>
</ol>
</li>
</ol>
<h3 id="tags-for-qlik-sense-proxy-session-metrics">Tags for Qlik Sense proxy session metrics</h3>
<p>If and how Butler SOS should extract proxy session metrics is controlled in the <code>Butler-SOS.userSessions</code> section of the config file.</p>
<ol>
<li>Static attributes defined in the config file&rsquo;s <code>Butler-SOS.newRelic.metric.attribute.static</code> section.</li>
<li>Dynamic attributes
<ol>
<li><code>butlerSosVersion</code>: Butler SOS version</li>
</ol>
</li>
</ol>
<h2 id="settings-in-main-config-file">Settings in main config file</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">Butler-SOS</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># New Relic config</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># If enabled, select Butler SOS metrics will be sent to New Relic.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">newRelic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">event</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># There are different URLs depending on whther you have an EU or US region New Relic account.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># The available URLs are listed here: https://docs.newrelic.com/docs/accounts/accounts-billing/account-setup/choose-your-data-center/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic">#</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># Note that the URL path should *not* be included in the url setting below!</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># As of this writing the valid options are</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># https://insights-collector.eu01.nr-data.net</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># https://insights-collector.newrelic.com</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">url</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">https://insights-collector.eu01.nr-data.net</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">header</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                   </span><span style="color:#8f5902;font-style:italic"># Custom http headers</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">X-My-Header</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Header value</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">attribute</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">static</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># Static attributes/dimensions to attach to the events sent to New Relic.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">service</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">butler-sos</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">environment</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">prod</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">dynamic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">butlerSosVersion</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#8f5902;font-style:italic"># Should the Butler SOS version be included in the events sent to New Relic?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">metric</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">destinationAccount</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#000">First NR account</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#000">Second NR account</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># There are different URLs depending on whther you have an EU or US region New Relic account.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># The available URLs are listed here: https://docs.newrelic.com/docs/accounts/accounts-billing/account-setup/choose-your-data-center/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># As of this writing the options for the New Relic metrics API are</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># https://insights-collector.eu01.nr-data.net/metric/v1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># https://metric-api.newrelic.com/metric/v1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">url</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">https://insights-collector.eu01.nr-data.net/metric/v1  </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Where should uptime data be sent?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">header</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                   </span><span style="color:#8f5902;font-style:italic"># Custom http headers</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">X-My-Header</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Header value</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">dynamic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">engine</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">memory</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">               </span><span style="color:#8f5902;font-style:italic"># Engine RAM (free/committed/allocated).</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">cpu</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># Engine CPU.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">calls</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># Total number of requests made to the engine.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">selections</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#8f5902;font-style:italic"># Total number of selections made to the engine.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">sessions</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#8f5902;font-style:italic"># Engine session metrics (active and total number of engine sessions).</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">users</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># Engine user metrics (active and total number of users in engine.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">saturated</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#8f5902;font-style:italic"># Engine saturation status (tracks whether engine has high or low load).</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">apps</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">docCount</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">cache</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">cache</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#8f5902;font-style:italic"># Cache metrics.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">proxy</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">sessions</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#8f5902;font-style:italic"># Session metrics as reported by the Sense proxy service</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">attribute</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">static</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># Static attributes/dimensions to attach to the data sent to New Relic.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">service</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">butler-sos</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">environment</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">prod</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">dynamic</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">butlerSosVersion</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#8f5902;font-style:italic"># Should the Butler SOS version be included in the data sent to New Relic?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-e955dfed0f1487b3968692674211b625">2.3.14 - Setting up Prometheus</h1>
    <div class="lead">Butler SOS can store metrics in Prometheus.</div>
	

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Optional</h4>

    <p>These settings are optional.</p>
<p>If you don&rsquo;t need the Prometheus feature, just disable it and leave the default values in the config as they are.</p>
<p>Do note though that Butler expects the configuration properties below to exist in the config file, but will <em>ignore their values</em> if the related features are disabled.</p>


</div>

<h2 id="whats-this">What&rsquo;s this?</h2>
<p><a href="https://prometheus.io">Prometheus</a> is the de-facto standard, open source tool for achieving observability of both small, large and huge IT systems.</p>
<p>At its heart Prometheus contains a time-series database optimized for storing various kinds of measurements. It has strong support for doing dimensional queries, great integrations with incident management tools and more.</p>
<p>Looking at the visualization side of things, Prometheus is Grafana&rsquo;s preferred source for time-series data. Put differently, Prometheus has some query features that InfluxDB lack, thus making some Grafana diagrams easier to create using Prometheus vs InfluxDB. The difference is minor though.</p>
<h2 id="settings-in-main-config-file">Settings in main config file</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">Butler-SOS</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Prometheus config</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># If enabled, select Butler SOS metrics will be exposed on a Prometheus compatible URL from where they can be scraped.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">prometheus</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                                    </span><span style="color:#8f5902;font-style:italic"># Default false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">host</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;IP or FQDN where Butler SOS is running&gt; </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># On what IP/FQDN should the Prometheus metrics be exposed? Default 0.0.0.0, i.e. all available IPs</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">9842</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-c8041328467162b99ca60f7d5f646e57">2.3.15 - Setting up InfluxDB time series database</h1>
    <div class="lead">Butler SOS can store metrics in InfluxDB.</div>
	

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Optional</h4>

    <p>These settings are optional, but highly recommended.</p>
<p>In theory you can use Butler SOS to pull metrics from Qlik Sense and then forward the metrics as MQTT messages, not storing the data in InfluxDB (no Grafana dashboards then!).</p>
<p>By far the most common use case is to store the metrics in InfluxDB.<br>
If you already have Prometheus deployed you can use it instead of Grafana, see the <a href="/docs/getting_started/setup/prometheus/">Prometheus config page</a>.</p>
<p>Using InfluxDB is enabled by default in the config file.</p>


</div>

<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice warning" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#warning-notice"></use></svg></span>Warning</p><p>Butler SOS supports InfluxDB 1.x and 2.x.<br>
There are reports that InfluxDB&rsquo;s cloud product also works with Butler SOS, that has however not been tested by the Butler SOS team.</p>
<p>Version 3 (in beta at the time of this writing) is not supported.</p></div>

<h2 id="whats-this">What&rsquo;s this?</h2>
<p><a href="https://www.influxdata.com/get-influxdb/">InfluxDB</a> is a time series database. This means it is optimized for storing data that&rsquo;s somehow linked to a timestamp.<br>
Measurements and metrics are some of the most obvious kinds of data for which InfluxDB was created.</p>
<p>Butler SOS stores data in InfluxDB in full detail, i.e. Butler SOS doesn&rsquo;t do any aggregation of older data points.<br>
This has a few consequences:</p>
<ul>
<li>If you are monitoring many Sense servers and/or query Sense for health metrics very frequently and/or have a long InfluxDB retention policy (many months or even years) you will eventually end up with <em>lots</em> of data.</li>
<li>You should ask yourself how far back you need to look at operational data such as the one collected by Butler SOS. In most cases 30 or 45 days history will be more than enough. 10-14 days are usually a good starting point. Use the <code>Butler-SOS.influxdbConfig.retentionPolicy</code> section of the config file to create a retention policy for Butler SOS.</li>
<li>If you need longer history you should consider using InfluxDB&rsquo;s excellent aggregation features. These can assist in aggregating older data points, with the effect that you can then keep virtually unlimited history. The older data will not be as detailed (fewer samples per time period) - but you will still have an averaged view of what the history looked like.</li>
</ul>
<p><strong>Note 1:</strong> Instructions for how to aggregate old data is beyond the scope of this documentation.</p>
<p><strong>Note 2:</strong> The retention policy specified in the config file will only be created if the InfluxDB database specified in the config file does <strong><em>NOT</em></strong> exist when Butler SOS is started.<br>
I.e. if you store data to an existing InfluxDB database, the retention policy will not be created.</p>
<h2 id="settings-in-main-config-file">Settings in main config file</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">Butler-SOS</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Influx db config parameters</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">influxdbConfig</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># Items below are mandatory if influxdbConfig.enable=true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">host</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">influxdb.mycompany.com   </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># InfluxDB host, hostname, FQDN or IP address</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">port</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">8086</span><span style="color:#f8f8f8;text-decoration:underline">                      </span><span style="color:#8f5902;font-style:italic"># Port where InfluxDBdb is listening, usually 8086</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">version</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#f8f8f8;text-decoration:underline">                      </span><span style="color:#8f5902;font-style:italic"># Is the InfluxDB instance version 1.x or 2.x? Valid values are 1 or 2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">v2Config</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                       </span><span style="color:#8f5902;font-style:italic"># Settings for InfluxDB v2.x only, i.e. Butler-SOS.influxdbConfig.version=2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">org</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">myorg</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">bucket</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">mybucket</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">description</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Butler SOS metrics</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">token</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">mytoken</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">retentionDuration</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">10d</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">v1Config</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                       </span><span style="color:#8f5902;font-style:italic"># Settings below are for InfluxDB v1.x only, i.e. Butler-SOS.influxdbConfig.version=1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">auth</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">               </span><span style="color:#8f5902;font-style:italic"># Does influxdb instance require authentication (true/false)?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">username</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;username&gt;       </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Username for Influxdb authentication. Mandatory if auth.enable=true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">password</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;password&gt;       </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Password for Influxdb authentication. Mandatory if auth.enable=true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">dbName</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">SenseOps</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># Default retention policy that should be created in InfluxDB when Butler SOS creates a new database there.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># Any data older than retention policy threshold will be purged from InfluxDB.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">retentionPolicy</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">10d</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">duration: 10d                 # Possible duration units here</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">https://docs.influxdata.com/influxdb/v1.8/query_language/spec/#durations</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># Control whether certain metrics are stored in InfluxDB or not</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># Use with caution! Enabling activeDocs, loadedDocs or inMemoryDocs may result in lots of data sent to InfluxDB.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">includeFields</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">activeDocs</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># Should data on what docs are active be stored in Influxdb (true/false)?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">loadedDocs</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#8f5902;font-style:italic"># Should data on what docs are loaded be stored in Influxdb (true/false)?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">inMemoryDocs</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#8f5902;font-style:italic"># Should data on what docs are in memory be stored in Influxdb (true/false)?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-7936f2024d9190126f844af0505839c1">2.3.16 - Configuring extraction of app names from Qlik Sense</h1>
    
	

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Optional</h4>

    <p>These settings are optional.</p>
<p>If you don&rsquo;t do anything app name extraction is turned on by default.</p>


</div>

<h2 id="whats-this">What&rsquo;s this?</h2>
<p>Qlik Sense&rsquo;s APIs return all its app metrics relative to an app ID, not the app name.<br>
This is fine as the ID is guaranteed to be unique, but the downside is that the ID doesn&rsquo;t tell us humans much.</p>
<p>Butler SOS therefore provides an app ID-to-app name mapping with a configurable update interval.<br>
The <code>Butler-SOS.appNames</code> section of the config file controls if this mapping should be done at all, how often and which Sense server should be used to get it.</p>
<p>If an app ID for some reason can&rsquo;t be mapped to an app name, Butler SOS will use the app ID as the app name.</p>
<p>A more comprehensive description of Butler SOS&rsquo; strategy for getting correct names of Sense apps is available in the <a href="/docs/concepts/apps/#app-names-are-tricky">Concepts section</a>.</p>
<h2 id="settings-in-main-config-file">Settings in main config file</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">Butler-SOS</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Extract app names</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">appNames</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> 
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">enableAppNameExtract</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># Extract app names in addition to app IDs (tue/false)?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">extractInterval</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">60000</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># How often (milliseconds) should app names be extracted?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">hostIP</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;IP or FQDN&gt;         </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># What Sense server should be queried for app names?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>Setting <code>anonTelemetry</code> to true enables telemetry, setting it to false disables telemetry.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-ff07b882fcf9f7b2efe9a2cc8afdedb0">2.3.17 - Configuring user sessions</h1>
    
	

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Optional</h4>

    <p>These settings are optional.</p>
<p>If you don&rsquo;t do anything user session metrics are turned on by default.</p>


</div>

<h2 id="whats-this">What&rsquo;s this?</h2>
<p>A description of what user sessions are is available in the <a href="/docs/concepts/sessions-connections/#sessions">Concepts section</a>.</p>
<p>Detailed user session metrics are retrieved for all virtual proxies specified in the <code>Butler-SOS.serversToMonitor.servers[].userSessions.VirtualProxies[]</code> array.</p>
<p>In other words: For each monitored Sense server it is possible to specify which of the server&rsquo;s proxy service&rsquo;s virtual proxies should be monitored with respect to per-user session metrics.<br>
Right, that&rsquo;s a long sentence&hellip;</p>
<p>Let&rsquo;s try again: For each monitored Sense server, decide which virtual proxies should be monitored.<br>
Enter those virtual proxies in the <code>Butler-SOS.serversToMonitor.servers[].userSessions.VirtualProxies[]</code> array for the server in question.</p>
<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice note" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#note-notice"></use></svg></span>Note</p><p>In order to get detailed, per-user and virtual proxy session info you need to</p>
<ol>
<li>Configure the <code>Butler-SOS.userSessions</code> section of the config file with general parameters about how often sessions should be polled, user blacklist etc.<br>
Don&rsquo;t forget to set <code>Butler-SOS.userSessions.enableSessionExtract</code> to true.</li>
<li>For each server then set <code>Butler-SOS.serversToMonitor.servers[].userSessions.enable</code> to true and specify which virtual proxies should be monitored.</li>
</ol>
<p>You will only get user session info if you configure both the points above.</p></div>

<h2 id="settings-in-main-config-file">Settings in main config file</h2>
<div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>The config snippet below comes from the <a href="https://github.com/ptarmiganlabs/butler-sos/blob/master/src/config/production_template.yaml">production_template.yaml</a> file.</p>
<p>Being a template, it contains examples on how configuration <em>may</em> be done - not necessarily how it <em>should</em> be done.<br>
For example, the <code>LAB/testuser1</code> and <code>LAB/testuser2</code> user are optional and can be changed to something else, or removed all together if not used.</p></div>

<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">Butler-SOS</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Sessions per virtual proxy</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">userSessions</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">enableSessionExtract</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># Query unique user IDs of what users have sessions open (true/false)?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># Items below are mandatory if enableSessionExtract=true    </span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">pollingInterval</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">30000</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># How often (milliseconds) should session data be polled?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">excludeUser</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># Optional blacklist of users that should be disregarded when it comes to session monitoring.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                  </span><span style="color:#8f5902;font-style:italic"># Blacklist is only applied to data in InfluxDB. All session data will be sent to MQTT.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:bold">directory</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">LAB</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">userId</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">testuser1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:bold">directory</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">LAB</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">userId</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">testuser2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-e7ea6a1a4c916466fff598a89a518e11">2.3.18 - Configure which Sense servers to monitor</h1>
    
	

<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Mandatory</h4>

    These settings are mandatory.<br>
They must exist in the config file and be correctly set for Butler SOS to work.

</div>

<h2 id="whats-this">What&rsquo;s this?</h2>
<p>This part of the config file contains information on what Sense servers should be monitored and details about those servers.</p>
<p>Note that there is a dependency to the <code>Butler-SOS.userSessions</code> section. Please see the <a href="/docs/getting_started/setup/user-sessions/">Configuring user sessions</a> page for more info.</p>
<h3 id="tags">Tags</h3>
<p>It&rsquo;s possible to define server specific tags that will be stored together with the Sense metrics in InfluxDB.<br>
The tags can then be used when creating Grafana dashboards, for example to distinguish between DEV, TEST and PROD servers, where servers are located physically etc.</p>
<p>You can define zero or more tags in the <code>Butler-SOS.serversToMonitor.serverTagsDefinition</code> section.<br>
Those tags are then given values for each server.</p>
<p>If a tag is defined it <em>must</em> in fact be given a value for each server!<br>
If nothing else just set it to an empty string or a hyphen, &lsquo;-&rsquo;.</p>
<h2 id="settings-in-main-config-file">Settings in main config file</h2>
<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>The config snippet below comes from the <a href="https://github.com/ptarmiganlabs/butler-sos/blob/master/src/config/production_template.yaml">production_template.yaml</a> file.</p>
<p>Being a template, it contains examples on how configuration <em>may</em> be done - not necessarily how it <em>should</em> be done.<br>
For example, the list <code>serverTagsDefinition</code> is optional and can be changed to something else, or removed all together if not used.</p>
<p>Same thing for the list of servers and virtual proxies. Update them so they match your own Sense environment.</p></div>

<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">Butler-SOS</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">serversToMonitor</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">pollingInterval</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">30000</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic"># How often (milliseconds) should the healthcheck API be polled?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># If false, Butler SOS will accept TLS certificates on the server without verifying them with the CA. </span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># If true, data will only be retrieved from the Sense server if that server&#39;s TLS cert verifies </span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># successfuully against the list of CAs available on the computer where Butler SOS is running.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">rejectUnauthorized</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline"> 
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># List of extra tags for each server. Useful for creating more advanced Grafana dashboards.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># Each server below MUST include these tags in its serverTags property.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># The tags below are just examples - define your own as needed</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># These tags will also be used to label data exposed on the Prometheus endpoint (if it is enabled)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># NOTE: Prometheus only allows label names consisting of ASCII letters, numbers, as well as underscores. They must match the regex [a-zA-Z_][a-zA-Z0-9_]*. </span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># I.e. if the Prometheus endpoint is enabled, the tag names below must follow the label naming standard of Prometheus. </span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">serverTagsDefinition</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> 
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">server_group</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">serverLocation</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">server_type</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">serverBrand</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#8f5902;font-style:italic"># Sense Servers that should be queried for healthcheck data </span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">servers</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:bold">host: &lt;server1.my.domain&gt;:4747        # Example</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">10.34.3.45</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">4747</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">serverName</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;server1&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">serverDescription</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;description&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">logDbHost</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;host name as used in QLogs db&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">userSessions</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic"># Items below are mandatory if userSessions.enable=true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">host: &lt;server1.my.domain&gt;:4243      # Example</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">10.34.3.45</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">4243</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">virtualProxies</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:bold">virtualProxy</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/                </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Default virtual proxy</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:bold">virtualProxy</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/hdr             </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># &#34;hdr&#34; virtual proxy</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:bold">virtualProxy</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/sales           </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># &#34;sales&#34; virtual proxy</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">serverTags</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">server_group</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">DEV</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">serverLocation</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Asia</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">server_type</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">virtual</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">serverBrand</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Dell</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">headers</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> 
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">X-My-Header-1</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Header value 1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">X-My-Header-2</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Header value 2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:bold">host: &lt;server2.my.domain&gt;:4747        # Example</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">10.34.3.46</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">4747</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">serverName</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;server2&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">serverDescription</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;description&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">logDbHost</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">&lt;host name as used in QLogs db&gt;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">userSessions</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic"># Items below are mandatory if userSessions.enable=true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">host: &lt;server2.my.domain&gt;:4243      # Example</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">10.34.3.46</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">4243</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">virtualProxies</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:bold">virtualProxy</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/finance         </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># &#34;finance&#34; virtual proxy</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">serverTags</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">server_group</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">PROD</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">serverLocation</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Europe</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">server_type</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">physical</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">serverBrand</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">HP</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">headers</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> 
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">X-My-Header-1</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Header value 3</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">X-My-Header-2</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Header value 4</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-778e075b00e53093cd9d41f008406df7">2.3.19 - Configuring telemetry</h1>
    
	

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Optional</h4>

    <p>These settings are optional.</p>
<p>If you don&rsquo;t do anything telemetry is turned on by default.</p>


</div>

<h2 id="whats-this">What&rsquo;s this?</h2>
<p>A description of Butler&rsquo;s telemetry feature is available <a href="/docs/about/telemetry/">here</a>.</p>
<h2 id="settings-in-main-config-file">Settings in main config file</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#000">---</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">Butler</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Logging configuration</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">anonTelemetry</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#8f5902;font-style:italic"># Can Butler SOS send anonymous data about what computer it is running on?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                          </span><span style="color:#8f5902;font-style:italic"># More info on what data is collected: https://butler-sos.ptarmiganlabs.com/docs/about/telemetry/</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                          </span><span style="color:#8f5902;font-style:italic"># Please consider leaving this at true - it really helps future development of Butler SOS!</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><p>Setting <code>anonTelemetry</code> to true enables telemetry, setting it to false disables telemetry.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-b40866139e98d0392a12a0e06705e580">2.4 - Day 2 operations</h1>
    <div class="lead">Options for running Butler SOS.</div>
	<h2 id="running-butler-sos">Running Butler SOS</h2>
<p>How to start and keep Butler SOS running varies depending on whether you are using Docker or a native Node.js approach.</p>
<h3 id="docker">Docker</h3>
<p>Starting Butler SOS using Docker is easy.</p>
<p>First configure the <code>docker-compose.yml</code> file as needed, then start the Docker container in interactive mode (=with output sent to the screen).<br>
This is useful to ensure everything works as intended when first setting up Butler SOS.</p>
<pre><code>docker-compose up
</code></pre>
<p>Once Butler SOS has been verified to work as intended, hit <code>ctrl-c</code> to stop it.<br>
Then start it again in daemon (background) mode:</p>
<pre><code>docker-compose up -d
</code></pre>
<p>From here on the Docker environment will make sure Butler SOS is always running, including restarting it if it for some reason stops, when server reboots etc.</p>
<h3 id="pre-built-standalone-binaries">Pre-built, standalone binaries</h3>
<p>Starting Butler SOS using the pre-built binaries could look like this on Windows:</p>
<pre><code>d:
cd \node\butler-sos
butler-sos.exe --configfile butler-sos-prod.yaml --loglevel info
</code></pre>
<p>It is of course also possible to put those commands in a command file (.bat on Windows, .sh etc on other platforms) file and execute that file instead.</p>
<p>As Butler SOS is the kind of service that (probably) should always be running on a server, it makes sense running it as a Windows service (or similar mechanism in Linux).</p>
<p>On Windows you can use the excellent Nssm tool (<a href="https://nssm.cc">https://nssm.cc</a>) to achieve this, with all the benefits that follow (the service can be monitored using operations tools, automatic restarts etc).</p>
<p>A step-by-step tutorial for running Butler SOS as a Windows service using NSSM is available over at <a href="https://ptarmiganlabs.com/running-butler-tools-as-windows-services/">ptarmiganlabs.com</a>.</p>
<p>On Linux both PM2 (<a href="https://github.com/Unitech/pm2">https://github.com/Unitech/pm2</a>) and Forever (<a href="https://github.com/foreverjs/forever">https://github.com/foreverjs/forever</a>) have been successfully tested with Butler SOS.</p>
<h3 id="native-nodejs">Native Node.js</h3>
<p>Starting Butler SOS as a Node.js on Windows could look like this:</p>
<pre><code>d:
cd \node\butler-sos\src
node butler-sos.js
</code></pre>
<p>It is of course also possible to put those commands in a command file (.bat on Windows, .sh etc on other platforms) file and execute that file instead.</p>
<h3 id="windows-services--process-monitors">Windows services &amp; process monitors</h3>
<p>As Butler SOS is the kind of service that (probably) should always be running on a server, it makes sense using a Node.js process monitor to keep it alive (if running Butler SOS as a Docker container you get this for free).</p>
<p>On Windows you can use the excellent Nssm tool (<a href="https://nssm.cc">https://nssm.cc</a>) to make Butler SOS run as a Windows Service, with all the benefits that follow (can be monitored using operations tools, automatic restarts etc).</p>
<p>If running Butler SOS as a Node.js app on Linux, PM2 (<a href="https://github.com/Unitech/pm2">https://github.com/Unitech/pm2</a>) and Forever (<a href="https://github.com/foreverjs/forever">https://github.com/foreverjs/forever</a>) are two process monitors that both have been successfully tested with Butler SOS.</p>
<p>One caveat with these is that it can be hard to start them (and thus Butler SOS) when a Windows server is rebooted.
PM2 can be used to solve this challenge in a nice way, more info in this blog post: <a href="https://ptarmiganlabs.com/blog/2017/07/12/monitoring-auto-starting-node-js-services-windows-server">https://ptarmiganlabs.com/blog/2017/07/12/monitoring-auto-starting-node-js-services-windows-server</a>.<br>
On the other hand - just using Nssm is probably the easiest and best option for Windows.</p>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-4c8c08ff9e6e86ac18f382e488a22fab">2.4.1 - Monitoring Butler SOS</h1>
    <div class="lead">Options for monitoring Butler SOS itself.</div>
	<h2 id="monitoring-butler-sos">Monitoring Butler SOS</h2>
<p>Once Butler SOS is running it&rsquo;s a good idea to also monitor it. Otherwise you stand the risk of not getting notified if Butler SOS for some reason misbehaves.</p>
<p>Butler SOS will log data on its memory usage to InfluxDB if</p>
<ol>
<li>The config file&rsquo;s <code>Butler-SOS.uptimeMonitor.enable</code> and <code>Butler.uptimeMonitor.storeInInfluxdb.butlerSOSMemoryUsage</code> properties are both set to <code>true</code>.</li>
<li>The remaining InfluxDB properties of the config file are correctly configured.</li>
</ol>
<p>Assuming everything is correctly set up, you can then create a Grafana dashboard showing Butler SOS&rsquo; memory use over time.<br>
You can also set up alerts in Grafana with notifications going to most popular IM tools and email.</p>
<p>A Grafana dashboard can look like this. This particular chart is for the <a href="https://butler.ptarmiganlabs.com">Butler</a> tool, but the concept for Butler SOS is the same.</p>
<p><img src="/docs/getting_started/operations/monitoring-butler-sos/butler-memory-usage-grafana-1.png" alt="alt text" title="Butler SOS memory usage in Grafana dashboard"></p>
<p>There is a <a href="https://github.com/ptarmiganlabs/butler-sos/tree/master/docs/grafana">sample Grafana dashboard</a> in Butler SOS&rsquo; GitHub repo.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-94a22a9eb27507e9652dbd17c53aceaf">2.5 - Upgrade</h1>
    <div class="lead">Upgrading Butler SOS to a new version?<br>
Here&rsquo;s how to do it.</div>
	<h2 id="first-dont-panic">First: Don&rsquo;t panic</h2>
<p>Upgrading Butler SOS is usually a smooth process:</p>
<ul>
<li>Get the new version from the assets section on the <a href="https://github.com/ptarmiganlabs/butler-sos/releases">download page</a>. Extract the ZIP file.</li>
<li>Back up your existing Butler SOS configuration file.</li>
<li>Edit the configuration file to match the new version&rsquo;s requirements.</li>
<li>Stop the Butler SOS process/service.</li>
<li>Replace the Butler SOS binary with the new version.</li>
<li>Start the process/service.</li>
<li>🥳 Celebrate!</li>
</ul>
<h2 id="then-the-details">Then: The details</h2>
<h3 id="version-number-hints">Version number hints</h3>
<p>Different kind of upgrades (usually) result in different levels on modifications needed in the main config file.</p>
<ul>
<li>&ldquo;Small&rdquo; upgrades move from one patch version to another, without changing the feature version.<br>
Example: Upgrading from 7.3.0 &gt; 7.3.4.</li>
<li>&ldquo;Medium&rdquo; upgrades involves moving from one minor version to another, without changing the major version.
Example: Upgrading from 7.2.3 &gt; 7.3.0</li>
<li>&ldquo;Major&rdquo; upgrades is when you move to a new major version.
Example: 7.4.2 &gt; 8.0.0</li>
</ul>
<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice warning" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#warning-notice"></use></svg></span>Warning</p><p>You should always upgrade to the latest available version.<br>
That version has the latest features, bug fixes and security patches.</p></div>

<h4 id="minor-upgrades">Minor upgrades</h4>
<p>The new release includes bug fixes, security patches, minor updates to documentation etc - but no new features.</p>
<p>In theory there should never be any changes to the config files when doing a minor upgrade.</p>
<h4 id="medium-upgrades">Medium upgrades</h4>
<p>This scenario means that new features are added to Butler SOS.<br>
Usually there are also various bug fixes included.</p>
<p>Most new features need to be configured somehow, meaning that medium upgrades usually require modification to the config files.<br>
The most common change by far is that it&rsquo;s the main config file that needs to be modified, but a new scheduler related feature could for example mean that the scheduler config file must be modified too.</p>
<p>The changes needed to the config files are <em>usually</em> additive in nature, i.e. some settings must be added to the config file, but the existing settings and general structure of the file remain the same.</p>
<h4 id="major-upgrades">Major upgrades</h4>
<p>This scenario involves breaking changes of some kind.</p>
<p>These almost certainly require changes to the config files, sometimes even significant ones in the sense that the structure of the config file may have changed.</p>
<p>If <strong>very</strong> major rework has been done to Butler SOS, this may also result in a major version bump.</p>
<h3 id="know-your-config-file">Know your config file</h3>
<p>Butler SOS is entirely driven by its YAML-formatted configuration file, with an <a href="https://raw.githubusercontent.com/ptarmiganlabs/butler-sos/master/src/config/production_template.yaml">example file</a> serving as a good starting point.</p>
<h3 id="influxdb-considerations">InfluxDB considerations</h3>
<p>Some versions include changes to the InfluxDB schema, meaning that you need to do some manual work in order to upgrade to the new schema.</p>
<p>The easiest way to do this is to delete the InfluxDB database used by Butler SOS, then let Butler SOS re-create it using the new schema.<br>
If the InfluxDB database specified in the Butler SOS config file does not exist, Butler SOS will automatically create it for you.</p>
<p>Deleting the InfluxDB database &ldquo;senseops&rdquo; can be done with a command similar to this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>influx --host &lt;ip-where-influxdb-is-running&gt; --port &lt;influxdb-port-usually-8086&gt;
</span></span><span style="display:flex;"><span>drop database senseops
</span></span><span style="display:flex;"><span><span style="color:#204a87">exit</span>
</span></span></code></pre></div><h3 id="upgrade-checklist">Upgrade checklist</h3>
<div class="notice info" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#info-notice"></use></svg></span>Info</p><p>Butler SOS always checks that the config file has the correct format when starting.</p>
<p>This means that if you forget to add or change some setting in the main YAML config file, Butler SOS will tell you what&rsquo;s missing and refuse to start.<br>
A consequence of this is that all settings are now mandatory, even if you don&rsquo;t use them.</p></div>

<ol>
<li>Make a backup of your YAML configuration file before upgrading. Just&hellip; do it.</li>
<li>Look at the <a href="https://github.com/ptarmiganlabs/butler-sos/releases">release notes</a> to get a general feeling for what is new and what has changed.<br>
Those are the areas that may require changes in the config file.</li>
<li>Compare your existing main config file with the <a href="https://raw.githubusercontent.com/ptarmiganlabs/butler-sos/master/src/config/production_template.yaml">template config file</a> available on GitHub.<br>
This comparison is a manual process and can be a bit tedious, but knowing your config file is really needed in order to make full and correct use of Butler SOS.
<ol>
<li>That file is also included in the Butler SOS ZIP file available on the <a href="https://github.com/ptarmiganlabs/butler-sos/releases">download page</a>.</li>
<li>A more in-depth description of the config file is available in the <a href="/docs/reference/config_file_format/">Reference docs &gt; Config file format</a> section of the documentation.</li>
</ol>
</li>
<li>The result of the comparison will show you what parts of the config file are new (for medium-sized upgrades) and which parts have changed in a significant way (for major upgrades).</li>
<li>Get the binaries for the new Butler SOS version from the <a href="https://github.com/ptarmiganlabs/butler-sos/releases">download page</a>.</li>
<li>Start the new Butler SOS version and let it run for a few minutes.
<ol>
<li>Review the console logs (or the log files) to make sure there are no warnings or errors.</li>
<li>If there are warnings or errors it can be helpful to start Butler SOS with more verbose logging.<br>
Adding <code>--log-level verbose</code> or even <code>--log-level debug</code> will give you more details on what Butler SOS is doing and what might be causing the problems you are experiencing.</li>
</ol>
</li>
</ol>
<h2 id="finally-when-things-arent-working---check-the-logs">Finally: When things aren&rsquo;t working - check the logs</h2>
<p>By far the most common problem when upgrading to a new Butler SOS version (or doing a fresh install) is an incorrect config file.</p>
<p>All config entries are mandatory, even if you don&rsquo;t use them.<br>
This may seem a bit harsh, but this way Butler SOS can tell you exactly what is missing in the config file.</p>
<p>Missing entries are shown in the startup log, like this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>2024-09-02T12:17:33.919Z error: VERIFY CONFIG FILE: Errors found in config file. Exiting.
</span></span><span style="display:flex;"><span>2024-09-02T12:17:33.920Z error: Tip: Start Butler SOS with --no-config-file-verify option to skip this check and start with provided config file.
</span></span><span style="display:flex;"><span>2024-09-02T12:17:33.920Z error: /home/goran/code/butler-sos/src/config/production.yaml is not following the correct structure, missing:,Butler-SOS.configVisualisation.enable
</span></span></code></pre></div><p>In the example above the <code>Butler-SOS.configVisualisation.enable</code> entry is missing.<br>
Adding that entry to the config file should make Butler SOS start.</p>
<p>Butler SOS is pretty good at figuring out what is wrong with the config file, but there may be cases where it&rsquo;s not obvious what is wrong.</p>
<p>Thus, double check your config file, then triple check it.</p>
<p>Then start Butler SOS and read the logs carefully.<br>
If you need more details, start Butler SOS with the <code>--log-level verbose</code> or even <code>--log-level debug</code> options to get more details on what&rsquo;s going on.</p>
<p>If things still don&rsquo;t work you can post a question in the <a href="https://github.com/ptarmiganlabs/butler-sos/discussions/categories/q-a">Butler SOS forums</a>.</p>
<p>By sharing your installation and upgrade challenges/issues you enable future improvements, which will benefit both yourself and others.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-dd948255948d6b59b32c471abcb62997">3 - Concepts</h1>
    <div class="lead">Deep dive into the various components that make up Butler SOS.</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-bd1d75fd7b57f4940090c365c602a011">3.1 - App metrics</h1>
    <div class="lead">&ldquo;Apps&rdquo;, &ldquo;Applications&rdquo; or &ldquo;Documents&rdquo; - in Qlik lingo they all refer to the same thing.<br>
It&rsquo;s where data and logic is kept in the Qlik Sense system.</div>
	<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>The <a href="/docs/about/usecases/">use cases</a> page contains related information that may be of interest.</p></div>

<h2 id="app-metrics">App metrics</h2>
<p>When it comes to apps we basically want to track which apps are loaded into the monitored Sense server(s).</p>
<h2 id="in-memory-vs-loaded-vs-active-apps">In-memory vs loaded vs active apps</h2>
<p>Given the caching nature of Qlik Sense, some apps will be actively used by users and some will just be sitting there without any current connections.</p>
<p>Sense group apps into three categories, which are all available in Butler SOS:</p>
<ul>
<li>Active apps. An app is active when a user is currently performing some action on it.</li>
<li>Loaded apps. An app that is currently loaded into memory and that have open sessions or connections.</li>
<li>In-memory apps. Loaded into memory, but without any open sessions or connections.</li>
</ul>
<p>Butler SOS keeps track of both app IDs and names of the apps in each of the three categories.</p>
<p>More info on <a href="https://help.qlik.com/en-US/sense-developer/February2021/Subsystems/EngineAPI/Content/Sense_EngineAPI/GettingSystemInformation/HealthCheckStatus.htm">Qlik help pages</a>.</p>
<h2 id="app-names-are-tricky">App names are tricky</h2>
<p>Qlik Sense provides app health info based on app IDs.<br>
I.e. we get a list of what app IDs are active, loaded and in-memory.</p>
<p>That&rsquo;s all good, except those IDs don&rsquo;t tell us humans a lot.<br>
We need app <strong>names</strong>.</p>
<p>We can get those app names by simply asking Sense for a list of app app IDs and names, but there are a couple of challenges here:</p>
<ol>
<li>This query to Sense may not be complex or expensive if done once, but if we do it several times per minute it will create an unwanted load on the Sense server(s).</li>
<li>There is the risk of an app being deleted between we get health data for it and the following appID-name query. Most apps are reasonably long-lived, but the risk is still there.</li>
</ol>
<p>Right or wrong, Butler SOS takes this approach to the above:</p>
<ol>
<li>App name queries are done on a separate schedule. In the main config file you can configure both if app names should even be looked up, and how often that lookup should happen. This puts you in control of how up-to-date app names you need in your Grafana dashboards.</li>
<li>The risk of a temporary mismatch between app IDs and app names in Butler SOS remains, and will even get worse if you query app names infrequently. Still, this is typically a very small problem (if even a problem at all).</li>
</ol>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-824cd5d845e0027b5cc40d1ec64f916c">3.2 - Sessions &amp; Connections</h1>
    <div class="lead">What are user sessions and why are they important?</div>
	<p>Who are using the Sense environment right now?</p>
<p>This is a very basic question a sysadmin will ask over and over again.<br>
This question is answered in great detail by the excellent Operations Monitor app that comes with Qlik Sense out of the box.<br>
But that app gives a retrospective view of the data - it does not provide real-time insights.</p>
<p>Butler SOS focus on the opposite: Give as close to real-time insights as possible into what&rsquo;s happening in the Sense environment.</p>
<p>User behavior is then an important metric to track, more on this below.</p>
<h2 id="proxy-sessions">Proxy sessions</h2>
<p>A <em>session</em>, or more precisely a <em>proxy session</em> starts when a user logs into Sense and ends when the user logs out or the session inactivity timeout is reached.<br>
There may be some additional corner-case variants, but the above is the basic, high-level definition of a proxy session.</p>
<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>Some useful lingo: The events that can happen for sessions are that they can <em>start</em> and <em>stop</em>.</p>
<p>They can also <em>timeout</em> if the user is inactive long enough (the exact time depends on settings in the QMC).</p></div>

<p>As long as a user uses the same web browser and doesn&rsquo;t use incognito mode or similar, the user will reuse the same session for all access to Sense.<br>
On the other hand: If a user uses different browsers, incognito mode etc, multiple sessions will be registered for the user in question. There is a <a href="https://community.qlik.com/t5/Knowledge-Base/Increase-max-parallel-SessionCount-for-Qlik-Sense-end-user/ta-p/1717086">limit to how many sessions a user can have at any given time</a>.</p>
<p>Mashups and similar scenarios where Sense objects are embedded into web apps may result in multiple sessions being created. Whether or not this happens largely depends on how the mashup was created.</p>
<p>A good overview of what constitutes a session is found <a href="https://community.qlik.com/t5/Knowledge-Base/How-to-count-sessions-in-Qlik-Sense/ta-p/1714209">here</a>.</p>
<h3 id="proxy-session-vs-engine-sessions">Proxy session vs engine sessions</h3>
<p>The proxy service is responsible for handling users connecting to Qlik Sense.</p>
<p>When a user connects a <em>proxy session</em> is created - assuming the user has permissions to access Sense.</p>
<p>When interacting with individual charts in a Sense app, <em>engine sessions</em> are used to interact with the engine service.</p>
<p>A user typically thus have one (or a few) proxy session and then a larger number of transient engine sessions.</p>
<p>More info <a href="https://help.qlik.com/en-US/sense-developer/May2024/Subsystems/Platform/Content/Sense_PlatformOverview/Concepts/sessions.htm">here</a>.</p>
<h2 id="connections">Connections</h2>
<p>A user may open more than one <em>connection</em> within a session.</p>
<p>A connection is opened when the user opens an app in a browser tab, or when a user opens a mashup which in turn triggers a connection to a Sense app to be set up.<br>
Closing the browser tab will close the connection.</p>
<div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>Some useful lingo: The events that can happen for connections are that they can be <em>opened</em> and <em>closed</em>.</p></div>

<h2 id="user-events">User events</h2>
<p>Butler SOS offers a way to monitor individual session and connection events, as they happen.</p>
<p>This is done by Butler SOS hooking into the logging framework of Qlik Sense, which will notify Butler SOS when users start/stop sessions or connections are being open/closed.<br>
The concept is identical to how Butler SOS gets metrics and log events from Sense.</p>
<p>A blacklist in the main config file provides a way to exclude some users (e.g. system accounts) from the user event monitoring.</p>
<p>Configuration of user events monitoring is done in the main config file&rsquo;s <code>Butler-SOS.userEvents</code> section.<br>
A step-by-step instruction for setting up user event monitoring is available in the <a href="/docs/getting_started/setup/user-events/">Getting started section</a>.
More info about the config file is available <a href="/docs/reference/config_file_format/">here</a>.</p>
<p>On an aggregated level this information is useful to understand how often users log in/out, when peak ours are etc.
On a detailed level this information is extremely useful when trying to understand which users had active sessions when some error occurred.<br>
Think investigations such as &ldquo;who caused that 250 GB drop in RAM we were just alerted about?&rdquo;.</p>
<p><img src="/docs/concepts/sessions-connections/butler-sos-user-events-graph-1.png" alt="User events in Grafana dashboard" title="User events in Grafana dashboard"></p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-e043a76d0facae64d9dff8af44d69a73">3.3 - Log events</h1>
    
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-d3f37fe9a34c2b149d9d7ce755fbd78f">3.3.1 - Log events overview</h1>
    <div class="lead"><p>Butler SOS can capture <em>very</em> detailed information about individual charts in apps - or just the high-level information about the apps themselves.</p>
<p>This page explains the different levels of engine performance data that Butler SOS can provide.</p>
</div>
	<h2 id="three-levels-of-log-event-data">Three levels of log event data</h2>
<p>Depending on the needs of the Sense admin, Butler SOS can provide three levels of log event data, ranging from high-level counters to detailed performance data for individual charts in apps.</p>
<p>The most high-level data is the &ldquo;log event counters&rdquo;, which can be enabled/disabled independently of the more detailed engine performance events.<br>
The engine performance events are then divided into &ldquo;rejected&rdquo; and &ldquo;accepted&rdquo; events, with the latter being the most detailed.</p>
<p>It&rsquo;s usually a good idea to start with the high-level metrics and then enable more detailed metrics if needed.</p>
<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice info" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#info-notice"></use></svg></span>Info</p><p>The counters for top-level metrics and rejected performance log events are reset to zero every time Butler SOS is restarted, as well as every time counter data is sent to InfluxDB.<br>
I.e. the counters are not cumulative over time, but rather show the number of events since the last restart/save.</p>
<p>This makes it easy to create Grafana dashboards that show the number of events during the selected time interval, for example.<br>
Just sum the counter fields in the Grafana chart, and you&rsquo;re done.</p></div>

<h3 id="high-level-event-counters">High level: Event counters</h3>
<p>Event counters can be enabled independently of engine performance events.<br>
The counters are configured in the <code>Butler-SOS.qlikSenseEvents.eventCount</code> section in the Butler SOS config file.</p>
<p>When enabled, Butler SOS will count the number of log and user events that are received from Qlik Sense via UDP messages.</p>
<p>The counters are split across several dimensions, described in the <a href="/docs/reference/available_metrics/influxdb/#event-counters">reference section</a>.</p>
<p>These counters can be used to get a general idea of which servers generate the most log events, which Windows services generate the most events, and so on.</p>
<p>A Grafana dashboard can look like this:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/concepts/log-events/log-events-overview/butler-sos-event-counter-1_hu_fcee4e78804e4a90.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Butler SOS event counter charts in Grafana.

</p>
</figcaption>
</figure>

<h3 id="medium-rejected-performance-log-events">Medium: Rejected performance log events</h3>
<p>If an event with <code>source=qseow-qix-perf</code> <em>does not</em> meet the include filter criteria in the config file, it is considered a &ldquo;rejected&rdquo; event.</p>
<p>For rejected events a set of counters are kept, broken down by dimensions described in the <a href="/docs/reference/available_metrics/influxdb/#rejected-performance-log-events">reference section</a>.</p>
<p>As both app id/name and the engine method (for example <code>Global::OpenApp</code>) are included as a dimension in the InfluxDB data, it&rsquo;s possible to create Grafana dashboards that show how long time each app takes to open.</p>
<p>A Grafana dashboard can look like this:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/concepts/log-events/log-events-overview/butler-sos-rejected-performance-log-events-1_hu_267930e72fc17f12.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Butler SOS rejected performance log events dashboard in Grafana.

</p>
</figcaption>
</figure>

<p>In the upper right chart above we can see that all apps except one open quickly.<br>
Might be a good idea to investigate why the app &ldquo;Training - Field indexing DEV&rdquo; takes so long to open.</p>
<p>More Grafana examples <a href="/docs/concepts/log-events/app-object-performance-monitoring/">here</a>.</p>
<h3 id="detailed-accepted-performance-log-events">Detailed: Accepted performance log events</h3>
<p>If an event with <code>source=qseow-qix-perf</code> <em>does</em> meet the include filter criteria in the config file, it is considered an &ldquo;accepted&rdquo; event.</p>
<p>All accepted events will result in a set of detailed performance metrics being stored in InfluxDB.<br>
The metrics are described in the <a href="/docs/reference/available_metrics/influxdb/#accepted-performance-log-events">reference section</a>.</p>
<p>An example Grafana dashboard can look like this:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/concepts/log-events/log-events-overview/butler-sos-accepted-performance-log-events-1_hu_a1990af2966acc68.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Butler SOS accepted performance log events dashboard in Grafana.

</p>
</figcaption>
</figure>

<p>The upper left chart shows total &ldquo;work time&rdquo; per app, during the selected time interval.<br>
Work time is the time it takes for the engine to do the actual work, like calculating the chart data after a selection is made by the user.</p>
<p>The chart shows that the app &ldquo;Training - Field indexing&rdquo; has a high work time.<br>
This does not have to be a problem, but it&rsquo;s worth investigating why the number is so high.</p>
<p>The bottom two charts show the work time <em>per chart object</em>, per app.<br>
The chart tells us that two app objects take on the order of 5 seconds each to calculate.</p>
<p>Which objects are these?</p>
<p>Open the app in Chrome and use the &ldquo;Add Sense for Chrome&rdquo; extension to find out.<br>
Turns out it&rsquo;s the two tables (object 10 and 11) that take a long time to update - that&rsquo;s expected (but not ideal!) as they contain a lot of complex data that takes time to index.</p>
<p>If the update times get even longer, it might be a good idea to look into the data model and see if it can be optimized.</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/concepts/log-events/log-events-overview/butler-sos-accepted-performance-log-events-8_hu_4388b051d6560684.png" width="1200" height="684">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


The "Add Sense for Chrome" extension showing the object ID for objects on a sheet.

</p>
</figcaption>
</figure>


</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-8d45847027bddbbd36322ad7244ac7e7">3.3.2 - Errors &amp; Warnings</h1>
    <div class="lead"><p>Warnings lead to errors.<br>
Errors lead to unhappy users.<br>
Unhappy users call you.</p>
<p>Wouldn&rsquo;t you rather get the warnings yourself, before anyone else?</p>
</div>
	<h2 id="sense-log-events">Sense log events</h2>
<p>Sense creates a large number of log files for the various parts of the larger Qlik Sense Enterprise environment.<br>
Those logs track more or less everything - from extensions being installed, users logging in, to incorrect structure of Active Directory user directories.</p>
<p>Butler SOS monitors select parts of these logs and provides a way to get an aggregated, close to real-time view into warnings and errors.</p>
<p>The <a href="/docs/getting_started/setup/log-events/">log events</a> page has more info on this.</p>
<h2 id="grafana-dashboards">Grafana dashboards</h2>
<p>Butler SOS stores the log events in InfluxDB together with all other metrics.<br>
It is therefore possible to create Grafana dashboards that combine both operational metrics (apps, sessions, server RAM/CPU etc) with warning and error related charts and tables.</p>
<p>Showing warnings and errors visually is often an effective way to quickly identify developing or recurring issues.</p>
<h3 id="example-1-circular-active-directory-references">Example 1: Circular Active Directory references</h3>
<p>Here is an example where bursts of warnings tell us visually that something is not quite right.<br>
50-60 warnings arriving in bursts every few minutes - something is not right.<br>
There is also a single error during this time period - what&rsquo;s going on there?</p>
<p>We can then look at the actual warnings (=log events) to see what&rsquo;s going on.</p>
<p>In this case it turns out to be circular references in the Active Directory data used in Qlik Sense. Not a problem with Sense per se, but still something worth looking into:</p>
<p><img src="/docs/concepts/log-events/errors-warnings/butler-sos-warnings-errors-graph-1.png" alt="Warnings and errors from Qlik Sense in Grafana dashboard" title="Warnings and errors from Qlik Sense in Grafana dashboard"></p>
<p><img src="/docs/concepts/log-events/errors-warnings/butler-sos-warnings-table-1.png" alt="Warnings from Qlik Sense in Grafana table" title="Warnings from Qlik Sense in Grafana table"></p>
<p>Looking at that single error then, it turns out it&rsquo;s caused by a task already running when it was scheduled to start:</p>
<p><img src="/docs/concepts/log-events/errors-warnings/butler-sos-errors-table-1.png" alt="Errors from Qlik Sense in Grafana table" title="Errors from Qlik Sense in Grafana table"></p>
<h3 id="example-2-session-bursts-causing-proxy-overload">Example 2: Session bursts causing proxy overload</h3>
<p>This example is would have been hard or impossible to investigate without Butler SOS.</p>
<p>The problem was that the Sense environment from time to time became very slow or even unresponsive. A restart solved the problem.</p>
<p>Grafana was set up to send alerts when session count increase very rapidly. Thanks to this actions could be taken within minutes from the incident occurring.</p>
<p>Looking in the Grafana dashboard could then show something like below.<br>
New sessions started every few seconds, all coming from a single client. The effect for this Sense user was that Sense was unresponsive.</p>
<p>The log events section of the Grafana dashboard showed that this user had been given 5 proxy sessions, after which further access to Sense internal resources (engine etc) was denied.</p>
<p><img src="/docs/concepts/log-events/errors-warnings/butler-sos-session-runaway-1.png" alt="Sessions increasing very quickly" title="Qlik Sense sessions increasing very quickly"></p>
<p>In this case the problem was caused by a mashup using iframes that when recovering from session timeouts caused race conditions, trying to re-establish a session to Sense over and over again.</p>
<h2 id="alerts">Alerts</h2>
<p>Both New Relic and Grafana includes a set of built-in alert features that can be used to set up alerts as well as forward them to destinations such as Slack, MS Teams, email, Discord, Kafka, Webhooks, PagerDuty and others.</p>
<p>More info about Grafana alerts <a href="https://grafana.com/docs/grafana/latest/alerting/notifications/">here</a>.<br>
New Relic alerts described <a href="https://docs.newrelic.com/docs/alerts-applied-intelligence/new-relic-alerts/learn-alerts/introduction-alerts/">here</a>.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-1aa41e71096e07870129f911369bead9">3.3.3 - Getting rid of Sense log noise</h1>
    <div class="lead"><p>Let&rsquo;s say Butler SOS is configured to receive log events from Qlik Sense Enterprise, specifically warnings and errors.</p>
<p>In the best of worlds there will be few such events, but in reality there are usually more than expected. It&rsquo;s not uncommon for a Sense cluster to generate hundreds or even thousands of error and warning events per hour.</p>
<p>By categorizing these events, Butler SOS can help you focus on the most important ones, and ignore the rest.</p>
</div>
	<h2 id="what-kind-of-log-events-are-there">What kind of log events are there?</h2>
<p>Log events originate from the Qlik Sense logging framework, which is called Log4Net.</p>
<p>The framework is responsible for logging things to Qlik Sense&rsquo;s own log files, but <a href="https://help.qlik.com/en-US/sense-admin/May2024/Subsystems/DeployAdministerQSE/Content/Sense_DeployAdminister/QSEoW/Deploy_QSEoW/Server-Logging-Using-Appenders.htm">can also be extended</a> in various ways - for example by sending log events as UDP messages to Butler SOS.<br>
This is done by deploying XML files in well defined folders on the Sense servers, these files are called &ldquo;log appender files&rdquo;.</p>
<p>Log4Net assigns a log level to all log events, these are on of the following: <code>DEBUG</code>, <code>INFO</code>, <code>WARN</code>, <code>ERROR</code> and <code>FATAL</code>.</p>
<p>The log appender files that ship with Butler SOS are configured to send <code>WARN</code> and <code>ERROR</code> events to Butler SOS, from the repository, proxy, engine, and scheduler services in Qlik Sense.</p>
<p>So, what Butler SOS receives is a stream of log events, with a log level of either <code>WARN</code> or <code>ERROR</code>, from the repository, proxy, engine, and scheduler services in Qlik Sense.</p>
<p>That&rsquo;s all fine, but it&rsquo;s not uncommon for a Sense cluster to generate way more warnings and errors than expected by the Sense admin person.<br>
The challenge then becomes to focus on the most important events, and ignore the rest.</p>
<h2 id="how-to-categorize-log-events">How to categorize log events</h2>
<p>Let&rsquo;s say there are 1000 log events per hour.</p>
<p>When looking at the log events, it turns out that 95% of them are either about</p>
<ul>
<li>people getting https certificate warnings when accessing the Qlik Sense Hub&hellip;</li>
<li>&hellip;people getting access denied errors when trying to open an app&hellip;</li>
<li>&hellip;or that Sense has detected something unusual (like a circular reference) in an Active Directory user directory.</li>
</ul>
<p>Those events are not good, but they are not critical either.<br>
They are things that can be fixed in a controlled way, and they won&rsquo;t bring the Sense cluster to its knees.</p>
<p>But there may also be a few log events that are related to the Sense central node not being able to connect to one of the rim nodes.
Maybe the events occur at irregular intervals and therefore more difficult to detect.</p>
<p>These events <strong><em>are</em></strong> critical, and should be investigated immediately.</p>
<p>If Butler SOS is configured to categorize the certificate warnings as &ldquo;user-certificate, the Active Directory warnings as &ldquo;active-directory&rdquo; and the access-denied warnings as &ldquo;access-denied&rdquo;, <em>that information is then added as tags to the event data that is stored in InfluxDB</em>.</p>
<p>This means that when creating Grafana dashboards, it&rsquo;s possible to create a table that show the number of &ldquo;user-certificate&rdquo; events and the number of &ldquo;active-directory&rdquo; events - and the number of &ldquo;other&rdquo; events.</p>
<p>Another Grafana panel can show detailed event info for the &ldquo;other&rdquo; events, making it easy to investigate what they are about.</p>
<blockquote>
<p>By categorizing log events it is possible to get rid of the log noise that hides the important events.</p></blockquote>
<h2 id="sample-grafana-dashboard">Sample Grafana dashboard</h2>
<p>A few charts and tables give a good overview of the log events.</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/concepts/log-events/catgorising-log-events/butler-sos-grafana-log-event-categorise-1_hu_8faf7b9731c7683f.png" width="1200" height="423">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Butler SOS log events dashboard in Grafana. Uncategorized events by the yellow arrows, and in table/charts to the right.

</p>
</figcaption>
</figure>

<h3 id="butler-sos-configuration">Butler SOS Configuration</h3>
<p>The following settings in the Butler SOS config file were used to categorize the log events that were used in the Grafana dashboard above.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">Butler-SOS</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Log events are used to capture Sense warnings, errors and fatals in real time</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">logEvents</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">udpServerConfig</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">serverHost</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">0.0.0.0</span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#8f5902;font-style:italic"># Host/IP where log event server will listen for events from Sense</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">portLogEvents</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">9996</span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#8f5902;font-style:italic"># Port on which log event server will listen for events from Sense</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">tags</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">env</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">DEV</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">foo</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">bar</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">source</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">engine</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                   </span><span style="color:#8f5902;font-style:italic"># Should log events from the engine service be handled?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">proxy</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                   </span><span style="color:#8f5902;font-style:italic"># Should log events from the proxy service be handled?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">repository</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                   </span><span style="color:#8f5902;font-style:italic"># Should log events from the repository service be handled?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">scheduler</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                   </span><span style="color:#8f5902;font-style:italic"># Should log events from the scheduler service be handled?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">qixPerf</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                   </span><span style="color:#8f5902;font-style:italic"># Should log events relating to QIX performance be handled?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">categorise</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                        </span><span style="color:#8f5902;font-style:italic"># Take actions on log events based on their content</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">rules</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                           </span><span style="color:#8f5902;font-style:italic"># Rules are used to match log events to filters</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:bold">description</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Find access denied errors</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">logLevel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># Log events of this Log level will be matched. WARN, ERROR, FATAL. Case insensitive.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#000">WARN</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#000">ERROR</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">action</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">categorise          </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Action to take on matched log events. Possible values are categorise, drop</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">category</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># Category to assign to matched log events. Name/value pairs.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                       </span><span style="color:#8f5902;font-style:italic"># Will be added to InfluxDB datapoints as tags.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">qs_log_category</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">access-denied</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">filter</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                      </span><span style="color:#8f5902;font-style:italic"># Filter used to match log events. Case sensitive.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:bold">type</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">sw                </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Type of filter. sw = starts with, ew = ends with, so = substring of</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;Access was denied for User:&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:bold">type</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">so</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">was denied for User</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:bold">description</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Find AD issues</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">logLevel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># Log events of this Log level will be matched. WARN, ERROR, FATAL. Case insensitive.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#000">ERROR</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#000">WARN</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">action</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">categorise          </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Action to take on matched log events. Possible values are categorise, drop</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">category</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># Category to assign to matched log events. Name/value pairs.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                       </span><span style="color:#8f5902;font-style:italic"># Will be added to InfluxDB datapoints as tags.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">qs_log_category</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">user-directory</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">filter</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                      </span><span style="color:#8f5902;font-style:italic"># Filter used to match log events. Case sensitive.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:bold">type</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">sw                </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Type of filter. sw = starts with, ew = ends with, so = substring of</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Duplicate entity with userId</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:bold">description</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Qlik Sense service down</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">logLevel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># Log events of this Log level will be matched. WARN, ERROR, FATAL. Case insensitive.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#000">WARN</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">action</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">categorise          </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Action to take on matched log events. Possible values are categorise, drop</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">category</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># Category to assign to matched log events. Name/value pairs.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                       </span><span style="color:#8f5902;font-style:italic"># Will be added to InfluxDB datapoints as tags.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">qs_log_category</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">qs-service</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">filter</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                      </span><span style="color:#8f5902;font-style:italic"># Filter used to match log events. Case sensitive.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:bold">type</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">sw                </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Type of filter. sw = starts with, ew = ends with, so = substring of</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Failed to request service alive response from</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:bold">type</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">so                </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Type of filter. sw = starts with, ew = ends with, so = substring of</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Unable to connect to the remote server</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span>- <span style="color:#204a87;font-weight:bold">description</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Reload task failed</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">logLevel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># Log events of this Log level will be matched. WARN, ERROR, FATAL. Case insensitive.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#000">WARN</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#000">ERROR</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">action</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">categorise          </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Action to take on matched log events. Possible values are categorise, drop</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">category</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># Category to assign to matched log events. Name/value pairs.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># Will be added to InfluxDB datapoints as tags.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">qs_log_category</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">reload-failed</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">filter</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                      </span><span style="color:#8f5902;font-style:italic"># Filter used to match log events. Case sensitive.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:bold">type</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">sw                </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Type of filter. sw = starts with, ew = ends with, so = substring of</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Task finished with state FinishedFail</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:bold">type</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">sw                </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Type of filter. sw = starts with, ew = ends with, so = substring of</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Task finished with state Error</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:bold">type</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ew                </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Type of filter. sw = starts with, ew = ends with, so = substring of</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Reload failed in Engine. Check engine or script logs.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:bold">type</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">sw                </span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Type of filter. sw = starts with, ew = ends with, so = substring of</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Reload sequence was not successful (Result=False, Finished=True, Aborted=False) for engine connection with handle</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">ruleDefault</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                     </span><span style="color:#8f5902;font-style:italic"># Default rule to use if no other rules match the log event</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">category</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">qs_log_category</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">unknown</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div>
</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-55b0693567350907dbecdefe43bcfa17">3.3.4 - App performance monitoring</h1>
    <div class="lead"><p>Users complain about an app being slow to open.<br>
Or that a certain chart is slow to update.</p>
<p>Butler SOS can help you understand what&rsquo;s going on by providing very detailed, real-time performance metrics for all apps or just a few.</p>
<p>For all charts or just some.</p>
</div>
	<h2 id="knowing-is-better-than-guessing">Knowing is better than guessing</h2>
<p>Monitoring a Qlik Sense environment - or any system - comes down to knowing what&rsquo;s going on.<br>
If you don&rsquo;t know what&rsquo;s going on, you&rsquo;re guessing.</p>
<p>And if you&rsquo;re guessing, you&rsquo;re not in control.</p>
<p>If you&rsquo;re not in control, well - that&rsquo;s a bad place to be..</p>
<h3 id="qliks-performance-analysis-apps">Qlik&rsquo;s performance analysis apps</h3>
<p>Qlik has a couple of apps that can be used to analyze performance data from Qlik Sense Enterprise on Windows.</p>
<p>First, the <strong>Operations Monitor</strong> app ships with every instance of Qlik Sense Enterprise on Windows.<br>
This app is the go-to tool for retrospective analysis of what&rsquo;s going on in a Sense environment.</p>
<p>The app puts all the great features of Qlik Sense to good use on top of the Sense logs it has access to.<br>
What apps were reloaded when, which reload tasks failed most, which users are most active, etc.</p>
<p>Then there&rsquo;s the <strong>Telemetry Dashboard</strong> app.</p>
<p>It uses the same data as Butler SOS, but as it&rsquo;s a Sense app it must be reloaded in order to get updated data.<br>
Butler SOS on the other hand uses real-time delivery of the events from Sense&rsquo;s Log4Net logging framework.</p>
<p>If you want to do retrospective analysis of detailed performance data, the <a href="https://adminplaybook.qlik-poc.com/docs/tooling/telemetry_dashboard.html">Telemetry Dashboard app</a> is an excellent choice.</p>
<p><a href="https://help.qlik.com/en-US/sense-admin/May2024/Subsystems/DeployAdministerQSE/Content/Sense_DeployAdminister/QSEoW/Deploy_QSEoW/telemetry-logging.htm">This page</a> provides additional info about the telemetry logging available in Qlik Sense.</p>
<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice info" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#info-notice"></use></svg></span>Info</p><p>Qlik&rsquo;s Telemetry Dashboard app requires you to enable performance logging for the Engine service in the QMC.<br>
The effect is that you get a new set of Sense log files that are likely to quickly become <strong>BIG</strong>.</p>
<p>By using Butler SOS you can get the same metrics and insights, but without the need to enable performance logging in the QMC.<br>
I.e. saving disk space and getting real-time data instead of data that&rsquo;s hours or days old.</p>
<p>Which is better? That depends on your use case and what you want to achieve.</p></div>

<h2 id="lots-of-use-cases">Lots of use cases</h2>
<p>Categorization of events can be done in different ways depending on what you want to achieve.<br>
Here are some examples of what can be done using Butler SOS:</p>
<ul>
<li>You want high level insights into how long various app actions take for all apps.
<ul>
<li>Turn on engine performance monitoring in general, but no need for app details</li>
<li>Enable tracking of rejected performance log events. This will capture high-level metrics (such as time used and number of events) for all methods/commands used in the engine.</li>
<li>Create a Grafana dashboard that shows the average time taken for each method/command.</li>
<li>🎉 You get immediate, visual insight into how fast (or slow) apps open.</li>
</ul>
</li>
<li>Users complain about an app being slow to open.
<ul>
<li>Turn on performance logging for app open events from that particular app. Store data in InfluxDB.</li>
<li>Create a Grafana dashboard that shows a histogram of app open times for that app.</li>
<li>🎉 You get hard numbers on how long the app usually takes to often, and what the outliers are.</li>
</ul>
</li>
<li>A certain chart is slow to update.
<ul>
<li>Turn on performance logging for that specific app and chart. Store data in InfluxDB.</li>
<li>Create a Grafana dashboard that shows a histogram of chart update times for that chart. Or add a new chart to an existing dashboard.</li>
<li>Define alerts in Grafana so you get notified if rendering time for the chart exceeds some threshold.</li>
<li>Use Butler SOS&rsquo; user events features to keep track of what users access the app when the chart is slow.</li>
<li>🎉 You know in real-time how many and which users were impacted, and get a notification when it happens.</li>
</ul>
</li>
<li>You suspect that an app has a poorly designed data model.
<ul>
<li>Enable detailed performance monitoring for that specific app</li>
<li>Create a Grafana dashboard that
<ul>
<li>tracks the &ldquo;traverse_time&rdquo; metric. This metric shows how long it takes to traverse the data model. A poorly designed data model tend to have longer traverse times. Break it down by app object and proxy session.</li>
<li>tracks the render time for each chart and table in the app. Slow charts and tables <em>may</em> be caused by a bad data model, but not always. Lots of (complex) data may also be a reason.</li>
</ul>
</li>
<li>🎉 You get real-time insight into which objects are slow for what users, due to a bad data model in that specific app.</li>
</ul>
</li>
</ul>
<h2 id="performance-log-events">Performance log events</h2>
<p>A &ldquo;performance log event&rdquo; is a log event that originates from the Qlik Sense engine, more specifically from the &ldquo;QixPerformance.Engine.Engine&rdquo; subsystem.<br>
They are sent to Butler SOS as UDP messages, just like regular log events (using the same port).</p>
<p>The performance log events have <code>INFO</code> log level in the Sense logs but still provide <em>very</em> detailed information about what the engine is doing.</p>
<div class="notice warning" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#warning-notice"></use></svg></span>Warning</p><p>The XML appender files that ship with Butler SOS don&rsquo;t do any filtering of log events.</p>
<p>This means that all events from the &ldquo;QixPerformance.Engine.Engine&rdquo; subsystem are sent to Butler SOS, regardless of what they are about.<br>
The filtering is then done (if configured) by Butler SOS.</p>
<p>For large Sense environments, there can therefore be a lot of UDP messages sent to Butler SOS.<br>
This is usually not a problem, but at some point Butler SOS may become overwhelmed and start dropping messages.</p>
<p>Use the <a href="/docs/getting_started/setup/qliksense-events/#counters-for-user-and-log-events">log message counter</a> feature in Butler SOS to keep track of how many messages are received - this can be a good indicator of how close Butler SOS is to its limits.</p></div>

<h3 id="accepted-vs-rejected-performance-log-events">Accepted vs rejected performance log events</h3>
<p>Due to the potential high volume of performance log events sent by Qlik Sense, Butler SOS has a filtering feature that can be used to only store the events that are of interest.</p>
<p>Events that meet the filtering criteria are called &ldquo;accepted&rdquo; events, and events that don&rsquo;t are &ldquo;rejected&rdquo; events.</p>
<p>Accepted events are stored in InfluxDB, including detailed performance metrics for the event.<br>
Details on what is stored for accepted events can be found in the <a href="/docs/reference/available_metrics/influxdb/#source-engine-service-performance-related-events">reference section</a>.</p>
<p>Rejected events are not stored in InfluxDB, but are still <em>counted</em> by Butler SOS.<br>
This feature can be enabled/disabled in the Butler SOS config file. More info <a href="/docs/getting_started/setup/qliksense-events/#rejected-events">here</a>.</p>
<h3 id="data-available-for-accepted-and-rejected-events">Data available for accepted and rejected events</h3>
<p>The full set of data stored for accepted events is described in the <a href="/docs/reference/available_metrics/influxdb/#source-engine-service-performance-related-events">reference section</a>.</p>
<h2 id="suggested-workflows-for-different-use-cases">Suggested workflows for different use cases</h2>
<p>For some use high-level cases, such as identifying apps that are slow to load, the data for rejected events may be sufficient.</p>
<p>Other uses cases, such as monitoring the behavior of specific app objects (charts, tables etc), require the detailed data stored for accepted events.</p>
<p>The recommended, general principle is:</p>
<blockquote>
<p>Start with the data captured via rejected events (counter and process_time), and then add detailed monitoring.<br>
The detailed monitoring involves setting up filters to capture specific events for specific apps and/or app objects and/or engine methods.</p>
<p>Also: make sure to have a reasonably short retention period (10-14 days are usually enough) for the InfluxDB database, as the performance log events can generate a lot of data that can easily affect the performance of the InfluxDB instance.</p></blockquote>
<h2 id="grafana-dashboard-examples">Grafana dashboard examples</h2>
<h3 id="high-level-monitoring-of-app-performance-rejected-events">High-level monitoring of app performance (rejected events)</h3>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/concepts/log-events/app-object-performance-monitoring/butler-sos-rejected-performance-log-events-1_hu_267930e72fc17f12.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


High level metrics (counters and process_time) for apps in a Sense environment.

</p>
</figcaption>
</figure>

<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/concepts/log-events/app-object-performance-monitoring/butler-sos-rejected-performance-log-events-2_hu_42ae7e8d19208df8.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Average time opening apps in a Sense environment. Note the long time for the app "Training - Field indexing DEV".

</p>
</figcaption>
</figure>

<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/concepts/log-events/app-object-performance-monitoring/butler-sos-rejected-performance-log-events-3_hu_f756a43dbd814933.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Total time spent on different engine operations, across all apps that were accessed during the selected time interval. Note the long time for the "Global::OpenApp" operation - this comes from one or more apps being slow to open.

</p>
</figcaption>
</figure>

<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/concepts/log-events/app-object-performance-monitoring/butler-sos-rejected-performance-log-events-4_hu_bd9c3e44431d9d23.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Min, medium and max time spent opening apps in a Sense environment. Here we again see that most apps open quickly, but one app takes a long time to open. We can also see that once that app is in memory, it's fast to open for subsequent users.

</p>
</figcaption>
</figure>

<h3 id="detailed-monitoring-of-app-object-performance-accepted-events">Detailed monitoring of app object performance (accepted events)</h3>
<p>A large set of metrics are stored for accepted performance log events, the examples below highlight just a few of them.</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/concepts/log-events/app-object-performance-monitoring/butler-sos-accepted-performance-log-events-1_hu_a1990af2966acc68.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Detailed performance metrics for app objects in two different Sense apps. "Work time" (upper left) is the time spent by the engine doing the actual work, like calculating chart data after a selection is made by the user.

</p>
</figcaption>
</figure>

<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/concepts/log-events/app-object-performance-monitoring/butler-sos-accepted-performance-log-events-2_hu_827de846ab2571b.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Work time per per app. The chart shows that one app dominates the work time.

</p>
</figcaption>
</figure>

<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/concepts/log-events/app-object-performance-monitoring/butler-sos-accepted-performance-log-events-3_hu_3ae04b4833973367.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Work time per object type, for all apps accessed during the chosen time interval. The chart shows that "auto-chart" and "table" objects take the most time to calculate. The "<Unknown>" object type is a catch-all for objects that Qlik Sense doesn't care to classify. It is also used in events sent during app reloads.

</p>
</figcaption>
</figure>

<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/concepts/log-events/app-object-performance-monitoring/butler-sos-accepted-performance-log-events-4_hu_67bb9e84afbeb5d.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Detailed information about the various engine performance events that have been captured.

</p>
</figcaption>
</figure>

<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/concepts/log-events/app-object-performance-monitoring/butler-sos-accepted-performance-log-events-5_hu_66a8407b05076f34.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


It is possible to inspect any value in the table, and easily copy it to the clipboard.

</p>
</figcaption>
</figure>

<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/concepts/log-events/app-object-performance-monitoring/butler-sos-accepted-performance-log-events-6_hu_9201f046f59fff99.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Work time per app object in the "Test data - Meetup.com DEV" app. Nothing stands out as particularly slow.

</p>
</figcaption>
</figure>

<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/concepts/log-events/app-object-performance-monitoring/butler-sos-accepted-performance-log-events-7_hu_18978b43b47c7a64.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Work time per app object in the "Training - Field indexing" app. The chart shows that two objects take on the order of 5 seconds each to calculate. This is worth investigating.

</p>
</figcaption>
</figure>

<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/concepts/log-events/app-object-performance-monitoring/butler-sos-accepted-performance-log-events-8_hu_4388b051d6560684.png" width="1200" height="684">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Looking at the app sheet where the two slow objects above are located, we can see that it's two tables, each containing strings with random characters. These are slow to index for the engine after a selection is done by the user (or when first opening the app), causing the high work time.

</p>
</figcaption>
</figure>


</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-e95fda65b1c97ee86f69da3fcc03382d">3.4 - Visualise Butler SOS config file</h1>
    <div class="lead"><p>Butler SOS has a built-in web server that can be used to visualise the configuration file, either as YAML or JSON.</p>
<p>Sensitive config values can be optionally be obfuscated in the visualization.</p>
</div>
	<h2 id="what-is-the-current-configuration">What is the current configuration?</h2>
<p>When Butler SOS starts up, it reads its configuration from a file.<br>
This file is the source of truth for the Butler SOS configuration, so when in doubt about what Butler SOS is doing, this is the place to look.</p>
<p>The config file can be hard to get to though, especially if Butler SOS is running in a container or on a remote machine.<br>
To make it easier to see what the current configuration is, Butler SOS has a built-in web server that can be used to visualise the configuration file, either as YAML or JSON.</p>
<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice info" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#info-notice"></use></svg></span>Info</p><p>This feature is described in the setup guide, <a href="/docs/getting_started/setup/config-file-visualisation/">here</a>.</p></div>


</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-fb0f854c53f1ba28ad4c2ccf8d24df34">4 - Examples</h1>
    <div class="lead">See Butler SOS in action!</div>
	

<div class="pageinfo pageinfo-primary">
<p>The whole SenseOps (<a href="https://github.com/ptarmiganlabs">Butler family of tools</a>, together with support tools like InfluxDB, Prometheus, Grafana etc) stack is really a platform that can be configured and used in lots of different ways.</p>
<p>Be curious and bold - extend the given examples and use cases with your own!
And when doing so - please consider sharing your successes (and failures..) with others, as inspiration and insight.</p>

</div>

<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>You are <em><strong>strongly</strong></em> recommended to use the latest version of Grafana with the latest version of Butler SOS.</p>
<p>That said, earlier Butler SOS versions included some nice demo dashboards too, these are still found below as a source for inspiration what can be done.</p></div>


</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-cc1b8c9c214ea88ebf273fe12e504b6b">4.1 - Visualizing Butler SOS metrics in New Relic</h1>
    <div class="lead">New Relic is a complete SaaS product that offers both data storage and powerful, yet easy to set up and use visualizations.</div>
	<p>In this dashboard most of the data comes from Butler SOS, but the failed reload pie chart and table at the top are created using data from the <a href="https://butler.ptarmiganlabs.com">Butler</a> tool.</p>
<p>New Relic does not give you nearly the same level control as Grafana does, for example when it comes to fine-tuning visual details of charts, tables etc.</p>
<p>That can feel a bit limiting at first, but as New Relic&rsquo;s query language is very powerful and is very well integrated in the chart editor, it&rsquo;s not really a problem.<br>
A benefit of New Relic&rsquo;s dashboards is that their dashboard editor very effectively guide you through the creation of charts, using the various kinds of data (metrics, events, logs) you have sent - and are sending - to their database.</p>
<p>New Relic dashboards are thus definitely on the same level as Grafana ditto, which one to use is a matter of preference.</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/examples/new-relic-dashboards/new-relic-dashboard-1_hu_8d26fa0dc1e896c8.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


New Relic dashboard with data from both Butler SOS and Butler (part 1).

</p>
</figcaption>
</figure>

<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/examples/new-relic-dashboards/new-relic-dashboard-2_hu_1a602afd65170325.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


New Relic dashboard with data from both Butler SOS and Butler (part 2).

</p>
</figcaption>
</figure>

<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/examples/new-relic-dashboards/new-relic-dashboard-3_hu_c0c8b22cd86fedf9.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Viewing failed reload logs from within New Relic can save lots of time when investigating incidents.

</p>
</figcaption>
</figure>


</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-1401fa1def94e1b098c2ffedc989cd38">4.2 - Visualizing Butler SOS metrics in Grafana</h1>
    <div class="lead">Grafana is a powerful tool for creating dashboards that visualise data from various sources.
This page shows examples of Grafana dashboards that visualise data from Butler SOS.</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-5b4fef8689c43e39f0e77e055c0e5ac6">4.2.1 - Qlik Sense monitoring using Butler SOS v9.2 and Grafana v9.1</h1>
    <div class="lead">Grafana 9 adds some interesting features around alerting as well as several new and improved chart types.</div>
	<p>A sample Grafana 9 dashboard is <a href="https://github.com/ptarmiganlabs/butler-sos/tree/master/docs/grafana">available in the Github repository</a>.</p>
<p>The visual appearance is quite similar to previous versions, but line charts, tables etc have been replaced with the updated variants that arrived with Grafana 9.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-6c457bbd56ae80802408b24a9a435763">4.2.2 - Qlik Sense monitoring using Butler SOS v7 and Grafana v8</h1>
    <div class="lead">With version 8 Grafana further establishes its position as the leading open source platform for observability and real-time dashboards.<br>
Butler SOS takes advantage of this, below a sample dashboard is shown.</div>
	<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>The screen shots below are taken from the Grafana 8 demo dashboard that&rsquo;s <a href="https://github.com/ptarmiganlabs/butler-sos/blob/master/docs/grafana/senseops_v7_0_dashboard.json">included in the Butler SOS repository</a>.</p>
<p>Feel free to modify it to your specific needs.</p></div>

<p>A concept that has proven useful many times is to use an overview dashboard to monitors high-level metrics for the entire Sense cluster. A separate, parameterized dashboard then drill into the details for each server.<br>
Grafana variables make this both easy to set up, scalable and very powerful.</p>
<p>Sample dashboards are available in the <a href="https://github.com/ptarmiganlabs/butler-sos/tree/master/docs/grafana">Git repository</a>.<br>
Before importing these to Grafana you should create a Grafana data source called &ldquo;senseops&rdquo;, and point it to your InfluxDB database. When you then import the dashboards they should find your database straight away.</p>
<h2 id="dashboard-installation">Dashboard installation</h2>
<p>The dashboard file <code>senseops_v7_0_dashboard.json</code> was created using Butler SOS 7.0 and Grafana 8. It thus uses the new chart, data transformation and alerting features that were introduced in Grafana 8.</p>
<h2 id="overview-metrics">Overview metrics</h2>
<p>The dashboard has a top section that&rsquo;s always expanded.<br>
A set of (by default) collapsed sections contain different kinds of metrics and log events.</p>
<p><img src="/docs/examples/grafana-dashboards/qliksense_monitoring_grafana8/butlersos_7_0_main_metrics.png" alt="Grafana dashboard" title="Top level metrics">
<em>Top level metrics</em></p>
<p>Low memory alerts can be set (using Grafana&rsquo;s alert feature). Such alerts can be sent (using features built into Grafana) as notifications to Slack, Teams, Pager Duty, as email etc.
To keep the dashboard nice and clean it&rsquo;s usually a good idea to put alert charts in their own section at the bottom, or in a separate dashboard dedicated to alerts.</p>
<h2 id="apps-in-memory">Apps in memory</h2>
<p>From a sysadmin perspective it&rsquo;s often interesting to know what apps are loaded into memory on each Sense server.<br>
For example, when a server is quickly loosing RAM it&rsquo;s extremely useful to be able to zoom in to the very minute when the RAM drop occurs, then look at what apps were present in memory. One of those apps is probably not well designed, or is at least using a lot of memory.</p>
<p>The dashboard separates regular apps and session apps.<br>
You can also use Grafana&rsquo;s standard filtering features to narrow down on the server(s) of interest.</p>
<p><img src="/docs/examples/grafana-dashboards/qliksense_monitoring_grafana8/butlersos_7_0_apps_in_memory.png" alt="Grafana dashboard" title="Apps loaded into memory">
<em>Apps loaded into memory</em></p>
<h2 id="users--sessions-per-server">Users &amp; sessions per server</h2>
<p>If things really go wrong wrong in a Qlik Sense Enterprise environment there connected users might be kicked out. It is therefore important to know at any given time how many users are connected, and be able to detect sudden drops in user count.</p>
<p>Another use case could be for maintenance windows: You then want to know how many - and which - users are connected, so you can send them a message that maintenance is about to start.</p>
<p><img src="/docs/examples/grafana-dashboards/qliksense_monitoring_grafana8/butlersos_7_0_users_sessions.png" alt="Grafana dashboard" title="Users and sessions per server">
<em>Users and sessions per server</em></p>
<h2 id="user-events">User events</h2>
<p>If Butler SOS has been configured to handle user level events coming from Sense, these are shown here.</p>
<p>You get information about where the event took place and which user has</p>
<ul>
<li>logged in (started a session)</li>
<li>logged out (stopped a session)</li>
<li>timed out (stopped a session)</li>
<li>opened a connection to a new app</li>
<li>closed a connection to an app (for example closed a browser tab)</li>
<li>&hellip; and more</li>
</ul>
<p><img src="/docs/examples/grafana-dashboards/qliksense_monitoring_grafana8/butlersos_7_0_users_events.png" alt="Grafana dashboard" title="Users and sessions per server">
<em>User events</em></p>
<h2 id="warnings--errors">Warnings &amp; Errors</h2>
<p>In previous Butler SOS demo dashboards this information came from log db.<br>
Starting with Butler SOS 7 the source of this data is instead the log events introduced in version 7.</p>
<p>Some of this information is also available in the standard Operations Monitor app in Qlik Sense Enterprise, but only in a retrospective way.<br>
Having access to it in close to real time makes it possible to act on developing issues quicker.</p>
<p>Charts provide overview while tables then give the actual messages, as they appear in the log files.</p>
<p><img src="/docs/examples/grafana-dashboards/qliksense_monitoring_grafana8/butlersos_7_0_errors_warnings_charts.png" alt="Grafana dashboard" title="Error and warning charts">
<em>Error and warning charts</em></p>
<p><img src="/docs/examples/grafana-dashboards/qliksense_monitoring_grafana8/butlersos_7_0_errors_warnings_table.png" alt="Grafana dashboard" title="Error and warning tables">
<em>Error and warning tables</em></p>
<p>It&rsquo;s also possible to drill down into individual warnings and errors to get very detailed information about what happened:</p>
<p><img src="/docs/examples/grafana-dashboards/qliksense_monitoring_grafana8/butlersos_7_0_errors_warnings_table_details.png" alt="Grafana dashboard" title="Error and warning tables">
<em>Detailed view into errors and warnings</em></p>
<h2 id="butler-sos-metrics">Butler SOS metrics</h2>
<p>Butler SOS is very robust indeed, but it may still be of interest to track its memory use, to make sure there aren&rsquo;t any memory leaks etc.</p>
<p><img src="/docs/examples/grafana-dashboards/qliksense_monitoring_grafana8/butlersos_7_0_butlersos_memory.png" alt="Grafana dashboard" title="Butler SOS memory usage">
<em>Butler SOS memory usage</em></p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-9435a4964452cecf6115601ce6500800">4.2.3 - Qlik Sense monitoring using Grafana 7</h1>
    <div class="lead">Grafana 7 is a big update when it comes to visualizations. Grafana was excellent already in version 6, but with v7 things are taken to a new level.</div>
	

<div class="pageinfo pageinfo-primary">
<p>The screen shots below are taken from the Grafana 7 sample dashboard <a href="https://github.com/ptarmiganlabs/butler-sos/blob/master/grafana/senseops_v5_4_dashboard.json">included in the Butler SOS repository</a>.</p>
<p>Feel free to modify it to your specific needs.</p>

</div>

<p>A concept that has proven useful many times is to use an overview dashboard to monitors high-level metrics for the entire Sense cluster. A separate, parameterized dashboard then drill into the details for each server.</p>
<p>Sample dashboards are available in the <a href="https://github.com/ptarmiganlabs/butler-sos/tree/master/docs/grafana">Git repository</a>.
Before importing these to Grafana you should create a Grafana data source called &ldquo;SenseOps&rdquo;, and point it to your InfluxDB database. When you then import the dashboards they should find your database straight away.</p>
<h2 id="overview-metrics">Overview metrics</h2>
<p>This view gives high level insights into the 3 virtual proxies (/sales, /sourcing, /finance) in this particular Sense environment, as well as top-level numbers on users and sessions.</p>
<p><img src="/docs/examples/grafana-dashboards/qliksense_monitoring_grafana7/butlersos_5_4_main_metrics.png" alt="Grafana dashboard" title="Top level metrics">
<em>Top level metrics</em></p>
<p>Low memory alerts can be set (using Grafana&rsquo;s alert feature). Such alerts can be sent (using features built into Grafana) as notifications to Slack, Teams, Pager Duty, as email etc.
To keep the dashboard nice and clean it&rsquo;s usually a good idea to put alert charts in their own section (see below for an example).</p>
<h2 id="apps-in-memory">Apps in memory</h2>
<p>From a sysadmin perspective it&rsquo;s often interesting to know what apps are loaded into memory on each Sense server.</p>
<p>Here you get the details broken down by regular apps and session apps.<br>
You can also use Grafana&rsquo;s standard filtering features to narrow down on the server(s) of interest.</p>
<p><img src="/docs/examples/grafana-dashboards/qliksense_monitoring_grafana7/butlersos_5_4_apps_in_memory.png" alt="Grafana dashboard" title="Apps loaded into memory">
<em>Apps loaded into memory</em></p>
<h2 id="users--sessions-per-server">Users &amp; sessions per server</h2>
<p>If things really go wrong wrong in a Qlik Sense Enterprise environment there connected users might be kicked out. It is therefore important to know at any given time how many users are connected, and be able to detect sudden drops in user count.</p>
<p>Another use case could be for maintenance windows: You then want to know how many - and which - users are connected, so you can send them a message that maintenance is about to start.</p>
<p><img src="/docs/examples/grafana-dashboards/qliksense_monitoring_grafana7/butlersos_5_4_users_sessions.png" alt="Grafana dashboard" title="Users and sessions per server">
<em>Users and sessions per server</em></p>
<h2 id="warnings--errors">Warnings &amp; Errors</h2>
<p>This information is available in the standard Operations Monitor app in Qlik Sense Enterprise, but only in a retrospective way.<br>
Having access to it in close to real time makes it possible to act on developing issues quicker.</p>
<p>Charts provide overview while tables then give the actual messages, as they appear in the log files.</p>
<p><img src="/docs/examples/grafana-dashboards/qliksense_monitoring_grafana7/butlersos_5_4_errors_warnings_charts.png" alt="Grafana dashboard" title="Error and warning charts">
<em>Error and warning charts</em></p>
<p><img src="/docs/examples/grafana-dashboards/qliksense_monitoring_grafana7/butlersos_5_4_errors_warnings_table.png" alt="Grafana dashboard" title="Error and warning tables">
<em>Error and warning tables</em></p>
<h2 id="butler-sos-metrics">Butler SOS metrics</h2>
<p>Butler SOS is very robust indeed, but it may still be of interest to track its memory use, to make sure there aren&rsquo;t any memory leaks etc.</p>
<p><img src="/docs/examples/grafana-dashboards/qliksense_monitoring_grafana7/butlersos_5_4_butlersos_memory.png" alt="Grafana dashboard" title="Butler SOS memory usage">
<em>Butler SOS memory usage</em></p>
<h2 id="alerts">Alerts</h2>
<p>While it&rsquo;s perfectly possible to include alerts in almost any Grafana chart, sometimes its nice to tuck the alert-enabled charts away, out of sight. They will do their job and alert when needed.</p>
<p><img src="/docs/examples/grafana-dashboards/qliksense_monitoring_grafana7/butlersos_5_4_alerts.png" alt="Grafana dashboard" title="Butler SOS memory usage">
<em>Alerts</em></p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-edd1984019ac3d9f0eec8b15ca829eb0">4.2.4 - Qlik Sense monitoring using Grafana 6</h1>
    <div class="lead">Probably the most obvious and common use case for Butler SOS. View Qlik Sense and Windows operational metrics in great looking Grafana dashboards.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Grafana is an incredibly capable tool for showing time series data.</p>
<p>The dashboards shown here are thus just examples and inspiration - feel free to extend and adapt these to meet your particular needs. There are also plenty of sample Grafana dashboards out there to get inspiration from.</p>
<p>If you experience issues with the Grafana dashboards included in the Butler SOS release on Github, you might want to try upgrading to a later/latest Grafana version.</p>

</div>

<p>This is a top use case for Butler SOS.<br>
These kind of dashboards give you detailed insights into several important metrics for your Sense servers:</p>
<ul>
<li>CPU load</li>
<li>Amount of free RAM memory</li>
<li>Number of sessions in total</li>
<li>Success rate of the Qlik engine&rsquo;s cache</li>
<li>Number of loaded apps in the Qlik engine</li>
</ul>
<p>A concept that has proven useful many times is to use an overview dashboard to monitors high-level metrics for the entire Sense cluster. A separate, parameterized dashboard then drill into the details for each server.</p>
<p>Sample dashboards are available in the <a href="https://github.com/ptarmiganlabs/butler-sos/tree/master/docs/grafana">Git repository</a>.
Before importing these to Grafana you should create a Grafana data source called &ldquo;SenseOps&rdquo;, and point it to your InfluxDB database. When you then import the dashboards they should find your database straight away.</p>
<h2 id="overview-dashboard">Overview dashboard</h2>
<p>An overview dashboard could look something like this:</p>
<p><img src="/docs/examples/grafana-dashboards/qliksense_monitoring_grafana6/senseops_overview_ram_usage.png" alt="Grafana dashboard" title="RAM usage in Grafana dashboard">
<em>RAM usage for each server</em></p>
<p>Low memory alerts can be set (using Grafana&rsquo;s alert feature). Such alerts can be sent (using features built into Grafana) as notifications to Slack, Teams, Pager Duty, as email etc.</p>
<br>
<p><img src="/docs/examples/grafana-dashboards/qliksense_monitoring_grafana6/senseops_overview_sessions_general.png" alt="Grafana dashboard" title="General sessions info in Grafana dashboard">
<em>General/high level user sessions info for both whole system and each server</em></p>
<br>
<p>You can also get very detailed sessions metrics, down to the level of individual sessions per server and virtual proxy.</p>
<p>One possible use case for this information is to see what users will be affected by a pending server reboot. You could even use this information to send a chat message to these users, informing them that their connection to Sense will be lost in x minutes. This feature is not available in Butler SOS out of the box, but is quite possible to implement if needed.</p>
<p>As of Butler SOS v5.0.0, detailed user session metrics stored in a fairly comprehensive way in InfluxDB. The visualization of these metrics is still kind of rough though. The charts below can serve as inspiration, but can surely be improved upon..</p>
<p><img src="/docs/examples/grafana-dashboards/qliksense_monitoring_grafana6/senseops_detailed_sessions.png" alt="Grafana dashboard" title="Detailed sessions info in Grafana dashboard">
<em>Detailed user sessions info per server and virtual proxy</em></p>
<br>
<p>When something breaks in a Qlik Sense environment the logs immediately fill up with warning and/or error messages. By keeping track of these it&rsquo;s easy to quickly spot (and get notified) issues when they first occur:</p>
<p><img src="/docs/examples/grafana-dashboards/qliksense_monitoring_grafana6/senseops_logs.png" alt="Grafana dashboard" title="SenseOps dashboard showing errors and warnings, using Grafana">
<em>Detailed user sessions info per server and virtual proxy</em></p>
<p>Note how there are <strong>lots</strong> of INFO level messages generated (note the y axis scales in the diagram above!).
In a production setting it&rsquo;s usually a good idea to turn off extraction of INFO level log messages into InfluxDB.</p>
<p>This is controlled in the <a href="/docs/reference/config_file_format/">YAML config file</a>.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-017005fb8e4eed4840a5162db7469692">4.3 - Count user and log events</h1>
    <div class="lead">This example shows how to use Butler SOS to count user and log events received from one or more Qlik Sense servers.</div>
	<h2 id="overview">Overview</h2>
<h3 id="goal">Goal</h3>
<p>The goal is to count how many user and log events are received from one or more Qlik Sense servers.</p>
<p>This can be useful for several reasons:</p>
<ul>
<li>To get a general feeling if the Qlik Sense environment is healthy or not. A sudden increase in the number of warnings, errors or fatals can be an early warning sign that something is wrong. The event counters can be seen as a kind of heart beat of the Qlik Sense environment. Too fast - or too slow - can be a sign of trouble.</li>
<li>The counters count <strong>all</strong> log and user events sent from the Qlik Sense servers to Butler SOS. They can be used to confirm that the Qlik Sense servers are indeed sending events to Butler SOS at all. Other, more detailed event data can then be used to drill down into the details of what is happening in the Qlik Sense environment.</li>
</ul>
<p>A Grafana dashboard is used to visualize the event counters:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/examples/count-log_user-events/butler-sos-event-counter-2_hu_9bc0c5528dbe8efd.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


A set of Grafana panels showing the number of user and log events received from two Qlik Sense servers. The panels are broken down by event type (log or user) and by server. The table contains event count per host, Sense service and subsystem.

</p>
</figcaption>
</figure>

<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li>Butler SOS 11.0 or later. Downloads are available <a href="https://github.com/ptarmiganlabs/butler-sos/releases">here</a>.</li>
<li>Store the data collected by Butler SOS in an InfluxDB v1 or v2 database. Setup instructions <a href="/docs/getting_started/setup/influxdb/">here</a></li>
<li>XML appender files deployed on the Sense servers you want to monitor. The appender files tell Sense to send log events to Butler SOS via UDP messages. Setup instructions <a href="/docs/getting_started/setup/qlik-sense-events/#log-appender-xml-files">here</a>.</li>
<li>A reasonably recent version of <a href="https://grafana.com/grafana/download">Grafana</a>. At the time of writing, Grafana 11.2 is the latest version.</li>
<li>Data connections set up in Grafana to the InfluxDB database where Butler SOS stores its data.</li>
</ul>
<h2 id="configure-butler-sos">Configure Butler SOS</h2>
<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice info" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#info-notice"></use></svg></span>Info</p><p>InfluxDB is the only supported database for this feature.<br>
It is configured elsewhere in the YAML config file, more info <a href="/docs/getting_started/setup/influxdb/">here</a>.</p></div>

<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Shared settings for user and log events (see below)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">qlikSenseEvents</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># Shared settings for user and log events (see below)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">influxdb</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># Should summary (counter) of user/log events, and rejected events be stored in InfluxDB?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">writeFrequency</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">20000</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># How often (milliseconds) should event counts be written to InfluxDB?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Log events are used to capture Sense warnings, errors and fatals in real time</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Shared settings for user and log events (see below)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">qlikSenseEvents</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># Shared settings for user and log events (see below)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">influxdb</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># Should summary (counter) of user/log events, and rejected events be stored in InfluxDB?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">writeFrequency</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">20000</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># How often (milliseconds) should rejected event count be written to InfluxDB?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">eventCount</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                     </span><span style="color:#8f5902;font-style:italic"># Track how many log and user events are received from Sense.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                    </span><span style="color:#8f5902;font-style:italic"># Some events are valid, some are not. Of the valid events, some are rejected by Butler SOS</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                    </span><span style="color:#8f5902;font-style:italic"># based on the configuration in this file.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># Should event count be stored in InfluxDB?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">influxdb</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">measurementName</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">event_count</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Name of the InfluxDB measurement where event count is stored</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">tags</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                       </span><span style="color:#8f5902;font-style:italic"># Tags are added to the data before it&#39;s stored in InfluxDB</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">qs_tag1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">somevalue1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">qs_tag2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">somevalue2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configure-grafana">Configure Grafana</h2>
<h3 id="total-count-of-user-and-log-events-received-from-two-qlik-sense-servers">Total count of user and log events received from two Qlik Sense servers</h3>
<p>The upper left panel of the Grafana dashboard at the top of this page is defined as below.</p>
<p>Note the two-layered query.<br>
It is needed to get the data from the InfluxDB database in a format that Grafana can use.</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/examples/count-log_user-events/butler-sos-event-counter-3_hu_9c577824131a6bdf.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Total count of user and log events received from two Qlik Sense servers.

</p>
</figcaption>
</figure>

<p>There are also a couple of transformations applied to the data:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/examples/count-log_user-events/butler-sos-event-counter-4_hu_49b9724ceabf0c6a.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Transformations applied to the data before it's displayed in the Grafana panel. The sorting is done to make sure the data is displayed in the correct order. Renaming/reorder is not used in this example.

</p>
</figcaption>
</figure>

<h3 id="count-of-user-and-log-events-per-host">Count of user and log events per host</h3>
<p>The center left panel of the Grafana dashboard at the top of this page is defined as below.<br>
The query is very similar to the one above, but with a different grouping.</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/examples/count-log_user-events/butler-sos-event-counter-5_hu_96821a5a0b08b4a7.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Count of user and log events per host.

</p>
</figcaption>
</figure>

<p>Transformations&hellip;</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/examples/count-log_user-events/butler-sos-event-counter-6_hu_a173cb324a5496d4.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Transformations applied to the data before it's displayed in the Grafana panel.

</p>
</figcaption>
</figure>

<h3 id="count-of-user-and-log-events-per-event-type">Count of user and log events per event type</h3>
<p>The lower left panel of the Grafana dashboard at the top of this page is defined as below.</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/examples/count-log_user-events/butler-sos-event-counter-7_hu_f5e011d4e46a87df.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Count of user and log events per event type.

</p>
</figcaption>
</figure>

<p>Transformations&hellip;</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/examples/count-log_user-events/butler-sos-event-counter-8_hu_10991b534d74653b.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Transformations applied to the data before it's displayed in the Grafana panel.

</p>
</figcaption>
</figure>

<h3 id="table-of-received-events">Table of received events</h3>
<p>The table at the right of the Grafana dashboard at the top of this page is defined as below.</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/examples/count-log_user-events/butler-sos-event-counter-9_hu_2a3e4fcf19b6035c.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Table of received events and event count per event type, host, Sense service/source and subsystem.

</p>
</figcaption>
</figure>

<p>Transformations&hellip;</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/examples/count-log_user-events/butler-sos-event-counter-10_hu_4f01cc70a2c7fbc6.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Transformations applied to the data before it's displayed in the Grafana panel.

</p>
</figcaption>
</figure>

<h2 id="next-steps">Next steps</h2>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-4ec7eb2bef1221c10858490cae5c1b93">4.4 - Monitor Qlik Sense engine performance in Grafana</h1>
    <div class="lead"><p>The combination of Butler SOS and Grafana provides a powerful combo for monitoring the performance of your Qlik Sense engines.</p>
<p>Here are some recipes for how to set up Butler SOS to implement various specific monitoring scenarios.</p>
</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-4a97186d0e2fad090925395978e13fdf">4.4.1 - Track how long it takes to open Sense apps</h1>
    <div class="lead">This example shows how to use Butler SOS to track how long it takes to open apps on a Qlik Sense server.</div>
	<h2 id="overview">Overview</h2>
<h3 id="goal">Goal</h3>
<p>The goal is to show how to use Butler SOS to track how long it takes to open apps on a Qlik Sense server.</p>
<p>This is useful for several reasons:</p>
<ul>
<li>It provides baseline for how long it takes to usually open apps on your server, and allows you to track changes over time.</li>
<li>It can help identify apps that are slow to open, and then investigate why.</li>
<li>Add Grafana based alerts to get notified when the time to open some app(s) exceeds a certain threshold.</li>
<li>If end users complain about slow app opening times, the concept in this tutorial can be used to verify if there actually is a problem, and if so, where and how severe it is.</li>
</ul>
<p>A Grafana chart showing this data could look something like this:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/examples/engine-performance-monitoring/open-time-all-apps/butler-sos-rejected-performance-log-events-2_hu_42ae7e8d19208df8.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Chart showing mean time needed to open apps on a Qlik Sense server.

</p>
</figcaption>
</figure>

<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li>Butler SOS 11.0 or later. Downloads are available <a href="https://github.com/ptarmiganlabs/butler-sos/releases">here</a>.</li>
<li>Store the data collected by Butler SOS in an InfluxDB v1 or v2 database. Setup instructions <a href="/docs/getting_started/setup/influxdb/">here</a></li>
<li>XML appender files deployed on the Sense servers you want to monitor. The appender files tell Sense to send log events to Butler SOS via UDP messages. Setup instructions <a href="/docs/getting_started/setup/qlik-sense-events/#log-appender-xml-files">here</a>.</li>
<li>A reasonably recent version of <a href="https://grafana.com/grafana/download">Grafana</a>. At the time of writing, Grafana 11.2 is the latest version.</li>
<li>Data connections set up in Grafana to the InfluxDB database where Butler SOS stores its data.</li>
</ul>
<h2 id="configure-butler-sos">Configure Butler SOS</h2>
<ol>
<li>Enable engine performance monitoring.</li>
<li>Enable tracking of rejected performance log events.<br>
Butler SOS will track two things related to rejected events: Number of events (=counter), and the processing time for these events.</li>
<li>If detailed engine performance log events are enabled, Butler SOS will <em>not</em> create counters for these events. Instead, it will store the detailed data in InfluxDB.<br>
This data can then be aggregated to create the same kind of counters as for rejected engine performance log events.</li>
</ol>
<p>Note: &ldquo;Rejected events&rdquo; are engine performance log events that do not meet the criteria set up in Butler SOS for <em>detailed</em> engine performance monitoring.</p>
<p>Bottom line is that you can disable all detailed engine monitoring in Butler SOS, and only enable the tracking of rejected events.<br>
This will give you a counter for the number of rejected events, and the processing time for these events, across a set of dimensions - of which engine &ldquo;method&rdquo; is one.</p>
<p>Or you can enable detailed engine performance monitoring for some apps, and only track rejected events for others.</p>
<p>Either way it will be possible to create Grafana charts that show the average time it takes to open apps on your Sense server(s).</p>
<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice info" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#info-notice"></use></svg></span>Info</p><p>InfluxDB is the only supported database for this feature.<br>
It is configured elsewhere in the YAML config file, more info <a href="/docs/getting_started/setup/influxdb/">here</a>.</p></div>

<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Shared settings for user and log events (see below)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">qlikSenseEvents</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># Shared settings for user and log events (see below)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">influxdb</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># Should summary (counter) of user/log events, and rejected events be stored in InfluxDB?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">writeFrequency</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">20000</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># How often (milliseconds) should event counts be written to InfluxDB?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">rejectedEventCount</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#8f5902;font-style:italic"># Rejected events are events that are received from Sense, that are correctly formatted,</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                    </span><span style="color:#8f5902;font-style:italic"># but that are rejected by Butler SOS based on the configuration in this file.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                    </span><span style="color:#8f5902;font-style:italic"># An example of a rejected event is a performance log event that is filtered out by Butler SOS.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># Should rejected events be counted and stored in InfluxDB?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">influxdb</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">measurementName</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">rejected_event_count</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Name of the InfluxDB measurement where rejected event count is stored</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Log events are used to capture Sense warnings, errors and fatals in real time</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">logEvents</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">udpServerConfig</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">serverHost</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">0.0.0.0</span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#8f5902;font-style:italic"># Host/IP where log event server will listen for events from Sense</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">portLogEvents</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">9996</span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#8f5902;font-style:italic"># Port on which log event server will listen for events from Sense</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">tags</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">qs_tag1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">somevalue1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">qs_tag2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">somevalue2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">enginePerformanceMonitor</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#8f5902;font-style:italic"># Detailed app performance data extraction from log events</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                      </span><span style="color:#8f5902;font-style:italic"># Should app performance data be extracted from log events?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">appNameLookup</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># Should app names be looked up based on app IDs?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">trackRejectedEvents</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># Should events that are rejected by the app performance monitor be tracked?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">tags</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                           </span><span style="color:#8f5902;font-style:italic"># Tags are added to the data before it&#39;s stored in InfluxDB</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">qs_tag1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">somevalue1</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">qs_tag2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">somevalue2</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configure-grafana">Configure Grafana</h2>
<p>Create a Grafana chart (in an existing dashboard or a new one) that shows the average time it takes to open apps on your Sense server(s).<br>
You do this by only show data in the chart for the engine method <code>Global::OpenApp</code>.</p>
<p>The definition of such a chart in Grafana could look something like this (slightly different set of apps selected, compared to screenshot above):</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/examples/engine-performance-monitoring/open-time-all-apps/butler-sos-rejected-performance-log-events-definition-1_hu_6ef5d1ddf8d90f9.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Definition of a Grafana chart showing the average time it takes to open apps on a Qlik Sense server.

</p>
</figcaption>
</figure>

<p>Note how the tag <code>method</code> is set to <code>Global::OpenApp</code>. This is the engine method that is called when an app is opened in Qlik Sense, it covers the entire time it takes to open an app.</p>
<p>For apps currently not in memory, this will include the time it takes to load the app from disk (which can be significant for large apps).
For apps already in memory, the time for this method will be much shorter.</p>
<p>Also note how the <code>app_name</code> tag is used to filter out only the apps you are interested in, by matching it to the <code>app_name_unmonitored</code> variable.<br>
See below for detailed on how to set up this variable.</p>
<h3 id="grafana-variables">Grafana variables</h3>
<p>By using Grafana variables, you can easily change which apps you want to show data for in the chart.</p>
<p>Here is how you can set up a variable in Grafana that allows you to select which apps to show data for (see above too, for how to use this variable in a chart):</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/examples/engine-performance-monitoring/open-time-all-apps/butler-sos-create-app-name-variable-1_hu_db012495f3dc83a6.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Create a Grafana variable that allows you to select which apps to show data for in a chart. The entire definition is not shown here, make sure to check the "Multi-value" and "Include All option" checkboxes too (further down that page).

</p>
</figcaption>
</figure>

<h2 id="next-steps">Next steps</h2>
<p>Using the concept in this tutorial, but with a slightly different chart definition in Grafana, it is possible to visualise the mean time for each method that Butler SOS tracks.<br>
Combine with a app-selection filter variable in Grafana, and you can easily switch between different apps to see how long the various engine operations take in each of them:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/examples/engine-performance-monitoring/open-time-all-apps/butler-sos-rejected-performance-log-events-3_hu_f756a43dbd814933.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Chart showing mean time for all engine methods that were used during the selected time interval, for the selected apps(s).

</p>
</figcaption>
</figure>


</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-ba2041bccabce515d0c22504e6cb57cd">4.4.2 - Find charts that are slow to update</h1>
    <div class="lead">This example shows how to use Butler SOS to monitor which parts of a Qlik Sense app that are slow to update.</div>
	<h2 id="overview">Overview</h2>
<h3 id="goal">Goal</h3>
<p>The goal is to monitor how long each app object in a Sense app takes to open, and also identify which objects are slow to update.<br>
This is useful for several reasons:</p>
<ul>
<li>Identify misbehaving charts, tables etc in important apps. This can be especially important for apps that are used by many users, or that are in some way business critical.</li>
<li>To get a baseline for how long it takes for each app object (chart, table, &hellip;) to open and update. This can then be used to set thresholds for alerts, or to identify when performance degrades over time.</li>
<li>An end user may experience slow performance when interacting with an app. By monitoring the time it takes for each object to both open and update when selections are done, you can identify which objects are slow to update.</li>
</ul>
<p>A Grafana chart showing this data for the app &ldquo;Training - Field indexing&rdquo; could look something like this:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/examples/engine-performance-monitoring/find-slow-updating-charts/butler-sos-accepted-performance-log-events-7_hu_18978b43b47c7a64.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


In order to understand the chart you must also know the ID of each app object. More on this further down this page.

</p>
</figcaption>
</figure>

<h3 id="prerequisites">Prerequisites</h3>
<ul>
<li>Butler SOS 11.0 or later. Downloads are available <a href="https://github.com/ptarmiganlabs/butler-sos/releases">here</a>.</li>
<li>Store the data collected by Butler SOS in an InfluxDB v1 or v2 database. Setup instructions <a href="/docs/getting_started/setup/influxdb/">here</a></li>
<li>XML appender files deployed on the Sense servers you want to monitor. The appender files tell Sense to send log events to Butler SOS via UDP messages. Setup instructions <a href="/docs/getting_started/setup/qlik-sense-events/#log-appender-xml-files">here</a>.</li>
<li>A reasonably recent version of <a href="https://grafana.com/grafana/download">Grafana</a>. At the time of writing, Grafana 11.2 is the latest version.</li>
<li>Data connections set up in Grafana to the InfluxDB database where Butler SOS stores its data.</li>
<li>A way to get the ID of each app object in the Sense apps you want to monitor. This can be done in <a href="/docs/getting_started/setup/qlik-sense-events/log-events/performance-log-events/#filter-applying-to-specific-apps">several ways</a>.</li>
</ul>
<h3 id="the-app-being-monitored">The app being monitored</h3>
<p>The &ldquo;Training - Field indexing&rdquo; app is used as an example in this tutorial.<br>
It&rsquo;s a basic app that is used to explain to Sense developers how in-app data indexing works in Qlik Sense.</p>
<p>The consists of a single table with two fields, with 10 million rows of random data:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/examples/engine-performance-monitoring/find-slow-updating-charts/butler-sos-accepted-performance-log-events-11_hu_7ef41fba51d24975.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Data model in the "Training - Field indexing" app.

</p>
</figcaption>
</figure>

<p>The &ldquo;LongStrings&rdquo; field contains random strings of 32 characters each.</p>
<p>The idea of the app is to stress the Sense engine by having it index random data - something that can be done, but also something that will be slower and slower as the number of rows or the length of the &ldquo;LongStrings&rdquo; field increases.</p>
<p>There are two things that may require a lot of time to update in this app:</p>
<ol>
<li>Opening the app when it is not already in memory. This will trigger an indexing of the data, which takes time given the randomness of the data and the number of rows.</li>
<li>Making a selection in the app once it is open. This will trigger a re-indexing of the <em>selected</em> data, which can also take some time (depending on what/how much data is selected).</li>
</ol>
<h3 id="a-word-of-caution">A word of caution</h3>
<p>Enabling detailed performance monitoring can generate a lot of data, especially if it is enabled for many apps.<br>
This can lead to a large amount of data being stored in InfluxDB, which in turn can lead to performance issues in InfluxDB and Grafana.</p>
<p>It is therefore recommended to only enable detailed performance monitoring for a limited number of apps, and possibly only for a limited time period.</p>
<p>For example, it can be useful to start off by monitoring all app objects in an app to begin with, and then limit the monitoring to only a few objects that are of special interest.<br>
It&rsquo;s also possible to limit the monitoring to only certain app object types, such as charts and tables, and not other object types.</p>
<h2 id="configure-butler-sos">Configure Butler SOS</h2>
<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice info" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#info-notice"></use></svg></span>Info</p><p>InfluxDB is the only supported database for this feature.<br>
It is configured elsewhere in the YAML config file, more info <a href="/docs/getting_started/setup/influxdb/">here</a>.</p></div>

<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Shared settings for user and log events (see below)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">qlikSenseEvents</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># Shared settings for user and log events (see below)</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">influxdb</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># Should summary (counter) of user/log events, and rejected events be stored in InfluxDB?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">writeFrequency</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">20000</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># How often (milliseconds) should event counts be written to InfluxDB?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># Log events are used to capture Sense warnings, errors and fatals in real time</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">logEvents</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">udpServerConfig</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">serverHost</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">0.0.0.0</span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#8f5902;font-style:italic"># Host/IP where log event server will listen for events from Sense</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">portLogEvents</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">9996</span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#8f5902;font-style:italic"># Port on which log event server will listen for events from Sense</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">tags</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">env</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">DEV</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">foo</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">value</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">bar</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">enginePerformanceMonitor</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#8f5902;font-style:italic"># Detailed app performance data extraction from log events</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                      </span><span style="color:#8f5902;font-style:italic"># Should app performance data be extracted from log events?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">appNameLookup</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># Should app names be looked up based on app IDs?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#000">...</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#204a87;font-weight:bold">monitorFilter</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                    </span><span style="color:#8f5902;font-style:italic"># What objects should be monitored? Entire apps or just specific object(s) within some specific app(s)?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># Two kinds of monitoring can be done:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># 1) Monitor all apps, except those listed for exclusion. This is defined in the allApps section.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># 2) Monitor only specific apps. This is defined in the appSpecific section.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># An event will be accepted if it matches any of the rules in the allApps section OR any of the rules in the appSpecific section.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">allApps</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">                 </span><span style="color:#8f5902;font-style:italic"># Should all apps be monitored?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">appExclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                   </span><span style="color:#8f5902;font-style:italic"># What apps should be excluded from monitoring?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># If both appId and appName are specified, both must match the event&#39;s data for it to be considered a match.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">t          objectType</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">allObjectTypes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#8f5902;font-style:italic"># Should all object types be monitored?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">allObjectTypesExclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># If allObjectTypes is set to true, the object types in this array are excluded from monitoring.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># someObjectTypesInclude (below) is ignored in that case.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">someObjectTypesInclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#8f5902;font-style:italic"># What object types should be included in monitoring?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># Only applicable if allObjectTypes is set to false.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">method</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">allMethods</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#8f5902;font-style:italic"># Should all methods be monitored?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">allMethodsExclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#8f5902;font-style:italic"># If allMethods is set to true, the methods in this array are excluded from monitoring.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># someMethodsInclude (below) is ignored in that case.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span><span style="color:#204a87;font-weight:bold">someMethodsInclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># What methods should be included in monitoring?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># Only applicable if allMethods is set to false.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#204a87;font-weight:bold">appSpecific</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">enable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># Should app specific monitoring be done?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">          </span><span style="color:#204a87;font-weight:bold">app</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">            </span>- <span style="color:#204a87;font-weight:bold">include</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">                  </span><span style="color:#8f5902;font-style:italic"># What apps should be monitored?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># If both appId and appName are specified, both must match the event&#39;s data for it to be considered a match.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span>- <span style="color:#204a87;font-weight:bold">appName</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Training - Field indexing</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:bold">objectType</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">allObjectTypes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#8f5902;font-style:italic"># Should all object types be monitored?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">allObjectTypesExclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># If allObjectTypes is set to true, the object types in this array are excluded from monitoring.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># someObjectTypesInclude (below) is ignored in that case.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">someObjectTypesInclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># What object types should be included in monitoring?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># Only applicable if allObjectTypes is set to false.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:bold">appObject</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">allAppObjects</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#8f5902;font-style:italic"># Should all app objects be monitored?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">allAppObjectsExclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#8f5902;font-style:italic"># If allAppObjects is set to true, the app objects in this array are excluded from monitoring.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># someAppObjectsInclude (below) is ignored in that case.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">someAppObjectsInclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#8f5902;font-style:italic"># What app objects should be included in monitoring?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># Only applicable if allAppObjects is set to false.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">              </span><span style="color:#204a87;font-weight:bold">method</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">allMethods</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">        </span><span style="color:#8f5902;font-style:italic"># Should all methods be monitored?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">allMethodsExclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">      </span><span style="color:#8f5902;font-style:italic"># If allMethods is set to true, the methods in this array are excluded from monitoring.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># someMethodsInclude (below) is ignored in that case.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                </span><span style="color:#204a87;font-weight:bold">someMethodsInclude</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">     </span><span style="color:#8f5902;font-style:italic"># What methods should be included in monitoring?</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span><span style="display:flex;"><span><span style="color:#f8f8f8;text-decoration:underline">                                        </span><span style="color:#8f5902;font-style:italic"># Only applicable if allMethods is set to false.</span><span style="color:#f8f8f8;text-decoration:underline">
</span></span></span></code></pre></div><h2 id="configure-grafana">Configure Grafana</h2>
<p>With the above Butler SOS configuration in place (remember to restart Butler SOS after making changes to its configuration file), you can now set up Grafana to visualize the data.</p>
<p>Here is a chart that shows the average time it takes for each app object in the &ldquo;Training - Field indexing&rdquo; app to open and update (the chart shown at the top of this page):</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/examples/engine-performance-monitoring/find-slow-updating-charts/butler-sos-accepted-performance-log-events-13_hu_f5441f49f041525c.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Definition of a Grafana chart showing the average time it takes to open and update each app object in the "Training - Field indexing" app.

</p>
</figcaption>
</figure>

<h3 id="grafana-variables">Grafana variables</h3>
<p>The chart repeats itself over the &ldquo;app_name_monitored&rdquo; Grafana variable, which means one chart is shown for each selected app in that variable filter (at the top of the Grafana dashboard).<br>
The variable is set up like this:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/examples/engine-performance-monitoring/find-slow-updating-charts/butler-sos-grafana-variables-1_hu_7b8cef8db138a6e2.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


List of variables in a SenseOps dashboard in Grafana.

</p>
</figcaption>
</figure>

<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/examples/engine-performance-monitoring/find-slow-updating-charts/butler-sos-grafana-variables-monitored-apps-1_hu_6c51d50b0138a28.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Definition of the "app_name_monitored" Grafana variable.

</p>
</figcaption>
</figure>

<h2 id="next-steps">Next steps</h2>
<p>Given the detailed information captured about all app objects in the &ldquo;Training - Field indexing&rdquo; app, it is possible to slice and dice the data in many ways.</p>
<p>For example, it could be interesting to see what <em>kinds</em> of app objects use most time, and which ones are faster.<br>
Something like this:</p>
<figure class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 1210px">
<img class="card-img-top" src="/docs/examples/engine-performance-monitoring/find-slow-updating-charts/butler-sos-accepted-performance-log-events-14_hu_4ecab9e3cb25d40c.png" width="1200" height="688">
<figcaption class="card-body px-0 pt-2 pb-0">
<p class="card-text">


Chart showing the _total_ time spent updating the "Training - Field indexing" app, grouped by object type, during last hour.

</p>
</figcaption>
</figure>


</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-8df6ea6904416b571ff9bc73afb50933">5 - Reference docs</h1>
    <div class="lead">Technical reference docs and general sources of information that might be useful.</div>
	<h2 id="references-in-this-site">References in this site</h2>
<h3 id="config-file-format">Config file format</h3>
<p>A detailed description of all configuration options in the main config file is available <a href="/docs/reference/config_file_format/">here</a>.</p>
<h3 id="available-metrics">Available metrics</h3>
<p>A complete list of all metrics provided by Butler SOS is found <a href="/docs/reference/available_metrics/">here</a>.</p>
<h2 id="useful-references-out-there">Useful references out there</h2>
<h3 id="qlik-sense-apis">Qlik Sense APIs</h3>
<p>Qlik&rsquo;s API documentation is found <a href="https://help.qlik.com/en-US/sense-developer/February2021/Content/Sense_Helpsites/APIs-and-SDKs.htm">here</a>.</p>
<h3 id="influxdb">InfluxDB</h3>
<p>InfluxDB docs <a href="https://docs.influxdata.com/influxdb/v1.8/">here</a>.</p>
<p>Note that Butler SOS was developed with InfluxDB 1.x in mind. It is <strong>not</strong> currently compatible with InfluxDB 2.x.</p>
<h3 id="prometheus">Prometheus</h3>
<p>Prometheus docs <a href="https://prometheus.io">here</a>.</p>
<h3 id="grafana">Grafana</h3>
<p>Grafana docs <a href="https://grafana.com/docs/">here</a>.</p>
<h3 id="mqtt">MQTT</h3>
<p>There are various MQTT brokers available, both commercial and open source.<br>
<a href="https://mosquitto.org/">Mosquitto</a> is an open sourceMQTT broker with a solid track record and available as a Docker container.</p>
<p>There are also plenty of companies offering SaaS MQTT brokers, ranging from small specialized companies to the big cloud providers.</p>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-45eb8994961db260c7bffb6dc530996d">5.1 - Command line options</h1>
    <div class="lead">Description of Butler SOS&rsquo; command line options.</div>
	<!-- 

<div class="pageinfo pageinfo-primary">
<p>This is a placeholder page that shows you how to use this template site.</p>

</div>
 -->
<h2 id="command-line-options">Command line options</h2>
<p>When starting Butler SOS, you can pass command line options to customize its behavior.<br>
Looks like this:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>Usage: butler-sos <span style="color:#ce5c00;font-weight:bold">[</span>options<span style="color:#ce5c00;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Butler SenseOps Stats <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;Butler-SOS&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span> is a microservice publishing operational Qlik Sense metrics to InfluxDB, Prometheus and New Relic.
</span></span><span style="display:flex;"><span>User events and log events can be forwarded from Sense to Butler SOS and <span style="color:#204a87;font-weight:bold">then</span> acted upon there. Events can be stored in InfluxDB and sent to New Relic.
</span></span><span style="display:flex;"><span>Add Grafana <span style="color:#204a87;font-weight:bold">for</span> great looking dashboards and you get real-time monitoring of what happens inside a Qlik Sense environment.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Options:
</span></span><span style="display:flex;"><span>  -V, --version                        output the version number
</span></span><span style="display:flex;"><span>  -c, --configfile &lt;file&gt;              path to config file
</span></span><span style="display:flex;"><span>  -l, --loglevel &lt;level&gt;               log level <span style="color:#ce5c00;font-weight:bold">(</span>choices: <span style="color:#4e9a06">&#34;error&#34;</span>, <span style="color:#4e9a06">&#34;warn&#34;</span>, <span style="color:#4e9a06">&#34;info&#34;</span>, <span style="color:#4e9a06">&#34;verbose&#34;</span>, <span style="color:#4e9a06">&#34;debug&#34;</span>, <span style="color:#4e9a06">&#34;silly&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>  --new-relic-account-name  &lt;name...&gt;  New Relic account name. Used within Butler SOS to differentiate between different target New Relic accounts
</span></span><span style="display:flex;"><span>  --new-relic-api-key &lt;key...&gt;         insert API key to use with New Relic
</span></span><span style="display:flex;"><span>  --new-relic-account-id &lt;id...&gt;       New Relic account ID
</span></span><span style="display:flex;"><span>  --skip-config-verification           Disable config file verification <span style="color:#ce5c00;font-weight:bold">(</span>default: <span style="color:#204a87">false</span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span>  -h, --help                           display <span style="color:#204a87">help</span> <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#204a87">command</span>
</span></span></code></pre></div><h2 id="-v---version">-V, &ndash;version</h2>
<p>Output the version number of Butler SOS.</p>
<h2 id="-c---configfile">-c, &ndash;configfile</h2>
<p>Specifies the configuration file to use.</p>
<p>Valid values: A path to a configuration file.</p>
<p>Default: Whatever is specified in the <code>NODE_ENV</code> environment variable, with a .yaml extension added. Butler SOS will look for that file in the <code>./config</code> directory.</p>
<p>Example:</p>
<ul>
<li><code>-c</code> or <code>--configfile</code> are not specified. <code>NODE_ENV</code> is set to <code>production</code>. Butler SOS will try to read settings from <code>./config/production.yaml</code>.</li>
</ul>
<h2 id="-l---loglevel">-l, &ndash;loglevel</h2>
<p>Specifies the log level to use.<br>
When set, this overrides the log level specified in the configuration file.</p>
<p>Valid values: &rsquo;error&rsquo;, &lsquo;warn&rsquo;, &lsquo;info&rsquo;, &lsquo;verbose&rsquo;, &lsquo;debug&rsquo;, &lsquo;silly&rsquo;</p>
<p>Default: &lsquo;info&rsquo;</p>
<h2 id="new-relic-related-options">New Relic related options</h2>
<p>When using New Relic as backend for storing metrics, you can specify New Relic credentials in the config file - but that is not ideal from a security perspective.</p>
<p>To avoid that, you can specify the New Relic credentials on the command line using the following options.</p>
<h3 id="--new-relic-account-name">&ndash;new-relic-account-name</h3>
<p>List of New Relic account names. Used within Butler SOS to differentiate between different target New Relic accounts to which data can be sent. This name has nothing to do with the account name used in New Relic - it&rsquo;s purely for Butler SOS&rsquo; internal use.<br>
Specifically, it&rsquo;s at multiple places in the config file where you can specify to which New Relic account to send data.</p>
<p>Enclose account names in quotes if they contain spaces.<br>
Separate multiple account names with a space.</p>
<p>Example: <code>--new-relic-account-name &quot;Account 1&quot; &quot;Account 2&quot;</code></p>
<h3 id="--new-relic-api-key">&ndash;new-relic-api-key</h3>
<p>List of New Relic API keys. Used to authenticate with New Relic.</p>
<p>Enclose API keys in quotes if they contain spaces.<br>
Separate multiple API keys with a space. Note that the order of the API keys must match the order of the account names, i.e. the first API key corresponds to the first account name, the second API key corresponds to the second account name, and so on.</p>
<p>Example: <code>--new-relic-api-key &quot;API key 1&quot; &quot;API key 2&quot;</code></p>
<h3 id="--new-relic-account-id">&ndash;new-relic-account-id</h3>
<p>List of New Relic account IDs. Used to identify the New Relic account to which data should be sent.</p>
<p>Enclose account IDs in quotes if they contain spaces.<br>
Separate multiple account IDs with a space. Note that the order of the account IDs must match the order of the account names, i.e. the first account ID corresponds to the first account name, the second account ID corresponds to the second account name, and so on.</p>
<h2 id="--skip-config-verification">&ndash;skip-config-verification</h2>
<p>Disable config file verification.</p>
<p>By default, Butler SOS verifies the config file when it starts. If the config file is invalid, Butler SOS will log an error and exit.<br>
Use this option to disable config file verification.</p>
<h2 id="-h---help">-h, &ndash;help</h2>
<p>Display help for command.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-b224ef866cfa84ce3ec13452bc419a8c">5.2 - Config file format</h1>
    <div class="lead">Everything you ever wanted to know about the Butler SOS configuration file.</div>
	<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>The config file uses YAML notation, with file extensions of .yaml or .yml.<br>
The .yaml extension is recommended.</p></div>

<p>The config file is the heart of Butler SOS.<br>
All setting must be defined in the config file - run time errors are likely to occur otherwise.</p>
<p>A sample config file is included in the release ZIP files, and also <a href="https://raw.githubusercontent.com/ptarmiganlabs/butler-sos/master/src/config/production_template.yaml">available on GitHub</a>.</p>
<p>A few things to keep in mind:</p>
<ul>
<li>Topic names (e.g. &ldquo;Butler-SOS.logLevel&rdquo;) are case sensitive.</li>
<li>First time Butler SOS is started, a new check is done if the specified InfluxDB database already exists.
If it doesn&rsquo;t exist it will be created together with a default InfluxDB retention policy. The retention policy is based on the time period set in the config file.</li>
</ul>
<h4 id="top-level">Top level</h4>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td></td>
          <td></td>
      </tr>
      <tr>
          <td>logLevel</td>
          <td>The level of details in the logs. Possible values are silly, debug, verbose, info, warn, error (in order of decreasing level of detail).</td>
      </tr>
      <tr>
          <td>fileLogging</td>
          <td>true/false to enable/disable logging to disk file</td>
      </tr>
      <tr>
          <td>logDirectory</td>
          <td>Subdirectory where log files are stored</td>
      </tr>
      <tr>
          <td>anonTelemetry</td>
          <td>Can Butler SOS share anonymous data about itself with the Butler SOS project? More info on what data is collected <a href="/docs/about/telemetry/">here</a>.</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosconfigvisualisation">Butler-SOS.configVisualisation</h4>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>enable</td>
          <td>Should Butler SOS&rsquo; config file be visualized in a web UI? true/false</td>
      </tr>
      <tr>
          <td>host</td>
          <td>Hostname or IP address where the web server will listen. Should be localhost or the host&rsquo;s IP address in most cases.</td>
      </tr>
      <tr>
          <td>port</td>
          <td>Port where the web server will listen. Change if port 3100 is already in use.</td>
      </tr>
      <tr>
          <td>obfuscate</td>
          <td>Should the config file shown in the web UI be obfuscated? true/false</td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosheartbeat">Butler-SOS.heartbeat</h4>
<p>Heartbeats can be used to send &ldquo;I&rsquo;m alive&rdquo; messages to some other tool, e.g. an infrastructure monitoring tool.<br>
The concept is simple: The remoteURL will be called at the specified frequency. The receiving tool will then know that Butler SOS is alive.</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>enable</td>
          <td>Should heartbeats be sent to some URL, indicating that Butler SOS is alive and well? true/false</td>
      </tr>
      <tr>
          <td>remoteURL</td>
          <td>URL that will be called for heartbeats</td>
      </tr>
      <tr>
          <td>frequency</td>
          <td>How often should heartbeats be sent? Format according to <a href="https://bunkat.github.io/later/parsers.html#text">https://bunkat.github.io/later/parsers.html#text</a></td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosdockerhealthcheck">Butler-SOS.dockerHealthCheck</h4>
<p>Docker health checks are used when running Butler SOS as a Docker container.</p>
<p>The Docker engine will call the container&rsquo;s health check REST endpoint with a set interval to determine whether the container is alive/well or not.<br>
If you are <em>not</em> running Butler SOS in Docker you can disable this feature.</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>enable</td>
          <td>Should a Docker healthcheck endpoint be created within Butler SOS? Set to false if <em>not</em> running Butler SOS under Docker. true/false</td>
      </tr>
      <tr>
          <td>port</td>
          <td>Port the healthcheck should use. Usually 12398, but might need be changed if several Butler instances run on the same server</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosuptimemonitor">Butler-SOS.uptimeMonitor</h4>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>enable</td>
          <td>Should messages with Butler SOS uptime and memory usage be written to console and logs? true/false</td>
      </tr>
      <tr>
          <td>frequency</td>
          <td>How often should uptime messages be written to console and/or logs? Format according to <a href="https://bunkat.github.io/later/parsers.html#text">https://bunkat.github.io/later/parsers.html#text</a></td>
      </tr>
      <tr>
          <td>logLevel</td>
          <td>Starting at what log level should uptime messages be used? Possible values are silly, debug, verbose, info, warn, error. For example, if you specify &ldquo;verbose&rdquo; here, uptime messages will appear if you set overall log level to silly, debug or verbose.</td>
      </tr>
      <tr>
          <td>storeInInfluxdb.<br>butlerSOSMemoryUsage</td>
          <td>Should data on Butler SOS&rsquo; own memory use be stored in Infludb? true/false</td>
      </tr>
      <tr>
          <td>storeInInfluxdb.<br>instanceTag</td>
          <td>Tag used to differentiate data from multiple Butler SOS instances. Useful if running different Butler SOS instances against (for example) DEV, TEST and PROD environments</td>
      </tr>
      <tr>
          <td>storeNewRelic.<br>enable</td>
          <td>Should uptime data be sent to New Relic? true/false</td>
      </tr>
      <tr>
          <td>storeNewRelic.<br>destinationAccount</td>
          <td>Array of New Relic account names to which uptime data will be sent</td>
      </tr>
      <tr>
          <td>storeNewRelic.<br>metric.dynamic.<br>butlerMemoryUsage.enable</td>
          <td>Should Butler SOS memory metrics be sent to New Relic? true/false</td>
      </tr>
      <tr>
          <td>storeNewRelic.<br>metric.dynamic.<br>butlerUptime.enable</td>
          <td>Should Butler uptime (days, hours, minutes since startup) be sent to New Relic? true/false</td>
      </tr>
      <tr>
          <td>storeNewRelic.<br>attribute.static</td>
          <td>Array of attributes which will be added to all uptime metrics sent to New Relic</td>
      </tr>
      <tr>
          <td>storeNewRelic.<br>attribute.dynamic.<br>butlerVersion.enable</td>
          <td>Should uptime metrics be tagged with Butler SOS version number? true/false</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosthirdpartytoolscredentials">Butler-SOS.thirdPartyToolsCredentials</h4>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>newRelic</td>
          <td>Array of credentials for the New Relic accounts to which data should be sent. Each array item consists of several items, see below.</td>
      </tr>
      <tr>
          <td>newRelic[]<br>accountName</td>
          <td>Name of New Relic account. This is a &ldquo;friendly name&rdquo; that&rsquo;s used within Butler SOS to identify each NR account.</td>
      </tr>
      <tr>
          <td>newRelic[]<br>insertApiKey</td>
          <td>Insert API key associated with the NR account. Get this from the NR account&rsquo;s settings page.</td>
      </tr>
      <tr>
          <td>newRelic[]<br>accountId</td>
          <td>New Relic account id. Get this from the NR account&rsquo;s settings page.</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosuserevents">Butler-SOS.userEvents</h4>
<p>Track individual users opening/closing apps and starting/stopping sessions.<br>
Requires log appender XML file(s) to be added to Sense server(s).</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>enable</td>
          <td>Should Butler SOS track detailed user events (i.e. session start/stop, connection open/close)? true/false</td>
      </tr>
      <tr>
          <td>excludeUser</td>
          <td>Array of users (=directory/userId pairs) that should be disregarded when user events arrive from Sense. Remove sample users before deploying Butler SOS.</td>
      </tr>
      <tr>
          <td>udpServerConfig.<br>serverHost</td>
          <td>IP/host where the user event UDP server should listen for incoming connections. Usually the same IP/host as where Butler SOS is running. Using 0.0.0.0 will cause Butler SOS to listen on all available IPs.</td>
      </tr>
      <tr>
          <td>udpServerConfig.<br>portUserActivityEvents</td>
          <td>Port on which the user event UDP server will listen. Should match the port specified in the log appender.</td>
      </tr>
      <tr>
          <td>tags</td>
          <td>Array of tags (tagName/tagValue pairs) that should be added to each user event before sending it to InfluxDB. Remove sample tags before deploying Butler SOS.</td>
      </tr>
      <tr>
          <td>sendToMQTT.enable</td>
          <td>Should user events be sent to MQTT? true/false</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo.<br>everythingTopic.enable</td>
          <td>Should <strong>all</strong> user event messages be sent to an MQTT topic? true/false</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo.<br>everythingTopic.topic</td>
          <td>MQTT topic to which <strong>all</strong> user event messages will be sent.</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo.<br>sessionStartTopic.enable</td>
          <td>Should <strong>session start</strong> user event messages be sent to an MQTT topic? true/false</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo.<br>sessionStartTopic.topic</td>
          <td>MQTT topic to which <strong>session start</strong> user event messages will be sent.</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo.<br>sessionStopTopic.enable</td>
          <td>Should <strong>session stop</strong> user event messages be sent to an MQTT topic? true/false</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo.<br>sessionStopTopic.topic</td>
          <td>MQTT topic to which <strong>session stop</strong> user event messages will be sent.</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo.<br>connectionOpenTopic.enable</td>
          <td>Should <strong>connection open</strong> user event messages be sent to an MQTT topic? true/false</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo.<br>connectionOpenTopic.topic</td>
          <td>MQTT topic to which <strong>connection open</strong> user event messages will be sent.</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo.<br>connectionCloseTopic.enable</td>
          <td>Should <strong>connection close</strong> user event messages be sent to an MQTT topic? true/false</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo.<br>connectionCloseTopic.topic</td>
          <td>MQTT topic to which <strong>connection close</strong> user event messages will be sent.</td>
      </tr>
      <tr>
          <td>sendToInfluxdb.enable</td>
          <td>Should user events be saved in InfluxDB? true/false</td>
      </tr>
      <tr>
          <td>sendToNewRelic.enable</td>
          <td>Should user events be saved in New Relic? true/false</td>
      </tr>
      <tr>
          <td>sendToNewRelic.destinationAccount</td>
          <td>Array of New Relic account names to which user events will be sent.</td>
      </tr>
      <tr>
          <td>sendToNewRelic.scramble</td>
          <td>Should <code>user directory</code> and <code>user ID</code> fields be scrambled before user events are sent to New Relic? true/false</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-soslogevents">Butler-SOS.logEvents</h4>
<p>Log events are used to capture Sense warnings, errors and fatals in real time.
Requires log appender XML file(s) to be added to Sense server(s).</p>
<p>Note that log events can be enabled/disabled per source (repository, proxy, scheduler etc).</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>udpServerConfig.<br>serverHost</td>
          <td>IP/host where the log event UDP server should listen for incoming connections. Usually the same IP/host as where Butler SOS is running. Using 0.0.0.0 will cause Butler SOS to listen on all available IPs.</td>
      </tr>
      <tr>
          <td>udpServerConfig.<br>portLogEvents</td>
          <td>Port on which the log event UDP server will listen. Should match the port specified in the log appender.</td>
      </tr>
      <tr>
          <td>tags</td>
          <td>Array of tags (tagName/tagValue pairs) that should be added to each log event before sending it to InfluxDB. Remove sample tags before deploying Butler SOS.</td>
      </tr>
      <tr>
          <td>source.<br>engine.enable</td>
          <td>Should log events from the engine service be handled by Butler SOS? true/false</td>
      </tr>
      <tr>
          <td>source.<br>proxy.enable</td>
          <td>Should log events from the proxy service be handled by Butler SOS? true/false</td>
      </tr>
      <tr>
          <td>source.<br>repository.enable</td>
          <td>Should log events from the repository service be handled by Butler SOS? true/false</td>
      </tr>
      <tr>
          <td>source.<br>scheduler.enable</td>
          <td>Should log events from the scheduler service be handled by Butler SOS? true/false</td>
      </tr>
      <tr>
          <td>categorise.enable</td>
          <td>Should categorization of log events be enabled? true/false</td>
      </tr>
      <tr>
          <td>categorise.rules</td>
          <td>Array of rules that will be used to categorise log events. Each rule consists of a set of properties.</td>
      </tr>
      <tr>
          <td>categorise.rules[].<br>description</td>
          <td>Description of the rule.</td>
      </tr>
      <tr>
          <td>categorise.rules[].<br>logLevel[]</td>
          <td>Array of log levels that will be used to match log events against this rule.</td>
      </tr>
      <tr>
          <td>categorise.rules[].<br>action</td>
          <td>Action to take if a log event matches this rule. Possible values are &ldquo;categorise&rdquo; and &ldquo;drop&rdquo;.</td>
      </tr>
      <tr>
          <td>categorise.rules[].<br>category[]</td>
          <td>Array of name-value pairs that will be added to the log event if it matches this rule.</td>
      </tr>
      <tr>
          <td>categorise.rules[].<br>category[].name</td>
          <td>Name of the category.</td>
      </tr>
      <tr>
          <td>categorise.rules[].<br>category[].value</td>
          <td>Value of the category.</td>
      </tr>
      <tr>
          <td>categorise.rules[].<br>filter[]</td>
          <td>Array of type-value pairs that will be used to match log events against this rule.</td>
      </tr>
      <tr>
          <td>categorise.rules[].<br>filter[].type</td>
          <td>Type of filter. Possible values are &ldquo;sw&rdquo; = starts with, &ldquo;ew&rdquo; = ends with, &ldquo;so&rdquo; = substring of.</td>
      </tr>
      <tr>
          <td>categorise.ruleDefault</td>
          <td>Default values for categorization, if no other rule matches.</td>
      </tr>
      <tr>
          <td>categorise.ruleDefault.<br>enable</td>
          <td>Should the default rule be used? true/false</td>
      </tr>
      <tr>
          <td>categorise.ruleDefault.<br>category[]</td>
          <td>Array of name-value pairs that will be added to the log event if no other rule matches.</td>
      </tr>
      <tr>
          <td>categorise.ruleDefault.<br>category[].name</td>
          <td>Name of the category.</td>
      </tr>
      <tr>
          <td>categorise.ruleDefault.<br>category[].value</td>
          <td>Value of the category.</td>
      </tr>
      <tr>
          <td>sendToMQTT.enable</td>
          <td>Should log events be sent to MQTT? true/false</td>
      </tr>
      <tr>
          <td>sendToMQTT.baseTopic</td>
          <td>Root MQTT topic. All log events MQTT messages will be posted in this topic or subtopics of it.</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo<br>.baseTopic</td>
          <td>Should all log events be posted to the root topic? true/false</td>
      </tr>
      <tr>
          <td>sendToMQTT.postTo<br>.subsystemTopics</td>
          <td>All log events originate from a specific subsystem in a Sense server. These subsystems are organized in a hierarchical tree that can be directly mapped to MQTT topics. Should log events be posted as MQTT messages to such topics? true/false</td>
      </tr>
      <tr>
          <td>sendToInfluxdb.enable</td>
          <td>Should log events be saved in InfluxDB? true/false</td>
      </tr>
      <tr>
          <td>sendToNewRelic.enable</td>
          <td>Should log events be sent to New Relic? true/false</td>
      </tr>
      <tr>
          <td>sendToNewRelic.destinationAccount</td>
          <td>Array of New Relic account names to which log events will be sent.</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.engine.enable</td>
          <td>Should log events from the engine service be handled?</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.engine.logLevel.error</td>
          <td>Should ERROR log events from the engine service be handled?</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.engine.logLevel.warn</td>
          <td>Should WARN log events from the engine service be handled?</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.proxy.enable</td>
          <td>Should log events from the proxy service be handled?</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.proxy.logLevel.error</td>
          <td>Should ERROR log events from the proxy service be handled</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.proxy.logLevel.warn</td>
          <td>Should WARN log events from the proxy service be handled</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.repository.enable</td>
          <td>Should log events from the repository service be handled?</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.repository.logLevel.error</td>
          <td>Should ERROR log events from the repository service be handled</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.repository.logLevel.warn</td>
          <td>Should WARN log events from the repository service be handled</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.scheduler.enable</td>
          <td>Should log events from the scheduler service be handled?</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.scheduler.logLevel.error</td>
          <td>Should ERROR log events from the scheduler service be handled</td>
      </tr>
      <tr>
          <td>sendToNewRelic.<br>source.scheduler.logLevel.warn</td>
          <td>Should WARN log events from the scheduler service be handled</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-soscert">Butler-SOS.cert</h4>
<p>Certificates to use when connecting to Sense. Get these from the Certificate Export in QMC.</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>clientCert</td>
          <td>Certificate file. Exported from QMC</td>
      </tr>
      <tr>
          <td>clientCertKey</td>
          <td>Certificate key file. Exported from QMC</td>
      </tr>
      <tr>
          <td>clientCertCA</td>
          <td>Root certificate for above certificate files. Exported from QMC</td>
      </tr>
      <tr>
          <td>clientCertPassphrase</td>
          <td>Password used to protect the certificate (as set when exporting cert from QMC)</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosmqttconfig">Butler-SOS.mqttConfig</h4>
<p>MQTT config parameters. These must be correctly defined for any other MQTT features in Butler SOS to work.</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>enable</td>
          <td>Should health metrics be sent to MQTT? true/false</td>
      </tr>
      <tr>
          <td>brokerHost</td>
          <td>IP or FQDN of MQTT broker</td>
      </tr>
      <tr>
          <td>brokerPort</td>
          <td>Broker port</td>
      </tr>
      <tr>
          <td>baseTopic</td>
          <td>Default topic used if not not otherwise specified elsewhere. Should end with /. For example butler-sos/</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosnewrelic">Butler-SOS.newRelic</h4>
<p>If enabled, select Butler SOS metrics and events will be sent to New Relic.</p>
<p>Note that New Relic destination accounts for events are defined in the <code>Butler-SOS.userEvent</code> and <code>Butler-SOS.logEvent</code> sections, whereas destination accounts for metrics are defined in this section (<code>Butler-SOS.newRelic</code>).</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>enable</td>
          <td>Should Qlik Sense health metrics be sent to New Relic? true/false</td>
      </tr>
      <tr>
          <td>event.url</td>
          <td>Which API URL should be used for sending events to New Relic?<br>At time of this writing the options are<br><a href="https://insights-collector.eu01.nr-data.net">https://insights-collector.eu01.nr-data.net</a><br><a href="https://insights-collector.newrelic.com">https://insights-collector.newrelic.com</a><br>More info here: <a href="https://docs.newrelic.com/docs/accounts/accounts-billing/account-setup/choose-your-data-center">https://docs.newrelic.com/docs/accounts/accounts-billing/account-setup/choose-your-data-center</a></td>
      </tr>
      <tr>
          <td>event.header</td>
          <td>Array of name/value pairs that will be added as http headers to all calls to the New Relic event API</td>
      </tr>
      <tr>
          <td>event.attribute.<br>static</td>
          <td>Array of name/value pairs, representing attributes/tags that will be added to all events sent to New Relic</td>
      </tr>
      <tr>
          <td>event.attribute.<br>dynamic.butlerSosVersion.<br>enable</td>
          <td>Should Butler SOS&rsquo; version be attached as an attribute to events sent to New Relic? true/false</td>
      </tr>
      <tr>
          <td>metric.destinationAccount</td>
          <td>Array of New Relic account names to which Sense health metrics will be sent.</td>
      </tr>
      <tr>
          <td>metric.url</td>
          <td>Which API URL should be used for sending Sense health metrics to New Relic?<br>At time of this writing the options are<br><a href="https://insights-collector.eu01.nr-data.net/metric/v1">https://insights-collector.eu01.nr-data.net/metric/v1</a><br><a href="https://metric-api.newrelic.com/metric/v1">https://metric-api.newrelic.com/metric/v1</a></td>
      </tr>
      <tr>
          <td>metric.header</td>
          <td>Array of name/value pairs that will be added as http headers to all calls to the New Relic metric API</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>engine.memory.<br>enable</td>
          <td>Send Sense memory metrics to New Relic? true/false</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>engine.cpu.<br>enable</td>
          <td>Send Sense CPU metrics to New Relic? true/false</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>engine.calls.<br>enable</td>
          <td>Send metrics about calls to the Sense engine to New Relic? true/false</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>engine.selections.<br>enable</td>
          <td>Send metrics about number of selections made in Sense apps to New Relic? true/false</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>engine.sessions.<br>enable</td>
          <td>Send aggregated Sense engine session metrics to New Relic? true/false</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>engine.users.<br>enable</td>
          <td>Send aggregated Sense user metrics to New Relic? true/false</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>engine.saturated.<br>enable</td>
          <td>Send Sense engine saturation status to New Relic? true/false</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>apps.docCount.<br>enable</td>
          <td>Send metrics on loaded/active/in-memory Sense apps to New Relic? true/false</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>apps.activeDocs.<br>enable</td>
          <td>Should data on what docs are active in engine be sent to New Relic (true/false)?</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>apps.loadedDocs.<br>enable</td>
          <td>Should data on what docs are loaded (=having open sessions or connections) in engine be sent to New Relic (true/false)?</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>apps.inMemoryDocs.<br>enable</td>
          <td>Should data on what docs are in engine memory be sent to New Relic (true/false)?</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>cache.cache.<br>enable</td>
          <td>Send Sense cache metrics to New Relic? true/false</td>
      </tr>
      <tr>
          <td>metric.dynamic.<br>proxy.sessions.<br>enable</td>
          <td>Send aggregated Sense proxy metrics to New Relic? true/false</td>
      </tr>
      <tr>
          <td>metric.attribute.<br>static</td>
          <td>Array of name/value pairs, representing attributes/tags that will be added to all Sense health metrics sent to New Relic</td>
      </tr>
      <tr>
          <td>metric.attribute.<br>dynamic.butlerSosVersion.<br>enable</td>
          <td>Should Butler SOS&rsquo; version be attached as an attribute to Sense health metrics sent to New Relic? true/false</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosprometheus">Butler-SOS.prometheus</h4>
<p>If enabled, select Butler SOS metrics will be exposed on a Prometheus compatible URL from where they can be scraped by Prometheus.</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>enable</td>
          <td>Should health metrics be made available for scraping on a Prometheus compatible API http endpoint? true/false</td>
      </tr>
      <tr>
          <td>host</td>
          <td>IP on which the Prometheus compatible endpoint should be available. Using 0.0.0.0 will cause Butler SOS to listen on all available IPs.</td>
      </tr>
      <tr>
          <td>port</td>
          <td>Port on which the Prometheus compatible endpoint will be made available. Default 9842.</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosinfluxdbconfig">Butler-SOS.influxdbConfig</h4>
<p>InfluxDB config parameters. These must be correctly defined for any other InfluxDB features in Butler SOS to work.</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>enable</td>
          <td>Should health metrics be stored in Influxdb? true/false</td>
      </tr>
      <tr>
          <td>host</td>
          <td>IP or FQDN of Influxdb server.</td>
      </tr>
      <tr>
          <td>port</td>
          <td>Port where Influxdb server is listening. Useful if Influxdb for some reason is not using its standard port of 8086. <br>NOTE: Must be set to a value (for example 8086), otherwise this config entry will be flagged as invalid when the config file format is verified on startup.</td>
      </tr>
      <tr>
          <td>version</td>
          <td>Influxdb version. Valid values are 1 and 2.</td>
      </tr>
      <tr>
          <td>v2Config.org</td>
          <td>Organization name to use when connecting to Influxdb v2.</td>
      </tr>
      <tr>
          <td>v2Config.bucket</td>
          <td>Bucket name to use when connecting to Influxdb v2.</td>
      </tr>
      <tr>
          <td>v2Config.description</td>
          <td>Description of the Inflluxdb bucket.</td>
      </tr>
      <tr>
          <td>v2Config.token</td>
          <td>Token to use when connecting to Influxdb v2.</td>
      </tr>
      <tr>
          <td>v2Config.retentionDuration</td>
          <td>Retention duration for the Influxdb bucket.</td>
      </tr>
      <tr>
          <td>v1Config.<br>auth.enable</td>
          <td>Enable if data is to be stored in a password protected Influxdb v1 database.</td>
      </tr>
      <tr>
          <td>v1Config.<br>auth.username</td>
          <td>Influxdb username.</td>
      </tr>
      <tr>
          <td>v1Config.<br>auth.password</td>
          <td>Influxdb password.</td>
      </tr>
      <tr>
          <td>v1Config.dbName</td>
          <td>Name of Influxdb v1 database to use.</td>
      </tr>
      <tr>
          <td>v1Config.<br>retentionPolicy.name</td>
          <td>Name of default retention policy that will be created in InfluxDB database when that database is created during first execution of Butler SOS.</td>
      </tr>
      <tr>
          <td>v1Config.<br>retentionPolicy.duration</td>
          <td>Duration during which metrics are kept in InfluxDB. After the duration has passed, InfluxDB will purge all data older than duration from the database. See <a href="https://docs.influxdata.com/influxdb/v1.8/query_language/spec/#durations">InfluxDB docs</a> for details on syntax.</td>
      </tr>
      <tr>
          <td>includeFields.<br>activeDocs</td>
          <td>Should a list of currently active Sense apps be stored in Influxdb? true/false</td>
      </tr>
      <tr>
          <td>includeFields.<br>loadedDocs</td>
          <td>Should a list of Sense apps opened in a user session be stored in Influxdb? true/false</td>
      </tr>
      <tr>
          <td>includeFields.<br>activeDocs</td>
          <td>Should a list of Sense apps loaded into memory (some apps might not currently be associated with a user session) be stored in Influxdb? true/false</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosappnames">Butler-SOS.appNames</h4>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>enableAppNameExtract</td>
          <td>Should app names be extracted from Qlik Sense server? true/false</td>
      </tr>
      <tr>
          <td>extractInterval</td>
          <td>How often (milliseconds) should app names be extracted from Sense server?</td>
      </tr>
      <tr>
          <td>hostIP</td>
          <td>IP or FQDN of Sense server from which app names should be extracted</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosusersessions">Butler-SOS.userSessions</h4>
<p>Extract user session data per virtual proxy.</p>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>enableSessionExtract</td>
          <td>Influxdb password</td>
      </tr>
      <tr>
          <td>pollingInterval</td>
          <td>Influxdb password</td>
      </tr>
      <tr>
          <td>excludeUser</td>
          <td>Array of users (=directory/userId pairs) that should be disregarded when user session data arrives from Sense.</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<h4 id="butler-sosserverstomonitor">Butler-SOS.serversToMonitor</h4>
<table>
  <thead>
      <tr>
          <th>Parameter</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>pollingInterval</td>
          <td>How often to query the Sense healthcheck API</td>
      </tr>
      <tr>
          <td>rejectUnauthorized</td>
          <td>Set to false to ignore warnings/errors caused by Qlik Sense&rsquo;s self-signed certificates. <br> Set to true if the Qlik Sense root CA is available on the computer where Butler SOS is running.</td>
      </tr>
      <tr>
          <td>serverTagsDefinition</td>
          <td>List of tags to add to each server when storing the data in Influxdb. All tags defined here MUST be present in each server&rsquo;s definition section further down in the config file!</td>
      </tr>
      <tr>
          <td>servers</td>
          <td>Array of servers to monitor. For each server a set of properties MUST be defined.</td>
      </tr>
      <tr>
          <td>servers.<br>host</td>
          <td>FQDN of server. Domain should match that of the certificate exported from QMC - otherwise certificate warnings may appear. NOTE: You need to specify the port too - should be :4747 unless it&rsquo;s been changed from default value (<em>very</em> unusual to change this).</td>
      </tr>
      <tr>
          <td>servers.<br>serverName</td>
          <td>Human friendly server name</td>
      </tr>
      <tr>
          <td>servers.<br>serverDescription</td>
          <td>Human friendly server description</td>
      </tr>
      <tr>
          <td>servers.<br>userSessions.<br>enable</td>
          <td>Control whether user session data should be retrieved for this server</td>
      </tr>
      <tr>
          <td>servers.<br>userSessions.<br>host</td>
          <td>Host and port from which to retrieve user session data. Usually on the form servername.mydomain.net:4243</td>
      </tr>
      <tr>
          <td>servers.<br>userSessions.<br>virtualProxies</td>
          <td>A list of key-value pairs. Use to specify for which virtual proxies on this server user session data should be retrieved.</td>
      </tr>
      <tr>
          <td>serverTags</td>
          <td>A list of key-value pairs. Use to provide more metadata for servers. Can then (among other things) be used to created more advanced Grafana dashboards.</td>
      </tr>
      <tr>
          <td>headers</td>
          <td>A list of key-value pairs. Headers specified here will be used when retrieving metrics from this Sense server.</td>
      </tr>
  </tbody>
</table>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-7498139bb0a571d254834061181e3157">5.3 - Available Metrics</h1>
    <div class="lead">In order to create graphs in for example Grafana, you must understand what metrics are available and how they are structured.</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-c37c040476ce40f3021dc2975240119e">5.3.1 - Available metrics: InfluxDB</h1>
    <div class="lead">In order to create dashboards in for example Grafana, you must understand what metrics are available and how they are structured.</div>
	<h2 id="influxdb">InfluxDB</h2>
<p>Metrics retrieved from the Sense servers can be stored in an <a href="https://www.influxdata.com/products/influxdb-overview/">InfluxDB</a> database. You don&rsquo;t have to be an InfluxDB expert to use Butler SOS, but understanding some basic concepts are helpful.</p>
<p>Storing metrics in InfluxDB is not mandatory, but some kind of metrics storage - either in InfluxDB, <a href="https://newrelic.com">New Relic</a> or <a href="/docs/reference/available_metrics/prometheus/">Prometheus</a> - is needed to take full benefit of Butler SOS&rsquo; features.</p>
<ul>
<li>InfluxDB is a <a href="https://www.influxdata.com/time-series-database/">time series database</a>. This means it is super good at storing values that have a timestamp associated with them - and pretty bad at everything else. In many respects time series databases are the opposite of traditional SQL databases (who are usually pretty bad at handling time series data).</li>
<li>Because of it&rsquo;s focus on time series data, InfluxDB v1 has its own query language, <a href="https://docs.influxdata.com/influxdb/v1.7/query_language/">InfluxQL</a>. It is somewhat similar to SQL, but also has many unique commands and features.
<ul>
<li>Influx DB v2 has a new query language called <a href="https://docs.influxdata.com/influxdb/v2.0/query-data/get-started/">Flux</a>. There are compatibility layers in InfluxDB v2 that allow you to use InfluxQL, meaning that existing Grafana dashboards and can be kept as they are, even if you upgrade to InfluxDB v2.</li>
<li>Flux is a more powerful query language than InfluxQL, but it also has a steeper learning curve. By learning Flux you will be able to do more advanced things with your data, for example in Grafana dashboards.</li>
</ul>
</li>
<li>It&rsquo;s worth browsing through the <a href="https://docs.influxdata.com/influxdb/">InfluxDB documentation</a> to get a feel for what InfluxDB is and how it works.
<ul>
<li><a href="https://docs.influxdata.com/influxdb/v1/">InfluxDB v1 documentation</a>.</li>
<li><a href="https://docs.influxdata.com/influxdb/v2/">InfluxDB v2 documentation</a>.</li>
</ul>
</li>
</ul>
<style type="text/css">.notice{--root-color:#444;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#c33;--warning-content:#fee;--info-title:#fb7;--info-content:#fec;--note-title:#6be;--note-content:#e7f2fa;--tip-title:#5a5;--tip-content:#efe}@media (prefers-color-scheme:dark){.notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}}body.dark .notice{--root-color:#ddd;--root-background:#eff;--title-color:#fff;--title-background:#7bd;--warning-title:#800;--warning-content:#400;--info-title:#a50;--info-content:#420;--note-title:#069;--note-content:#023;--tip-title:#363;--tip-content:#121}.notice{padding:18px;line-height:24px;margin-bottom:24px;border-radius:4px;color:var(--root-color);background:var(--root-background)}.notice p:last-child{margin-bottom:0}.notice-title{margin:-18px -18px 12px;padding:4px 18px;border-radius:4px 4px 0 0;font-weight:700;color:var(--title-color);background:var(--title-background)}.notice.warning .notice-title{background:var(--warning-title)}.notice.warning{background:var(--warning-content)}.notice.info .notice-title{background:var(--info-title)}.notice.info{background:var(--info-content)}.notice.note .notice-title{background:var(--note-title)}.notice.note{background:var(--note-content)}.notice.tip .notice-title{background:var(--tip-title)}.notice.tip{background:var(--tip-content)}.icon-notice{display:inline-flex;align-self:center;margin-right:8px}.icon-notice img,.icon-notice svg{height:1em;width:1em;fill:currentColor}.icon-notice img,.icon-notice.baseline svg{top:.125em;position:relative}</style>
<div><svg width="0" height="0" display="none" xmlns="http://www.w3.org/2000/svg"><symbol id="tip-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"/></symbol><symbol id="note-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="warning-notice" viewBox="0 0 576 512" preserveAspectRatio="xMidYMid meet"><path d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"/></symbol><symbol id="info-notice" viewBox="0 0 512 512" preserveAspectRatio="xMidYMid meet"><path d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"/></symbol></svg></div><div class="notice tip" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#tip-notice"></use></svg></span>Tip</p><p>The list of metrics below shows <em>all</em> metrics that Butler SOS can store in InfluxDB.</p>
<p>If you have disabled some features of Butler SOS, the associated metrics will not be stored in InfluxDB.</p></div>

<h3 id="influxdb-v1-vs-v2">InfluxDB v1 vs v2</h3>
<p>That are some differences between InfluxDB v1 and v2 when it comes to terminology and concepts.</p>
<p>For example in InfluxDB v1, the main concepts are <em>databases</em>, <em>measurements</em>, <em>field keys</em> and <em>tag keys</em>.<br>
In InfluxDB v2 the main concepts are <em>buckets</em>, <em>measurements</em>, <em>fields</em> and <em>tags</em>.</p>
<p>The concepts are very similar, but the names are different.</p>
<p>The metrics below are the same for both InfluxDB v1 and v2.</p>
<h2 id="overview">Overview</h2>
<p><em>Measurements</em> are just what it sounds like: snapshots of some value(s), taken at a specific point in time.
A measurement can contain several <em>field keys</em>, which for practical purposes can be viewed as the individual metrics.</p>
<p>For example, the list of measurements look like this (using the InfluxDB command line client to explore the database structure):</p>
<pre tabindex="0"><code>&gt; use senseops
Using database senseops
&gt; show measurements
name: measurements
name
----
apps
butlersos_memory_usage
cache
cpu
log_event
log_event_logdb
mem
saturated
sense_server
session
user_events
user_session_details
user_session_list
user_session_summary
users
&gt;
</code></pre><p>Let&rsquo;s take a look at what field keys the <code>apps</code> measurement contains:</p>
<pre tabindex="0"><code>&gt; show field keys from apps
name: apps
fieldKey                     fieldType
--------                     ---------
active_docs                  string
active_docs_count            integer
active_docs_names            string
active_session_docs_names    string
calls                        integer
in_memory_docs               string
in_memory_docs_count         integer
in_memory_docs_names         string
in_memory_session_docs_names string
loaded_docs                  string
loaded_docs_count            integer
loaded_docs_names            string
loaded_session_docs_names    string
selections                   integer
&gt;
</code></pre><p>Ok, so the field keys are the actual metrics for which we gather data. Collectively those metrics (again: <em>field keys</em> in InfluxDB lingo) above are grouped into a <em>measurement</em> called <code>apps</code>.</p>
<p>There is one more concept you need to understand: <em>tag keys</em></p>
<p>It&rsquo;s pretty simple: Tag keys are used to categorize (or simply &ldquo;tag&rdquo;) measurements.<br>
Let&rsquo;s say you use Butler SOS to collect data from ten Sense servers. That&rsquo;s great, but how will you later distinguish between server 3 and server 8? You need some way of telling your Grafana dashboard to show the data for server 3 (if that&rsquo;s what you want).</p>
<p>Tags solve this. In the Butler SOS YAML config file you can define any number of tags that will be used to tag data coming in from Qlik Sense.</p>
<p>The beauty of tags is that they play very nicely with Grafana - without them the Grafana dashboards would not be nearly as flexible as they are.</p>
<p>To see what tag keys a certain measurement has you use a query similar to the one above/for fields:</p>
<pre tabindex="0"><code>&gt; show tag keys from apps
name: apps
tagKey
------
host
serverBrand
serverLocation
server_description
server_group
server_name
server_type
</code></pre><p>Note that this list of tags consists of two parts:</p>
<ol>
<li>Tags always present. These are inserted by Butler SOS and are present for all measurements. These are <code>host</code>, <code>server_description</code> and <code>server_name</code>.</li>
<li>Tags configured in Butler SOS&rsquo; config file. In the example above these are <code>serverBrand</code>, <code>serverLocation</code>, <code>server_group</code> and<code>server_type</code>.</li>
</ol>
<h2 id="measurements-and-fields">Measurements and fields</h2>
<p>The measurements are grouped based on what part of Sense they are retrieved from. The groups are</p>
<ol>
<li>General health metrics.</li>
<li>Metrics about user sessions, for example how many sessions there are per virtual proxy.</li>
<li>Event counters: Counters for the different types of events received from Sense.</li>
<li>User events: Session and connection related messages from QSEoW logs.</li>
<li>Log events: Warning, error and fatal messages from QSEoW logs.</li>
<li>Performance log events. Events from the QIX engine. Used to monitor performance of individual charts and other app objects.</li>
<li>Messages from the log database (deprecated, will be removed during 2nd half of 2024).</li>
<li>Metric relating to Butler SOS itself (i.e. not retrieved from Sense).</li>
</ol>
<h2 id="general-health-metrics">General health metrics</h2>
<p>A shared set of tag keys are available for all general health metrics:</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>host</td>
          <td>Host name, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].host</code> property. Usually a fully qualified host name, or in some cases an IP address.</td>
      </tr>
      <tr>
          <td>server_name</td>
          <td>Human readable/friendly server name, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].serverName</code> property.</td>
      </tr>
      <tr>
          <td>server_description</td>
          <td>Description of the server, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].serverDescription</code> property.</td>
      </tr>
  </tbody>
</table>
<p>In addition to the above, all tags defined in the YAML config file for the servers will be included as tag keys.</p>
<h3 id="measurement-apps">Measurement: apps</h3>
<p>Source: <a href="https://help.qlik.com/en-US/sense-developer/November2021/Subsystems/EngineAPI/Content/Sense_EngineAPI/GettingSystemInformation/HealthCheckStatus.htm">Health check API</a></p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>active_docs</td>
          <td>string</td>
          <td>An array of GUIDs of active apps. Empty if no apps are active. An app is active when a user is currently performing some action on it.</td>
      </tr>
      <tr>
          <td>active_docs_count</td>
          <td>integer</td>
          <td>Number of currently active apps</td>
      </tr>
      <tr>
          <td>active_docs_names</td>
          <td>string</td>
          <td>Names of currently active (non-session) apps</td>
      </tr>
      <tr>
          <td>active_session_docs_names</td>
          <td>string</td>
          <td>Names of currently active session apps</td>
      </tr>
      <tr>
          <td>in_memory_docs</td>
          <td>string</td>
          <td>An array of the GUIDs of all apps currently loaded into the memory, even if they do not have any open sessions or connections to it. The apps disappear from the list when the engine has purged them out from memory.</td>
      </tr>
      <tr>
          <td>in_memory_docs_count</td>
          <td>integer</td>
          <td>Number of apps currently in memory</td>
      </tr>
      <tr>
          <td>in_memory_docs_names</td>
          <td>string</td>
          <td>Names of (non-session) apps currently in memory</td>
      </tr>
      <tr>
          <td>in_memory_session_docs_names</td>
          <td>string</td>
          <td>Names of session apps currently in memory</td>
      </tr>
      <tr>
          <td>loaded_docs</td>
          <td>string</td>
          <td>An array of the GUIDs of apps currently loaded into memory and that have open sessions or connections. Empty if no apps are loaded.</td>
      </tr>
      <tr>
          <td>loaded_docs_count</td>
          <td>integer</td>
          <td>Number of currently loaded apps</td>
      </tr>
      <tr>
          <td>loaded_docs_names</td>
          <td>string</td>
          <td>Names of currently loaded (non-session) apps</td>
      </tr>
      <tr>
          <td>loaded_session_docs_names</td>
          <td>string</td>
          <td>Names of currently loaded session apps</td>
      </tr>
      <tr>
          <td></td>
          <td></td>
          <td></td>
      </tr>
      <tr>
          <td>calls</td>
          <td>integer</td>
          <td>Number of calls to the Qlik associative engine since it started</td>
      </tr>
      <tr>
          <td>selections</td>
          <td>integer</td>
          <td>Number of selections made in Qlik associative engine since it started</td>
      </tr>
  </tbody>
</table>
<h3 id="measurement-cache">Measurement: cache</h3>
<p>Source: <a href="https://help.qlik.com/en-US/sense-developer/June2020/Subsystems/EngineAPI/Content/Sense_EngineAPI/GettingSystemInformation/HealthCheckStatus.htm">Health check API</a></p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>added</td>
          <td>integer</td>
          <td>Number of cache objects added to the cache</td>
      </tr>
      <tr>
          <td>bytes_added</td>
          <td>integer</td>
          <td>Number of bytes added to the cache</td>
      </tr>
      <tr>
          <td>hits</td>
          <td>integer</td>
          <td>Number of cache hits in engine</td>
      </tr>
      <tr>
          <td>lookups</td>
          <td>integer</td>
          <td>Number of lookups in engine</td>
      </tr>
      <tr>
          <td>replaced</td>
          <td>integer</td>
          <td>Number of cache objects replaced</td>
      </tr>
  </tbody>
</table>
<h3 id="measurement-cpu">Measurement: cpu</h3>
<p>Source: <a href="https://help.qlik.com/en-US/sense-developer/June2020/Subsystems/EngineAPI/Content/Sense_EngineAPI/GettingSystemInformation/HealthCheckStatus.htm">Health check API</a></p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>total</td>
          <td>integer</td>
          <td>Percentage of the CPU used by the engine, averaged over a time period of 30 seconds.</td>
      </tr>
  </tbody>
</table>
<h3 id="measurement-mem">Measurement: mem</h3>
<p>Source: <a href="https://help.qlik.com/en-US/sense-developer/June2020/Subsystems/EngineAPI/Content/Sense_EngineAPI/GettingSystemInformation/HealthCheckStatus.htm">Health check API</a></p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>allocated</td>
          <td>integer</td>
          <td>The total amount of allocated memory (committed + reserved) from the operating system in MB.</td>
      </tr>
      <tr>
          <td>committed</td>
          <td>integer</td>
          <td>The total amount of committed memory for the engine process in MB.</td>
      </tr>
      <tr>
          <td>free</td>
          <td>integer</td>
          <td>The total amount of free memory (minimum of free virtual and physical memory) in MB.</td>
      </tr>
  </tbody>
</table>
<h3 id="measurement-saturated">Measurement: saturated</h3>
<p>Source: <a href="https://help.qlik.com/en-US/sense-developer/June2020/Subsystems/EngineAPI/Content/Sense_EngineAPI/GettingSystemInformation/HealthCheckStatus.htm">Health check API</a></p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>saturated</td>
          <td>boolean</td>
          <td>When the value is true, the engine is running with high resource usage; otherwise the value is false. See link above for details.</td>
      </tr>
  </tbody>
</table>
<h3 id="measurement-sense_server">Measurement: sense_server</h3>
<p>Source: <a href="https://help.qlik.com/en-US/sense-developer/June2020/Subsystems/EngineAPI/Content/Sense_EngineAPI/GettingSystemInformation/HealthCheckStatus.htm">Health check API</a></p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>started</td>
          <td>string</td>
          <td>ISO timestamp when the engine service was started.</td>
      </tr>
      <tr>
          <td>uptime</td>
          <td>string</td>
          <td>Time since engine service was started (human readable).</td>
      </tr>
      <tr>
          <td>version</td>
          <td>string</td>
          <td>Engine version.</td>
      </tr>
  </tbody>
</table>
<h3 id="measurement-session">Measurement: session</h3>
<p>Source: <a href="https://help.qlik.com/en-US/sense-developer/June2020/Subsystems/EngineAPI/Content/Sense_EngineAPI/GettingSystemInformation/HealthCheckStatus.htm">Health check API</a></p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>active</td>
          <td>integer</td>
          <td>Number of active engine sessions. A session is active when a user is currently performing some action on an app, for example, making selections or creating content.</td>
      </tr>
      <tr>
          <td>total</td>
          <td>integer</td>
          <td>Total number of engine sessions.</td>
      </tr>
  </tbody>
</table>
<h3 id="measurement-users">Measurement: users</h3>
<p>Source: <a href="https://help.qlik.com/en-US/sense-developer/June2020/Subsystems/EngineAPI/Content/Sense_EngineAPI/GettingSystemInformation/HealthCheckStatus.htm">Health check API</a></p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>active</td>
          <td>integer</td>
          <td>Number of users currently doing something in some app.</td>
      </tr>
      <tr>
          <td>total</td>
          <td>integer</td>
          <td>Number of users with established sessions to the Sense server.</td>
      </tr>
  </tbody>
</table>
<h2 id="user-session-details">User session details</h2>
<p>User session metrics have slightly different tag keys depending on the granularity level of the metric - those metrics are therefore listed under each heading below.</p>
<h3 id="measurement-user_session_summary">Measurement: user_session_summary</h3>
<p>Source: <a href="https://help.qlik.com/en-US/sense-developer/June2020/Subsystems/ProxyServiceAPI/Content/Sense_ProxyServiceAPI/ProxyServiceAPI-Session-Module-API.htm">Session module API</a></p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>session_count</td>
          <td>float</td>
          <td>Total number of sessions, per server and virtual proxy.</td>
      </tr>
      <tr>
          <td>session_user_id_list</td>
          <td>string</td>
          <td>List of user IDs with sessions, per server and virtual proxy. NOTE: A single user may have more than one session open to a particular server/virtual proxy.</td>
      </tr>
  </tbody>
</table>
<p>Tag keys:</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>host</td>
          <td>Host name, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].host</code> property. Usually a fully qualified host name, or in some cases an IP address.</td>
      </tr>
      <tr>
          <td>server_name</td>
          <td>Human readable/friendly server name, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].serverName</code> property.</td>
      </tr>
      <tr>
          <td>server_description</td>
          <td>Description of the server, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].serverDescription</code> property.</td>
      </tr>
      <tr>
          <td>user_session_host</td>
          <td>Host name the session metrics are associated with.</td>
      </tr>
      <tr>
          <td>user_session_virtual_proxy</td>
          <td>Virtual proxy name the session metrics are associated with.</td>
      </tr>
  </tbody>
</table>
<h3 id="measurement-user_session_list">Measurement: user_session_list</h3>
<p>Source: <a href="https://help.qlik.com/en-US/sense-developer/June2020/Subsystems/ProxyServiceAPI/Content/Sense_ProxyServiceAPI/ProxyServiceAPI-Session-Module-API.htm">Session module API</a></p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>session_user_id_list</td>
          <td>string</td>
          <td>List of user IDs with sessions, per server and virtual proxy. NOTE: A single user may have more than one session open to a particular server/virtual proxy.</td>
      </tr>
  </tbody>
</table>
<p>Tag keys:</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>host</td>
          <td>Host name, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].host</code> property. Usually a fully qualified host name, or in some cases an IP address.</td>
      </tr>
      <tr>
          <td>server_name</td>
          <td>Human readable/friendly server name, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].serverName</code> property.</td>
      </tr>
      <tr>
          <td>server_description</td>
          <td>Description of the server, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].serverDescription</code> property.</td>
      </tr>
      <tr>
          <td>user_session_host</td>
          <td>Host name the session metrics are associated with.</td>
      </tr>
      <tr>
          <td>user_session_virtual_proxy</td>
          <td>Virtual proxy name the session metrics are associated with.</td>
      </tr>
  </tbody>
</table>
<h3 id="measurement-user_session_details">Measurement: user_session_details</h3>
<p>Source: <a href="https://help.qlik.com/en-US/sense-developer/June2020/Subsystems/ProxyServiceAPI/Content/Sense_ProxyServiceAPI/ProxyServiceAPI-Session-Module-API.htm">Session module API</a></p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>session_id</td>
          <td>string</td>
          <td>Session GUID, uniquely identifying the session in the entire Sense cluster.</td>
      </tr>
      <tr>
          <td>user_directory</td>
          <td>string</td>
          <td>Session user&rsquo;s user directory.</td>
      </tr>
      <tr>
          <td>user_id</td>
          <td>string</td>
          <td>Session user ID</td>
      </tr>
  </tbody>
</table>
<p>Tag keys:</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>host</td>
          <td>Host name, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].host</code> property. Usually a fully qualified host name, or in some cases an IP address.</td>
      </tr>
      <tr>
          <td>server_name</td>
          <td>Human readable/friendly server name, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].serverName</code> property.</td>
      </tr>
      <tr>
          <td>server_description</td>
          <td>Description of the server, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].serverDescription</code> property.</td>
      </tr>
      <tr>
          <td>user_session_host</td>
          <td>Host name the session metrics are associated with.</td>
      </tr>
      <tr>
          <td>user_session_virtual_proxy</td>
          <td>Virtual proxy name the session metrics are associated with.</td>
      </tr>
      <tr>
          <td>user_session_id</td>
          <td>Session GUID</td>
      </tr>
      <tr>
          <td>user_session_user_directory</td>
          <td>User&rsquo;s user directory</td>
      </tr>
      <tr>
          <td>user_session_user_id</td>
          <td>User ID</td>
      </tr>
  </tbody>
</table>
<h2 id="event-counters">Event counters</h2>
<p>Event counters are used to count the number of events received from Sense.</p>
<p>The measurement name is configured in the Butler SOS YAML config file, <code>Butler-SOS.qlikSenseEvents.eventCount.influxdb.measurementName</code>.</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>event_type</td>
          <td>Type of event. <code>log</code> or <code>user</code>.</td>
      </tr>
      <tr>
          <td>host</td>
          <td>Host name of the Sense server generating the event.</td>
      </tr>
      <tr>
          <td>source</td>
          <td>Source system within Sense that caused the event. Examples: <code>qseow-scheduler</code>, <code>qseow-proxy</code>, <code>qseow-engine</code>, <code>qseow-repository</code></td>
      </tr>
      <tr>
          <td>subsystem</td>
          <td>Subsystem where the event originated. More granular than <code>source</code>. Example: <code>System.Scheduler.Scheduler.Master.Task.TaskSession</code></td>
      </tr>
  </tbody>
</table>
<p>Static tags defined in the config file, <code>Butler-SOS.qlikSenseEvents.eventCount.influxdb.tags</code>, are also added to the InfluxDB datapoints.</p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>counter</td>
          <td>Number of events received.</td>
      </tr>
  </tbody>
</table>
<h3 id="unrecognized-events">Unrecognized events</h3>
<p>Unrecognized events are events that Butler SOS receives from Sense, but that do not have a valid source (<code>qseow-scheduler</code>, <code>qseow-proxy</code>, <code>qseow-engine</code>, <code>qseow-repository</code> etc).</p>
<p>These events will get a <code>event_type</code> of <code>user</code> or <code>log</code> based on what UDP port they arrived on.<br>
The <code>source</code>, <code>host</code> and <code>subsystem</code> tags will be set to <code>Unknown</code>.</p>
<h2 id="user-events">User events</h2>
<p>User events capture real-time events in Qlik Sense as they happen.<br>
They originate from Sense&rsquo;s log4net logging framework and are forwarded from Sense to Butler SOS by means of XML log appenders in Sense.<br>
These events are also forwarded as MQTT messages, allowing other systems to act when warnings/errors/fatals occur in Qlik Sense.</p>
<p>Setup instructions <a href="/docs/getting_started/setup/user-events/">here</a>.</p>
<p>The following user events are handled by Butler SOS:</p>
<ul>
<li>Session start</li>
<li>Session stop</li>
<li>Connection open</li>
<li>Connection close.</li>
</ul>
<h3 id="measurement-user_events">Measurement: user_events</h3>
<p>Tag keys present for all <code>user_events</code> records:</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>event_action</td>
          <td>Indicates what the event is about. Examples: <code>Start session</code>, <code>Stop session</code>, <code>Open connection</code>, <code>Close connection</code>.</td>
      </tr>
      <tr>
          <td>host</td>
          <td>Host name as reported in Qlik Sense&rsquo;s proxy log files.</td>
      </tr>
      <tr>
          <td>origin</td>
          <td>Textual description of what caused the event. Can for example be <code>AppAccess</code>, which means a user opened or closed a browser tab with a Sense app in it.</td>
      </tr>
      <tr>
          <td>userDirectory</td>
          <td>Sense user directory of the user causing the event.</td>
      </tr>
      <tr>
          <td>userId</td>
          <td>Sense user ID for the user causing the event.</td>
      </tr>
      <tr>
          <td>userFull</td>
          <td>The combination of <code>userDirectory</code> and <code>userId</code>.</td>
      </tr>
  </tbody>
</table>
<p>If the user event includes browser user agent information, the following tags will be present:</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>uaBrowserName</td>
          <td>Name of connecting user&rsquo;s browser.</td>
      </tr>
      <tr>
          <td>uaBrowserMajorVersion</td>
          <td>Connecting user&rsquo;s browser version.</td>
      </tr>
      <tr>
          <td>uaOsName</td>
          <td>Connecting user&rsquo;s operating system.</td>
      </tr>
      <tr>
          <td>uaOsVersion</td>
          <td>Connecting user&rsquo;s operating system version.</td>
      </tr>
  </tbody>
</table>
<p>In addition to the above tags defined in the Butler SOS config file will be added.<br>
More info <a href="/docs/getting_started/setup/user-events/#settings-in-main-config-file">here</a>.</p>
<p>Fields:</p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>appId</td>
          <td>Id of app that is opened/closed.</td>
      </tr>
      <tr>
          <td>appName</td>
          <td>Name of app that is opened/closed.</td>
      </tr>
      <tr>
          <td>userFull</td>
          <td>Same as the userFull tag.</td>
      </tr>
      <tr>
          <td>userId</td>
          <td>Same as the userId tag.</td>
      </tr>
  </tbody>
</table>
<h2 id="log-events">Log events</h2>
<p>Log events are used to capture warning, error and fatal messages in Sense. Once in Butler SOS these events are stored in InfluxDB (enabling Grafana dashboards).<br>
These events are also forwarded as MQTT messages, allowing other systems to act when warnings/errors/fatals occur in Qlik Sense.</p>
<p>Setup instructions <a href="/docs/getting_started/setup/log-events/">here</a>.</p>
<div class="notice info" >
<p class="first notice-title"><span class="icon-notice baseline"><svg><use href="#info-notice"></use></svg></span>Info</p><p>There is only one measurement for log events. It&rsquo;s simply called <code>log_event</code>.</p>
<p>Different QSEoW services (Qlik Sense Enterprise on Windows) will send different tags and metrics in the log events.<br>
Each variant is described below.</p>
<p>This modular approach to log events makes it possible to extend Butler SOS&rsquo; with additional log events if/when needed..</p></div>

<p><em>Note 1: Static tags are added as for all log events, as defined in the config file, <code>Butler-SOS.logEvents.tags</code>.</em></p>
<p><em>Note 2: If log event categorization is enabled in the YAML config file, the categories defined there will be added as tags to the log event data points written to InfluxDB.</em></p>
<h3 id="source-proxy-service">Source: Proxy service</h3>
<p>Events such as failed login attempts will be sent from the proxy service.</p>
<p>Proxy log events have these tags:</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>host</td>
          <td>Host name as reported in Qlik Sense&rsquo;s log files.</td>
      </tr>
      <tr>
          <td>level</td>
          <td>Sense log level. Possible values are <code>WARN</code>, <code>ERROR</code>, <code>FATAL</code>.</td>
      </tr>
      <tr>
          <td>log_row</td>
          <td>Row number in Sense log file where the event can be found. Useful if you after all have to dig into the log files.</td>
      </tr>
      <tr>
          <td>result_code</td>
          <td>Result code as reported by the Sense source system that caused the event. Its meaning will differ depending on where the event originated.</td>
      </tr>
      <tr>
          <td>source</td>
          <td>Source system within Sense that caused the event. Examples: <code>qseow-scheduler</code>, <code>qseow-proxy</code>, <code>qseow-repository</code></td>
      </tr>
      <tr>
          <td>subsystem</td>
          <td>Subsystem where the event originated. More granular than <code>source</code>. Example: <code>System.Scheduler.Scheduler.Master.Task.TaskSession</code></td>
      </tr>
      <tr>
          <td>user_directory</td>
          <td>Sense user directory of the user causing the event. Example: <code>MYCOMPANY</code></td>
      </tr>
      <tr>
          <td>user_id</td>
          <td>Sense user ID for the user causing the event. Example: <code>joe</code></td>
      </tr>
      <tr>
          <td>user_full</td>
          <td>The combination of <code>user_directory</code> and <code>user_id</code>. Example: <code>MYCOMPANY\joe</code></td>
      </tr>
  </tbody>
</table>
<p>Fields in proxy log events:</p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>command</td>
          <td>Description of what caused the event, as found in the Sense logs. Example: <code>Login:TryLogin</code></td>
      </tr>
      <tr>
          <td>context</td>
          <td>In what context (if one exists) the event occurred. If no context is available <code>Not available</code> will be used.</td>
      </tr>
      <tr>
          <td>exception_message</td>
          <td>If a serious problem/exception occurs the associated message is available here.</td>
      </tr>
      <tr>
          <td>message</td>
          <td>Description of what the event is about. Example: <code>Login failed for user 'LAB\\goran' wrong credentials?</code></td>
      </tr>
      <tr>
          <td>origin</td>
          <td>Example: <code>qseow-repository.</code></td>
      </tr>
      <tr>
          <td>raw_event</td>
          <td>The raw event message as received from QSEoW. Described <a href="https://github.com/ptarmiganlabs/butler-sos/blob/bd9135d953d4fc2d025dc8326956b2504b3d06d4/src/lib/udp_handlers_log_events.js#L26">here</a>.</td>
      </tr>
      <tr>
          <td>result_code</td>
          <td>Example: <code>500</code></td>
      </tr>
  </tbody>
</table>
<p>The <code>raw_event</code> is the actual log event message sent from QSEoW to Butler SOS.<br>
It has the following components:</p>
<table>
  <thead>
      <tr>
          <th>Part of message</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>command</td>
          <td>Description of what caused the event, as found in the Sense logs. Example: <code>Login:TryLogin</code></td>
      </tr>
      <tr>
          <td>context</td>
          <td>In what context (if one exists) the event occurred. If no context is available <code>Not available</code> will be used.</td>
      </tr>
      <tr>
          <td>exception_message</td>
          <td>If a serious problem/exception occurs the associated message is available here.</td>
      </tr>
      <tr>
          <td>host</td>
          <td>Host name as reported in Qlik Sense&rsquo;s log files.</td>
      </tr>
      <tr>
          <td>level</td>
          <td>Sense log level. Possible values are <code>WARN</code>, <code>ERROR</code>, <code>FATAL</code>.</td>
      </tr>
      <tr>
          <td>log_row</td>
          <td>Row number in Sense log file where the event can be found. Useful if you after all have to dig into the log files.</td>
      </tr>
      <tr>
          <td>message</td>
          <td>Description of what the event is about. Example: <code>Login failed for user 'LAB\\goran' wrong credentials?</code></td>
      </tr>
      <tr>
          <td>origin</td>
          <td>Party of the proxy service the event originated from. Rarely used by Sense.</td>
      </tr>
      <tr>
          <td>result_code</td>
          <td>Result code as reported by the Sense source system that caused the event. Its meaning will differ depending on where the event originated. Example: <code>500</code></td>
      </tr>
      <tr>
          <td>source</td>
          <td>Source system within Sense that caused the event. Examples: <code>qseow-scheduler</code>, <code>qseow-proxy</code>, <code>qseow-repository</code></td>
      </tr>
      <tr>
          <td>subsystem</td>
          <td>Subsystem where the event originated. More granular than <code>source</code>. Example: <code>System.Scheduler.Scheduler.Master.Task.TaskSession</code></td>
      </tr>
      <tr>
          <td>tags</td>
          <td>User defined tags. Set in the main YAML config file. Example: <code>{&quot;env&quot;:&quot;DEV&quot;,&quot;foo&quot;:&quot;bar&quot;}</code></td>
      </tr>
      <tr>
          <td>ts_iso</td>
          <td>Timestamp (ISO format) when the event occurred, according to QSEoW. Example: <code>20211126T214006.122+0100</code></td>
      </tr>
      <tr>
          <td>ts_local</td>
          <td>Event timestamp (time format of Sense server). Example: <code>2021-11-26 21:40:06,122</code></td>
      </tr>
      <tr>
          <td>user_directory</td>
          <td>Sense user directory of the user causing the event. Example: <code>MYCOMPANY</code></td>
      </tr>
      <tr>
          <td>user_full</td>
          <td>The combination of <code>user_directory</code> and <code>user_id</code>. Example: <code>MYCOMPANY\joe</code></td>
      </tr>
      <tr>
          <td>user_id</td>
          <td>Sense user ID for the user causing the event. Example: <code>joe</code></td>
      </tr>
      <tr>
          <td>windows_user</td>
          <td>Windows account used to run the proxy QSEoW Windows service. Example: <code>LAB\\qlikservice</code></td>
      </tr>
  </tbody>
</table>
<h3 id="source-scheduler-service">Source: Scheduler service</h3>
<p>Events such as failed reload tasks will be sent from the scheduler service.</p>
<p>Scheduler log events have these tags:</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>host</td>
          <td>Host name as reported in Qlik Sense&rsquo;s log files.</td>
      </tr>
      <tr>
          <td>level</td>
          <td>Sense log level. Possible values are <code>WARN</code>, <code>ERROR</code>, <code>FATAL</code>.</td>
      </tr>
      <tr>
          <td>log_row</td>
          <td>Row number in Sense log file where the event can be found. Useful if you after all have to dig into the log files.</td>
      </tr>
      <tr>
          <td>source</td>
          <td>Source system within Sense that caused the event. Examples: <code>qseow-scheduler</code>, <code>qseow-proxy</code>, <code>qseow-repository</code></td>
      </tr>
      <tr>
          <td>subsystem</td>
          <td>Subsystem where the event originated. More granular than <code>source</code>. Example: <code>System.Scheduler.Scheduler.Master.Task.TaskSession</code></td>
      </tr>
      <tr>
          <td>user_directory</td>
          <td>Sense user directory of the user causing the event. Example: <code>MYCOMPANY</code></td>
      </tr>
      <tr>
          <td>user_id</td>
          <td>Sense user ID for the user causing the event. Example: <code>joe</code></td>
      </tr>
      <tr>
          <td>user_full</td>
          <td>The combination of <code>user_directory</code> and <code>user_id</code>. Example: <code>MYCOMPANY\joe</code></td>
      </tr>
      <tr>
          <td>task_id</td>
          <td>Task ID (if a task is involved in the event, for example task failing). Example: <code>58dd8322-e39c-4b71-b74e-13c47a2f6dd4</code></td>
      </tr>
      <tr>
          <td>task_name</td>
          <td>Task name (if a task is involved in the event). Example: <code>Reload task of Meetup.com</code></td>
      </tr>
  </tbody>
</table>
<p>Fields in scheduler log events:</p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>app_id</td>
          <td>Application ID (if an app is involved in the event). Example: <code>deba4bcf-47e4-472e-97b2-4fe8d6498e11</code></td>
      </tr>
      <tr>
          <td>app_name</td>
          <td>Application name (if an app is involved in the event). Example: <code>Meetup.com</code></td>
      </tr>
      <tr>
          <td>exception_message</td>
          <td>If a serious problem/exception occurs the associated message is available here.</td>
      </tr>
      <tr>
          <td>execution_id</td>
          <td>ID identifying a particular task execution. Example: <code>67a56c3b-2e20-4df8-ad1b-e48de28e1bfa</code></td>
      </tr>
      <tr>
          <td>message</td>
          <td>Description of what the event is about. Example: <code>Login failed for user 'LAB\\goran' wrong credentials?</code></td>
      </tr>
      <tr>
          <td>raw_event</td>
          <td>The raw event message as received from QSEoW. Described <a href="https://github.com/ptarmiganlabs/butler-sos/blob/bd9135d953d4fc2d025dc8326956b2504b3d06d4/src/lib/udp_handlers_log_events.js#L61">here</a>.</td>
      </tr>
  </tbody>
</table>
<p>The <code>raw_event</code> is the actual log event message sent from QSEoW to Butler SOS.<br>
It has the following components:</p>
<table>
  <thead>
      <tr>
          <th>Part of message</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>app_id</td>
          <td>Application ID (if an app is involved in the event). Example: <code>deba4bcf-47e4-472e-97b2-4fe8d6498e11</code></td>
      </tr>
      <tr>
          <td>app_name</td>
          <td>Application name (if an app is involved in the event). Example: <code>Meetup.com</code></td>
      </tr>
      <tr>
          <td>exception_message</td>
          <td>If a serious problem/exception occurs the associated message is available here.</td>
      </tr>
      <tr>
          <td>execution_id</td>
          <td>ID identifying a particular task execution. Example: <code>67a56c3b-2e20-4df8-ad1b-e48de28e1bfa</code></td>
      </tr>
      <tr>
          <td>host</td>
          <td>Host name as reported in Qlik Sense&rsquo;s log files.</td>
      </tr>
      <tr>
          <td>level</td>
          <td>Sense log level. Possible values are <code>WARN</code>, <code>ERROR</code>, <code>FATAL</code>.</td>
      </tr>
      <tr>
          <td>log_row</td>
          <td>Row number in Sense log file where the event can be found. Useful if you after all have to dig into the log files.</td>
      </tr>
      <tr>
          <td>message</td>
          <td>Description of what the event is about. Example: <code>Login failed for user 'LAB\\goran' wrong credentials?</code></td>
      </tr>
      <tr>
          <td>source</td>
          <td>Source system within Sense that caused the event. Example: <code>qseow-scheduler</code></td>
      </tr>
      <tr>
          <td>subsystem</td>
          <td>Subsystem where the event originated. More granular than <code>source</code>. Example: <code>System.Scheduler.Scheduler.Slave.Tasks.ReloadTask</code></td>
      </tr>
      <tr>
          <td>tags</td>
          <td>User defined tags. Set in the main YAML config file. Example: <code>{&quot;env&quot;:&quot;DEV&quot;,&quot;foo&quot;:&quot;bar&quot;}</code></td>
      </tr>
      <tr>
          <td>task_id</td>
          <td>Task ID (if a task is involved in the event, for example task failing). Example: <code>58dd8322-e39c-4b71-b74e-13c47a2f6dd4</code></td>
      </tr>
      <tr>
          <td>task_name</td>
          <td>Task name (if a task is involved in the event). Example: <code>Reload task of Meetup.com</code></td>
      </tr>
      <tr>
          <td>ts_iso</td>
          <td>Timestamp (ISO format) when the event occurred, according to QSEoW. Example: <code>20211126T214006.122+0100</code></td>
      </tr>
      <tr>
          <td>ts_local</td>
          <td>Event timestamp (time format of Sense server). Example: <code>2021-11-26 21:40:06,122</code></td>
      </tr>
      <tr>
          <td>user_directory</td>
          <td>Sense user directory of the user causing the event. Example: <code>MYCOMPANY</code></td>
      </tr>
      <tr>
          <td>user_full</td>
          <td>The combination of <code>user_directory</code> and <code>user_id</code>. Example: <code>MYCOMPANY\joe</code></td>
      </tr>
      <tr>
          <td>user_id</td>
          <td>Sense user ID for the user causing the event. Example: <code>joe</code></td>
      </tr>
      <tr>
          <td>windows_user</td>
          <td>Windows account used to run the proxy QSEoW Windows service. Example: <code>LAB\\qlikservice</code></td>
      </tr>
  </tbody>
</table>
<h3 id="source-repository-service">Source: Repository service</h3>
<p>The repository service is the hub around which the rest of Qlik Sense revolves.<br>
As such it emit events in many different situations. One example can be when a Sense node is offline (this example is used in the field description below).</p>
<p>Repository log events have these tags:</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>host</td>
          <td>Host name as reported in Qlik Sense&rsquo;s log files.</td>
      </tr>
      <tr>
          <td>level</td>
          <td>Sense log level. Possible values are <code>WARN</code>, <code>ERROR</code>, <code>FATAL</code>.</td>
      </tr>
      <tr>
          <td>log_row</td>
          <td>Row number in Sense log file where the event can be found. Useful if you after all have to dig into the log files.</td>
      </tr>
      <tr>
          <td>source</td>
          <td>Source system within Sense that caused the event. Examples: <code>qseow-scheduler</code>, <code>qseow-proxy</code>, <code>qseow-repository</code></td>
      </tr>
      <tr>
          <td>subsystem</td>
          <td>Subsystem where the event originated. More granular than <code>source</code>. Example: <code>System.Scheduler.Scheduler.Master.Task.TaskSession</code></td>
      </tr>
      <tr>
          <td>result_code</td>
          <td>Result code as reported by the Sense source system that caused the event. Its meaning will differ depending on where the event originated.</td>
      </tr>
      <tr>
          <td>user_directory</td>
          <td>Sense user directory of the user causing the event. Example: <code>MYCOMPANY</code></td>
      </tr>
      <tr>
          <td>user_id</td>
          <td>Sense user ID for the user causing the event. Example: <code>joe</code></td>
      </tr>
      <tr>
          <td>user_full</td>
          <td>The combination of <code>user_directory</code> and <code>user_id</code>. Example: <code>MYCOMPANY\joe</code></td>
      </tr>
  </tbody>
</table>
<p>Fields in scheduler log events:</p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>command</td>
          <td>Description of what caused the event, as found in the Sense logs. Example: <code>Login:TryLogin</code></td>
      </tr>
      <tr>
          <td>context</td>
          <td>In what context (if one exists) the event occurred. If no context is available <code>Not available</code> will be used.</td>
      </tr>
      <tr>
          <td>exception_message</td>
          <td>If a serious problem/exception occurs the associated message is available here.</td>
      </tr>
      <tr>
          <td>message</td>
          <td>Description of what the event is about. Example: <code>Login failed for user 'LAB\\goran' wrong credentials?</code></td>
      </tr>
      <tr>
          <td>origin</td>
          <td>Example: <code>qseow-repository.</code></td>
      </tr>
      <tr>
          <td>raw_event</td>
          <td>The raw event message as received from QSEoW. Described <a href="https://github.com/ptarmiganlabs/butler-sos/blob/bd9135d953d4fc2d025dc8326956b2504b3d06d4/src/lib/udp_handlers_log_events.js#L43">here</a>.</td>
      </tr>
      <tr>
          <td>result_code</td>
          <td>Example: <code>500</code></td>
      </tr>
  </tbody>
</table>
<p>The <code>raw_event</code> is the actual log event message sent from QSEoW to Butler SOS.<br>
It has the following components:</p>
<table>
  <thead>
      <tr>
          <th>Part of message</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>command</td>
          <td>Description of what caused the event, as found in the Sense logs. Example: <code>Check service status</code></td>
      </tr>
      <tr>
          <td>context</td>
          <td>In what context (if one exists) the event occurred. If no context is available <code>Not available</code> will be used. Example: <code>/qps/servicestatusworker</code></td>
      </tr>
      <tr>
          <td>exception_message</td>
          <td>If a serious problem/exception occurs the associated message is available here.</td>
      </tr>
      <tr>
          <td>host</td>
          <td>Host name of event source, as reported in Qlik Sense&rsquo;s log files. Example: <code>pro2-win1</code></td>
      </tr>
      <tr>
          <td>level</td>
          <td>Sense log level. Possible values are <code>WARN</code>, <code>ERROR</code>, <code>FATAL</code>.</td>
      </tr>
      <tr>
          <td>log_row</td>
          <td>Row number in Sense log file where the event can be found. Useful if you after all have to dig into the log files. Example: <code>7296</code></td>
      </tr>
      <tr>
          <td>message</td>
          <td>Description of what the event is about. Example: <code>Method: 'SendRimQrsStatusRequest'. Failed to retrieve service status from 'http://pro2-win3.lab.ptarmiganlabs.net:4444/status/'. Server host 'pro2-win3.lab.ptarmiganlabs.net'. Error message: 'Unable to connect to the remote server'</code></td>
      </tr>
      <tr>
          <td>origin</td>
          <td>Part of the proxy service the event originated from. Rarely used by Sense.</td>
      </tr>
      <tr>
          <td>result_code</td>
          <td>Result code as reported by the Sense source system that caused the event. Its meaning will differ depending on where the event originated. Example: <code>500</code></td>
      </tr>
      <tr>
          <td>source</td>
          <td>Source system within Sense that caused the event. Example: <code>qseow-repository</code></td>
      </tr>
      <tr>
          <td>subsystem</td>
          <td>Subsystem where the event originated. More granular than <code>source</code>. Example: <code>Service.Repository.Repository.Core.Status.ServiceStatusWorker</code></td>
      </tr>
      <tr>
          <td>tags</td>
          <td>User defined tags. Set in the main YAML config file. Example: <code>{&quot;env&quot;:&quot;DEV&quot;,&quot;foo&quot;:&quot;bar&quot;}</code></td>
      </tr>
      <tr>
          <td>ts_iso</td>
          <td>Timestamp (ISO format) when the event occurred, according to QSEoW. Example: <code>20211128T201538.508+0100</code></td>
      </tr>
      <tr>
          <td>ts_local</td>
          <td>Event timestamp (time format of Sense server). Example: <code>2021-11-28 20:15:38,508</code></td>
      </tr>
      <tr>
          <td>user_directory</td>
          <td>Sense user directory of the user causing the event. Example: <code>MYCOMPANY</code></td>
      </tr>
      <tr>
          <td>user_full</td>
          <td>The combination of <code>user_directory</code> and <code>user_id</code>. Example: <code>MYCOMPANY\joe</code></td>
      </tr>
      <tr>
          <td>user_id</td>
          <td>Sense user ID for the user causing the event. Example: <code>joe</code></td>
      </tr>
      <tr>
          <td>windows_user</td>
          <td>Windows account used to run the proxy QSEoW Windows service. Example: <code>LAB\\qlikservice</code></td>
      </tr>
  </tbody>
</table>
<h3 id="source-engine-service-errors-and-warnings">Source: Engine service (errors and warnings)</h3>
<p>The associative engine (the &ldquo;QIX&rdquo; engine) is the core of Qlik Sense. This is where the magic happens, all the calculations and selections in apps are ultimately done here.</p>
<p>Engine log events have these tags:</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>host</td>
          <td>Host name as reported in Qlik Sense&rsquo;s log files.</td>
      </tr>
      <tr>
          <td>level</td>
          <td>Sense log level. Possible values are <code>WARN</code>, <code>ERROR</code>, <code>FATAL</code>.</td>
      </tr>
      <tr>
          <td>log_row</td>
          <td>Row number in Sense log file where the event can be found. Useful if you after all have to dig into the log files.</td>
      </tr>
      <tr>
          <td>result_code</td>
          <td>Result code as reported by the Sense source system that caused the event. Its meaning will differ depending on where the event originated.</td>
      </tr>
      <tr>
          <td>source</td>
          <td>Source system within Sense that caused the event. Examples: <code>qseow-scheduler</code>, <code>qseow-proxy</code>, <code>qseow-repository</code></td>
      </tr>
      <tr>
          <td>subsystem</td>
          <td>Subsystem where the event originated. More granular than <code>source</code>. Example: <code>System.Scheduler.Scheduler.Master.Task.TaskSession</code></td>
      </tr>
      <tr>
          <td>user_directory</td>
          <td>Sense user directory of the user causing the event. Example: <code>MYCOMPANY</code></td>
      </tr>
      <tr>
          <td>user_id</td>
          <td>Sense user ID for the user causing the event. Example: <code>joe</code></td>
      </tr>
      <tr>
          <td>user_full</td>
          <td>The combination of <code>user_directory</code> and <code>user_id</code>. Example: <code>MYCOMPANY\joe</code></td>
      </tr>
      <tr>
          <td>windows_user</td>
          <td>Windows account used to run the engine QSEoW Windows service. Example: <code>LAB\\qlikservice</code></td>
      </tr>
      <tr>
          <td>task_id</td>
          <td>Task ID (if a task is involved in the event, for example task failing). Example: <code>58dd8322-e39c-4b71-b74e-13c47a2f6dd4</code></td>
      </tr>
      <tr>
          <td>task_name</td>
          <td>Task name (if a task is involved in the event). Example: <code>Reload task of Meetup.com</code></td>
      </tr>
      <tr>
          <td>app_id</td>
          <td>Application ID (if an app is involved in the event). Example: <code>deba4bcf-47e4-472e-97b2-4fe8d6498e11</code></td>
      </tr>
      <tr>
          <td>app_name</td>
          <td>Application name (if an app is involved in the event). Example: <code>Meetup.com</code></td>
      </tr>
      <tr>
          <td>engine_exe_version</td>
          <td>Version of the QIX engine executable.</td>
      </tr>
  </tbody>
</table>
<p>Fields in engine log events:</p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>command</td>
          <td>Description of what caused the event, as found in the Sense logs. Example: <code>Login:TryLogin</code></td>
      </tr>
      <tr>
          <td>context</td>
          <td>In what context (if one exists) the event occurred. If no context is available <code>Not available</code> will be used.</td>
      </tr>
      <tr>
          <td>exception_message</td>
          <td>If a serious problem/exception occurs the associated message is available here.</td>
      </tr>
      <tr>
          <td>message</td>
          <td>String. Description of what the event is about. Example: <code>Login failed for user 'LAB\\goran' wrong credentials?</code></td>
      </tr>
      <tr>
          <td>origin</td>
          <td>Part of the engine service the event originated from. Rarely used by Sense.</td>
      </tr>
      <tr>
          <td>raw_event</td>
          <td>The raw event message as received from QSEoW.</td>
      </tr>
      <tr>
          <td>session_id</td>
          <td>Engine session ID.</td>
      </tr>
      <tr>
          <td>result_code</td>
          <td>Result code as reported by the Sense source system that caused the event. Its meaning will differ depending on where the event originated. Example: <code>500</code></td>
      </tr>
  </tbody>
</table>
<h3 id="source-engine-service-performance-related-events">Source: Engine service (performance related events)</h3>
<p>Performance log events are used to capture <em>performance</em> related events from the associative/QIX engine.</p>
<p>Due to the potentially large number of performance log events, these can be filtered by Butler SOS.<br>
Accepted and rejected performance log events are stored in InfluxDB in slightly different ways.</p>
<h4 id="accepted-performance-log-events">Accepted performance log events</h4>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>host</code></td>
          <td>The hostname of the Sense server that generated the event.</td>
      </tr>
      <tr>
          <td><code>level</code></td>
          <td>The log level of the event. Always <code>INFO</code> for performance log events.</td>
      </tr>
      <tr>
          <td><code>source</code></td>
          <td>The source of the event. Always <code>qseow-qix-perf</code> for performance log events.</td>
      </tr>
      <tr>
          <td><code>log_row</code></td>
          <td>The log row number as created by Sense&rsquo;s logging framework.</td>
      </tr>
      <tr>
          <td><code>subsystem</code></td>
          <td>The subsystem that generated the event. Always <code>QixPerformance.Engine.Engine</code> for performance log events.</td>
      </tr>
      <tr>
          <td><code>method</code></td>
          <td>The engine method that generated the performance data. <code>Global::GetProgress</code>, <code>GenericObject::GetLayout</code>, <code>Global::OpenApp</code> etc</td>
      </tr>
      <tr>
          <td><code>object_type</code></td>
          <td>The type of object that the performance data is about. <code>table</code>, <code>barchart</code>, <code>sheet</code>, <code>CurrentSelection</code> etc.</td>
      </tr>
      <tr>
          <td><code>proxy_session_id</code></td>
          <td>The ID of the proxy session that generated the event. Will be a GUID for user sessions, 0 for internal work done by Sense.</td>
      </tr>
      <tr>
          <td><code>session_id</code></td>
          <td>The ID of the engine session that generated the event.</td>
      </tr>
  </tbody>
</table>
<p>| <code>user_full</code> | The full name of the user that generated the event. <User directory>&lt;user id&gt; |
| <code>user_directory</code> | The user directory of the user that generated the event. |
| <code>user_id</code> | The user ID of the user that generated the event. |
| <code>app_id</code> | The GUID of the app that the performance data is from. |
| <code>app_name</code> | The name of the app that the performance data is from, if available. Blank if not. |
| <code>object_id</code> | The ID of the app object that the performance data is about. |</p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>app_id</code></td>
          <td>String. The GUID of the app that the performance data is from.</td>
      </tr>
      <tr>
          <td><code>process_time</code></td>
          <td>Float. The amount of time that was needed to process the request. Milliseconds.</td>
      </tr>
      <tr>
          <td><code>work_time</code></td>
          <td>Float. The amount of time that the request did actual work. Milliseconds.</td>
      </tr>
      <tr>
          <td><code>lock_time</code></td>
          <td>Float. The amount of time that the request had to wait for an internal lock. Milliseconds.</td>
      </tr>
      <tr>
          <td><code>validate_time</code></td>
          <td>Float. The amount of time that the request used for validation. Milliseconds.</td>
      </tr>
      <tr>
          <td><code>traverse_time</code></td>
          <td>Float. The amount of time the request uses for the traverse part of the calculation. Milliseconds.</td>
      </tr>
      <tr>
          <td><code>handle</code></td>
          <td>String. The ID of the interface that handled the request. The interface can be Global, a certain sheet, a certain object, or similar.</td>
      </tr>
      <tr>
          <td><code>net_ram</code></td>
          <td>Integer. The amount of memory used for the calculation. Bytes.</td>
      </tr>
      <tr>
          <td><code>peak_ram</code></td>
          <td>Integer. The peak amount of memory used for the calculation. Bytes.</td>
      </tr>
      <tr>
          <td><code>raw_event</code></td>
          <td>JSON. The raw event data in JSON format. Useful together with the log chart type in Grafana.</td>
      </tr>
  </tbody>
</table>
<p>Descriptions of each metric/field can be found in the <a href="https://help.qlik.com/en-US/sense-admin/May2024/Subsystems/DeployAdministerQSE/Content/Sense_DeployAdminister/QSEoW/Deploy_QSEoW/Server-Logging-Tracing-Log-File-Format-Additional-Fields-QixPerformance-Log.htm">Qlik Sense logging documentation</a>.</p>
<h4 id="rejected-performance-log-events">Rejected performance log events</h4>
<p>For rejected performance log events, the individual events are not stored in InfluxDB.<br>
Instead, counters are used to keep track of how many events were rejected, broken down by a set of tags.</p>
<table>
  <thead>
      <tr>
          <th>Tag name</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>source</code></td>
          <td>Name of the event. Always <code>qseow-qix-perf</code> for rejected performance log events.</td>
      </tr>
      <tr>
          <td><code>app_id</code></td>
          <td>The GUID of the app that the performance data is from.</td>
      </tr>
      <tr>
          <td><code>app_name</code></td>
          <td>The name of the app that the performance data is from, if available. Blank if not.</td>
      </tr>
      <tr>
          <td><code>method</code></td>
          <td>The engine method that generated the performance data. <code>Global::GetProgress</code>, <code>GenericObject::GetLayout</code>, <code>Global::OpenApp</code> etc</td>
      </tr>
      <tr>
          <td><code>object_type</code></td>
          <td>The type of object that the performance data is about. <code>table</code>, <code>barchart</code>, <code>sheet</code>, <code>CurrentSelection</code> etc.</td>
      </tr>
  </tbody>
</table>
<p>A separate set of tags are added to the rejected performance log events.<br>
These tags are defined in the config file, <code>Butler-SOS.logEvents.enginePerformanceMonitor.trackRejectedEvents.tags</code>.</p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>counter</td>
          <td>Integer. The number of rejected performance log events.</td>
      </tr>
      <tr>
          <td>process_time</td>
          <td>Float. The amount of time that was needed to process the request. Milliseconds.</td>
      </tr>
  </tbody>
</table>
<h2 id="messages-from-the-log-database">Messages from the log database</h2>
<p>All log data written to InfluxDB share a common set of tag keys:</p>
<table>
  <thead>
      <tr>
          <th>Tag key</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>host</td>
          <td>Host name, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].host</code> property. Usually a fully qualified host name, or in some cases an IP address.</td>
      </tr>
      <tr>
          <td>server_name</td>
          <td>Human readable/friendly server name, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].serverName</code> property.</td>
      </tr>
      <tr>
          <td>server_description</td>
          <td>Description of the server, taken from config file&rsquo;s <code>Butler-SOS.serversToMonitor.servers[].serverDescription</code> property.</td>
      </tr>
      <tr>
          <td>log_level</td>
          <td>The logging level of the log event (ERROR, WARNING, INFO etc).</td>
      </tr>
      <tr>
          <td>source_process</td>
          <td>Which Sense service the log event originated in.</td>
      </tr>
  </tbody>
</table>
<h3 id="measurement-log_event_logdb">Measurement: log_event_logdb</h3>
<p>Source: More or less <a href="https://help.qlik.com/en-US/sense-admin/November2021/Subsystems/DeployAdministerQSE/Content/Sense_DeployAdminister/QSEoW/Deploy_QSEoW/Qlik-Logging-Service.htm">log db</a>. A query is done to the log db in Postgres, the results are stored in InfluxDB. There is thus no Qlik API call per se.</p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>message</td>
          <td>string</td>
          <td>Log entry as retrieved from the Sense log database (Postgres).</td>
      </tr>
  </tbody>
</table>
<h2 id="butler-sos-metrics">Butler SOS metrics</h2>
<h3 id="measurement-butlersos_memory_usage">Measurement: butlersos_memory_usage</h3>
<p>These metrics tell you how much memory Butler SOS itself uses.<br>
More info on these metrics and what they mean is available <a href="https://www.valentinog.com/blog/node-usage/">here</a>.</p>
<table>
  <thead>
      <tr>
          <th>Field key</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>heap_total</td>
          <td>float</td>
          <td>Total size of the allocated heap.</td>
      </tr>
      <tr>
          <td>heap_used</td>
          <td>float</td>
          <td>Actual memory used during the execution of Butler SOS.</td>
      </tr>
      <tr>
          <td>process_memory</td>
          <td>float</td>
          <td>Total memory allocated for the execution of Butler SOS.</td>
      </tr>
  </tbody>
</table>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-3a5782be907ab37fcd71f782ea6c6c2c">5.3.2 - Available Metrics: New Relic</h1>
    <div class="lead">Once data has been sent to New Relic, its web based user interface makes it very intuitive to both create charts and combine these into dashboards.</div>
	<h2 id="new-relic">New Relic</h2>
<p><a href="https://newrelic.com">New Relic</a> offers a complete SaaS observability stack, ranging from high-volume ingestion of events/metrics/logs/traces to advanced dashboards that can be created ad-hoc using a web UI or from files and templates, for more of an infrastructure-as-code approach.</p>
<p>Storing metrics in New Relic is not mandatory, but some kind of metrics storage - either in <a href="https://newrelic.com">New Relic</a>, <a href="/docs/reference/available_metrics/influxdb/">InfluxDB</a> or <a href="/docs/reference/available_metrics/prometheus/">Prometheus</a> - is needed to take full benefit of Butler SOS&rsquo; features.</p>
<p>In order to view data in New Relic you first have to send data to them.</p>
<p>Butler SOS does this for you.</p>
<p>Furthermore, you can to a large degree control which Qlik Sense metrics, logs and events are sent to New Relic.</p>
<h2 id="data-volumes-and-pricing">Data volumes and pricing</h2>
<p>At the time of this writing New Relic offers a generous <a href="https://newrelic.com/pricing">free plan</a>.<br>
It will be a great starting point for everyone, if there&rsquo;s a need for more dashboard users etc the account can be upgraded as needed.</p>
<p>In most cases Butler SOS will not generate a lot of data and you can stay within New Relic&rsquo;s free tier.<br>
The amount of data generated by Sense health metrics and Butler SOS uptime metrics is very small indeed, but if your Qlik Sense environment for some reason generate a lot of <em>log events</em> that can cause the data volumes to increase rapidly.</p>
<p>For example, if a user connects to Sense and gets a https certificate warning in the browser, this will also cause a number of warnings and errors in the proxy logs. Multiple this by X users and there can suddenly be thousands of errors and warnings per hour in the Sense logs.<br>
If these are also sent to New Relic the data volumes increase quickly.</p>
<h3 id="overview-of-new-relic">Overview of New Relic</h3>
<p>New Relic is similar to InfluxDB in that Butler SOS pushes data to both systems.</p>
<p>The basic concepts are</p>
<ul>
<li><em>Metrics</em> represent a measurement of some kind. Number or sessions in the Sense proxy, amount of free RAM on a Sense server etc.</li>
<li><em>Events</em> are something that happened. Warnings and errors in the Sense log files can be forwarded to New Relic as events.<br>
Various user activities (user session start/stop etc) in Sense can also be sent to New Relic as events.</li>
<li><em>Attributes</em> are conceptually tags that are attached to metrics or events. These act as dimensions for the data.
Metrics in visualizations can be grouped by attributes, much in the same way Qlik Sense measurements are grouped by dimensions in Sense charts and tables.
<ul>
<li><em>Static attributes</em> are defined in Butler SOS&rsquo; config file.</li>
<li><em>Dynamic attributes</em> are determined at runtime.</li>
</ul>
</li>
</ul>
<p>In addition to the above these data formats exist but are not currently used by Butler SOS. This may change in the future.</p>
<ul>
<li><em>Logs</em> are essentially regular lines in a log file, consisting of several fields.</li>
<li><em>Distributed tracing</em> collects data as requests travel from one service to another, recording each segment of the journey as a span.
These spans contain important details about each segment of the request and are eventually combined into one trace.
The completed trace gives you a picture of the entire request.</li>
</ul>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-d9368053cab4888224d02b24aa450a89">5.3.3 - Available Metrics: Prometheus</h1>
    <div class="lead">In order to create graphs in for example Grafana, you must understand what metrics are available and how they are structured.</div>
	<h2 id="prometheus">Prometheus</h2>
<p>Metrics retrieved from the Sense servers can be stored in <a href="https://prometheus.io">Prometheus</a>. You don&rsquo;t have to be a Prometheus expert to use Butler SOS, but understanding some basic concepts are helpful.</p>
<p>Storing metrics in Prometheus is not mandatory, but some kind of metrics storage - either in Prometheus, <a href="/docs/reference/available_metrics/influxdb/">InfluxDB</a> or <a href="https://newrelic.com">New Relic</a> - is needed to take full benefit of Butler SOS&rsquo; features.</p>
<p>Prometheus gathers metrics by &ldquo;scraping&rdquo; data from web pages (&ldquo;endpoints&rdquo;) on which metrics are displayed in a well specified format.<br>
Most metrics from the Sense servers are exposed on a Prometheus compatible endpoint, but not all.<br>
InfluxDB is more flexible for some types of data, while Prometheus provides more easily used features for data aggregation when data should be displayed in Grafana.</p>
<h2 id="prometheus-endpoint">Prometheus endpoint</h2>
<p>Prometheus is enabled/disabled in the <code>Butler-SOS.prometheus</code> section in the config file.
Prometheus metrics are available on the <code>/metrics</code> URL on the IP and port specified in the config file.</p>
<p>For example, if the host is 0.0.0.0 and the port is 9842, Butler SOS will listen on port 9842 on all available network interfaces.
If the Butler SOS&rsquo; server&rsquo;s IP address is 192.168.1.168, a call from a web browser can look like this:</p>
<p><img src="/docs/reference/available_metrics/prometheus/prometheus-browser-1.png" alt="Prometheus metrics in web browser" title="Prometheus metrics in web browser"></p>
<p>This is the web page Prometheus will scrape and ingest into it&rsquo;s time-series database.</p>
<h3 id="overview-of-prometheus">Overview of Prometheus</h3>
<p>In contrast to InfluxDB, to which Butler SOS pushes data, Prometheus works the other way around.<br>
The Prometheus server is responsible for gathering data exposed by the systems that should be monitored (for example Butler SOS).</p>
<p>The basic concepts are</p>
<ul>
<li><a href="https://prometheus.io/docs/introduction/overview/#what-are-metrics">Metrics</a> represent the measurements of interest. &ldquo;fields&rdquo; in InfluxDB.</li>
<li><a href="https://prometheus.io/docs/concepts/data_model/#metric-names-and-labels">Labels</a> are used to categorize metrics (similar to tags in InfluxDB).</li>
</ul>
<h3 id="labels">Labels</h3>
<p>The labels available for all Prometheus metrics are:</p>
<table>
  <thead>
      <tr>
          <th>Label name</th>
          <th>Source</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>host</td>
          <td><code>Butler-SOS.serversToMonitor.servers[].host</code></td>
          <td>Host IP or FQDN of the server from which the metric comes.</td>
      </tr>
      <tr>
          <td>server_name</td>
          <td><code>Butler-SOS.serversToMonitor.servers[].serverName</code></td>
          <td>Human friendly server name.</td>
      </tr>
      <tr>
          <td>server_description</td>
          <td><code>Butler-SOS.serversToMonitor.servers[].serverDescription</code></td>
          <td>Human friendly server description.</td>
      </tr>
      <tr>
          <td>&hellip;</td>
          <td><code>Butler-SOS.serversToMonitor.servers[].serverTags.*</code></td>
          <td>All tags defined in the config file will be added as Prometheus labels.</td>
      </tr>
  </tbody>
</table>
<h3 id="metrics">Metrics</h3>
<p>Available metrics are similar to those in InfluxDB, with a few exceptions.</p>
<p>Prometheus is awesome when it comes to storing all kinds of measurements, but it doesn&rsquo;t offer a good way to store strings.<br>
For that reason Butler SOS metrics involving strings (for example list of apps loaded in memory) are not available on the Prometheus endpoint.<br>
Most of the metrics come from Qlik Sense&rsquo; <a href="https://help.qlik.com/en-US/sense-developer/November2020/Subsystems/EngineAPI/Content/Sense_EngineAPI/GettingSystemInformation/HealthCheckStatus.htm">health check API</a>.</p>
<h4 id="qlik-sense-metrics">Qlik Sense metrics</h4>
<p>These are the Prometheus metrics exposed by Butler SOS:</p>
<table>
  <thead>
      <tr>
          <th>Metric</th>
          <th>Type</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>butlersos_apps_calls</td>
          <td>Gauge</td>
          <td>Total number of requests made to the Qlik Sense engine.</td>
      </tr>
      <tr>
          <td>butlersos_apps_selections</td>
          <td>Gauge</td>
          <td>Total number of selections made to the Qlik Sense engine.</td>
      </tr>
      <tr>
          <td>butlersos_apps_activedocs_total</td>
          <td>Gauge</td>
          <td>Number of active apps. An app is active when a user is currently performing some action on it.</td>
      </tr>
      <tr>
          <td>butlersos_apps_inmemorydocs_total</td>
          <td>Gauge</td>
          <td>Number of apps apps currently loaded into memory, even if they do not have any open sessions or connections to it. Apps disappear from this metric when the engine has purged them from memory.</td>
      </tr>
      <tr>
          <td>butlersos_apps_loadeddocs_total</td>
          <td>Gauge</td>
          <td>Number of apps apps currently loaded into memory, that also have open sessions or connections.</td>
      </tr>
      <tr>
          <td>butlersos_cache_added</td>
          <td>Gauge</td>
          <td>Number of cache objects added.</td>
      </tr>
      <tr>
          <td>butlersos_cache_hits</td>
          <td>Gauge</td>
          <td>Number of cache hits.</td>
      </tr>
      <tr>
          <td>butlersos_cache_lookups</td>
          <td>Gauge</td>
          <td>Number of cache lookups.</td>
      </tr>
      <tr>
          <td>butlersos_cache_replaced</td>
          <td>Gauge</td>
          <td>Number of cache replaced cache objects.</td>
      </tr>
      <tr>
          <td>butlersos_cache_saturated</td>
          <td>Gauge</td>
          <td>When the value is 1, the engine is running with high resource usage; otherwise the value is 0.</td>
      </tr>
      <tr>
          <td>butlersos_cpu_total</td>
          <td>Gauge</td>
          <td>Percentage of the CPU used by the engine, averaged over a time period of 30 seconds.</td>
      </tr>
      <tr>
          <td>butlersos_mem_committed</td>
          <td>Gauge</td>
          <td>The total amount of committed memory for the engine process in MB.</td>
      </tr>
      <tr>
          <td>butlersos_mem_allocated</td>
          <td>Gauge</td>
          <td>The total amount of allocated memory (committed + reserved) from the operating system in MB.</td>
      </tr>
      <tr>
          <td>butlersos_mem_free</td>
          <td>Gauge</td>
          <td>The total amount of free memory (minimum of free virtual and physical memory) in MB.</td>
      </tr>
      <tr>
          <td>butlersos_session_active</td>
          <td>Gauge</td>
          <td>Number of active engine sessions. A session is active when a user is currently performing some action on an app, for example, making selections or creating content.</td>
      </tr>
      <tr>
          <td>butlersos_session_total</td>
          <td>Gauge</td>
          <td>Total number of engine sessions.</td>
      </tr>
      <tr>
          <td>butlersos_users_active</td>
          <td>Gauge</td>
          <td>Number of distinct active users. An active user is one who is currently performing an action on an app.</td>
      </tr>
      <tr>
          <td>butlersos_users_total</td>
          <td>Gauge</td>
          <td>Total number of distinct users within the current engine sessions.</td>
      </tr>
      <tr>
          <td>butlersos_engine_metadata</td>
          <td>Gauge</td>
          <td>Metadata about the Qlik Sense engine.</td>
      </tr>
      <tr>
          <td>butlersos_user_session_total</td>
          <td>Gauge</td>
          <td>Number of sessions (as reported by the proxy service).</td>
      </tr>
  </tbody>
</table>
<h4 id="nodejs-metrics">Node.js metrics</h4>
<p>A set of Node.js specific metrics are also available on Butler SOS&rsquo; Prometheus endpoint.<br>
These are described in the &ldquo;Default metrics&rdquo; section on <a href="https://github.com/siimon/prom-client">this</a> page.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  

    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-0e10aa79b66ebaf60284768f9c0d59cf">6 - Security considerations</h1>
    <div class="lead">Security is important! Keep these things in mind when deploying Butler.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Security is a whole field in its own.<br>
What&rsquo;s considered secure in one company might be considered insecure in another.</p>
<p>It&rsquo;s a good idea to review your tools and services every now and then, for example making sure they are updated to include the latest security patches etc.<br>
When in doubt, be paranoid.</p>

</div>

<h2 id="security-considerations">Security considerations</h2>


<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Security/Disclosure</h4>

    If you discover a serious bug with Butler SOS that may pose a security problem, please disclose it confidentially to <a href="mailto:security@ptarmiganlabs.com">security@ptarmiganlabs.com</a> first, so that it can be assessed and hopefully fixed prior to being exploited. Please do not raise GitHub issues for security-related doubts or problems.

</div>

<ul>
<li>
<p>Make sure to configure the firewall on the server where Butler SOS is running to only accept connections from the desired clients/IP addresses.</p>
<p>A reasonable first approach would be to configure the firewall to only allow calls from localhost. That way calls to/from Butler SOS can only be made from the server where Butler SOS itself is running.<br>
If Butler SOS is not running on the Sense server, the IPs of the Sense servers should also be whitelisted in the firewall, of course.</p>
</li>
<li>
<p>The MQTT connections are not secured by certificates or passwords.</p>
<p>For use within a controlled network that might be fine, but nonetheless something to keep in mind. Adding certificate based authentication (which MQTT supports) would solve this.</p>
</li>
<li>
<p>Butler SOS uses various Node.js modules from <a href="https://www.npmjs.com/">npm</a>. If concerned about security, you should review these dependencies and decide whether there are issues in them or not.</p>
<p>Same thing with Butler SOS itself - while efforts have been made to make Butler SOS secure, you need to decide for yourself whether the level of security is enough for your use case.</p>
<p>Butler SOS is continuously checked for security vulnerabilities by using GitHub security audit, <a href="https://snyk.io/">Snyk</a>, npm audit and other tools.</p>
</li>
</ul>
<h2 id="butler-sos-talking-to-qlik-sense">Butler SOS talking to Qlik Sense</h2>
<p>Butler SOS uses https for all communication with Sense, using Sense&rsquo;s certificates for authentication.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-398fc7a5231e967cd05e2e77c98b4b4f">7 - Legal stuff</h1>
    <div class="lead">Information om licenses, personal integrity and more.</div>
	<h2 id="license">License</h2>
<p>Butler SOS is distributed under the <a href="https://en.wikipedia.org/wiki/MIT_License">MIT license</a>.</p>
<pre tabindex="0"><code>MIT License

Copyright (c) 2024 Göran Sander

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the &#34;Software&#34;), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED &#34;AS IS&#34;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
</code></pre><h2 id="data-collection">Data collection</h2>
<p>This documentation site was built using <a href="https://gohugo.io/">Hugo</a> and consists of static web pages hosted on <a href="https://pages.github.com/">GitHub Pages</a>.</p>
<p>GitHub probably keep log files for GitHub Pages, your visit to this documentation site is thus likely to be recorded there. For questions about such logs you should contact GitHub.</p>
<h2 id="analytics">Analytics</h2>
<p><a href="https://plausible.io">Plausible</a> is used to track general site usage.
The collected data is not shared with any third parties.</p>
<p>Aggregated data may be used to determine, and in some cases publicly communicate, how popular the site is.<br>
Examples of aggregated metrics are how many users have visited the site and from where in the world they accessed the site.</p>
<h2 id="telemetry-data">Telemetry data</h2>
<p>If enabled in the config file, Butler SOS will send anonymous telemetry data to PostHog, with data stored within the EU.<br>
A detailed description of what&rsquo;s included in the telemetry data is found <a href="/docs/about/telemetry/">here</a>.</p>
<p>Ptarmigan Labs collects this information to better understand</p>
<ol>
<li>what the execution environment looks like for Butler SOS out there, and</li>
<li>which Butler SOS features are used/not used</li>
</ol>
<p>The purpose of the telemetry data is to aid in future development of Butler SOS, so focus be put on the most important features and execution environments.</p>
<p>If you want your historical telemetry data to be deleted, you must provide Ptarmigan Labs with the system ID mentioned in the logs when Butler SOS is starting.<br>
This ID is what identifies your specific instance of Butler SOS.</p>
<p>Until you tell Ptarmigan Labs what your ID is there is no link between you and that ID.<br>
The idea is simply that the anonymous telemetry should be just that: anonymous.</p>

</div>



    
      
  
  
  
  

  
  

  

    
	
  



          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Ptarmigan Labs Newsletter" aria-label="Ptarmigan Labs Newsletter">
    <a target="_blank" rel="noopener" href="https://ptarmiganlabs.com/#/portal/signup" aria-label="Ptarmigan Labs Newsletter">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="LinkedIn" aria-label="LinkedIn">
    <a target="_blank" rel="noopener" href="https://www.linkedin.com/in/gorsan/" aria-label="LinkedIn">
      <i class="fab fa-linkedin"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub discussions" aria-label="GitHub discussions">
    <a target="_blank" rel="noopener" href="https://github.com/ptarmiganlabs/butler-sos/discussions" aria-label="GitHub discussions">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/ptarmiganlabs/butler-sos" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Get in touch with Ptarmigan Labs" aria-label="Get in touch with Ptarmigan Labs">
    <a target="_blank" rel="noopener" href="mailto://info@ptarmiganlabs.com" aria-label="Get in touch with Ptarmigan Labs">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2018&ndash;2025
    <span class="td-footer__authors">Ptarmigan Labs AB</span></span><span class="td-footer__all_rights_reserved">All Rights Reserved</span><p class="td-footer__about mt-2"><a href="/about/">About Butler SOS</a></p>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/js/main.min.e31c2c3ea09070843d281c9229acf28ea382e633bae75ab340a57d57c1b24a41.js" integrity="sha256-4xwsPqCQcIQ9KBySKazyjqOC5jO651qzQKV9V8GySkE=" crossorigin="anonymous"></script>
<script src='/js/prism.js'></script>
<script src='/js/tabpane-persist.js'></script>

  </body>
</html>
